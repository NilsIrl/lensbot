(()=>{var Fk=Object.create;var T0=Object.defineProperty;var Lk=Object.getOwnPropertyDescriptor;var Uk=Object.getOwnPropertyNames;var Vk=Object.getPrototypeOf,qk=Object.prototype.hasOwnProperty;var Rt=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),ta=(r,e)=>{for(var t in e)T0(r,t,{get:e[t],enumerable:!0})},jk=(r,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of Uk(e))!qk.call(r,n)&&n!==t&&T0(r,n,{get:()=>e[n],enumerable:!(i=Lk(e,n))||i.enumerable});return r};var Ri=(r,e,t)=>(t=r!=null?Fk(Vk(r)):{},jk(e||!r||!r.__esModule?T0(t,"default",{value:r,enumerable:!0}):t,r));var u2=Rt(()=>{});var jm=Rt((h2,qm)=>{(function(r,e){"use strict";function t(M,h){if(!M)throw new Error(h||"Assertion failed")}function i(M,h){M.super_=h;var x=function(){};x.prototype=h.prototype,M.prototype=new x,M.prototype.constructor=M}function n(M,h,x){if(n.isBN(M))return M;this.negative=0,this.words=null,this.length=0,this.red=null,M!==null&&((h==="le"||h==="be")&&(x=h,h=10),this._init(M||0,h||10,x||"be"))}typeof r=="object"?r.exports=n:e.BN=n,n.BN=n,n.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=u2().Buffer}catch{}n.isBN=function(h){return h instanceof n?!0:h!==null&&typeof h=="object"&&h.constructor.wordSize===n.wordSize&&Array.isArray(h.words)},n.max=function(h,x){return h.cmp(x)>0?h:x},n.min=function(h,x){return h.cmp(x)<0?h:x},n.prototype._init=function(h,x,A){if(typeof h=="number")return this._initNumber(h,x,A);if(typeof h=="object")return this._initArray(h,x,A);x==="hex"&&(x=16),t(x===(x|0)&&x>=2&&x<=36),h=h.toString().replace(/\s+/g,"");var S=0;h[0]==="-"&&(S++,this.negative=1),S<h.length&&(x===16?this._parseHex(h,S,A):(this._parseBase(h,x,S),A==="le"&&this._initArray(this.toArray(),x,A)))},n.prototype._initNumber=function(h,x,A){h<0&&(this.negative=1,h=-h),h<67108864?(this.words=[h&67108863],this.length=1):h<4503599627370496?(this.words=[h&67108863,h/67108864&67108863],this.length=2):(t(h<9007199254740992),this.words=[h&67108863,h/67108864&67108863,1],this.length=3),A==="le"&&this._initArray(this.toArray(),x,A)},n.prototype._initArray=function(h,x,A){if(t(typeof h.length=="number"),h.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(h.length/3),this.words=new Array(this.length);for(var S=0;S<this.length;S++)this.words[S]=0;var C,v,T=0;if(A==="be")for(S=h.length-1,C=0;S>=0;S-=3)v=h[S]|h[S-1]<<8|h[S-2]<<16,this.words[C]|=v<<T&67108863,this.words[C+1]=v>>>26-T&67108863,T+=24,T>=26&&(T-=26,C++);else if(A==="le")for(S=0,C=0;S<h.length;S+=3)v=h[S]|h[S+1]<<8|h[S+2]<<16,this.words[C]|=v<<T&67108863,this.words[C+1]=v>>>26-T&67108863,T+=24,T>=26&&(T-=26,C++);return this._strip()};function s(M,h){var x=M.charCodeAt(h);if(x>=48&&x<=57)return x-48;if(x>=65&&x<=70)return x-55;if(x>=97&&x<=102)return x-87;t(!1,"Invalid character in "+M)}function a(M,h,x){var A=s(M,x);return x-1>=h&&(A|=s(M,x-1)<<4),A}n.prototype._parseHex=function(h,x,A){this.length=Math.ceil((h.length-x)/6),this.words=new Array(this.length);for(var S=0;S<this.length;S++)this.words[S]=0;var C=0,v=0,T;if(A==="be")for(S=h.length-1;S>=x;S-=2)T=a(h,x,S)<<C,this.words[v]|=T&67108863,C>=18?(C-=18,v+=1,this.words[v]|=T>>>26):C+=8;else{var E=h.length-x;for(S=E%2===0?x+1:x;S<h.length;S+=2)T=a(h,x,S)<<C,this.words[v]|=T&67108863,C>=18?(C-=18,v+=1,this.words[v]|=T>>>26):C+=8}this._strip()};function l(M,h,x,A){for(var S=0,C=0,v=Math.min(M.length,x),T=h;T<v;T++){var E=M.charCodeAt(T)-48;S*=A,E>=49?C=E-49+10:E>=17?C=E-17+10:C=E,t(E>=0&&C<A,"Invalid character"),S+=C}return S}n.prototype._parseBase=function(h,x,A){this.words=[0],this.length=1;for(var S=0,C=1;C<=67108863;C*=x)S++;S--,C=C/x|0;for(var v=h.length-A,T=v%S,E=Math.min(v,v-T)+A,m=0,w=A;w<E;w+=S)m=l(h,w,w+S,x),this.imuln(C),this.words[0]+m<67108864?this.words[0]+=m:this._iaddn(m);if(T!==0){var z=1;for(m=l(h,w,h.length,x),w=0;w<T;w++)z*=x;this.imuln(z),this.words[0]+m<67108864?this.words[0]+=m:this._iaddn(m)}this._strip()},n.prototype.copy=function(h){h.words=new Array(this.length);for(var x=0;x<this.length;x++)h.words[x]=this.words[x];h.length=this.length,h.negative=this.negative,h.red=this.red};function f(M,h){M.words=h.words,M.length=h.length,M.negative=h.negative,M.red=h.red}if(n.prototype._move=function(h){f(h,this)},n.prototype.clone=function(){var h=new n(null);return this.copy(h),h},n.prototype._expand=function(h){for(;this.length<h;)this.words[this.length++]=0;return this},n.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},n.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{n.prototype[Symbol.for("nodejs.util.inspect.custom")]=c}catch{n.prototype.inspect=c}else n.prototype.inspect=c;function c(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];n.prototype.toString=function(h,x){h=h||10,x=x|0||1;var A;if(h===16||h==="hex"){A="";for(var S=0,C=0,v=0;v<this.length;v++){var T=this.words[v],E=((T<<S|C)&16777215).toString(16);C=T>>>24-S&16777215,S+=2,S>=26&&(S-=26,v--),C!==0||v!==this.length-1?A=u[6-E.length]+E+A:A=E+A}for(C!==0&&(A=C.toString(16)+A);A.length%x!==0;)A="0"+A;return this.negative!==0&&(A="-"+A),A}if(h===(h|0)&&h>=2&&h<=36){var m=d[h],w=p[h];A="";var z=this.clone();for(z.negative=0;!z.isZero();){var y=z.modrn(w).toString(h);z=z.idivn(w),z.isZero()?A=y+A:A=u[m-y.length]+y+A}for(this.isZero()&&(A="0"+A);A.length%x!==0;)A="0"+A;return this.negative!==0&&(A="-"+A),A}t(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var h=this.words[0];return this.length===2?h+=this.words[1]*67108864:this.length===3&&this.words[2]===1?h+=4503599627370496+this.words[1]*67108864:this.length>2&&t(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-h:h},n.prototype.toJSON=function(){return this.toString(16,2)},o&&(n.prototype.toBuffer=function(h,x){return this.toArrayLike(o,h,x)}),n.prototype.toArray=function(h,x){return this.toArrayLike(Array,h,x)};var g=function(h,x){return h.allocUnsafe?h.allocUnsafe(x):new h(x)};n.prototype.toArrayLike=function(h,x,A){this._strip();var S=this.byteLength(),C=A||Math.max(1,S);t(S<=C,"byte array longer than desired length"),t(C>0,"Requested array length <= 0");var v=g(h,C),T=x==="le"?"LE":"BE";return this["_toArrayLike"+T](v,S),v},n.prototype._toArrayLikeLE=function(h,x){for(var A=0,S=0,C=0,v=0;C<this.length;C++){var T=this.words[C]<<v|S;h[A++]=T&255,A<h.length&&(h[A++]=T>>8&255),A<h.length&&(h[A++]=T>>16&255),v===6?(A<h.length&&(h[A++]=T>>24&255),S=0,v=0):(S=T>>>24,v+=2)}if(A<h.length)for(h[A++]=S;A<h.length;)h[A++]=0},n.prototype._toArrayLikeBE=function(h,x){for(var A=h.length-1,S=0,C=0,v=0;C<this.length;C++){var T=this.words[C]<<v|S;h[A--]=T&255,A>=0&&(h[A--]=T>>8&255),A>=0&&(h[A--]=T>>16&255),v===6?(A>=0&&(h[A--]=T>>24&255),S=0,v=0):(S=T>>>24,v+=2)}if(A>=0)for(h[A--]=S;A>=0;)h[A--]=0},Math.clz32?n.prototype._countBits=function(h){return 32-Math.clz32(h)}:n.prototype._countBits=function(h){var x=h,A=0;return x>=4096&&(A+=13,x>>>=13),x>=64&&(A+=7,x>>>=7),x>=8&&(A+=4,x>>>=4),x>=2&&(A+=2,x>>>=2),A+x},n.prototype._zeroBits=function(h){if(h===0)return 26;var x=h,A=0;return(x&8191)===0&&(A+=13,x>>>=13),(x&127)===0&&(A+=7,x>>>=7),(x&15)===0&&(A+=4,x>>>=4),(x&3)===0&&(A+=2,x>>>=2),(x&1)===0&&A++,A},n.prototype.bitLength=function(){var h=this.words[this.length-1],x=this._countBits(h);return(this.length-1)*26+x};function b(M){for(var h=new Array(M.bitLength()),x=0;x<h.length;x++){var A=x/26|0,S=x%26;h[x]=M.words[A]>>>S&1}return h}n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var h=0,x=0;x<this.length;x++){var A=this._zeroBits(this.words[x]);if(h+=A,A!==26)break}return h},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(h){return this.negative!==0?this.abs().inotn(h).iaddn(1):this.clone()},n.prototype.fromTwos=function(h){return this.testn(h-1)?this.notn(h).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return this.negative!==0},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(h){for(;this.length<h.length;)this.words[this.length++]=0;for(var x=0;x<h.length;x++)this.words[x]=this.words[x]|h.words[x];return this._strip()},n.prototype.ior=function(h){return t((this.negative|h.negative)===0),this.iuor(h)},n.prototype.or=function(h){return this.length>h.length?this.clone().ior(h):h.clone().ior(this)},n.prototype.uor=function(h){return this.length>h.length?this.clone().iuor(h):h.clone().iuor(this)},n.prototype.iuand=function(h){var x;this.length>h.length?x=h:x=this;for(var A=0;A<x.length;A++)this.words[A]=this.words[A]&h.words[A];return this.length=x.length,this._strip()},n.prototype.iand=function(h){return t((this.negative|h.negative)===0),this.iuand(h)},n.prototype.and=function(h){return this.length>h.length?this.clone().iand(h):h.clone().iand(this)},n.prototype.uand=function(h){return this.length>h.length?this.clone().iuand(h):h.clone().iuand(this)},n.prototype.iuxor=function(h){var x,A;this.length>h.length?(x=this,A=h):(x=h,A=this);for(var S=0;S<A.length;S++)this.words[S]=x.words[S]^A.words[S];if(this!==x)for(;S<x.length;S++)this.words[S]=x.words[S];return this.length=x.length,this._strip()},n.prototype.ixor=function(h){return t((this.negative|h.negative)===0),this.iuxor(h)},n.prototype.xor=function(h){return this.length>h.length?this.clone().ixor(h):h.clone().ixor(this)},n.prototype.uxor=function(h){return this.length>h.length?this.clone().iuxor(h):h.clone().iuxor(this)},n.prototype.inotn=function(h){t(typeof h=="number"&&h>=0);var x=Math.ceil(h/26)|0,A=h%26;this._expand(x),A>0&&x--;for(var S=0;S<x;S++)this.words[S]=~this.words[S]&67108863;return A>0&&(this.words[S]=~this.words[S]&67108863>>26-A),this._strip()},n.prototype.notn=function(h){return this.clone().inotn(h)},n.prototype.setn=function(h,x){t(typeof h=="number"&&h>=0);var A=h/26|0,S=h%26;return this._expand(A+1),x?this.words[A]=this.words[A]|1<<S:this.words[A]=this.words[A]&~(1<<S),this._strip()},n.prototype.iadd=function(h){var x;if(this.negative!==0&&h.negative===0)return this.negative=0,x=this.isub(h),this.negative^=1,this._normSign();if(this.negative===0&&h.negative!==0)return h.negative=0,x=this.isub(h),h.negative=1,x._normSign();var A,S;this.length>h.length?(A=this,S=h):(A=h,S=this);for(var C=0,v=0;v<S.length;v++)x=(A.words[v]|0)+(S.words[v]|0)+C,this.words[v]=x&67108863,C=x>>>26;for(;C!==0&&v<A.length;v++)x=(A.words[v]|0)+C,this.words[v]=x&67108863,C=x>>>26;if(this.length=A.length,C!==0)this.words[this.length]=C,this.length++;else if(A!==this)for(;v<A.length;v++)this.words[v]=A.words[v];return this},n.prototype.add=function(h){var x;return h.negative!==0&&this.negative===0?(h.negative=0,x=this.sub(h),h.negative^=1,x):h.negative===0&&this.negative!==0?(this.negative=0,x=h.sub(this),this.negative=1,x):this.length>h.length?this.clone().iadd(h):h.clone().iadd(this)},n.prototype.isub=function(h){if(h.negative!==0){h.negative=0;var x=this.iadd(h);return h.negative=1,x._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(h),this.negative=1,this._normSign();var A=this.cmp(h);if(A===0)return this.negative=0,this.length=1,this.words[0]=0,this;var S,C;A>0?(S=this,C=h):(S=h,C=this);for(var v=0,T=0;T<C.length;T++)x=(S.words[T]|0)-(C.words[T]|0)+v,v=x>>26,this.words[T]=x&67108863;for(;v!==0&&T<S.length;T++)x=(S.words[T]|0)+v,v=x>>26,this.words[T]=x&67108863;if(v===0&&T<S.length&&S!==this)for(;T<S.length;T++)this.words[T]=S.words[T];return this.length=Math.max(this.length,T),S!==this&&(this.negative=1),this._strip()},n.prototype.sub=function(h){return this.clone().isub(h)};function k(M,h,x){x.negative=h.negative^M.negative;var A=M.length+h.length|0;x.length=A,A=A-1|0;var S=M.words[0]|0,C=h.words[0]|0,v=S*C,T=v&67108863,E=v/67108864|0;x.words[0]=T;for(var m=1;m<A;m++){for(var w=E>>>26,z=E&67108863,y=Math.min(m,h.length-1),R=Math.max(0,m-M.length+1);R<=y;R++){var F=m-R|0;S=M.words[F]|0,C=h.words[R]|0,v=S*C+z,w+=v/67108864|0,z=v&67108863}x.words[m]=z|0,E=w|0}return E!==0?x.words[m]=E|0:x.length--,x._strip()}var _=function(h,x,A){var S=h.words,C=x.words,v=A.words,T=0,E,m,w,z=S[0]|0,y=z&8191,R=z>>>13,F=S[1]|0,q=F&8191,J=F>>>13,ae=S[2]|0,re=ae&8191,te=ae>>>13,Dt=S[3]|0,se=Dt&8191,be=Dt>>>13,Xo=S[4]|0,Xe=Xo&8191,$e=Xo>>>13,$o=S[5]|0,Ze=$o&8191,et=$o>>>13,Zo=S[6]|0,tt=Zo&8191,rt=Zo>>>13,es=S[7]|0,it=es&8191,nt=es>>>13,ts=S[8]|0,ot=ts&8191,st=ts>>>13,rs=S[9]|0,at=rs&8191,lt=rs>>>13,is=C[0]|0,ft=is&8191,ct=is>>>13,ns=C[1]|0,ut=ns&8191,ht=ns>>>13,os=C[2]|0,dt=os&8191,pt=os>>>13,ss=C[3]|0,mt=ss&8191,gt=ss>>>13,as=C[4]|0,xt=as&8191,bt=as>>>13,ls=C[5]|0,yt=ls&8191,vt=ls>>>13,fs=C[6]|0,wt=fs&8191,At=fs>>>13,cs=C[7]|0,Et=cs&8191,kt=cs>>>13,us=C[8]|0,St=us&8191,_t=us>>>13,hs=C[9]|0,Ct=hs&8191,Tt=hs>>>13;A.negative=h.negative^x.negative,A.length=19,E=Math.imul(y,ft),m=Math.imul(y,ct),m=m+Math.imul(R,ft)|0,w=Math.imul(R,ct);var so=(T+E|0)+((m&8191)<<13)|0;T=(w+(m>>>13)|0)+(so>>>26)|0,so&=67108863,E=Math.imul(q,ft),m=Math.imul(q,ct),m=m+Math.imul(J,ft)|0,w=Math.imul(J,ct),E=E+Math.imul(y,ut)|0,m=m+Math.imul(y,ht)|0,m=m+Math.imul(R,ut)|0,w=w+Math.imul(R,ht)|0;var ao=(T+E|0)+((m&8191)<<13)|0;T=(w+(m>>>13)|0)+(ao>>>26)|0,ao&=67108863,E=Math.imul(re,ft),m=Math.imul(re,ct),m=m+Math.imul(te,ft)|0,w=Math.imul(te,ct),E=E+Math.imul(q,ut)|0,m=m+Math.imul(q,ht)|0,m=m+Math.imul(J,ut)|0,w=w+Math.imul(J,ht)|0,E=E+Math.imul(y,dt)|0,m=m+Math.imul(y,pt)|0,m=m+Math.imul(R,dt)|0,w=w+Math.imul(R,pt)|0;var lo=(T+E|0)+((m&8191)<<13)|0;T=(w+(m>>>13)|0)+(lo>>>26)|0,lo&=67108863,E=Math.imul(se,ft),m=Math.imul(se,ct),m=m+Math.imul(be,ft)|0,w=Math.imul(be,ct),E=E+Math.imul(re,ut)|0,m=m+Math.imul(re,ht)|0,m=m+Math.imul(te,ut)|0,w=w+Math.imul(te,ht)|0,E=E+Math.imul(q,dt)|0,m=m+Math.imul(q,pt)|0,m=m+Math.imul(J,dt)|0,w=w+Math.imul(J,pt)|0,E=E+Math.imul(y,mt)|0,m=m+Math.imul(y,gt)|0,m=m+Math.imul(R,mt)|0,w=w+Math.imul(R,gt)|0;var fo=(T+E|0)+((m&8191)<<13)|0;T=(w+(m>>>13)|0)+(fo>>>26)|0,fo&=67108863,E=Math.imul(Xe,ft),m=Math.imul(Xe,ct),m=m+Math.imul($e,ft)|0,w=Math.imul($e,ct),E=E+Math.imul(se,ut)|0,m=m+Math.imul(se,ht)|0,m=m+Math.imul(be,ut)|0,w=w+Math.imul(be,ht)|0,E=E+Math.imul(re,dt)|0,m=m+Math.imul(re,pt)|0,m=m+Math.imul(te,dt)|0,w=w+Math.imul(te,pt)|0,E=E+Math.imul(q,mt)|0,m=m+Math.imul(q,gt)|0,m=m+Math.imul(J,mt)|0,w=w+Math.imul(J,gt)|0,E=E+Math.imul(y,xt)|0,m=m+Math.imul(y,bt)|0,m=m+Math.imul(R,xt)|0,w=w+Math.imul(R,bt)|0;var co=(T+E|0)+((m&8191)<<13)|0;T=(w+(m>>>13)|0)+(co>>>26)|0,co&=67108863,E=Math.imul(Ze,ft),m=Math.imul(Ze,ct),m=m+Math.imul(et,ft)|0,w=Math.imul(et,ct),E=E+Math.imul(Xe,ut)|0,m=m+Math.imul(Xe,ht)|0,m=m+Math.imul($e,ut)|0,w=w+Math.imul($e,ht)|0,E=E+Math.imul(se,dt)|0,m=m+Math.imul(se,pt)|0,m=m+Math.imul(be,dt)|0,w=w+Math.imul(be,pt)|0,E=E+Math.imul(re,mt)|0,m=m+Math.imul(re,gt)|0,m=m+Math.imul(te,mt)|0,w=w+Math.imul(te,gt)|0,E=E+Math.imul(q,xt)|0,m=m+Math.imul(q,bt)|0,m=m+Math.imul(J,xt)|0,w=w+Math.imul(J,bt)|0,E=E+Math.imul(y,yt)|0,m=m+Math.imul(y,vt)|0,m=m+Math.imul(R,yt)|0,w=w+Math.imul(R,vt)|0;var p0=(T+E|0)+((m&8191)<<13)|0;T=(w+(m>>>13)|0)+(p0>>>26)|0,p0&=67108863,E=Math.imul(tt,ft),m=Math.imul(tt,ct),m=m+Math.imul(rt,ft)|0,w=Math.imul(rt,ct),E=E+Math.imul(Ze,ut)|0,m=m+Math.imul(Ze,ht)|0,m=m+Math.imul(et,ut)|0,w=w+Math.imul(et,ht)|0,E=E+Math.imul(Xe,dt)|0,m=m+Math.imul(Xe,pt)|0,m=m+Math.imul($e,dt)|0,w=w+Math.imul($e,pt)|0,E=E+Math.imul(se,mt)|0,m=m+Math.imul(se,gt)|0,m=m+Math.imul(be,mt)|0,w=w+Math.imul(be,gt)|0,E=E+Math.imul(re,xt)|0,m=m+Math.imul(re,bt)|0,m=m+Math.imul(te,xt)|0,w=w+Math.imul(te,bt)|0,E=E+Math.imul(q,yt)|0,m=m+Math.imul(q,vt)|0,m=m+Math.imul(J,yt)|0,w=w+Math.imul(J,vt)|0,E=E+Math.imul(y,wt)|0,m=m+Math.imul(y,At)|0,m=m+Math.imul(R,wt)|0,w=w+Math.imul(R,At)|0;var m0=(T+E|0)+((m&8191)<<13)|0;T=(w+(m>>>13)|0)+(m0>>>26)|0,m0&=67108863,E=Math.imul(it,ft),m=Math.imul(it,ct),m=m+Math.imul(nt,ft)|0,w=Math.imul(nt,ct),E=E+Math.imul(tt,ut)|0,m=m+Math.imul(tt,ht)|0,m=m+Math.imul(rt,ut)|0,w=w+Math.imul(rt,ht)|0,E=E+Math.imul(Ze,dt)|0,m=m+Math.imul(Ze,pt)|0,m=m+Math.imul(et,dt)|0,w=w+Math.imul(et,pt)|0,E=E+Math.imul(Xe,mt)|0,m=m+Math.imul(Xe,gt)|0,m=m+Math.imul($e,mt)|0,w=w+Math.imul($e,gt)|0,E=E+Math.imul(se,xt)|0,m=m+Math.imul(se,bt)|0,m=m+Math.imul(be,xt)|0,w=w+Math.imul(be,bt)|0,E=E+Math.imul(re,yt)|0,m=m+Math.imul(re,vt)|0,m=m+Math.imul(te,yt)|0,w=w+Math.imul(te,vt)|0,E=E+Math.imul(q,wt)|0,m=m+Math.imul(q,At)|0,m=m+Math.imul(J,wt)|0,w=w+Math.imul(J,At)|0,E=E+Math.imul(y,Et)|0,m=m+Math.imul(y,kt)|0,m=m+Math.imul(R,Et)|0,w=w+Math.imul(R,kt)|0;var g0=(T+E|0)+((m&8191)<<13)|0;T=(w+(m>>>13)|0)+(g0>>>26)|0,g0&=67108863,E=Math.imul(ot,ft),m=Math.imul(ot,ct),m=m+Math.imul(st,ft)|0,w=Math.imul(st,ct),E=E+Math.imul(it,ut)|0,m=m+Math.imul(it,ht)|0,m=m+Math.imul(nt,ut)|0,w=w+Math.imul(nt,ht)|0,E=E+Math.imul(tt,dt)|0,m=m+Math.imul(tt,pt)|0,m=m+Math.imul(rt,dt)|0,w=w+Math.imul(rt,pt)|0,E=E+Math.imul(Ze,mt)|0,m=m+Math.imul(Ze,gt)|0,m=m+Math.imul(et,mt)|0,w=w+Math.imul(et,gt)|0,E=E+Math.imul(Xe,xt)|0,m=m+Math.imul(Xe,bt)|0,m=m+Math.imul($e,xt)|0,w=w+Math.imul($e,bt)|0,E=E+Math.imul(se,yt)|0,m=m+Math.imul(se,vt)|0,m=m+Math.imul(be,yt)|0,w=w+Math.imul(be,vt)|0,E=E+Math.imul(re,wt)|0,m=m+Math.imul(re,At)|0,m=m+Math.imul(te,wt)|0,w=w+Math.imul(te,At)|0,E=E+Math.imul(q,Et)|0,m=m+Math.imul(q,kt)|0,m=m+Math.imul(J,Et)|0,w=w+Math.imul(J,kt)|0,E=E+Math.imul(y,St)|0,m=m+Math.imul(y,_t)|0,m=m+Math.imul(R,St)|0,w=w+Math.imul(R,_t)|0;var x0=(T+E|0)+((m&8191)<<13)|0;T=(w+(m>>>13)|0)+(x0>>>26)|0,x0&=67108863,E=Math.imul(at,ft),m=Math.imul(at,ct),m=m+Math.imul(lt,ft)|0,w=Math.imul(lt,ct),E=E+Math.imul(ot,ut)|0,m=m+Math.imul(ot,ht)|0,m=m+Math.imul(st,ut)|0,w=w+Math.imul(st,ht)|0,E=E+Math.imul(it,dt)|0,m=m+Math.imul(it,pt)|0,m=m+Math.imul(nt,dt)|0,w=w+Math.imul(nt,pt)|0,E=E+Math.imul(tt,mt)|0,m=m+Math.imul(tt,gt)|0,m=m+Math.imul(rt,mt)|0,w=w+Math.imul(rt,gt)|0,E=E+Math.imul(Ze,xt)|0,m=m+Math.imul(Ze,bt)|0,m=m+Math.imul(et,xt)|0,w=w+Math.imul(et,bt)|0,E=E+Math.imul(Xe,yt)|0,m=m+Math.imul(Xe,vt)|0,m=m+Math.imul($e,yt)|0,w=w+Math.imul($e,vt)|0,E=E+Math.imul(se,wt)|0,m=m+Math.imul(se,At)|0,m=m+Math.imul(be,wt)|0,w=w+Math.imul(be,At)|0,E=E+Math.imul(re,Et)|0,m=m+Math.imul(re,kt)|0,m=m+Math.imul(te,Et)|0,w=w+Math.imul(te,kt)|0,E=E+Math.imul(q,St)|0,m=m+Math.imul(q,_t)|0,m=m+Math.imul(J,St)|0,w=w+Math.imul(J,_t)|0,E=E+Math.imul(y,Ct)|0,m=m+Math.imul(y,Tt)|0,m=m+Math.imul(R,Ct)|0,w=w+Math.imul(R,Tt)|0;var b0=(T+E|0)+((m&8191)<<13)|0;T=(w+(m>>>13)|0)+(b0>>>26)|0,b0&=67108863,E=Math.imul(at,ut),m=Math.imul(at,ht),m=m+Math.imul(lt,ut)|0,w=Math.imul(lt,ht),E=E+Math.imul(ot,dt)|0,m=m+Math.imul(ot,pt)|0,m=m+Math.imul(st,dt)|0,w=w+Math.imul(st,pt)|0,E=E+Math.imul(it,mt)|0,m=m+Math.imul(it,gt)|0,m=m+Math.imul(nt,mt)|0,w=w+Math.imul(nt,gt)|0,E=E+Math.imul(tt,xt)|0,m=m+Math.imul(tt,bt)|0,m=m+Math.imul(rt,xt)|0,w=w+Math.imul(rt,bt)|0,E=E+Math.imul(Ze,yt)|0,m=m+Math.imul(Ze,vt)|0,m=m+Math.imul(et,yt)|0,w=w+Math.imul(et,vt)|0,E=E+Math.imul(Xe,wt)|0,m=m+Math.imul(Xe,At)|0,m=m+Math.imul($e,wt)|0,w=w+Math.imul($e,At)|0,E=E+Math.imul(se,Et)|0,m=m+Math.imul(se,kt)|0,m=m+Math.imul(be,Et)|0,w=w+Math.imul(be,kt)|0,E=E+Math.imul(re,St)|0,m=m+Math.imul(re,_t)|0,m=m+Math.imul(te,St)|0,w=w+Math.imul(te,_t)|0,E=E+Math.imul(q,Ct)|0,m=m+Math.imul(q,Tt)|0,m=m+Math.imul(J,Ct)|0,w=w+Math.imul(J,Tt)|0;var y0=(T+E|0)+((m&8191)<<13)|0;T=(w+(m>>>13)|0)+(y0>>>26)|0,y0&=67108863,E=Math.imul(at,dt),m=Math.imul(at,pt),m=m+Math.imul(lt,dt)|0,w=Math.imul(lt,pt),E=E+Math.imul(ot,mt)|0,m=m+Math.imul(ot,gt)|0,m=m+Math.imul(st,mt)|0,w=w+Math.imul(st,gt)|0,E=E+Math.imul(it,xt)|0,m=m+Math.imul(it,bt)|0,m=m+Math.imul(nt,xt)|0,w=w+Math.imul(nt,bt)|0,E=E+Math.imul(tt,yt)|0,m=m+Math.imul(tt,vt)|0,m=m+Math.imul(rt,yt)|0,w=w+Math.imul(rt,vt)|0,E=E+Math.imul(Ze,wt)|0,m=m+Math.imul(Ze,At)|0,m=m+Math.imul(et,wt)|0,w=w+Math.imul(et,At)|0,E=E+Math.imul(Xe,Et)|0,m=m+Math.imul(Xe,kt)|0,m=m+Math.imul($e,Et)|0,w=w+Math.imul($e,kt)|0,E=E+Math.imul(se,St)|0,m=m+Math.imul(se,_t)|0,m=m+Math.imul(be,St)|0,w=w+Math.imul(be,_t)|0,E=E+Math.imul(re,Ct)|0,m=m+Math.imul(re,Tt)|0,m=m+Math.imul(te,Ct)|0,w=w+Math.imul(te,Tt)|0;var v0=(T+E|0)+((m&8191)<<13)|0;T=(w+(m>>>13)|0)+(v0>>>26)|0,v0&=67108863,E=Math.imul(at,mt),m=Math.imul(at,gt),m=m+Math.imul(lt,mt)|0,w=Math.imul(lt,gt),E=E+Math.imul(ot,xt)|0,m=m+Math.imul(ot,bt)|0,m=m+Math.imul(st,xt)|0,w=w+Math.imul(st,bt)|0,E=E+Math.imul(it,yt)|0,m=m+Math.imul(it,vt)|0,m=m+Math.imul(nt,yt)|0,w=w+Math.imul(nt,vt)|0,E=E+Math.imul(tt,wt)|0,m=m+Math.imul(tt,At)|0,m=m+Math.imul(rt,wt)|0,w=w+Math.imul(rt,At)|0,E=E+Math.imul(Ze,Et)|0,m=m+Math.imul(Ze,kt)|0,m=m+Math.imul(et,Et)|0,w=w+Math.imul(et,kt)|0,E=E+Math.imul(Xe,St)|0,m=m+Math.imul(Xe,_t)|0,m=m+Math.imul($e,St)|0,w=w+Math.imul($e,_t)|0,E=E+Math.imul(se,Ct)|0,m=m+Math.imul(se,Tt)|0,m=m+Math.imul(be,Ct)|0,w=w+Math.imul(be,Tt)|0;var w0=(T+E|0)+((m&8191)<<13)|0;T=(w+(m>>>13)|0)+(w0>>>26)|0,w0&=67108863,E=Math.imul(at,xt),m=Math.imul(at,bt),m=m+Math.imul(lt,xt)|0,w=Math.imul(lt,bt),E=E+Math.imul(ot,yt)|0,m=m+Math.imul(ot,vt)|0,m=m+Math.imul(st,yt)|0,w=w+Math.imul(st,vt)|0,E=E+Math.imul(it,wt)|0,m=m+Math.imul(it,At)|0,m=m+Math.imul(nt,wt)|0,w=w+Math.imul(nt,At)|0,E=E+Math.imul(tt,Et)|0,m=m+Math.imul(tt,kt)|0,m=m+Math.imul(rt,Et)|0,w=w+Math.imul(rt,kt)|0,E=E+Math.imul(Ze,St)|0,m=m+Math.imul(Ze,_t)|0,m=m+Math.imul(et,St)|0,w=w+Math.imul(et,_t)|0,E=E+Math.imul(Xe,Ct)|0,m=m+Math.imul(Xe,Tt)|0,m=m+Math.imul($e,Ct)|0,w=w+Math.imul($e,Tt)|0;var A0=(T+E|0)+((m&8191)<<13)|0;T=(w+(m>>>13)|0)+(A0>>>26)|0,A0&=67108863,E=Math.imul(at,yt),m=Math.imul(at,vt),m=m+Math.imul(lt,yt)|0,w=Math.imul(lt,vt),E=E+Math.imul(ot,wt)|0,m=m+Math.imul(ot,At)|0,m=m+Math.imul(st,wt)|0,w=w+Math.imul(st,At)|0,E=E+Math.imul(it,Et)|0,m=m+Math.imul(it,kt)|0,m=m+Math.imul(nt,Et)|0,w=w+Math.imul(nt,kt)|0,E=E+Math.imul(tt,St)|0,m=m+Math.imul(tt,_t)|0,m=m+Math.imul(rt,St)|0,w=w+Math.imul(rt,_t)|0,E=E+Math.imul(Ze,Ct)|0,m=m+Math.imul(Ze,Tt)|0,m=m+Math.imul(et,Ct)|0,w=w+Math.imul(et,Tt)|0;var E0=(T+E|0)+((m&8191)<<13)|0;T=(w+(m>>>13)|0)+(E0>>>26)|0,E0&=67108863,E=Math.imul(at,wt),m=Math.imul(at,At),m=m+Math.imul(lt,wt)|0,w=Math.imul(lt,At),E=E+Math.imul(ot,Et)|0,m=m+Math.imul(ot,kt)|0,m=m+Math.imul(st,Et)|0,w=w+Math.imul(st,kt)|0,E=E+Math.imul(it,St)|0,m=m+Math.imul(it,_t)|0,m=m+Math.imul(nt,St)|0,w=w+Math.imul(nt,_t)|0,E=E+Math.imul(tt,Ct)|0,m=m+Math.imul(tt,Tt)|0,m=m+Math.imul(rt,Ct)|0,w=w+Math.imul(rt,Tt)|0;var k0=(T+E|0)+((m&8191)<<13)|0;T=(w+(m>>>13)|0)+(k0>>>26)|0,k0&=67108863,E=Math.imul(at,Et),m=Math.imul(at,kt),m=m+Math.imul(lt,Et)|0,w=Math.imul(lt,kt),E=E+Math.imul(ot,St)|0,m=m+Math.imul(ot,_t)|0,m=m+Math.imul(st,St)|0,w=w+Math.imul(st,_t)|0,E=E+Math.imul(it,Ct)|0,m=m+Math.imul(it,Tt)|0,m=m+Math.imul(nt,Ct)|0,w=w+Math.imul(nt,Tt)|0;var S0=(T+E|0)+((m&8191)<<13)|0;T=(w+(m>>>13)|0)+(S0>>>26)|0,S0&=67108863,E=Math.imul(at,St),m=Math.imul(at,_t),m=m+Math.imul(lt,St)|0,w=Math.imul(lt,_t),E=E+Math.imul(ot,Ct)|0,m=m+Math.imul(ot,Tt)|0,m=m+Math.imul(st,Ct)|0,w=w+Math.imul(st,Tt)|0;var _0=(T+E|0)+((m&8191)<<13)|0;T=(w+(m>>>13)|0)+(_0>>>26)|0,_0&=67108863,E=Math.imul(at,Ct),m=Math.imul(at,Tt),m=m+Math.imul(lt,Ct)|0,w=Math.imul(lt,Tt);var C0=(T+E|0)+((m&8191)<<13)|0;return T=(w+(m>>>13)|0)+(C0>>>26)|0,C0&=67108863,v[0]=so,v[1]=ao,v[2]=lo,v[3]=fo,v[4]=co,v[5]=p0,v[6]=m0,v[7]=g0,v[8]=x0,v[9]=b0,v[10]=y0,v[11]=v0,v[12]=w0,v[13]=A0,v[14]=E0,v[15]=k0,v[16]=S0,v[17]=_0,v[18]=C0,T!==0&&(v[19]=T,A.length++),A};Math.imul||(_=k);function P(M,h,x){x.negative=h.negative^M.negative,x.length=M.length+h.length;for(var A=0,S=0,C=0;C<x.length-1;C++){var v=S;S=0;for(var T=A&67108863,E=Math.min(C,h.length-1),m=Math.max(0,C-M.length+1);m<=E;m++){var w=C-m,z=M.words[w]|0,y=h.words[m]|0,R=z*y,F=R&67108863;v=v+(R/67108864|0)|0,F=F+T|0,T=F&67108863,v=v+(F>>>26)|0,S+=v>>>26,v&=67108863}x.words[C]=T,A=v,v=S}return A!==0?x.words[C]=A:x.length--,x._strip()}function N(M,h,x){return P(M,h,x)}n.prototype.mulTo=function(h,x){var A,S=this.length+h.length;return this.length===10&&h.length===10?A=_(this,h,x):S<63?A=k(this,h,x):S<1024?A=P(this,h,x):A=N(this,h,x),A};function I(M,h){this.x=M,this.y=h}I.prototype.makeRBT=function(h){for(var x=new Array(h),A=n.prototype._countBits(h)-1,S=0;S<h;S++)x[S]=this.revBin(S,A,h);return x},I.prototype.revBin=function(h,x,A){if(h===0||h===A-1)return h;for(var S=0,C=0;C<x;C++)S|=(h&1)<<x-C-1,h>>=1;return S},I.prototype.permute=function(h,x,A,S,C,v){for(var T=0;T<v;T++)S[T]=x[h[T]],C[T]=A[h[T]]},I.prototype.transform=function(h,x,A,S,C,v){this.permute(v,h,x,A,S,C);for(var T=1;T<C;T<<=1)for(var E=T<<1,m=Math.cos(2*Math.PI/E),w=Math.sin(2*Math.PI/E),z=0;z<C;z+=E)for(var y=m,R=w,F=0;F<T;F++){var q=A[z+F],J=S[z+F],ae=A[z+F+T],re=S[z+F+T],te=y*ae-R*re;re=y*re+R*ae,ae=te,A[z+F]=q+ae,S[z+F]=J+re,A[z+F+T]=q-ae,S[z+F+T]=J-re,F!==E&&(te=m*y-w*R,R=m*R+w*y,y=te)}},I.prototype.guessLen13b=function(h,x){var A=Math.max(x,h)|1,S=A&1,C=0;for(A=A/2|0;A;A=A>>>1)C++;return 1<<C+1+S},I.prototype.conjugate=function(h,x,A){if(!(A<=1))for(var S=0;S<A/2;S++){var C=h[S];h[S]=h[A-S-1],h[A-S-1]=C,C=x[S],x[S]=-x[A-S-1],x[A-S-1]=-C}},I.prototype.normalize13b=function(h,x){for(var A=0,S=0;S<x/2;S++){var C=Math.round(h[2*S+1]/x)*8192+Math.round(h[2*S]/x)+A;h[S]=C&67108863,C<67108864?A=0:A=C/67108864|0}return h},I.prototype.convert13b=function(h,x,A,S){for(var C=0,v=0;v<x;v++)C=C+(h[v]|0),A[2*v]=C&8191,C=C>>>13,A[2*v+1]=C&8191,C=C>>>13;for(v=2*x;v<S;++v)A[v]=0;t(C===0),t((C&-8192)===0)},I.prototype.stub=function(h){for(var x=new Array(h),A=0;A<h;A++)x[A]=0;return x},I.prototype.mulp=function(h,x,A){var S=2*this.guessLen13b(h.length,x.length),C=this.makeRBT(S),v=this.stub(S),T=new Array(S),E=new Array(S),m=new Array(S),w=new Array(S),z=new Array(S),y=new Array(S),R=A.words;R.length=S,this.convert13b(h.words,h.length,T,S),this.convert13b(x.words,x.length,w,S),this.transform(T,v,E,m,S,C),this.transform(w,v,z,y,S,C);for(var F=0;F<S;F++){var q=E[F]*z[F]-m[F]*y[F];m[F]=E[F]*y[F]+m[F]*z[F],E[F]=q}return this.conjugate(E,m,S),this.transform(E,m,R,v,S,C),this.conjugate(R,v,S),this.normalize13b(R,S),A.negative=h.negative^x.negative,A.length=h.length+x.length,A._strip()},n.prototype.mul=function(h){var x=new n(null);return x.words=new Array(this.length+h.length),this.mulTo(h,x)},n.prototype.mulf=function(h){var x=new n(null);return x.words=new Array(this.length+h.length),N(this,h,x)},n.prototype.imul=function(h){return this.clone().mulTo(h,this)},n.prototype.imuln=function(h){var x=h<0;x&&(h=-h),t(typeof h=="number"),t(h<67108864);for(var A=0,S=0;S<this.length;S++){var C=(this.words[S]|0)*h,v=(C&67108863)+(A&67108863);A>>=26,A+=C/67108864|0,A+=v>>>26,this.words[S]=v&67108863}return A!==0&&(this.words[S]=A,this.length++),x?this.ineg():this},n.prototype.muln=function(h){return this.clone().imuln(h)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(h){var x=b(h);if(x.length===0)return new n(1);for(var A=this,S=0;S<x.length&&x[S]===0;S++,A=A.sqr());if(++S<x.length)for(var C=A.sqr();S<x.length;S++,C=C.sqr())x[S]!==0&&(A=A.mul(C));return A},n.prototype.iushln=function(h){t(typeof h=="number"&&h>=0);var x=h%26,A=(h-x)/26,S=67108863>>>26-x<<26-x,C;if(x!==0){var v=0;for(C=0;C<this.length;C++){var T=this.words[C]&S,E=(this.words[C]|0)-T<<x;this.words[C]=E|v,v=T>>>26-x}v&&(this.words[C]=v,this.length++)}if(A!==0){for(C=this.length-1;C>=0;C--)this.words[C+A]=this.words[C];for(C=0;C<A;C++)this.words[C]=0;this.length+=A}return this._strip()},n.prototype.ishln=function(h){return t(this.negative===0),this.iushln(h)},n.prototype.iushrn=function(h,x,A){t(typeof h=="number"&&h>=0);var S;x?S=(x-x%26)/26:S=0;var C=h%26,v=Math.min((h-C)/26,this.length),T=67108863^67108863>>>C<<C,E=A;if(S-=v,S=Math.max(0,S),E){for(var m=0;m<v;m++)E.words[m]=this.words[m];E.length=v}if(v!==0)if(this.length>v)for(this.length-=v,m=0;m<this.length;m++)this.words[m]=this.words[m+v];else this.words[0]=0,this.length=1;var w=0;for(m=this.length-1;m>=0&&(w!==0||m>=S);m--){var z=this.words[m]|0;this.words[m]=w<<26-C|z>>>C,w=z&T}return E&&w!==0&&(E.words[E.length++]=w),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},n.prototype.ishrn=function(h,x,A){return t(this.negative===0),this.iushrn(h,x,A)},n.prototype.shln=function(h){return this.clone().ishln(h)},n.prototype.ushln=function(h){return this.clone().iushln(h)},n.prototype.shrn=function(h){return this.clone().ishrn(h)},n.prototype.ushrn=function(h){return this.clone().iushrn(h)},n.prototype.testn=function(h){t(typeof h=="number"&&h>=0);var x=h%26,A=(h-x)/26,S=1<<x;if(this.length<=A)return!1;var C=this.words[A];return!!(C&S)},n.prototype.imaskn=function(h){t(typeof h=="number"&&h>=0);var x=h%26,A=(h-x)/26;if(t(this.negative===0,"imaskn works only with positive numbers"),this.length<=A)return this;if(x!==0&&A++,this.length=Math.min(A,this.length),x!==0){var S=67108863^67108863>>>x<<x;this.words[this.length-1]&=S}return this._strip()},n.prototype.maskn=function(h){return this.clone().imaskn(h)},n.prototype.iaddn=function(h){return t(typeof h=="number"),t(h<67108864),h<0?this.isubn(-h):this.negative!==0?this.length===1&&(this.words[0]|0)<=h?(this.words[0]=h-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(h),this.negative=1,this):this._iaddn(h)},n.prototype._iaddn=function(h){this.words[0]+=h;for(var x=0;x<this.length&&this.words[x]>=67108864;x++)this.words[x]-=67108864,x===this.length-1?this.words[x+1]=1:this.words[x+1]++;return this.length=Math.max(this.length,x+1),this},n.prototype.isubn=function(h){if(t(typeof h=="number"),t(h<67108864),h<0)return this.iaddn(-h);if(this.negative!==0)return this.negative=0,this.iaddn(h),this.negative=1,this;if(this.words[0]-=h,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var x=0;x<this.length&&this.words[x]<0;x++)this.words[x]+=67108864,this.words[x+1]-=1;return this._strip()},n.prototype.addn=function(h){return this.clone().iaddn(h)},n.prototype.subn=function(h){return this.clone().isubn(h)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(h,x,A){var S=h.length+A,C;this._expand(S);var v,T=0;for(C=0;C<h.length;C++){v=(this.words[C+A]|0)+T;var E=(h.words[C]|0)*x;v-=E&67108863,T=(v>>26)-(E/67108864|0),this.words[C+A]=v&67108863}for(;C<this.length-A;C++)v=(this.words[C+A]|0)+T,T=v>>26,this.words[C+A]=v&67108863;if(T===0)return this._strip();for(t(T===-1),T=0,C=0;C<this.length;C++)v=-(this.words[C]|0)+T,T=v>>26,this.words[C]=v&67108863;return this.negative=1,this._strip()},n.prototype._wordDiv=function(h,x){var A=this.length-h.length,S=this.clone(),C=h,v=C.words[C.length-1]|0,T=this._countBits(v);A=26-T,A!==0&&(C=C.ushln(A),S.iushln(A),v=C.words[C.length-1]|0);var E=S.length-C.length,m;if(x!=="mod"){m=new n(null),m.length=E+1,m.words=new Array(m.length);for(var w=0;w<m.length;w++)m.words[w]=0}var z=S.clone()._ishlnsubmul(C,1,E);z.negative===0&&(S=z,m&&(m.words[E]=1));for(var y=E-1;y>=0;y--){var R=(S.words[C.length+y]|0)*67108864+(S.words[C.length+y-1]|0);for(R=Math.min(R/v|0,67108863),S._ishlnsubmul(C,R,y);S.negative!==0;)R--,S.negative=0,S._ishlnsubmul(C,1,y),S.isZero()||(S.negative^=1);m&&(m.words[y]=R)}return m&&m._strip(),S._strip(),x!=="div"&&A!==0&&S.iushrn(A),{div:m||null,mod:S}},n.prototype.divmod=function(h,x,A){if(t(!h.isZero()),this.isZero())return{div:new n(0),mod:new n(0)};var S,C,v;return this.negative!==0&&h.negative===0?(v=this.neg().divmod(h,x),x!=="mod"&&(S=v.div.neg()),x!=="div"&&(C=v.mod.neg(),A&&C.negative!==0&&C.iadd(h)),{div:S,mod:C}):this.negative===0&&h.negative!==0?(v=this.divmod(h.neg(),x),x!=="mod"&&(S=v.div.neg()),{div:S,mod:v.mod}):(this.negative&h.negative)!==0?(v=this.neg().divmod(h.neg(),x),x!=="div"&&(C=v.mod.neg(),A&&C.negative!==0&&C.isub(h)),{div:v.div,mod:C}):h.length>this.length||this.cmp(h)<0?{div:new n(0),mod:this}:h.length===1?x==="div"?{div:this.divn(h.words[0]),mod:null}:x==="mod"?{div:null,mod:new n(this.modrn(h.words[0]))}:{div:this.divn(h.words[0]),mod:new n(this.modrn(h.words[0]))}:this._wordDiv(h,x)},n.prototype.div=function(h){return this.divmod(h,"div",!1).div},n.prototype.mod=function(h){return this.divmod(h,"mod",!1).mod},n.prototype.umod=function(h){return this.divmod(h,"mod",!0).mod},n.prototype.divRound=function(h){var x=this.divmod(h);if(x.mod.isZero())return x.div;var A=x.div.negative!==0?x.mod.isub(h):x.mod,S=h.ushrn(1),C=h.andln(1),v=A.cmp(S);return v<0||C===1&&v===0?x.div:x.div.negative!==0?x.div.isubn(1):x.div.iaddn(1)},n.prototype.modrn=function(h){var x=h<0;x&&(h=-h),t(h<=67108863);for(var A=(1<<26)%h,S=0,C=this.length-1;C>=0;C--)S=(A*S+(this.words[C]|0))%h;return x?-S:S},n.prototype.modn=function(h){return this.modrn(h)},n.prototype.idivn=function(h){var x=h<0;x&&(h=-h),t(h<=67108863);for(var A=0,S=this.length-1;S>=0;S--){var C=(this.words[S]|0)+A*67108864;this.words[S]=C/h|0,A=C%h}return this._strip(),x?this.ineg():this},n.prototype.divn=function(h){return this.clone().idivn(h)},n.prototype.egcd=function(h){t(h.negative===0),t(!h.isZero());var x=this,A=h.clone();x.negative!==0?x=x.umod(h):x=x.clone();for(var S=new n(1),C=new n(0),v=new n(0),T=new n(1),E=0;x.isEven()&&A.isEven();)x.iushrn(1),A.iushrn(1),++E;for(var m=A.clone(),w=x.clone();!x.isZero();){for(var z=0,y=1;(x.words[0]&y)===0&&z<26;++z,y<<=1);if(z>0)for(x.iushrn(z);z-- >0;)(S.isOdd()||C.isOdd())&&(S.iadd(m),C.isub(w)),S.iushrn(1),C.iushrn(1);for(var R=0,F=1;(A.words[0]&F)===0&&R<26;++R,F<<=1);if(R>0)for(A.iushrn(R);R-- >0;)(v.isOdd()||T.isOdd())&&(v.iadd(m),T.isub(w)),v.iushrn(1),T.iushrn(1);x.cmp(A)>=0?(x.isub(A),S.isub(v),C.isub(T)):(A.isub(x),v.isub(S),T.isub(C))}return{a:v,b:T,gcd:A.iushln(E)}},n.prototype._invmp=function(h){t(h.negative===0),t(!h.isZero());var x=this,A=h.clone();x.negative!==0?x=x.umod(h):x=x.clone();for(var S=new n(1),C=new n(0),v=A.clone();x.cmpn(1)>0&&A.cmpn(1)>0;){for(var T=0,E=1;(x.words[0]&E)===0&&T<26;++T,E<<=1);if(T>0)for(x.iushrn(T);T-- >0;)S.isOdd()&&S.iadd(v),S.iushrn(1);for(var m=0,w=1;(A.words[0]&w)===0&&m<26;++m,w<<=1);if(m>0)for(A.iushrn(m);m-- >0;)C.isOdd()&&C.iadd(v),C.iushrn(1);x.cmp(A)>=0?(x.isub(A),S.isub(C)):(A.isub(x),C.isub(S))}var z;return x.cmpn(1)===0?z=S:z=C,z.cmpn(0)<0&&z.iadd(h),z},n.prototype.gcd=function(h){if(this.isZero())return h.abs();if(h.isZero())return this.abs();var x=this.clone(),A=h.clone();x.negative=0,A.negative=0;for(var S=0;x.isEven()&&A.isEven();S++)x.iushrn(1),A.iushrn(1);do{for(;x.isEven();)x.iushrn(1);for(;A.isEven();)A.iushrn(1);var C=x.cmp(A);if(C<0){var v=x;x=A,A=v}else if(C===0||A.cmpn(1)===0)break;x.isub(A)}while(!0);return A.iushln(S)},n.prototype.invm=function(h){return this.egcd(h).a.umod(h)},n.prototype.isEven=function(){return(this.words[0]&1)===0},n.prototype.isOdd=function(){return(this.words[0]&1)===1},n.prototype.andln=function(h){return this.words[0]&h},n.prototype.bincn=function(h){t(typeof h=="number");var x=h%26,A=(h-x)/26,S=1<<x;if(this.length<=A)return this._expand(A+1),this.words[A]|=S,this;for(var C=S,v=A;C!==0&&v<this.length;v++){var T=this.words[v]|0;T+=C,C=T>>>26,T&=67108863,this.words[v]=T}return C!==0&&(this.words[v]=C,this.length++),this},n.prototype.isZero=function(){return this.length===1&&this.words[0]===0},n.prototype.cmpn=function(h){var x=h<0;if(this.negative!==0&&!x)return-1;if(this.negative===0&&x)return 1;this._strip();var A;if(this.length>1)A=1;else{x&&(h=-h),t(h<=67108863,"Number is too big");var S=this.words[0]|0;A=S===h?0:S<h?-1:1}return this.negative!==0?-A|0:A},n.prototype.cmp=function(h){if(this.negative!==0&&h.negative===0)return-1;if(this.negative===0&&h.negative!==0)return 1;var x=this.ucmp(h);return this.negative!==0?-x|0:x},n.prototype.ucmp=function(h){if(this.length>h.length)return 1;if(this.length<h.length)return-1;for(var x=0,A=this.length-1;A>=0;A--){var S=this.words[A]|0,C=h.words[A]|0;if(S!==C){S<C?x=-1:S>C&&(x=1);break}}return x},n.prototype.gtn=function(h){return this.cmpn(h)===1},n.prototype.gt=function(h){return this.cmp(h)===1},n.prototype.gten=function(h){return this.cmpn(h)>=0},n.prototype.gte=function(h){return this.cmp(h)>=0},n.prototype.ltn=function(h){return this.cmpn(h)===-1},n.prototype.lt=function(h){return this.cmp(h)===-1},n.prototype.lten=function(h){return this.cmpn(h)<=0},n.prototype.lte=function(h){return this.cmp(h)<=0},n.prototype.eqn=function(h){return this.cmpn(h)===0},n.prototype.eq=function(h){return this.cmp(h)===0},n.red=function(h){return new Z(h)},n.prototype.toRed=function(h){return t(!this.red,"Already a number in reduction context"),t(this.negative===0,"red works only with positives"),h.convertTo(this)._forceRed(h)},n.prototype.fromRed=function(){return t(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(h){return this.red=h,this},n.prototype.forceRed=function(h){return t(!this.red,"Already a number in reduction context"),this._forceRed(h)},n.prototype.redAdd=function(h){return t(this.red,"redAdd works only with red numbers"),this.red.add(this,h)},n.prototype.redIAdd=function(h){return t(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,h)},n.prototype.redSub=function(h){return t(this.red,"redSub works only with red numbers"),this.red.sub(this,h)},n.prototype.redISub=function(h){return t(this.red,"redISub works only with red numbers"),this.red.isub(this,h)},n.prototype.redShl=function(h){return t(this.red,"redShl works only with red numbers"),this.red.shl(this,h)},n.prototype.redMul=function(h){return t(this.red,"redMul works only with red numbers"),this.red._verify2(this,h),this.red.mul(this,h)},n.prototype.redIMul=function(h){return t(this.red,"redMul works only with red numbers"),this.red._verify2(this,h),this.red.imul(this,h)},n.prototype.redSqr=function(){return t(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return t(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return t(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return t(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return t(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(h){return t(this.red&&!h.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,h)};var D={k256:null,p224:null,p192:null,p25519:null};function B(M,h){this.name=M,this.p=new n(h,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}B.prototype._tmp=function(){var h=new n(null);return h.words=new Array(Math.ceil(this.n/13)),h},B.prototype.ireduce=function(h){var x=h,A;do this.split(x,this.tmp),x=this.imulK(x),x=x.iadd(this.tmp),A=x.bitLength();while(A>this.n);var S=A<this.n?-1:x.ucmp(this.p);return S===0?(x.words[0]=0,x.length=1):S>0?x.isub(this.p):x.strip!==void 0?x.strip():x._strip(),x},B.prototype.split=function(h,x){h.iushrn(this.n,0,x)},B.prototype.imulK=function(h){return h.imul(this.k)};function V(){B.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(V,B),V.prototype.split=function(h,x){for(var A=4194303,S=Math.min(h.length,9),C=0;C<S;C++)x.words[C]=h.words[C];if(x.length=S,h.length<=9){h.words[0]=0,h.length=1;return}var v=h.words[9];for(x.words[x.length++]=v&A,C=10;C<h.length;C++){var T=h.words[C]|0;h.words[C-10]=(T&A)<<4|v>>>22,v=T}v>>>=22,h.words[C-10]=v,v===0&&h.length>10?h.length-=10:h.length-=9},V.prototype.imulK=function(h){h.words[h.length]=0,h.words[h.length+1]=0,h.length+=2;for(var x=0,A=0;A<h.length;A++){var S=h.words[A]|0;x+=S*977,h.words[A]=x&67108863,x=S*64+(x/67108864|0)}return h.words[h.length-1]===0&&(h.length--,h.words[h.length-1]===0&&h.length--),h};function W(){B.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(W,B);function Y(){B.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(Y,B);function $(){B.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i($,B),$.prototype.imulK=function(h){for(var x=0,A=0;A<h.length;A++){var S=(h.words[A]|0)*19+x,C=S&67108863;S>>>=26,h.words[A]=C,x=S}return x!==0&&(h.words[h.length++]=x),h},n._prime=function(h){if(D[h])return D[h];var x;if(h==="k256")x=new V;else if(h==="p224")x=new W;else if(h==="p192")x=new Y;else if(h==="p25519")x=new $;else throw new Error("Unknown prime "+h);return D[h]=x,x};function Z(M){if(typeof M=="string"){var h=n._prime(M);this.m=h.p,this.prime=h}else t(M.gtn(1),"modulus must be greater than 1"),this.m=M,this.prime=null}Z.prototype._verify1=function(h){t(h.negative===0,"red works only with positives"),t(h.red,"red works only with red numbers")},Z.prototype._verify2=function(h,x){t((h.negative|x.negative)===0,"red works only with positives"),t(h.red&&h.red===x.red,"red works only with red numbers")},Z.prototype.imod=function(h){return this.prime?this.prime.ireduce(h)._forceRed(this):(f(h,h.umod(this.m)._forceRed(this)),h)},Z.prototype.neg=function(h){return h.isZero()?h.clone():this.m.sub(h)._forceRed(this)},Z.prototype.add=function(h,x){this._verify2(h,x);var A=h.add(x);return A.cmp(this.m)>=0&&A.isub(this.m),A._forceRed(this)},Z.prototype.iadd=function(h,x){this._verify2(h,x);var A=h.iadd(x);return A.cmp(this.m)>=0&&A.isub(this.m),A},Z.prototype.sub=function(h,x){this._verify2(h,x);var A=h.sub(x);return A.cmpn(0)<0&&A.iadd(this.m),A._forceRed(this)},Z.prototype.isub=function(h,x){this._verify2(h,x);var A=h.isub(x);return A.cmpn(0)<0&&A.iadd(this.m),A},Z.prototype.shl=function(h,x){return this._verify1(h),this.imod(h.ushln(x))},Z.prototype.imul=function(h,x){return this._verify2(h,x),this.imod(h.imul(x))},Z.prototype.mul=function(h,x){return this._verify2(h,x),this.imod(h.mul(x))},Z.prototype.isqr=function(h){return this.imul(h,h.clone())},Z.prototype.sqr=function(h){return this.mul(h,h)},Z.prototype.sqrt=function(h){if(h.isZero())return h.clone();var x=this.m.andln(3);if(t(x%2===1),x===3){var A=this.m.add(new n(1)).iushrn(2);return this.pow(h,A)}for(var S=this.m.subn(1),C=0;!S.isZero()&&S.andln(1)===0;)C++,S.iushrn(1);t(!S.isZero());var v=new n(1).toRed(this),T=v.redNeg(),E=this.m.subn(1).iushrn(1),m=this.m.bitLength();for(m=new n(2*m*m).toRed(this);this.pow(m,E).cmp(T)!==0;)m.redIAdd(T);for(var w=this.pow(m,S),z=this.pow(h,S.addn(1).iushrn(1)),y=this.pow(h,S),R=C;y.cmp(v)!==0;){for(var F=y,q=0;F.cmp(v)!==0;q++)F=F.redSqr();t(q<R);var J=this.pow(w,new n(1).iushln(R-q-1));z=z.redMul(J),w=J.redSqr(),y=y.redMul(w),R=q}return z},Z.prototype.invm=function(h){var x=h._invmp(this.m);return x.negative!==0?(x.negative=0,this.imod(x).redNeg()):this.imod(x)},Z.prototype.pow=function(h,x){if(x.isZero())return new n(1).toRed(this);if(x.cmpn(1)===0)return h.clone();var A=4,S=new Array(1<<A);S[0]=new n(1).toRed(this),S[1]=h;for(var C=2;C<S.length;C++)S[C]=this.mul(S[C-1],h);var v=S[0],T=0,E=0,m=x.bitLength()%26;for(m===0&&(m=26),C=x.length-1;C>=0;C--){for(var w=x.words[C],z=m-1;z>=0;z--){var y=w>>z&1;if(v!==S[0]&&(v=this.sqr(v)),y===0&&T===0){E=0;continue}T<<=1,T|=y,E++,!(E!==A&&(C!==0||z!==0))&&(v=this.mul(v,S[T]),E=0,T=0)}m=26}return v},Z.prototype.convertTo=function(h){var x=h.umod(this.m);return x===h?x.clone():x},Z.prototype.convertFrom=function(h){var x=h.clone();return x.red=null,x},n.mont=function(h){return new ce(h)};function ce(M){Z.call(this,M),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(ce,Z),ce.prototype.convertTo=function(h){return this.imod(h.ushln(this.shift))},ce.prototype.convertFrom=function(h){var x=this.imod(h.mul(this.rinv));return x.red=null,x},ce.prototype.imul=function(h,x){if(h.isZero()||x.isZero())return h.words[0]=0,h.length=1,h;var A=h.imul(x),S=A.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),C=A.isub(S).iushrn(this.shift),v=C;return C.cmp(this.m)>=0?v=C.isub(this.m):C.cmpn(0)<0&&(v=C.iadd(this.m)),v._forceRed(this)},ce.prototype.mul=function(h,x){if(h.isZero()||x.isZero())return new n(0)._forceRed(this);var A=h.mul(x),S=A.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),C=A.isub(S).iushrn(this.shift),v=C;return C.cmp(this.m)>=0?v=C.isub(this.m):C.cmpn(0)<0&&(v=C.iadd(this.m)),v._forceRed(this)},ce.prototype.invm=function(h){var x=this.imod(h._invmp(this.m).mul(this.r2));return x._forceRed(this)}})(typeof qm>"u"||qm,h2)});var F2=Rt((AR,bh)=>{(function(){"use strict";var r="input is invalid type",e="finalize already called",t=typeof window=="object",i=t?window:{};i.JS_SHA3_NO_WINDOW&&(t=!1);var n=!t&&typeof self=="object",o=!i.JS_SHA3_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;o?i=global:n&&(i=self);var s=!i.JS_SHA3_NO_COMMON_JS&&typeof bh=="object"&&bh.exports,a=typeof define=="function"&&define.amd,l=!i.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",f="0123456789abcdef".split(""),c=[31,7936,2031616,520093696],u=[4,1024,262144,67108864],d=[1,256,65536,16777216],p=[6,1536,393216,100663296],g=[0,8,16,24],b=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],k=[224,256,384,512],_=[128,256],P=["hex","buffer","arrayBuffer","array","digest"],N={128:168,256:136};(i.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(y){return Object.prototype.toString.call(y)==="[object Array]"}),l&&(i.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(y){return typeof y=="object"&&y.buffer&&y.buffer.constructor===ArrayBuffer});for(var I=function(y,R,F){return function(q){return new m(y,R,y).update(q)[F]()}},D=function(y,R,F){return function(q,J){return new m(y,R,J).update(q)[F]()}},B=function(y,R,F){return function(q,J,ae,re){return h["cshake"+y].update(q,J,ae,re)[F]()}},V=function(y,R,F){return function(q,J,ae,re){return h["kmac"+y].update(q,J,ae,re)[F]()}},W=function(y,R,F,q){for(var J=0;J<P.length;++J){var ae=P[J];y[ae]=R(F,q,ae)}return y},Y=function(y,R){var F=I(y,R,"hex");return F.create=function(){return new m(y,R,y)},F.update=function(q){return F.create().update(q)},W(F,I,y,R)},$=function(y,R){var F=D(y,R,"hex");return F.create=function(q){return new m(y,R,q)},F.update=function(q,J){return F.create(J).update(q)},W(F,D,y,R)},Z=function(y,R){var F=N[y],q=B(y,R,"hex");return q.create=function(J,ae,re){return!ae&&!re?h["shake"+y].create(J):new m(y,R,J).bytepad([ae,re],F)},q.update=function(J,ae,re,te){return q.create(ae,re,te).update(J)},W(q,B,y,R)},ce=function(y,R){var F=N[y],q=V(y,R,"hex");return q.create=function(J,ae,re){return new w(y,R,ae).bytepad(["KMAC",re],F).bytepad([J],F)},q.update=function(J,ae,re,te){return q.create(J,re,te).update(ae)},W(q,V,y,R)},M=[{name:"keccak",padding:d,bits:k,createMethod:Y},{name:"sha3",padding:p,bits:k,createMethod:Y},{name:"shake",padding:c,bits:_,createMethod:$},{name:"cshake",padding:u,bits:_,createMethod:Z},{name:"kmac",padding:u,bits:_,createMethod:ce}],h={},x=[],A=0;A<M.length;++A)for(var S=M[A],C=S.bits,v=0;v<C.length;++v){var T=S.name+"_"+C[v];if(x.push(T),h[T]=S.createMethod(C[v],S.padding),S.name!=="sha3"){var E=S.name+C[v];x.push(E),h[E]=h[T]}}function m(y,R,F){this.blocks=[],this.s=[],this.padding=R,this.outputBits=F,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(y<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=F>>5,this.extraBytes=(F&31)>>3;for(var q=0;q<50;++q)this.s[q]=0}m.prototype.update=function(y){if(this.finalized)throw new Error(e);var R,F=typeof y;if(F!=="string"){if(F==="object"){if(y===null)throw new Error(r);if(l&&y.constructor===ArrayBuffer)y=new Uint8Array(y);else if(!Array.isArray(y)&&(!l||!ArrayBuffer.isView(y)))throw new Error(r)}else throw new Error(r);R=!0}for(var q=this.blocks,J=this.byteCount,ae=y.length,re=this.blockCount,te=0,Dt=this.s,se,be;te<ae;){if(this.reset)for(this.reset=!1,q[0]=this.block,se=1;se<re+1;++se)q[se]=0;if(R)for(se=this.start;te<ae&&se<J;++te)q[se>>2]|=y[te]<<g[se++&3];else for(se=this.start;te<ae&&se<J;++te)be=y.charCodeAt(te),be<128?q[se>>2]|=be<<g[se++&3]:be<2048?(q[se>>2]|=(192|be>>6)<<g[se++&3],q[se>>2]|=(128|be&63)<<g[se++&3]):be<55296||be>=57344?(q[se>>2]|=(224|be>>12)<<g[se++&3],q[se>>2]|=(128|be>>6&63)<<g[se++&3],q[se>>2]|=(128|be&63)<<g[se++&3]):(be=65536+((be&1023)<<10|y.charCodeAt(++te)&1023),q[se>>2]|=(240|be>>18)<<g[se++&3],q[se>>2]|=(128|be>>12&63)<<g[se++&3],q[se>>2]|=(128|be>>6&63)<<g[se++&3],q[se>>2]|=(128|be&63)<<g[se++&3]);if(this.lastByteIndex=se,se>=J){for(this.start=se-J,this.block=q[re],se=0;se<re;++se)Dt[se]^=q[se];z(Dt),this.reset=!0}else this.start=se}return this},m.prototype.encode=function(y,R){var F=y&255,q=1,J=[F];for(y=y>>8,F=y&255;F>0;)J.unshift(F),y=y>>8,F=y&255,++q;return R?J.push(q):J.unshift(q),this.update(J),J.length},m.prototype.encodeString=function(y){var R,F=typeof y;if(F!=="string"){if(F==="object"){if(y===null)throw new Error(r);if(l&&y.constructor===ArrayBuffer)y=new Uint8Array(y);else if(!Array.isArray(y)&&(!l||!ArrayBuffer.isView(y)))throw new Error(r)}else throw new Error(r);R=!0}var q=0,J=y.length;if(R)q=J;else for(var ae=0;ae<y.length;++ae){var re=y.charCodeAt(ae);re<128?q+=1:re<2048?q+=2:re<55296||re>=57344?q+=3:(re=65536+((re&1023)<<10|y.charCodeAt(++ae)&1023),q+=4)}return q+=this.encode(q*8),this.update(y),q},m.prototype.bytepad=function(y,R){for(var F=this.encode(R),q=0;q<y.length;++q)F+=this.encodeString(y[q]);var J=R-F%R,ae=[];return ae.length=J,this.update(ae),this},m.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var y=this.blocks,R=this.lastByteIndex,F=this.blockCount,q=this.s;if(y[R>>2]|=this.padding[R&3],this.lastByteIndex===this.byteCount)for(y[0]=y[F],R=1;R<F+1;++R)y[R]=0;for(y[F-1]|=2147483648,R=0;R<F;++R)q[R]^=y[R];z(q)}},m.prototype.toString=m.prototype.hex=function(){this.finalize();for(var y=this.blockCount,R=this.s,F=this.outputBlocks,q=this.extraBytes,J=0,ae=0,re="",te;ae<F;){for(J=0;J<y&&ae<F;++J,++ae)te=R[J],re+=f[te>>4&15]+f[te&15]+f[te>>12&15]+f[te>>8&15]+f[te>>20&15]+f[te>>16&15]+f[te>>28&15]+f[te>>24&15];ae%y===0&&(z(R),J=0)}return q&&(te=R[J],re+=f[te>>4&15]+f[te&15],q>1&&(re+=f[te>>12&15]+f[te>>8&15]),q>2&&(re+=f[te>>20&15]+f[te>>16&15])),re},m.prototype.arrayBuffer=function(){this.finalize();var y=this.blockCount,R=this.s,F=this.outputBlocks,q=this.extraBytes,J=0,ae=0,re=this.outputBits>>3,te;q?te=new ArrayBuffer(F+1<<2):te=new ArrayBuffer(re);for(var Dt=new Uint32Array(te);ae<F;){for(J=0;J<y&&ae<F;++J,++ae)Dt[ae]=R[J];ae%y===0&&z(R)}return q&&(Dt[J]=R[J],te=te.slice(0,re)),te},m.prototype.buffer=m.prototype.arrayBuffer,m.prototype.digest=m.prototype.array=function(){this.finalize();for(var y=this.blockCount,R=this.s,F=this.outputBlocks,q=this.extraBytes,J=0,ae=0,re=[],te,Dt;ae<F;){for(J=0;J<y&&ae<F;++J,++ae)te=ae<<2,Dt=R[J],re[te]=Dt&255,re[te+1]=Dt>>8&255,re[te+2]=Dt>>16&255,re[te+3]=Dt>>24&255;ae%y===0&&z(R)}return q&&(te=ae<<2,Dt=R[J],re[te]=Dt&255,q>1&&(re[te+1]=Dt>>8&255),q>2&&(re[te+2]=Dt>>16&255)),re};function w(y,R,F){m.call(this,y,R,F)}w.prototype=new m,w.prototype.finalize=function(){return this.encode(this.outputBits,!0),m.prototype.finalize.call(this)};var z=function(y){var R,F,q,J,ae,re,te,Dt,se,be,Xo,Xe,$e,$o,Ze,et,Zo,tt,rt,es,it,nt,ts,ot,st,rs,at,lt,is,ft,ct,ns,ut,ht,os,dt,pt,ss,mt,gt,as,xt,bt,ls,yt,vt,fs,wt,At,cs,Et,kt,us,St,_t,hs,Ct,Tt,so,ao,lo,fo,co;for(q=0;q<48;q+=2)J=y[0]^y[10]^y[20]^y[30]^y[40],ae=y[1]^y[11]^y[21]^y[31]^y[41],re=y[2]^y[12]^y[22]^y[32]^y[42],te=y[3]^y[13]^y[23]^y[33]^y[43],Dt=y[4]^y[14]^y[24]^y[34]^y[44],se=y[5]^y[15]^y[25]^y[35]^y[45],be=y[6]^y[16]^y[26]^y[36]^y[46],Xo=y[7]^y[17]^y[27]^y[37]^y[47],Xe=y[8]^y[18]^y[28]^y[38]^y[48],$e=y[9]^y[19]^y[29]^y[39]^y[49],R=Xe^(re<<1|te>>>31),F=$e^(te<<1|re>>>31),y[0]^=R,y[1]^=F,y[10]^=R,y[11]^=F,y[20]^=R,y[21]^=F,y[30]^=R,y[31]^=F,y[40]^=R,y[41]^=F,R=J^(Dt<<1|se>>>31),F=ae^(se<<1|Dt>>>31),y[2]^=R,y[3]^=F,y[12]^=R,y[13]^=F,y[22]^=R,y[23]^=F,y[32]^=R,y[33]^=F,y[42]^=R,y[43]^=F,R=re^(be<<1|Xo>>>31),F=te^(Xo<<1|be>>>31),y[4]^=R,y[5]^=F,y[14]^=R,y[15]^=F,y[24]^=R,y[25]^=F,y[34]^=R,y[35]^=F,y[44]^=R,y[45]^=F,R=Dt^(Xe<<1|$e>>>31),F=se^($e<<1|Xe>>>31),y[6]^=R,y[7]^=F,y[16]^=R,y[17]^=F,y[26]^=R,y[27]^=F,y[36]^=R,y[37]^=F,y[46]^=R,y[47]^=F,R=be^(J<<1|ae>>>31),F=Xo^(ae<<1|J>>>31),y[8]^=R,y[9]^=F,y[18]^=R,y[19]^=F,y[28]^=R,y[29]^=F,y[38]^=R,y[39]^=F,y[48]^=R,y[49]^=F,$o=y[0],Ze=y[1],vt=y[11]<<4|y[10]>>>28,fs=y[10]<<4|y[11]>>>28,lt=y[20]<<3|y[21]>>>29,is=y[21]<<3|y[20]>>>29,ao=y[31]<<9|y[30]>>>23,lo=y[30]<<9|y[31]>>>23,xt=y[40]<<18|y[41]>>>14,bt=y[41]<<18|y[40]>>>14,ht=y[2]<<1|y[3]>>>31,os=y[3]<<1|y[2]>>>31,et=y[13]<<12|y[12]>>>20,Zo=y[12]<<12|y[13]>>>20,wt=y[22]<<10|y[23]>>>22,At=y[23]<<10|y[22]>>>22,ft=y[33]<<13|y[32]>>>19,ct=y[32]<<13|y[33]>>>19,fo=y[42]<<2|y[43]>>>30,co=y[43]<<2|y[42]>>>30,St=y[5]<<30|y[4]>>>2,_t=y[4]<<30|y[5]>>>2,dt=y[14]<<6|y[15]>>>26,pt=y[15]<<6|y[14]>>>26,tt=y[25]<<11|y[24]>>>21,rt=y[24]<<11|y[25]>>>21,cs=y[34]<<15|y[35]>>>17,Et=y[35]<<15|y[34]>>>17,ns=y[45]<<29|y[44]>>>3,ut=y[44]<<29|y[45]>>>3,ot=y[6]<<28|y[7]>>>4,st=y[7]<<28|y[6]>>>4,hs=y[17]<<23|y[16]>>>9,Ct=y[16]<<23|y[17]>>>9,ss=y[26]<<25|y[27]>>>7,mt=y[27]<<25|y[26]>>>7,es=y[36]<<21|y[37]>>>11,it=y[37]<<21|y[36]>>>11,kt=y[47]<<24|y[46]>>>8,us=y[46]<<24|y[47]>>>8,ls=y[8]<<27|y[9]>>>5,yt=y[9]<<27|y[8]>>>5,rs=y[18]<<20|y[19]>>>12,at=y[19]<<20|y[18]>>>12,Tt=y[29]<<7|y[28]>>>25,so=y[28]<<7|y[29]>>>25,gt=y[38]<<8|y[39]>>>24,as=y[39]<<8|y[38]>>>24,nt=y[48]<<14|y[49]>>>18,ts=y[49]<<14|y[48]>>>18,y[0]=$o^~et&tt,y[1]=Ze^~Zo&rt,y[10]=ot^~rs&lt,y[11]=st^~at&is,y[20]=ht^~dt&ss,y[21]=os^~pt&mt,y[30]=ls^~vt&wt,y[31]=yt^~fs&At,y[40]=St^~hs&Tt,y[41]=_t^~Ct&so,y[2]=et^~tt&es,y[3]=Zo^~rt&it,y[12]=rs^~lt&ft,y[13]=at^~is&ct,y[22]=dt^~ss&gt,y[23]=pt^~mt&as,y[32]=vt^~wt&cs,y[33]=fs^~At&Et,y[42]=hs^~Tt&ao,y[43]=Ct^~so&lo,y[4]=tt^~es&nt,y[5]=rt^~it&ts,y[14]=lt^~ft&ns,y[15]=is^~ct&ut,y[24]=ss^~gt&xt,y[25]=mt^~as&bt,y[34]=wt^~cs&kt,y[35]=At^~Et&us,y[44]=Tt^~ao&fo,y[45]=so^~lo&co,y[6]=es^~nt&$o,y[7]=it^~ts&Ze,y[16]=ft^~ns&ot,y[17]=ct^~ut&st,y[26]=gt^~xt&ht,y[27]=as^~bt&os,y[36]=cs^~kt&ls,y[37]=Et^~us&yt,y[46]=ao^~fo&St,y[47]=lo^~co&_t,y[8]=nt^~$o&et,y[9]=ts^~Ze&Zo,y[18]=ns^~ot&rs,y[19]=ut^~st&at,y[28]=xt^~ht&dt,y[29]=bt^~os&pt,y[38]=kt^~ls&vt,y[39]=us^~yt&fs,y[48]=fo^~St&hs,y[49]=co^~_t&Ct,y[0]^=b[q],y[1]^=b[q+1]};if(s)bh.exports=h;else{for(A=0;A<x.length;++A)i[x[A]]=h[x[A]];a&&define(function(){return h})}})()});var Qa=Rt((dF,P3)=>{P3.exports=N3;function N3(r,e){if(!r)throw new Error(e||"Assertion failed")}N3.equal=function(e,t,i){if(e!=t)throw new Error(i||"Assertion failed: "+e+" != "+t)}});var I3=Rt((pF,gg)=>{typeof Object.create=="function"?gg.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:gg.exports=function(e,t){if(t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}}});var qi=Rt(Ge=>{"use strict";var _C=Qa(),CC=I3();Ge.inherits=CC;function TC(r,e){return(r.charCodeAt(e)&64512)!==55296||e<0||e+1>=r.length?!1:(r.charCodeAt(e+1)&64512)===56320}function MC(r,e){if(Array.isArray(r))return r.slice();if(!r)return[];var t=[];if(typeof r=="string")if(e){if(e==="hex")for(r=r.replace(/[^a-z0-9]+/ig,""),r.length%2!==0&&(r="0"+r),n=0;n<r.length;n+=2)t.push(parseInt(r[n]+r[n+1],16))}else for(var i=0,n=0;n<r.length;n++){var o=r.charCodeAt(n);o<128?t[i++]=o:o<2048?(t[i++]=o>>6|192,t[i++]=o&63|128):TC(r,n)?(o=65536+((o&1023)<<10)+(r.charCodeAt(++n)&1023),t[i++]=o>>18|240,t[i++]=o>>12&63|128,t[i++]=o>>6&63|128,t[i++]=o&63|128):(t[i++]=o>>12|224,t[i++]=o>>6&63|128,t[i++]=o&63|128)}else for(n=0;n<r.length;n++)t[n]=r[n]|0;return t}Ge.toArray=MC;function OC(r){for(var e="",t=0;t<r.length;t++)e+=D3(r[t].toString(16));return e}Ge.toHex=OC;function R3(r){var e=r>>>24|r>>>8&65280|r<<8&16711680|(r&255)<<24;return e>>>0}Ge.htonl=R3;function NC(r,e){for(var t="",i=0;i<r.length;i++){var n=r[i];e==="little"&&(n=R3(n)),t+=B3(n.toString(16))}return t}Ge.toHex32=NC;function D3(r){return r.length===1?"0"+r:r}Ge.zero2=D3;function B3(r){return r.length===7?"0"+r:r.length===6?"00"+r:r.length===5?"000"+r:r.length===4?"0000"+r:r.length===3?"00000"+r:r.length===2?"000000"+r:r.length===1?"0000000"+r:r}Ge.zero8=B3;function PC(r,e,t,i){var n=t-e;_C(n%4===0);for(var o=new Array(n/4),s=0,a=e;s<o.length;s++,a+=4){var l;i==="big"?l=r[a]<<24|r[a+1]<<16|r[a+2]<<8|r[a+3]:l=r[a+3]<<24|r[a+2]<<16|r[a+1]<<8|r[a],o[s]=l>>>0}return o}Ge.join32=PC;function IC(r,e){for(var t=new Array(r.length*4),i=0,n=0;i<r.length;i++,n+=4){var o=r[i];e==="big"?(t[n]=o>>>24,t[n+1]=o>>>16&255,t[n+2]=o>>>8&255,t[n+3]=o&255):(t[n+3]=o>>>24,t[n+2]=o>>>16&255,t[n+1]=o>>>8&255,t[n]=o&255)}return t}Ge.split32=IC;function RC(r,e){return r>>>e|r<<32-e}Ge.rotr32=RC;function DC(r,e){return r<<e|r>>>32-e}Ge.rotl32=DC;function BC(r,e){return r+e>>>0}Ge.sum32=BC;function FC(r,e,t){return r+e+t>>>0}Ge.sum32_3=FC;function LC(r,e,t,i){return r+e+t+i>>>0}Ge.sum32_4=LC;function UC(r,e,t,i,n){return r+e+t+i+n>>>0}Ge.sum32_5=UC;function VC(r,e,t,i){var n=r[e],o=r[e+1],s=i+o>>>0,a=(s<i?1:0)+t+n;r[e]=a>>>0,r[e+1]=s}Ge.sum64=VC;function qC(r,e,t,i){var n=e+i>>>0,o=(n<e?1:0)+r+t;return o>>>0}Ge.sum64_hi=qC;function jC(r,e,t,i){var n=e+i;return n>>>0}Ge.sum64_lo=jC;function zC(r,e,t,i,n,o,s,a){var l=0,f=e;f=f+i>>>0,l+=f<e?1:0,f=f+o>>>0,l+=f<o?1:0,f=f+a>>>0,l+=f<a?1:0;var c=r+t+n+s+l;return c>>>0}Ge.sum64_4_hi=zC;function HC(r,e,t,i,n,o,s,a){var l=e+i+o+a;return l>>>0}Ge.sum64_4_lo=HC;function WC(r,e,t,i,n,o,s,a,l,f){var c=0,u=e;u=u+i>>>0,c+=u<e?1:0,u=u+o>>>0,c+=u<o?1:0,u=u+a>>>0,c+=u<a?1:0,u=u+f>>>0,c+=u<f?1:0;var d=r+t+n+s+l+c;return d>>>0}Ge.sum64_5_hi=WC;function GC(r,e,t,i,n,o,s,a,l,f){var c=e+i+o+a+f;return c>>>0}Ge.sum64_5_lo=GC;function KC(r,e,t){var i=e<<32-t|r>>>t;return i>>>0}Ge.rotr64_hi=KC;function QC(r,e,t){var i=r<<32-t|e>>>t;return i>>>0}Ge.rotr64_lo=QC;function JC(r,e,t){return r>>>t}Ge.shr64_hi=JC;function YC(r,e,t){var i=r<<32-t|e>>>t;return i>>>0}Ge.shr64_lo=YC});var Ja=Rt(L3=>{"use strict";var F3=qi(),XC=Qa();function Uh(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}L3.BlockHash=Uh;Uh.prototype.update=function(e,t){if(e=F3.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var i=e.length%this._delta8;this.pending=e.slice(e.length-i,e.length),this.pending.length===0&&(this.pending=null),e=F3.join32(e,0,e.length-i,this.endian);for(var n=0;n<e.length;n+=this._delta32)this._update(e,n,n+this._delta32)}return this};Uh.prototype.digest=function(e){return this.update(this._pad()),XC(this.pending===null),this._digest(e)};Uh.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,i=t-(e+this.padLength)%t,n=new Array(i+this.padLength);n[0]=128;for(var o=1;o<i;o++)n[o]=0;if(e<<=3,this.endian==="big"){for(var s=8;s<this.padLength;s++)n[o++]=0;n[o++]=0,n[o++]=0,n[o++]=0,n[o++]=0,n[o++]=e>>>24&255,n[o++]=e>>>16&255,n[o++]=e>>>8&255,n[o++]=e&255}else for(n[o++]=e&255,n[o++]=e>>>8&255,n[o++]=e>>>16&255,n[o++]=e>>>24&255,n[o++]=0,n[o++]=0,n[o++]=0,n[o++]=0,s=8;s<this.padLength;s++)n[o++]=0;return n}});var xg=Rt(Gn=>{"use strict";var $C=qi(),mn=$C.rotr32;function ZC(r,e,t,i){if(r===0)return U3(e,t,i);if(r===1||r===3)return q3(e,t,i);if(r===2)return V3(e,t,i)}Gn.ft_1=ZC;function U3(r,e,t){return r&e^~r&t}Gn.ch32=U3;function V3(r,e,t){return r&e^r&t^e&t}Gn.maj32=V3;function q3(r,e,t){return r^e^t}Gn.p32=q3;function eT(r){return mn(r,2)^mn(r,13)^mn(r,22)}Gn.s0_256=eT;function tT(r){return mn(r,6)^mn(r,11)^mn(r,25)}Gn.s1_256=tT;function rT(r){return mn(r,7)^mn(r,18)^r>>>3}Gn.g0_256=rT;function iT(r){return mn(r,17)^mn(r,19)^r>>>10}Gn.g1_256=iT});var H3=Rt((bF,z3)=>{"use strict";var Ya=qi(),nT=Ja(),oT=xg(),bg=Ya.rotl32,qf=Ya.sum32,sT=Ya.sum32_5,aT=oT.ft_1,j3=nT.BlockHash,lT=[1518500249,1859775393,2400959708,3395469782];function gn(){if(!(this instanceof gn))return new gn;j3.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}Ya.inherits(gn,j3);z3.exports=gn;gn.blockSize=512;gn.outSize=160;gn.hmacStrength=80;gn.padLength=64;gn.prototype._update=function(e,t){for(var i=this.W,n=0;n<16;n++)i[n]=e[t+n];for(;n<i.length;n++)i[n]=bg(i[n-3]^i[n-8]^i[n-14]^i[n-16],1);var o=this.h[0],s=this.h[1],a=this.h[2],l=this.h[3],f=this.h[4];for(n=0;n<i.length;n++){var c=~~(n/20),u=sT(bg(o,5),aT(c,s,a,l),f,i[n],lT[c]);f=l,l=a,a=bg(s,30),s=o,o=u}this.h[0]=qf(this.h[0],o),this.h[1]=qf(this.h[1],s),this.h[2]=qf(this.h[2],a),this.h[3]=qf(this.h[3],l),this.h[4]=qf(this.h[4],f)};gn.prototype._digest=function(e){return e==="hex"?Ya.toHex32(this.h,"big"):Ya.split32(this.h,"big")}});var yg=Rt((yF,G3)=>{"use strict";var Xa=qi(),fT=Ja(),$a=xg(),cT=Qa(),ji=Xa.sum32,uT=Xa.sum32_4,hT=Xa.sum32_5,dT=$a.ch32,pT=$a.maj32,mT=$a.s0_256,gT=$a.s1_256,xT=$a.g0_256,bT=$a.g1_256,W3=fT.BlockHash,yT=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function xn(){if(!(this instanceof xn))return new xn;W3.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=yT,this.W=new Array(64)}Xa.inherits(xn,W3);G3.exports=xn;xn.blockSize=512;xn.outSize=256;xn.hmacStrength=192;xn.padLength=64;xn.prototype._update=function(e,t){for(var i=this.W,n=0;n<16;n++)i[n]=e[t+n];for(;n<i.length;n++)i[n]=uT(bT(i[n-2]),i[n-7],xT(i[n-15]),i[n-16]);var o=this.h[0],s=this.h[1],a=this.h[2],l=this.h[3],f=this.h[4],c=this.h[5],u=this.h[6],d=this.h[7];for(cT(this.k.length===i.length),n=0;n<i.length;n++){var p=hT(d,gT(f),dT(f,c,u),this.k[n],i[n]),g=ji(mT(o),pT(o,s,a));d=u,u=c,c=f,f=ji(l,p),l=a,a=s,s=o,o=ji(p,g)}this.h[0]=ji(this.h[0],o),this.h[1]=ji(this.h[1],s),this.h[2]=ji(this.h[2],a),this.h[3]=ji(this.h[3],l),this.h[4]=ji(this.h[4],f),this.h[5]=ji(this.h[5],c),this.h[6]=ji(this.h[6],u),this.h[7]=ji(this.h[7],d)};xn.prototype._digest=function(e){return e==="hex"?Xa.toHex32(this.h,"big"):Xa.split32(this.h,"big")}});var J3=Rt((vF,Q3)=>{"use strict";var vg=qi(),K3=yg();function Kn(){if(!(this instanceof Kn))return new Kn;K3.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}vg.inherits(Kn,K3);Q3.exports=Kn;Kn.blockSize=512;Kn.outSize=224;Kn.hmacStrength=192;Kn.padLength=64;Kn.prototype._digest=function(e){return e==="hex"?vg.toHex32(this.h.slice(0,7),"big"):vg.split32(this.h.slice(0,7),"big")}});var Eg=Rt((wF,Z3)=>{"use strict";var Gr=qi(),vT=Ja(),wT=Qa(),bn=Gr.rotr64_hi,yn=Gr.rotr64_lo,Y3=Gr.shr64_hi,X3=Gr.shr64_lo,Ro=Gr.sum64,wg=Gr.sum64_hi,Ag=Gr.sum64_lo,AT=Gr.sum64_4_hi,ET=Gr.sum64_4_lo,kT=Gr.sum64_5_hi,ST=Gr.sum64_5_lo,$3=vT.BlockHash,_T=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function zi(){if(!(this instanceof zi))return new zi;$3.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=_T,this.W=new Array(160)}Gr.inherits(zi,$3);Z3.exports=zi;zi.blockSize=1024;zi.outSize=512;zi.hmacStrength=192;zi.padLength=128;zi.prototype._prepareBlock=function(e,t){for(var i=this.W,n=0;n<32;n++)i[n]=e[t+n];for(;n<i.length;n+=2){var o=FT(i[n-4],i[n-3]),s=LT(i[n-4],i[n-3]),a=i[n-14],l=i[n-13],f=DT(i[n-30],i[n-29]),c=BT(i[n-30],i[n-29]),u=i[n-32],d=i[n-31];i[n]=AT(o,s,a,l,f,c,u,d),i[n+1]=ET(o,s,a,l,f,c,u,d)}};zi.prototype._update=function(e,t){this._prepareBlock(e,t);var i=this.W,n=this.h[0],o=this.h[1],s=this.h[2],a=this.h[3],l=this.h[4],f=this.h[5],c=this.h[6],u=this.h[7],d=this.h[8],p=this.h[9],g=this.h[10],b=this.h[11],k=this.h[12],_=this.h[13],P=this.h[14],N=this.h[15];wT(this.k.length===i.length);for(var I=0;I<i.length;I+=2){var D=P,B=N,V=IT(d,p),W=RT(d,p),Y=CT(d,p,g,b,k,_),$=TT(d,p,g,b,k,_),Z=this.k[I],ce=this.k[I+1],M=i[I],h=i[I+1],x=kT(D,B,V,W,Y,$,Z,ce,M,h),A=ST(D,B,V,W,Y,$,Z,ce,M,h);D=NT(n,o),B=PT(n,o),V=MT(n,o,s,a,l,f),W=OT(n,o,s,a,l,f);var S=wg(D,B,V,W),C=Ag(D,B,V,W);P=k,N=_,k=g,_=b,g=d,b=p,d=wg(c,u,x,A),p=Ag(u,u,x,A),c=l,u=f,l=s,f=a,s=n,a=o,n=wg(x,A,S,C),o=Ag(x,A,S,C)}Ro(this.h,0,n,o),Ro(this.h,2,s,a),Ro(this.h,4,l,f),Ro(this.h,6,c,u),Ro(this.h,8,d,p),Ro(this.h,10,g,b),Ro(this.h,12,k,_),Ro(this.h,14,P,N)};zi.prototype._digest=function(e){return e==="hex"?Gr.toHex32(this.h,"big"):Gr.split32(this.h,"big")};function CT(r,e,t,i,n){var o=r&t^~r&n;return o<0&&(o+=4294967296),o}function TT(r,e,t,i,n,o){var s=e&i^~e&o;return s<0&&(s+=4294967296),s}function MT(r,e,t,i,n){var o=r&t^r&n^t&n;return o<0&&(o+=4294967296),o}function OT(r,e,t,i,n,o){var s=e&i^e&o^i&o;return s<0&&(s+=4294967296),s}function NT(r,e){var t=bn(r,e,28),i=bn(e,r,2),n=bn(e,r,7),o=t^i^n;return o<0&&(o+=4294967296),o}function PT(r,e){var t=yn(r,e,28),i=yn(e,r,2),n=yn(e,r,7),o=t^i^n;return o<0&&(o+=4294967296),o}function IT(r,e){var t=bn(r,e,14),i=bn(r,e,18),n=bn(e,r,9),o=t^i^n;return o<0&&(o+=4294967296),o}function RT(r,e){var t=yn(r,e,14),i=yn(r,e,18),n=yn(e,r,9),o=t^i^n;return o<0&&(o+=4294967296),o}function DT(r,e){var t=bn(r,e,1),i=bn(r,e,8),n=Y3(r,e,7),o=t^i^n;return o<0&&(o+=4294967296),o}function BT(r,e){var t=yn(r,e,1),i=yn(r,e,8),n=X3(r,e,7),o=t^i^n;return o<0&&(o+=4294967296),o}function FT(r,e){var t=bn(r,e,19),i=bn(e,r,29),n=Y3(r,e,6),o=t^i^n;return o<0&&(o+=4294967296),o}function LT(r,e){var t=yn(r,e,19),i=yn(e,r,29),n=X3(r,e,6),o=t^i^n;return o<0&&(o+=4294967296),o}});var rA=Rt((AF,tA)=>{"use strict";var kg=qi(),eA=Eg();function Qn(){if(!(this instanceof Qn))return new Qn;eA.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}kg.inherits(Qn,eA);tA.exports=Qn;Qn.blockSize=1024;Qn.outSize=384;Qn.hmacStrength=192;Qn.padLength=128;Qn.prototype._digest=function(e){return e==="hex"?kg.toHex32(this.h.slice(0,12),"big"):kg.split32(this.h.slice(0,12),"big")}});var iA=Rt(Za=>{"use strict";Za.sha1=H3();Za.sha224=J3();Za.sha256=yg();Za.sha384=rA();Za.sha512=Eg()});var fA=Rt(lA=>{"use strict";var Rs=qi(),UT=Ja(),Vh=Rs.rotl32,nA=Rs.sum32,jf=Rs.sum32_3,oA=Rs.sum32_4,aA=UT.BlockHash;function vn(){if(!(this instanceof vn))return new vn;aA.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}Rs.inherits(vn,aA);lA.ripemd160=vn;vn.blockSize=512;vn.outSize=160;vn.hmacStrength=192;vn.padLength=64;vn.prototype._update=function(e,t){for(var i=this.h[0],n=this.h[1],o=this.h[2],s=this.h[3],a=this.h[4],l=i,f=n,c=o,u=s,d=a,p=0;p<80;p++){var g=nA(Vh(oA(i,sA(p,n,o,s),e[jT[p]+t],VT(p)),HT[p]),a);i=a,a=s,s=Vh(o,10),o=n,n=g,g=nA(Vh(oA(l,sA(79-p,f,c,u),e[zT[p]+t],qT(p)),WT[p]),d),l=d,d=u,u=Vh(c,10),c=f,f=g}g=jf(this.h[1],o,u),this.h[1]=jf(this.h[2],s,d),this.h[2]=jf(this.h[3],a,l),this.h[3]=jf(this.h[4],i,f),this.h[4]=jf(this.h[0],n,c),this.h[0]=g};vn.prototype._digest=function(e){return e==="hex"?Rs.toHex32(this.h,"little"):Rs.split32(this.h,"little")};function sA(r,e,t,i){return r<=15?e^t^i:r<=31?e&t|~e&i:r<=47?(e|~t)^i:r<=63?e&i|t&~i:e^(t|~i)}function VT(r){return r<=15?0:r<=31?1518500249:r<=47?1859775393:r<=63?2400959708:2840853838}function qT(r){return r<=15?1352829926:r<=31?1548603684:r<=47?1836072691:r<=63?2053994217:0}var jT=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],zT=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],HT=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],WT=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]});var uA=Rt((SF,cA)=>{"use strict";var GT=qi(),KT=Qa();function el(r,e,t){if(!(this instanceof el))return new el(r,e,t);this.Hash=r,this.blockSize=r.blockSize/8,this.outSize=r.outSize/8,this.inner=null,this.outer=null,this._init(GT.toArray(e,t))}cA.exports=el;el.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),KT(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=new this.Hash().update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=new this.Hash().update(e)};el.prototype.update=function(e,t){return this.inner.update(e,t),this};el.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)}});var Sg=Rt(hA=>{var xr=hA;xr.utils=qi();xr.common=Ja();xr.sha=iA();xr.ripemd=fA();xr.hmac=uA();xr.sha1=xr.sha.sha1;xr.sha256=xr.sha.sha256;xr.sha224=xr.sha.sha224;xr.sha384=xr.sha.sha384;xr.sha512=xr.sha.sha512;xr.ripemd160=xr.ripemd.ripemd160});var Hg=Rt((zg,VA)=>{"use strict";(function(r){function e(v){return parseInt(v)===v}function t(v){if(!e(v.length))return!1;for(var T=0;T<v.length;T++)if(!e(v[T])||v[T]<0||v[T]>255)return!1;return!0}function i(v,T){if(v.buffer&&ArrayBuffer.isView(v)&&v.name==="Uint8Array")return T&&(v.slice?v=v.slice():v=Array.prototype.slice.call(v)),v;if(Array.isArray(v)){if(!t(v))throw new Error("Array contains invalid value: "+v);return new Uint8Array(v)}if(e(v.length)&&t(v))return new Uint8Array(v);throw new Error("unsupported array-like object")}function n(v){return new Uint8Array(v)}function o(v,T,E,m,w){(m!=null||w!=null)&&(v.slice?v=v.slice(m,w):v=Array.prototype.slice.call(v,m,w)),T.set(v,E)}var s=function(){function v(E){var m=[],w=0;for(E=encodeURI(E);w<E.length;){var z=E.charCodeAt(w++);z===37?(m.push(parseInt(E.substr(w,2),16)),w+=2):m.push(z)}return i(m)}function T(E){for(var m=[],w=0;w<E.length;){var z=E[w];z<128?(m.push(String.fromCharCode(z)),w++):z>191&&z<224?(m.push(String.fromCharCode((z&31)<<6|E[w+1]&63)),w+=2):(m.push(String.fromCharCode((z&15)<<12|(E[w+1]&63)<<6|E[w+2]&63)),w+=3)}return m.join("")}return{toBytes:v,fromBytes:T}}(),a=function(){function v(m){for(var w=[],z=0;z<m.length;z+=2)w.push(parseInt(m.substr(z,2),16));return w}var T="0123456789abcdef";function E(m){for(var w=[],z=0;z<m.length;z++){var y=m[z];w.push(T[(y&240)>>4]+T[y&15])}return w.join("")}return{toBytes:v,fromBytes:E}}(),l={16:10,24:12,32:14},f=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],c=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],u=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],d=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],p=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],g=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],b=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],k=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],_=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],P=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],N=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],I=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],D=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],B=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],V=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function W(v){for(var T=[],E=0;E<v.length;E+=4)T.push(v[E]<<24|v[E+1]<<16|v[E+2]<<8|v[E+3]);return T}var Y=function(v){if(!(this instanceof Y))throw Error("AES must be instanitated with `new`");Object.defineProperty(this,"key",{value:i(v,!0)}),this._prepare()};Y.prototype._prepare=function(){var v=l[this.key.length];if(v==null)throw new Error("invalid key size (must be 16, 24 or 32 bytes)");this._Ke=[],this._Kd=[];for(var T=0;T<=v;T++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);for(var E=(v+1)*4,m=this.key.length/4,w=W(this.key),z,T=0;T<m;T++)z=T>>2,this._Ke[z][T%4]=w[T],this._Kd[v-z][T%4]=w[T];for(var y=0,R=m,F;R<E;){if(F=w[m-1],w[0]^=c[F>>16&255]<<24^c[F>>8&255]<<16^c[F&255]<<8^c[F>>24&255]^f[y]<<24,y+=1,m!=8)for(var T=1;T<m;T++)w[T]^=w[T-1];else{for(var T=1;T<m/2;T++)w[T]^=w[T-1];F=w[m/2-1],w[m/2]^=c[F&255]^c[F>>8&255]<<8^c[F>>16&255]<<16^c[F>>24&255]<<24;for(var T=m/2+1;T<m;T++)w[T]^=w[T-1]}for(var T=0,q,J;T<m&&R<E;)q=R>>2,J=R%4,this._Ke[q][J]=w[T],this._Kd[v-q][J]=w[T++],R++}for(var q=1;q<v;q++)for(var J=0;J<4;J++)F=this._Kd[q][J],this._Kd[q][J]=I[F>>24&255]^D[F>>16&255]^B[F>>8&255]^V[F&255]},Y.prototype.encrypt=function(v){if(v.length!=16)throw new Error("invalid plaintext size (must be 16 bytes)");for(var T=this._Ke.length-1,E=[0,0,0,0],m=W(v),w=0;w<4;w++)m[w]^=this._Ke[0][w];for(var z=1;z<T;z++){for(var w=0;w<4;w++)E[w]=d[m[w]>>24&255]^p[m[(w+1)%4]>>16&255]^g[m[(w+2)%4]>>8&255]^b[m[(w+3)%4]&255]^this._Ke[z][w];m=E.slice()}for(var y=n(16),R,w=0;w<4;w++)R=this._Ke[T][w],y[4*w]=(c[m[w]>>24&255]^R>>24)&255,y[4*w+1]=(c[m[(w+1)%4]>>16&255]^R>>16)&255,y[4*w+2]=(c[m[(w+2)%4]>>8&255]^R>>8)&255,y[4*w+3]=(c[m[(w+3)%4]&255]^R)&255;return y},Y.prototype.decrypt=function(v){if(v.length!=16)throw new Error("invalid ciphertext size (must be 16 bytes)");for(var T=this._Kd.length-1,E=[0,0,0,0],m=W(v),w=0;w<4;w++)m[w]^=this._Kd[0][w];for(var z=1;z<T;z++){for(var w=0;w<4;w++)E[w]=k[m[w]>>24&255]^_[m[(w+3)%4]>>16&255]^P[m[(w+2)%4]>>8&255]^N[m[(w+1)%4]&255]^this._Kd[z][w];m=E.slice()}for(var y=n(16),R,w=0;w<4;w++)R=this._Kd[T][w],y[4*w]=(u[m[w]>>24&255]^R>>24)&255,y[4*w+1]=(u[m[(w+3)%4]>>16&255]^R>>16)&255,y[4*w+2]=(u[m[(w+2)%4]>>8&255]^R>>8)&255,y[4*w+3]=(u[m[(w+1)%4]&255]^R)&255;return y};var $=function(v){if(!(this instanceof $))throw Error("AES must be instanitated with `new`");this.description="Electronic Code Block",this.name="ecb",this._aes=new Y(v)};$.prototype.encrypt=function(v){if(v=i(v),v.length%16!==0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var T=n(v.length),E=n(16),m=0;m<v.length;m+=16)o(v,E,0,m,m+16),E=this._aes.encrypt(E),o(E,T,m);return T},$.prototype.decrypt=function(v){if(v=i(v),v.length%16!==0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var T=n(v.length),E=n(16),m=0;m<v.length;m+=16)o(v,E,0,m,m+16),E=this._aes.decrypt(E),o(E,T,m);return T};var Z=function(v,T){if(!(this instanceof Z))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Block Chaining",this.name="cbc",!T)T=n(16);else if(T.length!=16)throw new Error("invalid initialation vector size (must be 16 bytes)");this._lastCipherblock=i(T,!0),this._aes=new Y(v)};Z.prototype.encrypt=function(v){if(v=i(v),v.length%16!==0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var T=n(v.length),E=n(16),m=0;m<v.length;m+=16){o(v,E,0,m,m+16);for(var w=0;w<16;w++)E[w]^=this._lastCipherblock[w];this._lastCipherblock=this._aes.encrypt(E),o(this._lastCipherblock,T,m)}return T},Z.prototype.decrypt=function(v){if(v=i(v),v.length%16!==0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var T=n(v.length),E=n(16),m=0;m<v.length;m+=16){o(v,E,0,m,m+16),E=this._aes.decrypt(E);for(var w=0;w<16;w++)T[m+w]=E[w]^this._lastCipherblock[w];o(v,this._lastCipherblock,0,m,m+16)}return T};var ce=function(v,T,E){if(!(this instanceof ce))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Feedback",this.name="cfb",!T)T=n(16);else if(T.length!=16)throw new Error("invalid initialation vector size (must be 16 size)");E||(E=1),this.segmentSize=E,this._shiftRegister=i(T,!0),this._aes=new Y(v)};ce.prototype.encrypt=function(v){if(v.length%this.segmentSize!=0)throw new Error("invalid plaintext size (must be segmentSize bytes)");for(var T=i(v,!0),E,m=0;m<T.length;m+=this.segmentSize){E=this._aes.encrypt(this._shiftRegister);for(var w=0;w<this.segmentSize;w++)T[m+w]^=E[w];o(this._shiftRegister,this._shiftRegister,0,this.segmentSize),o(T,this._shiftRegister,16-this.segmentSize,m,m+this.segmentSize)}return T},ce.prototype.decrypt=function(v){if(v.length%this.segmentSize!=0)throw new Error("invalid ciphertext size (must be segmentSize bytes)");for(var T=i(v,!0),E,m=0;m<T.length;m+=this.segmentSize){E=this._aes.encrypt(this._shiftRegister);for(var w=0;w<this.segmentSize;w++)T[m+w]^=E[w];o(this._shiftRegister,this._shiftRegister,0,this.segmentSize),o(v,this._shiftRegister,16-this.segmentSize,m,m+this.segmentSize)}return T};var M=function(v,T){if(!(this instanceof M))throw Error("AES must be instanitated with `new`");if(this.description="Output Feedback",this.name="ofb",!T)T=n(16);else if(T.length!=16)throw new Error("invalid initialation vector size (must be 16 bytes)");this._lastPrecipher=i(T,!0),this._lastPrecipherIndex=16,this._aes=new Y(v)};M.prototype.encrypt=function(v){for(var T=i(v,!0),E=0;E<T.length;E++)this._lastPrecipherIndex===16&&(this._lastPrecipher=this._aes.encrypt(this._lastPrecipher),this._lastPrecipherIndex=0),T[E]^=this._lastPrecipher[this._lastPrecipherIndex++];return T},M.prototype.decrypt=M.prototype.encrypt;var h=function(v){if(!(this instanceof h))throw Error("Counter must be instanitated with `new`");v!==0&&!v&&(v=1),typeof v=="number"?(this._counter=n(16),this.setValue(v)):this.setBytes(v)};h.prototype.setValue=function(v){if(typeof v!="number"||parseInt(v)!=v)throw new Error("invalid counter value (must be an integer)");for(var T=15;T>=0;--T)this._counter[T]=v%256,v=v>>8},h.prototype.setBytes=function(v){if(v=i(v,!0),v.length!=16)throw new Error("invalid counter bytes size (must be 16 bytes)");this._counter=v},h.prototype.increment=function(){for(var v=15;v>=0;v--)if(this._counter[v]===255)this._counter[v]=0;else{this._counter[v]++;break}};var x=function(v,T){if(!(this instanceof x))throw Error("AES must be instanitated with `new`");this.description="Counter",this.name="ctr",T instanceof h||(T=new h(T)),this._counter=T,this._remainingCounter=null,this._remainingCounterIndex=16,this._aes=new Y(v)};x.prototype.encrypt=function(v){for(var T=i(v,!0),E=0;E<T.length;E++)this._remainingCounterIndex===16&&(this._remainingCounter=this._aes.encrypt(this._counter._counter),this._remainingCounterIndex=0,this._counter.increment()),T[E]^=this._remainingCounter[this._remainingCounterIndex++];return T},x.prototype.decrypt=x.prototype.encrypt;function A(v){v=i(v,!0);var T=16-v.length%16,E=n(v.length+T);o(v,E);for(var m=v.length;m<E.length;m++)E[m]=T;return E}function S(v){if(v=i(v,!0),v.length<16)throw new Error("PKCS#7 invalid length");var T=v[v.length-1];if(T>16)throw new Error("PKCS#7 padding byte out of range");for(var E=v.length-T,m=0;m<T;m++)if(v[E+m]!==T)throw new Error("PKCS#7 invalid padding byte");var w=n(E);return o(v,w,0,0,E),w}var C={AES:Y,Counter:h,ModeOfOperation:{ecb:$,cbc:Z,cfb:ce,ofb:M,ctr:x},utils:{hex:a,utf8:s},padding:{pkcs7:{pad:A,strip:S}},_arrayTest:{coerceArray:i,createArray:n,copyArray:o}};typeof zg<"u"?VA.exports=C:typeof define=="function"&&define.amd?define(C):(r.aesjs&&(C._aesjs=r.aesjs),r.aesjs=C)})(zg)});var zA=Rt((Jg,jA)=>{"use strict";(function(r){function t(p){let g=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),b=1779033703,k=3144134277,_=1013904242,P=2773480762,N=1359893119,I=2600822924,D=528734635,B=1541459225,V=new Uint32Array(64);function W(x){let A=0,S=x.length;for(;S>=64;){let C=b,v=k,T=_,E=P,m=N,w=I,z=D,y=B,R,F,q,J,ae;for(F=0;F<16;F++)q=A+F*4,V[F]=(x[q]&255)<<24|(x[q+1]&255)<<16|(x[q+2]&255)<<8|x[q+3]&255;for(F=16;F<64;F++)R=V[F-2],J=(R>>>17|R<<32-17)^(R>>>19|R<<32-19)^R>>>10,R=V[F-15],ae=(R>>>7|R<<32-7)^(R>>>18|R<<32-18)^R>>>3,V[F]=(J+V[F-7]|0)+(ae+V[F-16]|0)|0;for(F=0;F<64;F++)J=(((m>>>6|m<<32-6)^(m>>>11|m<<32-11)^(m>>>25|m<<32-25))+(m&w^~m&z)|0)+(y+(g[F]+V[F]|0)|0)|0,ae=((C>>>2|C<<32-2)^(C>>>13|C<<32-13)^(C>>>22|C<<32-22))+(C&v^C&T^v&T)|0,y=z,z=w,w=m,m=E+J|0,E=T,T=v,v=C,C=J+ae|0;b=b+C|0,k=k+v|0,_=_+T|0,P=P+E|0,N=N+m|0,I=I+w|0,D=D+z|0,B=B+y|0,A+=64,S-=64}}W(p);let Y,$=p.length%64,Z=p.length/536870912|0,ce=p.length<<3,M=$<56?56:120,h=p.slice(p.length-$,p.length);for(h.push(128),Y=$+1;Y<M;Y++)h.push(0);return h.push(Z>>>24&255),h.push(Z>>>16&255),h.push(Z>>>8&255),h.push(Z>>>0&255),h.push(ce>>>24&255),h.push(ce>>>16&255),h.push(ce>>>8&255),h.push(ce>>>0&255),W(h),[b>>>24&255,b>>>16&255,b>>>8&255,b>>>0&255,k>>>24&255,k>>>16&255,k>>>8&255,k>>>0&255,_>>>24&255,_>>>16&255,_>>>8&255,_>>>0&255,P>>>24&255,P>>>16&255,P>>>8&255,P>>>0&255,N>>>24&255,N>>>16&255,N>>>8&255,N>>>0&255,I>>>24&255,I>>>16&255,I>>>8&255,I>>>0&255,D>>>24&255,D>>>16&255,D>>>8&255,D>>>0&255,B>>>24&255,B>>>16&255,B>>>8&255,B>>>0&255]}function i(p,g,b){p=p.length<=64?p:t(p);let k=64+g.length+4,_=new Array(k),P=new Array(64),N,I=[];for(N=0;N<64;N++)_[N]=54;for(N=0;N<p.length;N++)_[N]^=p[N];for(N=0;N<g.length;N++)_[64+N]=g[N];for(N=k-4;N<k;N++)_[N]=0;for(N=0;N<64;N++)P[N]=92;for(N=0;N<p.length;N++)P[N]^=p[N];function D(){for(let B=k-1;B>=k-4;B--){if(_[B]++,_[B]<=255)return;_[B]=0}}for(;b>=32;)D(),I=I.concat(t(P.concat(t(_)))),b-=32;return b>0&&(D(),I=I.concat(t(P.concat(t(_))).slice(0,b))),I}function n(p,g,b,k,_){let P;for(l(p,(2*b-1)*16,_,0,16),P=0;P<2*b;P++)a(p,P*16,_,16),s(_,k),l(_,0,p,g+P*16,16);for(P=0;P<b;P++)l(p,g+P*2*16,p,P*16,16);for(P=0;P<b;P++)l(p,g+(P*2+1)*16,p,(P+b)*16,16)}function o(p,g){return p<<g|p>>>32-g}function s(p,g){l(p,0,g,0,16);for(let b=8;b>0;b-=2)g[4]^=o(g[0]+g[12],7),g[8]^=o(g[4]+g[0],9),g[12]^=o(g[8]+g[4],13),g[0]^=o(g[12]+g[8],18),g[9]^=o(g[5]+g[1],7),g[13]^=o(g[9]+g[5],9),g[1]^=o(g[13]+g[9],13),g[5]^=o(g[1]+g[13],18),g[14]^=o(g[10]+g[6],7),g[2]^=o(g[14]+g[10],9),g[6]^=o(g[2]+g[14],13),g[10]^=o(g[6]+g[2],18),g[3]^=o(g[15]+g[11],7),g[7]^=o(g[3]+g[15],9),g[11]^=o(g[7]+g[3],13),g[15]^=o(g[11]+g[7],18),g[1]^=o(g[0]+g[3],7),g[2]^=o(g[1]+g[0],9),g[3]^=o(g[2]+g[1],13),g[0]^=o(g[3]+g[2],18),g[6]^=o(g[5]+g[4],7),g[7]^=o(g[6]+g[5],9),g[4]^=o(g[7]+g[6],13),g[5]^=o(g[4]+g[7],18),g[11]^=o(g[10]+g[9],7),g[8]^=o(g[11]+g[10],9),g[9]^=o(g[8]+g[11],13),g[10]^=o(g[9]+g[8],18),g[12]^=o(g[15]+g[14],7),g[13]^=o(g[12]+g[15],9),g[14]^=o(g[13]+g[12],13),g[15]^=o(g[14]+g[13],18);for(let b=0;b<16;++b)p[b]+=g[b]}function a(p,g,b,k){for(let _=0;_<k;_++)b[_]^=p[g+_]}function l(p,g,b,k,_){for(;_--;)b[k++]=p[g++]}function f(p){if(!p||typeof p.length!="number")return!1;for(let g=0;g<p.length;g++){let b=p[g];if(typeof b!="number"||b%1||b<0||b>=256)return!1}return!0}function c(p,g){if(typeof p!="number"||p%1)throw new Error("invalid "+g);return p}function u(p,g,b,k,_,P,N){if(b=c(b,"N"),k=c(k,"r"),_=c(_,"p"),P=c(P,"dkLen"),b===0||(b&b-1)!==0)throw new Error("N must be power of 2");if(b>2147483647/128/k)throw new Error("N too large");if(k>2147483647/128/_)throw new Error("r too large");if(!f(p))throw new Error("password must be an array or buffer");if(p=Array.prototype.slice.call(p),!f(g))throw new Error("salt must be an array or buffer");g=Array.prototype.slice.call(g);let I=i(p,g,_*128*k),D=new Uint32Array(_*32*k);for(let m=0;m<D.length;m++){let w=m*4;D[m]=(I[w+3]&255)<<24|(I[w+2]&255)<<16|(I[w+1]&255)<<8|(I[w+0]&255)<<0}let B=new Uint32Array(64*k),V=new Uint32Array(32*k*b),W=32*k,Y=new Uint32Array(16),$=new Uint32Array(16),Z=_*b*2,ce=0,M=null,h=!1,x=0,A=0,S,C,v=N?parseInt(1e3/k):4294967295,T=typeof setImmediate<"u"?setImmediate:setTimeout,E=function(){if(h)return N(new Error("cancelled"),ce/Z);let m;switch(x){case 0:C=A*32*k,l(D,C,B,0,W),x=1,S=0;case 1:m=b-S,m>v&&(m=v);for(let z=0;z<m;z++)l(B,0,V,(S+z)*W,W),n(B,W,k,Y,$);if(S+=m,ce+=m,N){let z=parseInt(1e3*ce/Z);if(z!==M){if(h=N(null,ce/Z),h)break;M=z}}if(S<b)break;S=0,x=2;case 2:m=b-S,m>v&&(m=v);for(let z=0;z<m;z++){let y=(2*k-1)*16,R=B[y]&b-1;a(V,R*W,B,W),n(B,W,k,Y,$)}if(S+=m,ce+=m,N){let z=parseInt(1e3*ce/Z);if(z!==M){if(h=N(null,ce/Z),h)break;M=z}}if(S<b)break;if(l(B,0,D,C,W),A++,A<_){x=0;break}I=[];for(let z=0;z<D.length;z++)I.push(D[z]>>0&255),I.push(D[z]>>8&255),I.push(D[z]>>16&255),I.push(D[z]>>24&255);let w=i(p,I,P);return N&&N(null,1,w),w}N&&T(E)};if(!N)for(;;){let m=E();if(m!=null)return m}E()}let d={scrypt:function(p,g,b,k,_,P,N){return new Promise(function(I,D){let B=0;N&&N(0),u(p,g,b,k,_,P,function(V,W,Y){if(V)D(V);else if(Y)N&&B!==1&&N(1),I(new Uint8Array(Y));else if(N&&W!==B)return B=W,N(W)})})},syncScrypt:function(p,g,b,k,_,P){return new Uint8Array(u(p,g,b,k,_,P))}};typeof Jg<"u"?jA.exports=d:typeof define=="function"&&define.amd?define(d):r&&(r.scrypt&&(r._scrypt=r.scrypt),r.scrypt=d)})(Jg)});var d6=Rt((pV,h6)=>{"use strict";var ud="qpzry9x8gf2tvdw0s3jn54khce6mua7l",ex={};for(Zf=0;Zf<ud.length;Zf++){if(cd=ud.charAt(Zf),ex[cd]!==void 0)throw new TypeError(cd+" is ambiguous");ex[cd]=Zf}var cd,Zf;function cl(r){var e=r>>25;return(r&33554431)<<5^-(e>>0&1)&996825010^-(e>>1&1)&642813549^-(e>>2&1)&513874426^-(e>>3&1)&1027748829^-(e>>4&1)&705979059}function c6(r){for(var e=1,t=0;t<r.length;++t){var i=r.charCodeAt(t);if(i<33||i>126)return"Invalid prefix ("+r+")";e=cl(e)^i>>5}for(e=cl(e),t=0;t<r.length;++t){var n=r.charCodeAt(t);e=cl(e)^n&31}return e}function OM(r,e,t){if(t=t||90,r.length+7+e.length>t)throw new TypeError("Exceeds length limit");r=r.toLowerCase();var i=c6(r);if(typeof i=="string")throw new Error(i);for(var n=r+"1",o=0;o<e.length;++o){var s=e[o];if(s>>5!==0)throw new Error("Non 5-bit word");i=cl(i)^s,n+=ud.charAt(s)}for(o=0;o<6;++o)i=cl(i);for(i^=1,o=0;o<6;++o){var a=i>>(5-o)*5&31;n+=ud.charAt(a)}return n}function u6(r,e){if(e=e||90,r.length<8)return r+" too short";if(r.length>e)return"Exceeds length limit";var t=r.toLowerCase(),i=r.toUpperCase();if(r!==t&&r!==i)return"Mixed-case string "+r;r=t;var n=r.lastIndexOf("1");if(n===-1)return"No separator character for "+r;if(n===0)return"Missing prefix for "+r;var o=r.slice(0,n),s=r.slice(n+1);if(s.length<6)return"Data too short";var a=c6(o);if(typeof a=="string")return a;for(var l=[],f=0;f<s.length;++f){var c=s.charAt(f),u=ex[c];if(u===void 0)return"Unknown character "+c;a=cl(a)^u,!(f+6>=s.length)&&l.push(u)}return a!==1?"Invalid checksum for "+r:{prefix:o,words:l}}function NM(){var r=u6.apply(null,arguments);if(typeof r=="object")return r}function PM(r){var e=u6.apply(null,arguments);if(typeof e=="object")return e;throw new Error(e)}function hd(r,e,t,i){for(var n=0,o=0,s=(1<<t)-1,a=[],l=0;l<r.length;++l)for(n=n<<e|r[l],o+=e;o>=t;)o-=t,a.push(n>>o&s);if(i)o>0&&a.push(n<<t-o&s);else{if(o>=e)return"Excess padding";if(n<<t-o&s)return"Non-zero padding"}return a}function IM(r){var e=hd(r,8,5,!0);if(Array.isArray(e))return e}function RM(r){var e=hd(r,8,5,!0);if(Array.isArray(e))return e;throw new Error(e)}function DM(r){var e=hd(r,5,8,!1);if(Array.isArray(e))return e}function BM(r){var e=hd(r,5,8,!1);if(Array.isArray(e))return e;throw new Error(e)}h6.exports={decodeUnsafe:NM,decode:PM,encode:OM,toWordsUnsafe:IM,toWords:RM,fromWordsUnsafe:DM,fromWords:BM}});var Y6=Rt(kd=>{"use strict";Object.defineProperty(kd,"__esModule",{value:!0});kd.browserSolidityCompiler=void 0;function J6(){var r=self;r.addEventListener("message",function(e){var t=e.data;if(t==="fetch-compiler-versions")fetch("https://binaries.soliditylang.org/bin/list.json").then(function(s){return s.json()}).then(function(s){postMessage(s)});else{hO(t.version);var i=r.Module;if("_solidity_compile"in i){var n=i.cwrap("solidity_compile","string",["string","number"]),o=JSON.parse(n(t.input));postMessage(o)}}})}kd.browserSolidityCompiler=J6;function hO(r){throw new Error("Function not implemented.")}window!==self&&J6()});var X6=Rt(yl=>{"use strict";var Sd=yl&&yl.__assign||function(){return Sd=Object.assign||function(r){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},Sd.apply(this,arguments)};Object.defineProperty(yl,"__esModule",{value:!0});yl.createCompileInput=void 0;var dO=function(r,e){e===void 0&&(e={});var t={language:"Solidity",sources:{Compiled_Contracts:{content:r}},settings:Sd(Sd({},e),{outputSelection:{"*":{"*":["*"]}}})};return JSON.stringify(t)};yl.createCompileInput=dO});var eE=Rt(Tn=>{"use strict";var $6=Tn&&Tn.__awaiter||function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(c){try{f(i.next(c))}catch(u){s(u)}}function l(c){try{f(i.throw(c))}catch(u){s(u)}}function f(c){c.done?o(c.value):n(c.value).then(a,l)}f((i=i.apply(r,e||[])).next())})},Z6=Tn&&Tn.__generator||function(r,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},i,n,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(f){return function(c){return l([f,c])}}function l(f){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,n&&(o=f[0]&2?n.return:f[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,f[1])).done)return o;switch(n=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,n=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){t.label=f[1];break}if(f[0]===6&&t.label<o[1]){t.label=o[1],o=f;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(f);break}o[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(r,t)}catch(c){f=[6,c],n=0}finally{i=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}};Object.defineProperty(Tn,"__esModule",{value:!0});Tn.getCompilerVersions=Tn.solidityCompiler=void 0;var pO=Y6(),mO=X6(),vl=new Worker(URL.createObjectURL(new Blob(["(".concat(pO.browserSolidityCompiler,")()")],{type:"module"}))),gO=function(r){var e=r.version,t=r.contractBody,i=r.options;return $6(void 0,void 0,void 0,function(){var n;return Z6(this,function(o){return n=(0,mO.createCompileInput)(t,i),[2,new Promise(function(s,a){vl.postMessage({input:n,version:e}),vl.onmessage=function(l){var f=l.data;s(f)},vl.onerror=a})]})})};Tn.solidityCompiler=gO;var xO=function(){return $6(void 0,void 0,void 0,function(){return Z6(this,function(r){return[2,new Promise(function(e,t){vl.postMessage("fetch-compiler-versions"),vl.onmessage=function(i){var n=i.data;e(n)},vl.onerror=t})]})})};Tn.getCompilerVersions=xO});var AE=Rt((Bz,Td)=>{var tE,rE,iE,nE,oE,sE,aE,lE,fE,_d,yx,cE,uE,hE,wl,dE,pE,mE,gE,xE,bE,yE,vE,wE,Cd;(function(r){var e=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(i){r(t(e,t(i)))}):typeof Td=="object"&&typeof Td.exports=="object"?r(t(e,t(Td.exports))):r(t(e));function t(i,n){return i!==e&&(typeof Object.create=="function"?Object.defineProperty(i,"__esModule",{value:!0}):i.__esModule=!0),function(o,s){return i[o]=n?n(o,s):s}}})(function(r){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])};tE=function(i,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(i,n);function o(){this.constructor=i}i.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)},rE=Object.assign||function(i){for(var n,o=1,s=arguments.length;o<s;o++){n=arguments[o];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])}return i},iE=function(i,n){var o={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&n.indexOf(s)<0&&(o[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(i);a<s.length;a++)n.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(i,s[a])&&(o[s[a]]=i[s[a]]);return o},nE=function(i,n,o,s){var a=arguments.length,l=a<3?n:s===null?s=Object.getOwnPropertyDescriptor(n,o):s,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(i,n,o,s);else for(var c=i.length-1;c>=0;c--)(f=i[c])&&(l=(a<3?f(l):a>3?f(n,o,l):f(n,o))||l);return a>3&&l&&Object.defineProperty(n,o,l),l},oE=function(i,n){return function(o,s){n(o,s,i)}},sE=function(i,n){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,n)},aE=function(i,n,o,s){function a(l){return l instanceof o?l:new o(function(f){f(l)})}return new(o||(o=Promise))(function(l,f){function c(p){try{d(s.next(p))}catch(g){f(g)}}function u(p){try{d(s.throw(p))}catch(g){f(g)}}function d(p){p.done?l(p.value):a(p.value).then(c,u)}d((s=s.apply(i,n||[])).next())})},lE=function(i,n){var o={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},s,a,l,f;return f={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function c(d){return function(p){return u([d,p])}}function u(d){if(s)throw new TypeError("Generator is already executing.");for(;f&&(f=0,d[0]&&(o=0)),o;)try{if(s=1,a&&(l=d[0]&2?a.return:d[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,d[1])).done)return l;switch(a=0,l&&(d=[d[0]&2,l.value]),d[0]){case 0:case 1:l=d;break;case 4:return o.label++,{value:d[1],done:!1};case 5:o.label++,a=d[1],d=[0];continue;case 7:d=o.ops.pop(),o.trys.pop();continue;default:if(l=o.trys,!(l=l.length>0&&l[l.length-1])&&(d[0]===6||d[0]===2)){o=0;continue}if(d[0]===3&&(!l||d[1]>l[0]&&d[1]<l[3])){o.label=d[1];break}if(d[0]===6&&o.label<l[1]){o.label=l[1],l=d;break}if(l&&o.label<l[2]){o.label=l[2],o.ops.push(d);break}l[2]&&o.ops.pop(),o.trys.pop();continue}d=n.call(i,o)}catch(p){d=[6,p],a=0}finally{s=l=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},fE=function(i,n){for(var o in i)o!=="default"&&!Object.prototype.hasOwnProperty.call(n,o)&&Cd(n,i,o)},Cd=Object.create?function(i,n,o,s){s===void 0&&(s=o);var a=Object.getOwnPropertyDescriptor(n,o);(!a||("get"in a?!n.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return n[o]}}),Object.defineProperty(i,s,a)}:function(i,n,o,s){s===void 0&&(s=o),i[s]=n[o]},_d=function(i){var n=typeof Symbol=="function"&&Symbol.iterator,o=n&&i[n],s=0;if(o)return o.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},yx=function(i,n){var o=typeof Symbol=="function"&&i[Symbol.iterator];if(!o)return i;var s=o.call(i),a,l=[],f;try{for(;(n===void 0||n-- >0)&&!(a=s.next()).done;)l.push(a.value)}catch(c){f={error:c}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(f)throw f.error}}return l},cE=function(){for(var i=[],n=0;n<arguments.length;n++)i=i.concat(yx(arguments[n]));return i},uE=function(){for(var i=0,n=0,o=arguments.length;n<o;n++)i+=arguments[n].length;for(var s=Array(i),a=0,n=0;n<o;n++)for(var l=arguments[n],f=0,c=l.length;f<c;f++,a++)s[a]=l[f];return s},hE=function(i,n,o){if(o||arguments.length===2)for(var s=0,a=n.length,l;s<a;s++)(l||!(s in n))&&(l||(l=Array.prototype.slice.call(n,0,s)),l[s]=n[s]);return i.concat(l||Array.prototype.slice.call(n))},wl=function(i){return this instanceof wl?(this.v=i,this):new wl(i)},dE=function(i,n,o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=o.apply(i,n||[]),a,l=[];return a={},f("next"),f("throw"),f("return"),a[Symbol.asyncIterator]=function(){return this},a;function f(b){s[b]&&(a[b]=function(k){return new Promise(function(_,P){l.push([b,k,_,P])>1||c(b,k)})})}function c(b,k){try{u(s[b](k))}catch(_){g(l[0][3],_)}}function u(b){b.value instanceof wl?Promise.resolve(b.value.v).then(d,p):g(l[0][2],b)}function d(b){c("next",b)}function p(b){c("throw",b)}function g(b,k){b(k),l.shift(),l.length&&c(l[0][0],l[0][1])}},pE=function(i){var n,o;return n={},s("next"),s("throw",function(a){throw a}),s("return"),n[Symbol.iterator]=function(){return this},n;function s(a,l){n[a]=i[a]?function(f){return(o=!o)?{value:wl(i[a](f)),done:a==="return"}:l?l(f):f}:l}},mE=function(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=i[Symbol.asyncIterator],o;return n?n.call(i):(i=typeof _d=="function"?_d(i):i[Symbol.iterator](),o={},s("next"),s("throw"),s("return"),o[Symbol.asyncIterator]=function(){return this},o);function s(l){o[l]=i[l]&&function(f){return new Promise(function(c,u){f=i[l](f),a(c,u,f.done,f.value)})}}function a(l,f,c,u){Promise.resolve(u).then(function(d){l({value:d,done:c})},f)}},gE=function(i,n){return Object.defineProperty?Object.defineProperty(i,"raw",{value:n}):i.raw=n,i};var t=Object.create?function(i,n){Object.defineProperty(i,"default",{enumerable:!0,value:n})}:function(i,n){i.default=n};xE=function(i){if(i&&i.__esModule)return i;var n={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&Cd(n,i,o);return t(n,i),n},bE=function(i){return i&&i.__esModule?i:{default:i}},yE=function(i,n,o,s){if(o==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?i!==n||!s:!n.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return o==="m"?s:o==="a"?s.call(i):s?s.value:n.get(i)},vE=function(i,n,o,s,a){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof n=="function"?i!==n||!a:!n.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?a.call(i,o):a?a.value=o:n.set(i,o),o},wE=function(i,n){if(n===null||typeof n!="object"&&typeof n!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof i=="function"?n===i:i.has(n)},r("__extends",tE),r("__assign",rE),r("__rest",iE),r("__decorate",nE),r("__param",oE),r("__metadata",sE),r("__awaiter",aE),r("__generator",lE),r("__exportStar",fE),r("__createBinding",Cd),r("__values",_d),r("__read",yx),r("__spread",cE),r("__spreadArrays",uE),r("__spreadArray",hE),r("__await",wl),r("__asyncGenerator",dE),r("__asyncDelegator",pE),r("__asyncValues",mE),r("__makeTemplateObject",gE),r("__importStar",xE),r("__importDefault",bE),r("__classPrivateFieldGet",yE),r("__classPrivateFieldSet",vE),r("__classPrivateFieldIn",wE)})});var Ce=class{constructor(){}lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,i){let n=[];return this.decompose(0,e,n,2),i.length&&i.decompose(0,i.length,n,3),this.decompose(t,this.length,n,1),hi.from(n,this.length-(t-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){let i=[];return this.decompose(e,t,i,0),hi.from(i,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),n=new ms(this),o=new ms(e);for(let s=t,a=t;;){if(n.next(s),o.next(s),s=0,n.lineBreak!=o.lineBreak||n.done!=o.done||n.value!=o.value)return!1;if(a+=n.value.length,n.done||a>=i)return!0}}iter(e=1){return new ms(this,e)}iterRange(e,t=this.length){return new Hc(this,e,t)}iterLines(e,t){let i;if(e==null)i=this.iter();else{t==null&&(t=this.lines+1);let n=this.line(e).from;i=this.iterRange(n,Math.max(n,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new Wc(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Ce.empty:e.length<=32?new Bt(e):hi.from(Bt.split(e,[]))}},Bt=class extends Ce{constructor(e,t=zk(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,i,n){for(let o=0;;o++){let s=this.text[o],a=n+s.length;if((t?i:a)>=e)return new O0(n,a,i,s);n=a+1,i++}}decompose(e,t,i,n){let o=e<=0&&t>=this.length?this:new Bt(Rb(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(n&1){let s=i.pop(),a=zc(o.text,s.text.slice(),0,o.length);if(a.length<=32)i.push(new Bt(a,s.length+o.length));else{let l=a.length>>1;i.push(new Bt(a.slice(0,l)),new Bt(a.slice(l)))}}else i.push(o)}replace(e,t,i){if(!(i instanceof Bt))return super.replace(e,t,i);let n=zc(this.text,zc(i.text,Rb(this.text,0,e)),t),o=this.length+i.length-(t-e);return n.length<=32?new Bt(n,o):hi.from(Bt.split(n,[]),o)}sliceString(e,t=this.length,i=`
`){let n="";for(let o=0,s=0;o<=t&&s<this.text.length;s++){let a=this.text[s],l=o+a.length;o>e&&s&&(n+=i),e<l&&t>o&&(n+=a.slice(Math.max(0,e-o),t-o)),o=l+1}return n}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let i=[],n=-1;for(let o of e)i.push(o),n+=o.length+1,i.length==32&&(t.push(new Bt(i,n)),i=[],n=-1);return n>-1&&t.push(new Bt(i,n)),t}},hi=class extends Ce{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,t,i,n){for(let o=0;;o++){let s=this.children[o],a=n+s.length,l=i+s.lines-1;if((t?l:a)>=e)return s.lineInner(e,t,i,n);n=a+1,i=l+1}}decompose(e,t,i,n){for(let o=0,s=0;s<=t&&o<this.children.length;o++){let a=this.children[o],l=s+a.length;if(e<=l&&t>=s){let f=n&((s<=e?1:0)|(l>=t?2:0));s>=e&&l<=t&&!f?i.push(a):a.decompose(e-s,t-s,i,f)}s=l+1}}replace(e,t,i){if(i.lines<this.lines)for(let n=0,o=0;n<this.children.length;n++){let s=this.children[n],a=o+s.length;if(e>=o&&t<=a){let l=s.replace(e-o,t-o,i),f=this.lines-s.lines+l.lines;if(l.lines<f>>5-1&&l.lines>f>>5+1){let c=this.children.slice();return c[n]=l,new hi(c,this.length-(t-e)+i.length)}return super.replace(o,a,l)}o=a+1}return super.replace(e,t,i)}sliceString(e,t=this.length,i=`
`){let n="";for(let o=0,s=0;o<this.children.length&&s<=t;o++){let a=this.children[o],l=s+a.length;s>e&&o&&(n+=i),e<l&&t>s&&(n+=a.sliceString(e-s,t-s,i)),s=l+1}return n}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof hi))return 0;let i=0,[n,o,s,a]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;n+=t,o+=t){if(n==s||o==a)return i;let l=this.children[n],f=e.children[o];if(l!=f)return i+l.scanIdentical(f,t);i+=l.length+1}}static from(e,t=e.reduce((i,n)=>i+n.length+1,-1)){let i=0;for(let p of e)i+=p.lines;if(i<32){let p=[];for(let g of e)g.flatten(p);return new Bt(p,t)}let n=Math.max(32,i>>5),o=n<<1,s=n>>1,a=[],l=0,f=-1,c=[];function u(p){let g;if(p.lines>o&&p instanceof hi)for(let b of p.children)u(b);else p.lines>s&&(l>s||!l)?(d(),a.push(p)):p instanceof Bt&&l&&(g=c[c.length-1])instanceof Bt&&p.lines+g.lines<=32?(l+=p.lines,f+=p.length+1,c[c.length-1]=new Bt(g.text.concat(p.text),g.length+1+p.length)):(l+p.lines>n&&d(),l+=p.lines,f+=p.length+1,c.push(p))}function d(){l!=0&&(a.push(c.length==1?c[0]:hi.from(c,f)),f=-1,l=c.length=0)}for(let p of e)u(p);return d(),a.length==1?a[0]:new hi(a,t)}};Ce.empty=new Bt([""],0);function zk(r){let e=-1;for(let t of r)e+=t.length+1;return e}function zc(r,e,t=0,i=1e9){for(let n=0,o=0,s=!0;o<r.length&&n<=i;o++){let a=r[o],l=n+a.length;l>=t&&(l>i&&(a=a.slice(0,i-n)),n<t&&(a=a.slice(t-n)),s?(e[e.length-1]+=a,s=!1):e.push(a)),n=l+1}return e}function Rb(r,e,t){return zc(r,[""],e,t)}var ms=class{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof Bt?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,n=this.nodes[i],o=this.offsets[i],s=o>>1,a=n instanceof Bt?n.text.length:n.children.length;if(s==(t>0?a:0)){if(i==0)return this.done=!0,this.value="",this;t>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((o&1)==(t>0?0:1)){if(this.offsets[i]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(n instanceof Bt){let l=n.text[s+(t<0?-1:0)];if(this.offsets[i]+=t,l.length>Math.max(0,e))return this.value=e==0?l:t>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=n.children[s+(t<0?-1:0)];e>l.length?(e-=l.length,this.offsets[i]+=t):(t<0&&this.offsets[i]--,this.nodes.push(l),this.offsets.push(t>0?1:(l instanceof Bt?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}},Hc=class{constructor(e,t,i){this.value="",this.done=!1,this.cursor=new ms(e,t>i?-1:1),this.pos=t>i?e.length:0,this.from=Math.min(t,i),this.to=Math.max(t,i)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let i=t<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:n}=this.cursor.next(e);return this.pos+=(n.length+e)*t,this.value=n.length<=i?n:t<0?n.slice(n.length-i):n.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}},Wc=class{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:i,value:n}=this.inner.next(e);return t?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=n,this.afterBreak=!1),this}get lineBreak(){return!1}};typeof Symbol<"u"&&(Ce.prototype[Symbol.iterator]=function(){return this.iter()},ms.prototype[Symbol.iterator]=Hc.prototype[Symbol.iterator]=Wc.prototype[Symbol.iterator]=function(){return this});var O0=class{constructor(e,t,i,n){this.from=e,this.to=t,this.number=i,this.text=n}get length(){return this.to-this.from}},ra="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(r=>r?parseInt(r,36):1);for(let r=1;r<ra.length;r++)ra[r]+=ra[r-1];function Hk(r){for(let e=1;e<ra.length;e+=2)if(ra[e]>r)return ra[e-1]<=r;return!1}function Db(r){return r>=127462&&r<=127487}var Bb=8205;function or(r,e,t=!0,i=!0){return(t?jb:Wk)(r,e,i)}function jb(r,e,t){if(e==r.length)return e;e&&zb(r.charCodeAt(e))&&Hb(r.charCodeAt(e-1))&&e--;let i=Jt(r,e);for(e+=Ar(i);e<r.length;){let n=Jt(r,e);if(i==Bb||n==Bb||t&&Hk(n))e+=Ar(n),i=n;else if(Db(n)){let o=0,s=e-2;for(;s>=0&&Db(Jt(r,s));)o++,s-=2;if(o%2==0)break;e+=2}else break}return e}function Wk(r,e,t){for(;e>0;){let i=jb(r,e-2,t);if(i<e)return i;e--}return 0}function zb(r){return r>=56320&&r<57344}function Hb(r){return r>=55296&&r<56320}function Jt(r,e){let t=r.charCodeAt(e);if(!Hb(t)||e+1==r.length)return t;let i=r.charCodeAt(e+1);return zb(i)?(t-55296<<10)+(i-56320)+65536:t}function Kl(r){return r<=65535?String.fromCharCode(r):(r-=65536,String.fromCharCode((r>>10)+55296,(r&1023)+56320))}function Ar(r){return r<65536?1:2}var N0=/\r\n?|\n/,hr=function(r){return r[r.Simple=0]="Simple",r[r.TrackDel=1]="TrackDel",r[r.TrackBefore=2]="TrackBefore",r[r.TrackAfter=3]="TrackAfter",r}(hr||(hr={})),Jr=class{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t+1];e+=i<0?this.sections[t]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,i=0,n=0;t<this.sections.length;){let o=this.sections[t++],s=this.sections[t++];s<0?(e(i,n,o),n+=o):n+=s,i+=o}}iterChangedRanges(e,t=!1){P0(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let i=this.sections[t++],n=this.sections[t++];n<0?e.push(i,n):e.push(n,i)}return new Jr(e)}composeDesc(e){return this.empty?e:e.empty?this:Wb(this,e)}mapDesc(e,t=!1){return e.empty?this:I0(this,e,t)}mapPos(e,t=-1,i=hr.Simple){let n=0,o=0;for(let s=0;s<this.sections.length;){let a=this.sections[s++],l=this.sections[s++],f=n+a;if(l<0){if(f>e)return o+(e-n);o+=a}else{if(i!=hr.Simple&&f>=e&&(i==hr.TrackDel&&n<e&&f>e||i==hr.TrackBefore&&n<e||i==hr.TrackAfter&&f>e))return null;if(f>e||f==e&&t<0&&!a)return e==n||t<0?o:o+l;o+=l}n=f}if(e>n)throw new RangeError(`Position ${e} is out of range for changeset of length ${n}`);return o}touchesRange(e,t=e){for(let i=0,n=0;i<this.sections.length&&n<=t;){let o=this.sections[i++],s=this.sections[i++],a=n+o;if(s>=0&&n<=t&&a>=e)return n<e&&a>t?"cover":!0;n=a}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let i=this.sections[t++],n=this.sections[t++];e+=(e?" ":"")+i+(n>=0?":"+n:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Jr(e)}static create(e){return new Jr(e)}},Ft=class extends Jr{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return P0(this,(t,i,n,o,s)=>e=e.replace(n,n+(i-t),s),!1),e}mapDesc(e,t=!1){return I0(this,e,t,!0)}invert(e){let t=this.sections.slice(),i=[];for(let n=0,o=0;n<t.length;n+=2){let s=t[n],a=t[n+1];if(a>=0){t[n]=a,t[n+1]=s;let l=n>>1;for(;i.length<l;)i.push(Ce.empty);i.push(s?e.slice(o,o+s):Ce.empty)}o+=s}return new Ft(t,i)}compose(e){return this.empty?e:e.empty?this:Wb(this,e,!0)}map(e,t=!1){return e.empty?this:I0(this,e,t,!0)}iterChanges(e,t=!1){P0(this,e,t)}get desc(){return Jr.create(this.sections)}filter(e){let t=[],i=[],n=[],o=new gs(this);e:for(let s=0,a=0;;){let l=s==e.length?1e9:e[s++];for(;a<l||a==l&&o.len==0;){if(o.done)break e;let c=Math.min(o.len,l-a);wr(n,c,-1);let u=o.ins==-1?-1:o.off==0?o.ins:0;wr(t,c,u),u>0&&uo(i,t,o.text),o.forward(c),a+=c}let f=e[s++];for(;a<f;){if(o.done)break e;let c=Math.min(o.len,f-a);wr(t,c,-1),wr(n,c,o.ins==-1?-1:o.off==0?o.ins:0),o.forward(c),a+=c}}return{changes:new Ft(t,i),filtered:Jr.create(n)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t],n=this.sections[t+1];n<0?e.push(i):n==0?e.push([i]):e.push([i].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,i){let n=[],o=[],s=0,a=null;function l(c=!1){if(!c&&!n.length)return;s<t&&wr(n,t-s,-1);let u=new Ft(n,o);a=a?a.compose(u.map(a)):u,n=[],o=[],s=0}function f(c){if(Array.isArray(c))for(let u of c)f(u);else if(c instanceof Ft){if(c.length!=t)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${t})`);l(),a=a?a.compose(c.map(a)):c}else{let{from:u,to:d=u,insert:p}=c;if(u>d||u<0||d>t)throw new RangeError(`Invalid change range ${u} to ${d} (in doc of length ${t})`);let g=p?typeof p=="string"?Ce.of(p.split(i||N0)):p:Ce.empty,b=g.length;if(u==d&&b==0)return;u<s&&l(),u>s&&wr(n,u-s,-1),wr(n,d-u,b),uo(o,n,g),s=d}}return f(e),l(!a),a}static empty(e){return new Ft(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],i=[];for(let n=0;n<e.length;n++){let o=e[n];if(typeof o=="number")t.push(o,-1);else{if(!Array.isArray(o)||typeof o[0]!="number"||o.some((s,a)=>a&&typeof s!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(o.length==1)t.push(o[0],0);else{for(;i.length<n;)i.push(Ce.empty);i[n]=Ce.of(o.slice(1)),t.push(o[0],i[n].length)}}}return new Ft(t,i)}static createSet(e,t){return new Ft(e,t)}};function wr(r,e,t,i=!1){if(e==0&&t<=0)return;let n=r.length-2;n>=0&&t<=0&&t==r[n+1]?r[n]+=e:e==0&&r[n]==0?r[n+1]+=t:i?(r[n]+=e,r[n+1]+=t):r.push(e,t)}function uo(r,e,t){if(t.length==0)return;let i=e.length-2>>1;if(i<r.length)r[r.length-1]=r[r.length-1].append(t);else{for(;r.length<i;)r.push(Ce.empty);r.push(t)}}function P0(r,e,t){let i=r.inserted;for(let n=0,o=0,s=0;s<r.sections.length;){let a=r.sections[s++],l=r.sections[s++];if(l<0)n+=a,o+=a;else{let f=n,c=o,u=Ce.empty;for(;f+=a,c+=l,l&&i&&(u=u.append(i[s-2>>1])),!(t||s==r.sections.length||r.sections[s+1]<0);)a=r.sections[s++],l=r.sections[s++];e(n,f,o,c,u),n=f,o=c}}}function I0(r,e,t,i=!1){let n=[],o=i?[]:null,s=new gs(r),a=new gs(e);for(let l=-1;;)if(s.ins==-1&&a.ins==-1){let f=Math.min(s.len,a.len);wr(n,f,-1),s.forward(f),a.forward(f)}else if(a.ins>=0&&(s.ins<0||l==s.i||s.off==0&&(a.len<s.len||a.len==s.len&&!t))){let f=a.len;for(wr(n,a.ins,-1);f;){let c=Math.min(s.len,f);s.ins>=0&&l<s.i&&s.len<=c&&(wr(n,0,s.ins),o&&uo(o,n,s.text),l=s.i),s.forward(c),f-=c}a.next()}else if(s.ins>=0){let f=0,c=s.len;for(;c;)if(a.ins==-1){let u=Math.min(c,a.len);f+=u,c-=u,a.forward(u)}else if(a.ins==0&&a.len<c)c-=a.len,a.next();else break;wr(n,f,l<s.i?s.ins:0),o&&l<s.i&&uo(o,n,s.text),l=s.i,s.forward(s.len-c)}else{if(s.done&&a.done)return o?Ft.createSet(n,o):Jr.create(n);throw new Error("Mismatched change set lengths")}}function Wb(r,e,t=!1){let i=[],n=t?[]:null,o=new gs(r),s=new gs(e);for(let a=!1;;){if(o.done&&s.done)return n?Ft.createSet(i,n):Jr.create(i);if(o.ins==0)wr(i,o.len,0,a),o.next();else if(s.len==0&&!s.done)wr(i,0,s.ins,a),n&&uo(n,i,s.text),s.next();else{if(o.done||s.done)throw new Error("Mismatched change set lengths");{let l=Math.min(o.len2,s.len),f=i.length;if(o.ins==-1){let c=s.ins==-1?-1:s.off?0:s.ins;wr(i,l,c,a),n&&c&&uo(n,i,s.text)}else s.ins==-1?(wr(i,o.off?0:o.len,l,a),n&&uo(n,i,o.textBit(l))):(wr(i,o.off?0:o.len,s.off?0:s.ins,a),n&&!s.off&&uo(n,i,s.text));a=(o.ins>l||s.ins>=0&&s.len>l)&&(a||i.length>f),o.forward2(l),s.forward(l)}}}}var gs=class{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?Ce.empty:e[t]}textBit(e){let{inserted:t}=this.set,i=this.i-2>>1;return i>=t.length&&!e?Ce.empty:t[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}},Rn=class{constructor(e,t,i){this.from=e,this.to=t,this.flags=i}get anchor(){return this.flags&16?this.to:this.from}get head(){return this.flags&16?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&4?-1:this.flags&8?1:0}get bidiLevel(){let e=this.flags&3;return e==3?null:e}get goalColumn(){let e=this.flags>>5;return e==33554431?void 0:e}map(e,t=-1){let i,n;return this.empty?i=n=e.mapPos(this.from,t):(i=e.mapPos(this.from,1),n=e.mapPos(this.to,-1)),i==this.from&&n==this.to?this:new Rn(i,n,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return K.range(e,t);let i=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return K.range(this.anchor,i)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return K.range(e.anchor,e.head)}static create(e,t,i){return new Rn(e,t,i)}},K=class{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:K.create(this.ranges.map(i=>i.map(e,t)),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let t=0;t<this.ranges.length;t++)if(!this.ranges[t].eq(e.ranges[t]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new K([this.main],0)}addRange(e,t=!0){return K.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let i=this.ranges.slice();return i[t]=e,K.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new K(e.ranges.map(t=>Rn.fromJSON(t)),e.main)}static single(e,t=e){return new K([K.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,n=0;n<e.length;n++){let o=e[n];if(o.empty?o.from<=i:o.from<i)return K.normalized(e.slice(),t);i=o.to}return new K(e,t)}static cursor(e,t=0,i,n){return Rn.create(e,e,(t==0?0:t<0?4:8)|(i==null?3:Math.min(2,i))|(n??33554431)<<5)}static range(e,t,i){let n=(i??33554431)<<5;return t<e?Rn.create(t,e,16|n|8):Rn.create(e,t,n|(t>e?4:0))}static normalized(e,t=0){let i=e[t];e.sort((n,o)=>n.from-o.from),t=e.indexOf(i);for(let n=1;n<e.length;n++){let o=e[n],s=e[n-1];if(o.empty?o.from<=s.to:o.from<s.to){let a=s.from,l=Math.max(o.to,s.to);n<=t&&t--,e.splice(--n,2,o.anchor>o.head?K.range(l,a):K.range(a,l))}}return new K(e,t)}};function Gb(r,e){for(let t of r.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}var q0=0,oe=class{constructor(e,t,i,n,o){this.combine=e,this.compareInput=t,this.compare=i,this.isStatic=n,this.id=q0++,this.default=e([]),this.extensions=typeof o=="function"?o(this):o}static define(e={}){return new oe(e.combine||(t=>t),e.compareInput||((t,i)=>t===i),e.compare||(e.combine?(t,i)=>t===i:j0),!!e.static,e.enables)}of(e){return new ia([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new ia(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new ia(e,this,2,t)}from(e,t){return t||(t=i=>i),this.compute([e],i=>t(i.field(e)))}};function j0(r,e){return r==e||r.length==e.length&&r.every((t,i)=>t===e[i])}var ia=class{constructor(e,t,i,n){this.dependencies=e,this.facet=t,this.type=i,this.value=n,this.id=q0++}dynamicSlot(e){var t;let i=this.value,n=this.facet.compareInput,o=this.id,s=e[o]>>1,a=this.type==2,l=!1,f=!1,c=[];for(let u of this.dependencies)u=="doc"?l=!0:u=="selection"?f=!0:(((t=e[u.id])!==null&&t!==void 0?t:1)&1)==0&&c.push(e[u.id]);return{create(u){return u.values[s]=i(u),1},update(u,d){if(l&&d.docChanged||f&&(d.docChanged||d.selection)||R0(u,c)){let p=i(u);if(a?!Fb(p,u.values[s],n):!n(p,u.values[s]))return u.values[s]=p,1}return 0},reconfigure:(u,d)=>{let p,g=d.config.address[o];if(g!=null){let b=Kc(d,g);if(this.dependencies.every(k=>k instanceof oe?d.facet(k)===u.facet(k):k instanceof Mt?d.field(k,!1)==u.field(k,!1):!0)||(a?Fb(p=i(u),b,n):n(p=i(u),b)))return u.values[s]=b,0}else p=i(u);return u.values[s]=p,1}}}};function Fb(r,e,t){if(r.length!=e.length)return!1;for(let i=0;i<r.length;i++)if(!t(r[i],e[i]))return!1;return!0}function R0(r,e){let t=!1;for(let i of e)Hl(r,i)&1&&(t=!0);return t}function Gk(r,e,t){let i=t.map(l=>r[l.id]),n=t.map(l=>l.type),o=i.filter(l=>!(l&1)),s=r[e.id]>>1;function a(l){let f=[];for(let c=0;c<i.length;c++){let u=Kc(l,i[c]);if(n[c]==2)for(let d of u)f.push(d);else f.push(u)}return e.combine(f)}return{create(l){for(let f of i)Hl(l,f);return l.values[s]=a(l),1},update(l,f){if(!R0(l,o))return 0;let c=a(l);return e.compare(c,l.values[s])?0:(l.values[s]=c,1)},reconfigure(l,f){let c=R0(l,i),u=f.config.facets[e.id],d=f.facet(e);if(u&&!c&&j0(t,u))return l.values[s]=d,0;let p=a(l);return e.compare(p,d)?(l.values[s]=d,0):(l.values[s]=p,1)}}}var Lb=oe.define({static:!0}),Mt=class{constructor(e,t,i,n,o){this.id=e,this.createF=t,this.updateF=i,this.compareF=n,this.spec=o,this.provides=void 0}static define(e){let t=new Mt(q0++,e.create,e.update,e.compare||((i,n)=>i===n),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(Lb).find(i=>i.field==this);return(t?.create||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:i=>(i.values[t]=this.create(i),1),update:(i,n)=>{let o=i.values[t],s=this.updateF(o,n);return this.compareF(o,s)?0:(i.values[t]=s,1)},reconfigure:(i,n)=>n.config.address[this.id]!=null?(i.values[t]=n.field(this),0):(i.values[t]=this.create(i),1)}}init(e){return[this,Lb.of({field:this,create:e})]}get extension(){return this}},ds={lowest:4,low:3,default:2,high:1,highest:0};function zl(r){return e=>new Gc(e,r)}var Zi={highest:zl(ds.highest),high:zl(ds.high),default:zl(ds.default),low:zl(ds.low),lowest:zl(ds.lowest)},Gc=class{constructor(e,t){this.inner=e,this.prec=t}},oa=class{of(e){return new Wl(this,e)}reconfigure(e){return oa.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}},Wl=class{constructor(e,t){this.compartment=e,this.inner=t}},sa=class{constructor(e,t,i,n,o,s){for(this.base=e,this.compartments=t,this.dynamicSlots=i,this.address=n,this.staticValues=o,this.facets=s,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,i){let n=[],o=Object.create(null),s=new Map;for(let d of Kk(e,t,s))d instanceof Mt?n.push(d):(o[d.facet.id]||(o[d.facet.id]=[])).push(d);let a=Object.create(null),l=[],f=[];for(let d of n)a[d.id]=f.length<<1,f.push(p=>d.slot(p));let c=i?.config.facets;for(let d in o){let p=o[d],g=p[0].facet,b=c&&c[d]||[];if(p.every(k=>k.type==0))if(a[g.id]=l.length<<1|1,j0(b,p))l.push(i.facet(g));else{let k=g.combine(p.map(_=>_.value));l.push(i&&g.compare(k,i.facet(g))?i.facet(g):k)}else{for(let k of p)k.type==0?(a[k.id]=l.length<<1|1,l.push(k.value)):(a[k.id]=f.length<<1,f.push(_=>k.dynamicSlot(_)));a[g.id]=f.length<<1,f.push(k=>Gk(k,g,p))}}let u=f.map(d=>d(a));return new sa(e,s,u,a,l,o)}};function Kk(r,e,t){let i=[[],[],[],[],[]],n=new Map;function o(s,a){let l=n.get(s);if(l!=null){if(l<=a)return;let f=i[l].indexOf(s);f>-1&&i[l].splice(f,1),s instanceof Wl&&t.delete(s.compartment)}if(n.set(s,a),Array.isArray(s))for(let f of s)o(f,a);else if(s instanceof Wl){if(t.has(s.compartment))throw new RangeError("Duplicate use of compartment in extensions");let f=e.get(s.compartment)||s.inner;t.set(s.compartment,f),o(f,a)}else if(s instanceof Gc)o(s.inner,s.prec);else if(s instanceof Mt)i[a].push(s),s.provides&&o(s.provides,a);else if(s instanceof ia)i[a].push(s),s.facet.extensions&&o(s.facet.extensions,ds.default);else{let f=s.extension;if(!f)throw new Error(`Unrecognized extension value in extension set (${s}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);o(f,a)}}return o(r,ds.default),i.reduce((s,a)=>s.concat(a))}function Hl(r,e){if(e&1)return 2;let t=e>>1,i=r.status[t];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;r.status[t]=4;let n=r.computeSlot(r,r.config.dynamicSlots[t]);return r.status[t]=2|n}function Kc(r,e){return e&1?r.config.staticValues[e>>1]:r.values[e>>1]}var Kb=oe.define(),Qb=oe.define({combine:r=>r.some(e=>e),static:!0}),Jb=oe.define({combine:r=>r.length?r[0]:void 0,static:!0}),Yb=oe.define(),Xb=oe.define(),$b=oe.define(),Zb=oe.define({combine:r=>r.length?r[0]:!1}),Di=class{constructor(e,t){this.type=e,this.value=t}static define(){return new D0}},D0=class{of(e){return new Di(this,e)}},B0=class{constructor(e){this.map=e}of(e){return new me(this,e)}},me=class{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new me(this.type,t)}is(e){return this.type==e}static define(e={}){return new B0(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let i=[];for(let n of e){let o=n.map(t);o&&i.push(o)}return i}};me.reconfigure=me.define();me.appendConfig=me.define();var Lt=class{constructor(e,t,i,n,o,s){this.startState=e,this.changes=t,this.selection=i,this.effects=n,this.annotations=o,this.scrollIntoView=s,this._doc=null,this._state=null,i&&Gb(i,t.newLength),o.some(a=>a.type==Lt.time)||(this.annotations=o.concat(Lt.time.of(Date.now())))}static create(e,t,i,n,o,s){return new Lt(e,t,i,n,o,s)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(Lt.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}};Lt.time=Di.define();Lt.userEvent=Di.define();Lt.addToHistory=Di.define();Lt.remote=Di.define();function Qk(r,e){let t=[];for(let i=0,n=0;;){let o,s;if(i<r.length&&(n==e.length||e[n]>=r[i]))o=r[i++],s=r[i++];else if(n<e.length)o=e[n++],s=e[n++];else return t;!t.length||t[t.length-1]<o?t.push(o,s):t[t.length-1]<s&&(t[t.length-1]=s)}}function ey(r,e,t){var i;let n,o,s;return t?(n=e.changes,o=Ft.empty(e.changes.length),s=r.changes.compose(e.changes)):(n=e.changes.map(r.changes),o=r.changes.mapDesc(e.changes,!0),s=r.changes.compose(n)),{changes:s,selection:e.selection?e.selection.map(o):(i=r.selection)===null||i===void 0?void 0:i.map(n),effects:me.mapEffects(r.effects,n).concat(me.mapEffects(e.effects,o)),annotations:r.annotations.length?r.annotations.concat(e.annotations):e.annotations,scrollIntoView:r.scrollIntoView||e.scrollIntoView}}function F0(r,e,t){let i=e.selection,n=na(e.annotations);return e.userEvent&&(n=n.concat(Lt.userEvent.of(e.userEvent))),{changes:e.changes instanceof Ft?e.changes:Ft.of(e.changes||[],t,r.facet(Jb)),selection:i&&(i instanceof K?i:K.single(i.anchor,i.head)),effects:na(e.effects),annotations:n,scrollIntoView:!!e.scrollIntoView}}function ty(r,e,t){let i=F0(r,e.length?e[0]:{},r.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let o=1;o<e.length;o++){e[o].filter===!1&&(t=!1);let s=!!e[o].sequential;i=ey(i,F0(r,e[o],s?i.changes.newLength:r.doc.length),s)}let n=Lt.create(r,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return Yk(t?Jk(n):n)}function Jk(r){let e=r.startState,t=!0;for(let n of e.facet(Yb)){let o=n(r);if(o===!1){t=!1;break}Array.isArray(o)&&(t=t===!0?o:Qk(t,o))}if(t!==!0){let n,o;if(t===!1)o=r.changes.invertedDesc,n=Ft.empty(e.doc.length);else{let s=r.changes.filter(t);n=s.changes,o=s.filtered.mapDesc(s.changes).invertedDesc}r=Lt.create(e,n,r.selection&&r.selection.map(o),me.mapEffects(r.effects,o),r.annotations,r.scrollIntoView)}let i=e.facet(Xb);for(let n=i.length-1;n>=0;n--){let o=i[n](r);o instanceof Lt?r=o:Array.isArray(o)&&o.length==1&&o[0]instanceof Lt?r=o[0]:r=ty(e,na(o),!1)}return r}function Yk(r){let e=r.startState,t=e.facet($b),i=r;for(let n=t.length-1;n>=0;n--){let o=t[n](r);o&&Object.keys(o).length&&(i=ey(i,F0(e,o,r.changes.newLength),!0))}return i==r?r:Lt.create(e,r.changes,r.selection,i.effects,i.annotations,i.scrollIntoView)}var Xk=[];function na(r){return r==null?Xk:Array.isArray(r)?r:[r]}var ze=function(r){return r[r.Word=0]="Word",r[r.Space=1]="Space",r[r.Other=2]="Other",r}(ze||(ze={})),$k=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,L0;try{L0=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function Zk(r){if(L0)return L0.test(r);for(let e=0;e<r.length;e++){let t=r[e];if(/\w/.test(t)||t>"\x80"&&(t.toUpperCase()!=t.toLowerCase()||$k.test(t)))return!0}return!1}function eS(r){return e=>{if(!/\S/.test(e))return ze.Space;if(Zk(e))return ze.Word;for(let t=0;t<r.length;t++)if(e.indexOf(r[t])>-1)return ze.Word;return ze.Other}}var ke=class{constructor(e,t,i,n,o,s){this.config=e,this.doc=t,this.selection=i,this.values=n,this.status=e.statusTemplate.slice(),this.computeSlot=o,s&&(s._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)Hl(this,a<<1);this.computeSlot=null}field(e,t=!0){let i=this.config.address[e.id];if(i==null){if(t)throw new RangeError("Field is not present in this state");return}return Hl(this,i),Kc(this,i)}update(...e){return ty(this,e,!0)}applyTransaction(e){let t=this.config,{base:i,compartments:n}=t;for(let s of e.effects)s.is(oa.reconfigure)?(t&&(n=new Map,t.compartments.forEach((a,l)=>n.set(l,a)),t=null),n.set(s.value.compartment,s.value.extension)):s.is(me.reconfigure)?(t=null,i=s.value):s.is(me.appendConfig)&&(t=null,i=na(i).concat(s.value));let o;t?o=e.startState.values.slice():(t=sa.resolve(i,n,this),o=new ke(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(a,l)=>l.reconfigure(a,this),null).values),new ke(t,e.newDoc,e.newSelection,o,(s,a)=>a.update(s,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:K.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,i=e(t.ranges[0]),n=this.changes(i.changes),o=[i.range],s=na(i.effects);for(let a=1;a<t.ranges.length;a++){let l=e(t.ranges[a]),f=this.changes(l.changes),c=f.map(n);for(let d=0;d<a;d++)o[d]=o[d].map(c);let u=n.mapDesc(f,!0);o.push(l.range.map(u)),n=n.compose(c),s=me.mapEffects(s,c).concat(me.mapEffects(na(l.effects),u))}return{changes:n,selection:K.create(o,t.mainIndex),effects:s}}changes(e=[]){return e instanceof Ft?e:Ft.of(e,this.doc.length,this.facet(ke.lineSeparator))}toText(e){return Ce.of(e.split(this.facet(ke.lineSeparator)||N0))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(Hl(this,t),Kc(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let n=e[i];n instanceof Mt&&this.config.address[n.id]!=null&&(t[i]=n.spec.toJSON(this.field(e[i]),this))}return t}static fromJSON(e,t={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let n=[];if(i){for(let o in i)if(Object.prototype.hasOwnProperty.call(e,o)){let s=i[o],a=e[o];n.push(s.init(l=>s.spec.fromJSON(a,l)))}}return ke.create({doc:e.doc,selection:K.fromJSON(e.selection),extensions:t.extensions?n.concat([t.extensions]):n})}static create(e={}){let t=sa.resolve(e.extensions||[],new Map),i=e.doc instanceof Ce?e.doc:Ce.of((e.doc||"").split(t.staticFacet(ke.lineSeparator)||N0)),n=e.selection?e.selection instanceof K?e.selection:K.single(e.selection.anchor,e.selection.head):K.single(0);return Gb(n,i.length),t.staticFacet(Qb)||(n=n.asSingle()),new ke(t,i,n,t.dynamicSlots.map(()=>null),(o,s)=>s.create(o),null)}get tabSize(){return this.facet(ke.tabSize)}get lineBreak(){return this.facet(ke.lineSeparator)||`
`}get readOnly(){return this.facet(Zb)}phrase(e,...t){for(let i of this.facet(ke.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(i,n)=>{if(n=="$")return"$";let o=+(n||1);return!o||o>t.length?i:t[o-1]})),e}languageDataAt(e,t,i=-1){let n=[];for(let o of this.facet(Kb))for(let s of o(this,t,i))Object.prototype.hasOwnProperty.call(s,e)&&n.push(s[e]);return n}charCategorizer(e){return eS(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:i,length:n}=this.doc.lineAt(e),o=this.charCategorizer(e),s=e-i,a=e-i;for(;s>0;){let l=or(t,s,!1);if(o(t.slice(l,s))!=ze.Word)break;s=l}for(;a<n;){let l=or(t,a);if(o(t.slice(a,l))!=ze.Word)break;a=l}return s==a?null:K.range(s+i,a+i)}};ke.allowMultipleSelections=Qb;ke.tabSize=oe.define({combine:r=>r.length?r[0]:4});ke.lineSeparator=Jb;ke.readOnly=Zb;ke.phrases=oe.define({compare(r,e){let t=Object.keys(r),i=Object.keys(e);return t.length==i.length&&t.every(n=>r[n]==e[n])}});ke.languageData=Kb;ke.changeFilter=Yb;ke.transactionFilter=Xb;ke.transactionExtender=$b;oa.reconfigure=me.define();function Er(r,e,t={}){let i={};for(let n of r)for(let o of Object.keys(n)){let s=n[o],a=i[o];if(a===void 0)i[o]=s;else if(!(a===s||s===void 0))if(Object.hasOwnProperty.call(t,o))i[o]=t[o](a,s);else throw new Error("Config merge conflict for field "+o)}for(let n in e)i[n]===void 0&&(i[n]=e[n]);return i}var Bi=class{eq(e){return this==e}range(e,t=e){return xs.create(e,t,this)}};Bi.prototype.startSide=Bi.prototype.endSide=0;Bi.prototype.point=!1;Bi.prototype.mapMode=hr.TrackDel;var xs=class{constructor(e,t,i){this.from=e,this.to=t,this.value=i}static create(e,t,i){return new xs(e,t,i)}};function U0(r,e){return r.from-e.from||r.value.startSide-e.value.startSide}var Gl=class{constructor(e,t,i,n){this.from=e,this.to=t,this.value=i,this.maxPoint=n}get length(){return this.to[this.to.length-1]}findIndex(e,t,i,n=0){let o=i?this.to:this.from;for(let s=n,a=o.length;;){if(s==a)return s;let l=s+a>>1,f=o[l]-e||(i?this.value[l].endSide:this.value[l].startSide)-t;if(l==s)return f>=0?s:a;f>=0?a=l:s=l+1}}between(e,t,i,n){for(let o=this.findIndex(t,-1e9,!0),s=this.findIndex(i,1e9,!1,o);o<s;o++)if(n(this.from[o]+e,this.to[o]+e,this.value[o])===!1)return!1}map(e,t){let i=[],n=[],o=[],s=-1,a=-1;for(let l=0;l<this.value.length;l++){let f=this.value[l],c=this.from[l]+e,u=this.to[l]+e,d,p;if(c==u){let g=t.mapPos(c,f.startSide,f.mapMode);if(g==null||(d=p=g,f.startSide!=f.endSide&&(p=t.mapPos(c,f.endSide),p<d)))continue}else if(d=t.mapPos(c,f.startSide),p=t.mapPos(u,f.endSide),d>p||d==p&&f.startSide>0&&f.endSide<=0)continue;(p-d||f.endSide-f.startSide)<0||(s<0&&(s=d),f.point&&(a=Math.max(a,p-d)),i.push(f),n.push(d-s),o.push(p-s))}return{mapped:i.length?new Gl(n,o,i,a):null,pos:s}}},Pe=class{constructor(e,t,i,n){this.chunkPos=e,this.chunk=t,this.nextLayer=i,this.maxPoint=n}static create(e,t,i,n){return new Pe(e,t,i,n)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:i=!1,filterFrom:n=0,filterTo:o=this.length}=e,s=e.filter;if(t.length==0&&!s)return this;if(i&&(t=t.slice().sort(U0)),this.isEmpty)return t.length?Pe.of(t):this;let a=new Qc(this,null,-1).goto(0),l=0,f=[],c=new Yr;for(;a.value||l<t.length;)if(l<t.length&&(a.from-t[l].from||a.startSide-t[l].value.startSide)>=0){let u=t[l++];c.addInner(u.from,u.to,u.value)||f.push(u)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==t.length||this.chunkEnd(a.chunkIndex)<t[l].from)&&(!s||n>this.chunkEnd(a.chunkIndex)||o<this.chunkPos[a.chunkIndex])&&c.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!s||n>a.to||o<a.from||s(a.from,a.to,a.value))&&(c.addInner(a.from,a.to,a.value)||f.push(xs.create(a.from,a.to,a.value))),a.next());return c.finishInner(this.nextLayer.isEmpty&&!f.length?Pe.empty:this.nextLayer.update({add:f,filter:s,filterFrom:n,filterTo:o}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],i=[],n=-1;for(let s=0;s<this.chunk.length;s++){let a=this.chunkPos[s],l=this.chunk[s],f=e.touchesRange(a,a+l.length);if(f===!1)n=Math.max(n,l.maxPoint),t.push(l),i.push(e.mapPos(a));else if(f===!0){let{mapped:c,pos:u}=l.map(a,e);c&&(n=Math.max(n,c.maxPoint),t.push(c),i.push(u))}}let o=this.nextLayer.map(e);return t.length==0?o:new Pe(i,t,o||Pe.empty,n)}between(e,t,i){if(!this.isEmpty){for(let n=0;n<this.chunk.length;n++){let o=this.chunkPos[n],s=this.chunk[n];if(t>=o&&e<=o+s.length&&s.between(o,e-o,t-o,i)===!1)return}this.nextLayer.between(e,t,i)}}iter(e=0){return bs.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return bs.from(e).goto(t)}static compare(e,t,i,n,o=-1){let s=e.filter(u=>u.maxPoint>0||!u.isEmpty&&u.maxPoint>=o),a=t.filter(u=>u.maxPoint>0||!u.isEmpty&&u.maxPoint>=o),l=Ub(s,a,i),f=new ps(s,l,o),c=new ps(a,l,o);i.iterGaps((u,d,p)=>Vb(f,u,c,d,p,n)),i.empty&&i.length==0&&Vb(f,0,c,0,0,n)}static eq(e,t,i=0,n){n==null&&(n=1e9-1);let o=e.filter(c=>!c.isEmpty&&t.indexOf(c)<0),s=t.filter(c=>!c.isEmpty&&e.indexOf(c)<0);if(o.length!=s.length)return!1;if(!o.length)return!0;let a=Ub(o,s),l=new ps(o,a,0).goto(i),f=new ps(s,a,0).goto(i);for(;;){if(l.to!=f.to||!V0(l.active,f.active)||l.point&&(!f.point||!l.point.eq(f.point)))return!1;if(l.to>n)return!0;l.next(),f.next()}}static spans(e,t,i,n,o=-1){let s=new ps(e,null,o).goto(t),a=t,l=s.openStart;for(;;){let f=Math.min(s.to,i);if(s.point?(n.point(a,f,s.point,s.activeForPoint(s.to),l,s.pointRank),l=s.openEnd(f)+(s.to>f?1:0)):f>a&&(n.span(a,f,s.active,l),l=s.openEnd(f)),s.to>i)break;a=s.to,s.next()}return l}static of(e,t=!1){let i=new Yr;for(let n of e instanceof xs?[e]:t?tS(e):e)i.add(n.from,n.to,n.value);return i.finish()}};Pe.empty=new Pe([],[],null,-1);function tS(r){if(r.length>1)for(let e=r[0],t=1;t<r.length;t++){let i=r[t];if(U0(e,i)>0)return r.slice().sort(U0);e=i}return r}Pe.empty.nextLayer=Pe.empty;var Yr=class{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(e){this.chunks.push(new Gl(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}add(e,t,i){this.addInner(e,t,i)||(this.nextLayer||(this.nextLayer=new Yr)).add(e,t,i)}addInner(e,t,i){let n=e-this.lastTo||i.startSide-this.last.endSide;if(n<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return n<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=t,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let i=t.value.length-1;return this.last=t.value[i],this.lastFrom=t.from[i]+e,this.lastTo=t.to[i]+e,!0}finish(){return this.finishInner(Pe.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=Pe.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}};function Ub(r,e,t){let i=new Map;for(let o of r)for(let s=0;s<o.chunk.length;s++)o.chunk[s].maxPoint<=0&&i.set(o.chunk[s],o.chunkPos[s]);let n=new Set;for(let o of e)for(let s=0;s<o.chunk.length;s++){let a=i.get(o.chunk[s]);a!=null&&(t?t.mapPos(a):a)==o.chunkPos[s]&&!t?.touchesRange(a,a+o.chunk[s].length)&&n.add(o.chunk[s])}return n}var Qc=class{constructor(e,t,i,n=0){this.layer=e,this.skip=t,this.minPoint=i,this.rank=n}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,i){for(;this.chunkIndex<this.layer.chunk.length;){let n=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(n)||this.layer.chunkEnd(this.chunkIndex)<e||n.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let n=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!i||this.rangeIndex<n)&&this.setRangeIndex(n)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],i=e+t.from[this.rangeIndex];if(this.from=i,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}},bs=class{constructor(e){this.heap=e}static from(e,t=null,i=-1){let n=[];for(let o=0;o<e.length;o++)for(let s=e[o];!s.isEmpty;s=s.nextLayer)s.maxPoint>=i&&n.push(new Qc(s,t,i,o));return n.length==1?n[0]:new bs(n)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let i of this.heap)i.goto(e,t);for(let i=this.heap.length>>1;i>=0;i--)M0(this.heap,i);return this.next(),this}forward(e,t){for(let i of this.heap)i.forward(e,t);for(let i=this.heap.length>>1;i>=0;i--)M0(this.heap,i);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),M0(this.heap,0)}}};function M0(r,e){for(let t=r[e];;){let i=(e<<1)+1;if(i>=r.length)break;let n=r[i];if(i+1<r.length&&n.compare(r[i+1])>=0&&(n=r[i+1],i++),t.compare(n)<0)break;r[i]=t,r[e]=n,e=i}}var ps=class{constructor(e,t,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=bs.from(e,t,i)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){qc(this.active,e),qc(this.activeTo,e),qc(this.activeRank,e),this.minActive=qb(this.active,this.activeTo)}addActive(e){let t=0,{value:i,to:n,rank:o}=this.cursor;for(;t<this.activeRank.length&&this.activeRank[t]<=o;)t++;jc(this.active,t,i),jc(this.activeTo,t,n),jc(this.activeRank,t,o),e&&jc(e,t,this.cursor.from),this.minActive=qb(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let i=this.openStart<0?[]:null,n=0;for(;;){let o=this.minActive;if(o>-1&&(this.activeTo[o]-this.cursor.from||this.active[o].endSide-this.cursor.startSide)<0){if(this.activeTo[o]>e){this.to=this.activeTo[o],this.endSide=this.active[o].endSide;break}this.removeActive(o),i&&qc(i,o)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(i),this.cursor.from<e&&this.cursor.to>e&&n++,this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.from<e&&(n=1),this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){let o=0;for(;o<i.length&&i[o]<e;)o++;this.openStart=o+n}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&t.push(this.active[i]);return t.reverse()}openEnd(e){let t=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)t++;return t}};function Vb(r,e,t,i,n,o){r.goto(e),t.goto(i);let s=i+n,a=i,l=i-e;for(;;){let f=r.to+l-t.to||r.endSide-t.endSide,c=f<0?r.to+l:t.to,u=Math.min(c,s);if(r.point||t.point?r.point&&t.point&&(r.point==t.point||r.point.eq(t.point))&&V0(r.activeForPoint(r.to+l),t.activeForPoint(t.to))||o.comparePoint(a,u,r.point,t.point):u>a&&!V0(r.active,t.active)&&o.compareRange(a,u,r.active,t.active),c>s)break;a=c,f<=0&&r.next(),f>=0&&t.next()}}function V0(r,e){if(r.length!=e.length)return!1;for(let t=0;t<r.length;t++)if(r[t]!=e[t]&&!r[t].eq(e[t]))return!1;return!0}function qc(r,e){for(let t=e,i=r.length-1;t<i;t++)r[t]=r[t+1];r.pop()}function jc(r,e,t){for(let i=r.length-1;i>=e;i--)r[i+1]=r[i];r[e]=t}function qb(r,e){let t=-1,i=1e9;for(let n=0;n<e.length;n++)(e[n]-i||r[n].endSide-r[t].endSide)<0&&(t=n,i=e[n]);return t}function ho(r,e,t=r.length){let i=0;for(let n=0;n<t;)r.charCodeAt(n)==9?(i+=e-i%e,n++):(i++,n=or(r,n));return i}function Jc(r,e,t,i){for(let n=0,o=0;;){if(o>=e)return n;if(n==r.length)break;o+=r.charCodeAt(n)==9?t-o%t:1,n=or(r,n)}return i===!0?-1:r.length}var z0="\u037C",ry=typeof Symbol>"u"?"__"+z0:Symbol.for(z0),H0=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),iy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{},di=class{constructor(e,t){this.rules=[];let{finish:i}=t||{};function n(s){return/^@/.test(s)?[s]:s.split(/,\s*/)}function o(s,a,l,f){let c=[],u=/^@(\w+)\b/.exec(s[0]),d=u&&u[1]=="keyframes";if(u&&a==null)return l.push(s[0]+";");for(let p in a){let g=a[p];if(/&/.test(p))o(p.split(/,\s*/).map(b=>s.map(k=>b.replace(/&/,k))).reduce((b,k)=>b.concat(k)),g,l);else if(g&&typeof g=="object"){if(!u)throw new RangeError("The value of a property ("+p+") should be a primitive value.");o(n(p),g,c,d)}else g!=null&&c.push(p.replace(/_.*/,"").replace(/[A-Z]/g,b=>"-"+b.toLowerCase())+": "+g+";")}(c.length||d)&&l.push((i&&!u&&!f?s.map(i):s).join(", ")+" {"+c.join(" ")+"}")}for(let s in e)o(n(s),e[s],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=iy[ry]||1;return iy[ry]=e+1,z0+e.toString(36)}static mount(e,t){(e[H0]||new W0(e)).mount(Array.isArray(t)?t:[t])}},Yc=null,W0=class{constructor(e){if(!e.head&&e.adoptedStyleSheets&&typeof CSSStyleSheet<"u"){if(Yc)return e.adoptedStyleSheets=[Yc.sheet].concat(e.adoptedStyleSheets),e[H0]=Yc;this.sheet=new CSSStyleSheet,e.adoptedStyleSheets=[this.sheet].concat(e.adoptedStyleSheets),Yc=this}else{this.styleTag=(e.ownerDocument||e).createElement("style");let t=e.head||e;t.insertBefore(this.styleTag,t.firstChild)}this.modules=[],e[H0]=this}mount(e){let t=this.sheet,i=0,n=0;for(let o=0;o<e.length;o++){let s=e[o],a=this.modules.indexOf(s);if(a<n&&a>-1&&(this.modules.splice(a,1),n--,a=-1),a==-1){if(this.modules.splice(n++,0,s),t)for(let l=0;l<s.rules.length;l++)t.insertRule(s.rules[l],i++)}else{for(;n<a;)i+=this.modules[n++].rules.length;i+=s.rules.length,n++}}if(!t){let o="";for(let s=0;s<this.modules.length;s++)o+=this.modules[s].getRules()+`
`;this.styleTag.textContent=o}}};var Dn={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},aa={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},ny=typeof navigator<"u"&&/Chrome\/(\d+)/.exec(navigator.userAgent),_P=typeof navigator<"u"&&/Gecko\/\d+/.test(navigator.userAgent),rS=typeof navigator<"u"&&/Mac/.test(navigator.platform),iS=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),nS=rS||ny&&+ny[1]<57;for(Yt=0;Yt<10;Yt++)Dn[48+Yt]=Dn[96+Yt]=String(Yt);var Yt;for(Yt=1;Yt<=24;Yt++)Dn[Yt+111]="F"+Yt;var Yt;for(Yt=65;Yt<=90;Yt++)Dn[Yt]=String.fromCharCode(Yt+32),aa[Yt]=String.fromCharCode(Yt);var Yt;for(Xc in Dn)aa.hasOwnProperty(Xc)||(aa[Xc]=Dn[Xc]);var Xc;function oy(r){var e=nS&&(r.ctrlKey||r.altKey||r.metaKey)||iS&&r.shiftKey&&r.key&&r.key.length==1||r.key=="Unidentified",t=!e&&r.key||(r.shiftKey?aa:Dn)[r.keyCode]||r.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function au(r){let e;return r.nodeType==11?e=r.getSelection?r:r.ownerDocument:e=r,e.getSelection()}function da(r,e){return e?r==e||r.contains(e.nodeType!=1?e.parentNode:e):!1}function oS(r){let e=r.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function iu(r,e){if(!e.anchorNode)return!1;try{return da(r,e.anchorNode)}catch{return!1}}function nf(r){return r.nodeType==3?pa(r,0,r.nodeValue.length).getClientRects():r.nodeType==1?r.getClientRects():[]}function lu(r,e,t,i){return t?sy(r,e,t,i,-1)||sy(r,e,t,i,1):!1}function fu(r){for(var e=0;;e++)if(r=r.previousSibling,!r)return e}function sy(r,e,t,i,n){for(;;){if(r==t&&e==i)return!0;if(e==(n<0?0:of(r))){if(r.nodeName=="DIV")return!1;let o=r.parentNode;if(!o||o.nodeType!=1)return!1;e=fu(r)+(n<0?0:1),r=o}else if(r.nodeType==1){if(r=r.childNodes[e+(n<0?-1:0)],r.nodeType==1&&r.contentEditable=="false")return!1;e=n<0?of(r):0}else return!1}}function of(r){return r.nodeType==3?r.nodeValue.length:r.childNodes.length}var Hy={left:0,right:0,top:0,bottom:0};function Lp(r,e){let t=e?r.left:r.right;return{left:t,right:t,top:r.top,bottom:r.bottom}}function sS(r){return{left:0,right:r.innerWidth,top:0,bottom:r.innerHeight}}function aS(r,e,t,i,n,o,s,a){let l=r.ownerDocument,f=l.defaultView||window;for(let c=r;c;)if(c.nodeType==1){let u,d=c==l.body;if(d)u=sS(f);else{if(c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let b=c.getBoundingClientRect();u={left:b.left,right:b.left+c.clientWidth,top:b.top,bottom:b.top+c.clientHeight}}let p=0,g=0;if(n=="nearest")e.top<u.top?(g=-(u.top-e.top+s),t>0&&e.bottom>u.bottom+g&&(g=e.bottom-u.bottom+g+s)):e.bottom>u.bottom&&(g=e.bottom-u.bottom+s,t<0&&e.top-g<u.top&&(g=-(u.top+g-e.top+s)));else{let b=e.bottom-e.top,k=u.bottom-u.top;g=(n=="center"&&b<=k?e.top+b/2-k/2:n=="start"||n=="center"&&t<0?e.top-s:e.bottom-k+s)-u.top}if(i=="nearest"?e.left<u.left?(p=-(u.left-e.left+o),t>0&&e.right>u.right+p&&(p=e.right-u.right+p+o)):e.right>u.right&&(p=e.right-u.right+o,t<0&&e.left<u.left+p&&(p=-(u.left+p-e.left+o))):p=(i=="center"?e.left+(e.right-e.left)/2-(u.right-u.left)/2:i=="start"==a?e.left-o:e.right-(u.right-u.left)+o)-u.left,p||g)if(d)f.scrollBy(p,g);else{let b=0,k=0;if(g){let _=c.scrollTop;c.scrollTop+=g,k=c.scrollTop-_}if(p){let _=c.scrollLeft;c.scrollLeft+=p,b=c.scrollLeft-_}e={left:e.left-b,top:e.top-k,right:e.right-b,bottom:e.bottom-k},b&&Math.abs(b-p)<1&&(i="nearest"),k&&Math.abs(k-g)<1&&(n="nearest")}if(d)break;c=c.assignedSlot||c.parentNode}else if(c.nodeType==11)c=c.host;else break}var ep=class{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){this.set(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)}set(e,t,i,n){this.anchorNode=e,this.anchorOffset=t,this.focusNode=i,this.focusOffset=n}},la=null;function Wy(r){if(r.setActive)return r.setActive();if(la)return r.focus(la);let e=[];for(let t=r;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(r.focus(la==null?{get preventScroll(){return la={preventScroll:!0},!0}}:void 0),!la){la=!1;for(let t=0;t<e.length;){let i=e[t++],n=e[t++],o=e[t++];i.scrollTop!=n&&(i.scrollTop=n),i.scrollLeft!=o&&(i.scrollLeft=o)}}}var ay;function pa(r,e,t=e){let i=ay||(ay=document.createRange());return i.setEnd(r,t),i.setStart(r,e),i}function ha(r,e,t){let i={key:e,code:e,keyCode:t,which:t,cancelable:!0},n=new KeyboardEvent("keydown",i);n.synthetic=!0,r.dispatchEvent(n);let o=new KeyboardEvent("keyup",i);return o.synthetic=!0,r.dispatchEvent(o),n.defaultPrevented||o.defaultPrevented}function lS(r){for(;r;){if(r&&(r.nodeType==9||r.nodeType==11&&r.host))return r;r=r.assignedSlot||r.parentNode}return null}function Gy(r){for(;r.attributes.length;)r.removeAttributeNode(r.attributes[0])}function fS(r,e){let t=e.focusNode,i=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=i)return!1;for(;;)if(i){if(t.nodeType!=1)return!1;let n=t.childNodes[i-1];n.contentEditable=="false"?i--:(t=n,i=of(t))}else{if(t==r)return!0;i=fu(t),t=t.parentNode}}var sr=class{constructor(e,t,i=!0){this.node=e,this.offset=t,this.precise=i}static before(e,t){return new sr(e.parentNode,fu(e),t)}static after(e,t){return new sr(e.parentNode,fu(e)+1,t)}},Up=[],We=class{constructor(){this.parent=null,this.dom=null,this.dirty=2}get editorView(){if(!this.parent)throw new Error("Accessing view in orphan content view");return this.parent.editorView}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let i of this.children){if(i==e)return t;t+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}coordsAt(e,t){return null}sync(e){if(this.dirty&2){let t=this.dom,i=null,n;for(let o of this.children){if(o.dirty){if(!o.dom&&(n=i?i.nextSibling:t.firstChild)){let s=We.get(n);(!s||!s.parent&&s.canReuseDOM(o))&&o.reuseDOM(n)}o.sync(e),o.dirty=0}if(n=i?i.nextSibling:t.firstChild,e&&!e.written&&e.node==t&&n!=o.dom&&(e.written=!0),o.dom.parentNode==t)for(;n&&n!=o.dom;)n=ly(n);else t.insertBefore(o.dom,n);i=o.dom}for(n=i?i.nextSibling:t.firstChild,n&&e&&e.node==t&&(e.written=!0);n;)n=ly(n)}else if(this.dirty&1)for(let t of this.children)t.dirty&&(t.sync(e),t.dirty=0)}reuseDOM(e){}localPosFromDOM(e,t){let i;if(e==this.dom)i=this.dom.childNodes[t];else{let n=of(e)==0?0:t==0?-1:1;for(;;){let o=e.parentNode;if(o==this.dom)break;n==0&&o.firstChild!=o.lastChild&&(e==o.firstChild?n=-1:n=1),e=o}n<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!We.get(i);)i=i.nextSibling;if(!i)return this.length;for(let n=0,o=0;;n++){let s=this.children[n];if(s.dom==i)return o;o+=s.length+s.breakAfter}}domBoundsAround(e,t,i=0){let n=-1,o=-1,s=-1,a=-1;for(let l=0,f=i,c=i;l<this.children.length;l++){let u=this.children[l],d=f+u.length;if(f<e&&d>t)return u.domBoundsAround(e,t,f);if(d>=e&&n==-1&&(n=l,o=f),f>t&&u.dom.parentNode==this.dom){s=l,a=c;break}c=d,f=d+u.breakAfter}return{from:o,to:a<0?i+this.length:a,startDOM:(n?this.children[n-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:s<this.children.length&&s>=0?this.children[s].dom:null}}markDirty(e=!1){this.dirty|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.dirty|=2),t.dirty&1)return;t.dirty|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.dirty&&this.markParentsDirty(!0))}setDOM(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,i=Up){this.markDirty();for(let n=e;n<t;n++){let o=this.children[n];o.parent==this&&o.destroy()}this.children.splice(e,t-e,...i);for(let n=0;n<i.length;n++)i[n].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new cu(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}merge(e,t,i,n,o,s){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor}getSide(){return 0}destroy(){this.parent=null}};We.prototype.breakAfter=0;function ly(r){let e=r.nextSibling;return r.parentNode.removeChild(r),e}var cu=class{constructor(e,t,i){this.children=e,this.pos=t,this.i=i,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}};function Ky(r,e,t,i,n,o,s,a,l){let{children:f}=r,c=f.length?f[e]:null,u=o.length?o[o.length-1]:null,d=u?u.breakAfter:s;if(!(e==i&&c&&!s&&!d&&o.length<2&&c.merge(t,n,o.length?u:null,t==0,a,l))){if(i<f.length){let p=f[i];p&&n<p.length?(e==i&&(p=p.split(n),n=0),!d&&u&&p.merge(0,n,u,!0,0,l)?o[o.length-1]=p:(n&&p.merge(0,n,null,!1,0,l),o.push(p))):p?.breakAfter&&(u?u.breakAfter=1:s=1),i++}for(c&&(c.breakAfter=s,t>0&&(!s&&o.length&&c.merge(t,c.length,o[0],!1,a,0)?c.breakAfter=o.shift().breakAfter:(t<c.length||c.children.length&&c.children[c.children.length-1].length==0)&&c.merge(t,c.length,null,!1,a,0),e++));e<i&&o.length;)if(f[i-1].become(o[o.length-1]))i--,o.pop(),l=o.length?0:a;else if(f[e].become(o[0]))e++,o.shift(),a=o.length?0:l;else break;!o.length&&e&&i<f.length&&!f[e-1].breakAfter&&f[i].merge(0,0,f[e-1],!1,a,l)&&e--,(e<i||o.length)&&r.replaceChildren(e,i,o)}}function Qy(r,e,t,i,n,o){let s=r.childCursor(),{i:a,off:l}=s.findPos(t,1),{i:f,off:c}=s.findPos(e,-1),u=e-t;for(let d of i)u+=d.length;r.length+=u,Ky(r,f,c,a,l,i,0,n,o)}var Xr=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},tp=typeof document<"u"?document:{documentElement:{style:{}}},rp=/Edge\/(\d+)/.exec(Xr.userAgent),Jy=/MSIE \d/.test(Xr.userAgent),ip=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Xr.userAgent),ku=!!(Jy||ip||rp),fy=!ku&&/gecko\/(\d+)/i.test(Xr.userAgent),G0=!ku&&/Chrome\/(\d+)/.exec(Xr.userAgent),cy="webkitFontSmoothing"in tp.documentElement.style,Yy=!ku&&/Apple Computer/.test(Xr.vendor),uy=Yy&&(/Mobile\/\w+/.test(Xr.userAgent)||Xr.maxTouchPoints>2),ue={mac:uy||/Mac/.test(Xr.platform),windows:/Win/.test(Xr.platform),linux:/Linux|X11/.test(Xr.platform),ie:ku,ie_version:Jy?tp.documentMode||6:ip?+ip[1]:rp?+rp[1]:0,gecko:fy,gecko_version:fy?+(/Firefox\/(\d+)/.exec(Xr.userAgent)||[0,0])[1]:0,chrome:!!G0,chrome_version:G0?+G0[1]:0,ios:uy,android:/Android\b/.test(Xr.userAgent),webkit:cy,safari:Yy,webkit_version:cy?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:tp.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"},cS=256,nn=class extends We{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,i){return i&&(!(i instanceof nn)||this.length-(t-e)+i.length>cS)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new nn(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new sr(this.dom,e)}domBoundsAround(e,t,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return np(this.dom,e,t)}},mi=class extends We{constructor(e,t=[],i=0){super(),this.mark=e,this.children=t,this.length=i;for(let n of t)n.setParent(this)}setAttrs(e){if(Gy(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.dirty|=6)}sync(e){this.dom?this.dirty&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e)}merge(e,t,i,n,o,s){return i&&(!(i instanceof mi&&i.mark.eq(this.mark))||e&&o<=0||t<this.length&&s<=0)?!1:(Qy(this,e,t,i?i.children:[],o-1,s-1),this.markDirty(),!0)}split(e){let t=[],i=0,n=-1,o=0;for(let a of this.children){let l=i+a.length;l>e&&t.push(i<e?a.split(e-i):a),n<0&&i>=e&&(n=o),i=l,o++}let s=this.length-e;return this.length=e,n>-1&&(this.children.length=n,this.markDirty()),new mi(this.mark,t,s)}domAtPos(e){return $y(this,e)}coordsAt(e,t){return e1(this,e,t)}};function np(r,e,t){let i=r.nodeValue.length;e>i&&(e=i);let n=e,o=e,s=0;e==0&&t<0||e==i&&t>=0?ue.chrome||ue.gecko||(e?(n--,s=1):o<i&&(o++,s=-1)):t<0?n--:o<i&&o++;let a=pa(r,n,o).getClientRects();if(!a.length)return Hy;let l=a[(s?s<0:t>=0)?0:a.length-1];return ue.safari&&!s&&l.width==0&&(l=Array.prototype.find.call(a,f=>f.width)||l),s?Lp(l,s<0):l||null}var tn=class extends We{constructor(e,t,i){super(),this.widget=e,this.length=t,this.side=i,this.prevWidget=null}static create(e,t,i){return new(e.customView||tn)(e,t,i)}split(e){let t=tn.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,t,i,n,o,s){return i&&(!(i instanceof tn)||!this.widget.compare(i.widget)||e>0&&o<=0||t<this.length&&s<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}become(e){return e.length==this.length&&e instanceof tn&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.eq(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Ce.empty;let e=this;for(;e.parent;)e=e.parent;let t=e.editorView,i=t&&t.state.doc,n=this.posAtStart;return i?i.slice(n,n+this.length):Ce.empty}domAtPos(e){return e==0?sr.before(this.dom):sr.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let i=this.dom.getClientRects(),n=null;if(!i.length)return Hy;for(let o=e>0?i.length-1:0;n=i[o],!(e>0?o==0:o==i.length-1||n.top<n.bottom);o+=e>0?-1:1);return this.length?n:Lp(n,this.side>0)}get isEditable(){return!1}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}},uu=class extends tn{domAtPos(e){let{topView:t,text:i}=this.widget;return t?op(e,0,t,i,(n,o)=>n.domAtPos(o),n=>new sr(i,Math.min(n,i.nodeValue.length))):new sr(i,Math.min(e,i.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(e,t){let{topView:i,text:n}=this.widget;return i?Xy(e,t,i,n):Math.min(t,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(e,t){let{topView:i,text:n}=this.widget;return i?op(e,t,i,n,(o,s,a)=>o.coordsAt(s,a),(o,s)=>np(n,o,s)):np(n,e,t)}destroy(){var e;super.destroy(),(e=this.widget.topView)===null||e===void 0||e.destroy()}get isEditable(){return!0}canReuseDOM(){return!0}};function op(r,e,t,i,n,o){if(t instanceof mi){for(let s=t.dom.firstChild;s;s=s.nextSibling){let a=We.get(s);if(!a)return o(r,e);let l=da(s,i),f=a.length+(l?i.nodeValue.length:0);if(r<f||r==f&&a.getSide()<=0)return l?op(r,e,a,i,n,o):n(a,r,e);r-=f}return n(t,t.length,-1)}else return t.dom==i?o(r,e):n(t,r,e)}function Xy(r,e,t,i){if(t instanceof mi)for(let n of t.children){let o=0,s=da(n.dom,i);if(da(n.dom,r))return o+(s?Xy(r,e,n,i):n.localPosFromDOM(r,e));o+=s?i.nodeValue.length:n.length}else if(t.dom==i)return Math.min(e,i.nodeValue.length);return t.localPosFromDOM(r,e)}var xo=class extends We{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof xo&&e.side==this.side}split(){return new xo(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return sr.before(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){let t=this.dom.getBoundingClientRect(),i=uS(this,this.side>0?-1:1);return i&&i.top<t.bottom&&i.bottom>t.top?{left:t.left,right:t.right,top:i.top,bottom:i.bottom}:t}get overrideDOMText(){return Ce.empty}};nn.prototype.children=tn.prototype.children=xo.prototype.children=Up;function uS(r,e){let t=r.parent,i=t?t.children.indexOf(r):-1;for(;t&&i>=0;)if(e<0?i>0:i<t.children.length){let n=t.children[i+e];if(n instanceof nn){let o=n.coordsAt(e<0?n.length:0,e);if(o)return o}i+=e}else if(t instanceof mi&&t.parent)i=t.parent.children.indexOf(t)+(e<0?0:1),t=t.parent;else{let n=t.dom.lastChild;if(n&&n.nodeName=="BR")return n.getClientRects()[0];break}}function $y(r,e){let t=r.dom,{children:i}=r,n=0;for(let o=0;n<i.length;n++){let s=i[n],a=o+s.length;if(!(a==o&&s.getSide()<=0)){if(e>o&&e<a&&s.dom.parentNode==t)return s.domAtPos(e-o);if(e<=o)break;o=a}}for(let o=n;o>0;o--){let s=i[o-1];if(s.dom.parentNode==t)return s.domAtPos(s.length)}for(let o=n;o<i.length;o++){let s=i[o];if(s.dom.parentNode==t)return s.domAtPos(0)}return new sr(t,0)}function Zy(r,e,t){let i,{children:n}=r;t>0&&e instanceof mi&&n.length&&(i=n[n.length-1])instanceof mi&&i.mark.eq(e.mark)?Zy(i,e.children[0],t-1):(n.push(e),e.setParent(r)),r.length+=e.length}function e1(r,e,t){let i=null,n=-1,o=null,s=-1;function a(f,c){for(let u=0,d=0;u<f.children.length&&d<=c;u++){let p=f.children[u],g=d+p.length;g>=c&&(p.children.length?a(p,c-d):!o&&(g>c||d==g&&p.getSide()>0)?(o=p,s=c-d):(d<c||d==g&&p.getSide()<0)&&(i=p,n=c-d)),d=g}}a(r,e);let l=(t<0?i:o)||i||o;return l?l.coordsAt(Math.max(0,l==i?n:s),t):hS(r)}function hS(r){let e=r.dom.lastChild;if(!e)return r.dom.getBoundingClientRect();let t=nf(e);return t[t.length-1]||null}function sp(r,e){for(let t in r)t=="class"&&e.class?e.class+=" "+r.class:t=="style"&&e.style?e.style+=";"+r.style:e[t]=r[t];return e}function Vp(r,e){if(r==e)return!0;if(!r||!e)return!1;let t=Object.keys(r),i=Object.keys(e);if(t.length!=i.length)return!1;for(let n of t)if(i.indexOf(n)==-1||r[n]!==e[n])return!1;return!0}function ap(r,e,t){let i=null;if(e)for(let n in e)t&&n in t||r.removeAttribute(i=n);if(t)for(let n in t)e&&e[n]==t[n]||r.setAttribute(i=n,t[n]);return!!i}var $r=class{eq(e){return!1}updateDOM(e){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}ignoreEvent(e){return!0}get customView(){return null}destroy(e){}},Ke=function(r){return r[r.Text=0]="Text",r[r.WidgetBefore=1]="WidgetBefore",r[r.WidgetAfter=2]="WidgetAfter",r[r.WidgetRange=3]="WidgetRange",r}(Ke||(Ke={})),he=class extends Bi{constructor(e,t,i,n){super(),this.startSide=e,this.endSide=t,this.widget=i,this.spec=n}get heightRelevant(){return!1}static mark(e){return new ma(e)}static widget(e){let t=e.side||0,i=!!e.block;return t+=i?t>0?3e8:-4e8:t>0?1e8:-1e8,new Fn(e,t,t,i,e.widget||null,!1)}static replace(e){let t=!!e.block,i,n;if(e.isBlockGap)i=-5e8,n=4e8;else{let{start:o,end:s}=t1(e,t);i=(o?t?-3e8:-1:5e8)-1,n=(s?t?2e8:1:-6e8)+1}return new Fn(e,i,n,t,e.widget||null,!0)}static line(e){return new ys(e)}static set(e,t=!1){return Pe.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}};he.none=Pe.empty;var ma=class extends he{constructor(e){let{start:t,end:i}=t1(e);super(t?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){return this==e||e instanceof ma&&this.tagName==e.tagName&&this.class==e.class&&Vp(this.attrs,e.attrs)}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}};ma.prototype.point=!1;var ys=class extends he{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof ys&&Vp(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}};ys.prototype.mapMode=hr.TrackBefore;ys.prototype.point=!0;var Fn=class extends he{constructor(e,t,i,n,o,s){super(t,i,o,e),this.block=n,this.isReplace=s,this.mapMode=n?t<=0?hr.TrackBefore:hr.TrackAfter:hr.TrackDel}get type(){return this.startSide<this.endSide?Ke.WidgetRange:this.startSide<=0?Ke.WidgetBefore:Ke.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(e){return e instanceof Fn&&dS(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}};Fn.prototype.point=!0;function t1(r,e=!1){let{inclusiveStart:t,inclusiveEnd:i}=r;return t==null&&(t=r.inclusive),i==null&&(i=r.inclusive),{start:t??e,end:i??e}}function dS(r,e){return r==e||!!(r&&e&&r.compare(e))}function lp(r,e,t,i=0){let n=t.length-1;n>=0&&t[n]+i>=r?t[n]=Math.max(t[n],e):t.push(r,e)}var dr=class extends We{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,i,n,o,s){if(i){if(!(i instanceof dr))return!1;this.dom||i.transferDOM(this)}return n&&this.setDeco(i?i.attrs:null),Qy(this,e,t,i?i.children:[],o,s),!0}split(e){let t=new dr;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i,off:n}=this.childPos(e);n&&(t.append(this.children[i].split(n),0),this.children[i].merge(n,this.children[i].length,null,!1,0,0),i++);for(let o=i;o<this.children.length;o++)t.append(this.children[o],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,t}transferDOM(e){!this.dom||(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Vp(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){Zy(this,e,t)}addLineDeco(e){let t=e.spec.attributes,i=e.spec.class;t&&(this.attrs=sp(t,this.attrs||{})),i&&(this.attrs=sp({class:i},this.attrs||{}))}domAtPos(e){return $y(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.dirty|=6)}sync(e){var t;this.dom?this.dirty&4&&(Gy(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(ap(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e);let i=this.dom.lastChild;for(;i&&We.get(i)instanceof mi;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((t=We.get(i))===null||t===void 0?void 0:t.isEditable)==!1&&(!ue.ios||!this.children.some(n=>n instanceof nn))){let n=document.createElement("BR");n.cmIgnore=!0,this.dom.appendChild(n)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0;for(let t of this.children){if(!(t instanceof nn)||/[^ -~]/.test(t.text))return null;let i=nf(t.dom);if(i.length!=1)return null;e+=i[0].width}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length}:null}coordsAt(e,t){return e1(this,e,t)}become(e){return!1}get type(){return Ke.Text}static find(e,t){for(let i=0,n=0;i<e.children.length;i++){let o=e.children[i],s=n+o.length;if(s>=t){if(o instanceof dr)return o;if(s>t)break}n=s+o.breakAfter}return null}},Bn=class extends We{constructor(e,t,i){super(),this.widget=e,this.length=t,this.type=i,this.breakAfter=0,this.prevWidget=null}merge(e,t,i,n,o,s){return i&&(!(i instanceof Bn)||!this.widget.compare(i.widget)||e>0&&o<=0||t<this.length&&s<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?sr.before(this.dom):sr.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let i=new Bn(this.widget,t,this.type);return i.breakAfter=this.breakAfter,i}get children(){return Up}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Ce.empty}domBoundsAround(){return null}become(e){return e instanceof Bn&&e.type==this.type&&e.widget.constructor==this.widget.constructor?(e.widget.eq(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}},sf=class{constructor(e,t,i,n){this.doc=e,this.pos=t,this.end=i,this.disallowBlockEffectsFor=n,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!e.breakAfter&&!(e instanceof Bn&&e.type==Ke.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new dr),this.atCursorPos=!0),this.curLine}flushBuffer(e){this.pendingBuffer&&(this.curLine.append($c(new xo(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer([]),this.curLine=null,this.content.push(e)}finish(e){e?this.pendingBuffer=0:this.flushBuffer([]),this.posCovered()||this.getLine()}buildText(e,t,i){for(;e>0;){if(this.textOff==this.text.length){let{value:o,lineBreak:s,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(s){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer([]),this.curLine=null,e--;continue}else this.text=o,this.textOff=0}let n=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(0,i)),this.getLine().append($c(new nn(this.text.slice(this.textOff,this.textOff+n)),t),i),this.atCursorPos=!0,this.textOff+=n,e-=n,i=0}}span(e,t,i,n){this.buildText(t-e,i,n),this.pos=t,this.openStart<0&&(this.openStart=n)}point(e,t,i,n,o,s){if(this.disallowBlockEffectsFor[s]&&i instanceof Fn){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=t-e;if(i instanceof Fn)if(i.block){let{type:l}=i;l==Ke.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Bn(i.widget||new hu("div"),a,l))}else{let l=tn.create(i.widget||new hu("span"),a,a?0:i.startSide),f=this.atCursorPos&&!l.isEditable&&o<=n.length&&(e<t||i.startSide>0),c=!l.isEditable&&(e<t||i.startSide<=0),u=this.getLine();this.pendingBuffer==2&&!f&&(this.pendingBuffer=0),this.flushBuffer(n),f&&(u.append($c(new xo(1),n),o),o=n.length+Math.max(0,o-n.length)),u.append($c(l,n),o),this.atCursorPos=c,this.pendingBuffer=c?e<t?1:2:0}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=o)}static build(e,t,i,n,o){let s=new sf(e,t,i,o);return s.openEnd=Pe.spans(n,t,i,s),s.openStart<0&&(s.openStart=s.openEnd),s.finish(s.openEnd),s}};function $c(r,e){for(let t of e)r=new mi(t,[r],r.length);return r}var hu=class extends $r{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}},r1=oe.define(),i1=oe.define(),n1=oe.define(),o1=oe.define(),fp=oe.define(),s1=oe.define(),a1=oe.define({combine:r=>r.some(e=>e)}),l1=oe.define({combine:r=>r.some(e=>e)}),ga=class{constructor(e,t="nearest",i="nearest",n=5,o=5){this.range=e,this.y=t,this.x=i,this.yMargin=n,this.xMargin=o}map(e){return e.empty?this:new ga(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}},hy=me.define({map:(r,e)=>r.map(e)});function kr(r,e,t){let i=r.facet(o1);i.length?i[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}var Su=oe.define({combine:r=>r.length?r[0]:!0}),pS=0,Ql=oe.define(),Qe=class{constructor(e,t,i,n){this.id=e,this.create=t,this.domEventHandlers=i,this.extension=n(this)}static define(e,t){let{eventHandlers:i,provide:n,decorations:o}=t||{};return new Qe(pS++,e,i,s=>{let a=[Ql.of(s)];return o&&a.push(af.of(l=>{let f=l.plugin(s);return f?o(f):he.none})),n&&a.push(n(s)),a})}static fromClass(e,t){return Qe.define(i=>new e(i),t)}},Zl=class{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(i){if(kr(t.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){kr(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(i){kr(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}},f1=oe.define(),c1=oe.define(),af=oe.define(),u1=oe.define(),h1=oe.define(),Jl=oe.define(),pi=class{constructor(e,t,i,n){this.fromA=e,this.toA=t,this.fromB=i,this.toB=n}join(e){return new pi(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,i=this;for(;t>0;t--){let n=e[t-1];if(!(n.fromA>i.toA)){if(n.toA<i.fromA)break;i=i.join(n),e.splice(t-1,1)}}return e.splice(t,0,i),e}static extendWithRanges(e,t){if(t.length==0)return e;let i=[];for(let n=0,o=0,s=0,a=0;;n++){let l=n==e.length?null:e[n],f=s-a,c=l?l.fromB:1e9;for(;o<t.length&&t[o]<c;){let u=t[o],d=t[o+1],p=Math.max(a,u),g=Math.min(c,d);if(p<=g&&new pi(p+f,g+f,p,g).addToSet(i),d>c)break;o+=2}if(!l)return i;new pi(l.fromA,l.toA,l.fromB,l.toB).addToSet(i),s=l.toA,a=l.toB}}},xa=class{constructor(e,t,i){this.view=e,this.state=t,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=Ft.empty(this.startState.doc.length);for(let s of i)this.changes=this.changes.compose(s.changes);let n=[];this.changes.iterChangedRanges((s,a,l,f)=>n.push(new pi(s,a,l,f))),this.changedRanges=n;let o=e.hasFocus;o!=e.inputState.notifiedFocused&&(e.inputState.notifiedFocused=o,this.flags|=1)}static create(e,t,i){return new xa(e,t,i)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}},Nt=function(r){return r[r.LTR=0]="LTR",r[r.RTL=1]="RTL",r}(Nt||(Nt={})),cp=Nt.LTR,mS=Nt.RTL;function d1(r){let e=[];for(let t=0;t<r.length;t++)e.push(1<<+r[t]);return e}var gS=d1("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),xS=d1("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),up=Object.create(null),en=[];for(let r of["()","[]","{}"]){let e=r.charCodeAt(0),t=r.charCodeAt(1);up[e]=t,up[t]=-e}function bS(r){return r<=247?gS[r]:1424<=r&&r<=1524?2:1536<=r&&r<=1785?xS[r-1536]:1774<=r&&r<=2220?4:8192<=r&&r<=8203?256:64336<=r&&r<=65023?4:r==8204?256:1}var yS=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/,go=class{constructor(e,t,i){this.from=e,this.to=t,this.level=i}get dir(){return this.level%2?mS:cp}side(e,t){return this.dir==t==e?this.to:this.from}static find(e,t,i,n){let o=-1;for(let s=0;s<e.length;s++){let a=e[s];if(a.from<=t&&a.to>=t){if(a.level==i)return s;(o<0||(n!=0?n<0?a.from<t:a.to>t:e[o].level>a.level))&&(o=s)}}if(o<0)throw new RangeError("Index out of range");return o}},Ut=[];function vS(r,e){let t=r.length,i=e==cp?1:2,n=e==cp?2:1;if(!r||i==1&&!yS.test(r))return p1(t);for(let s=0,a=i,l=i;s<t;s++){let f=bS(r.charCodeAt(s));f==512?f=a:f==8&&l==4&&(f=16),Ut[s]=f==4?2:f,f&7&&(l=f),a=f}for(let s=0,a=i,l=i;s<t;s++){let f=Ut[s];if(f==128)s<t-1&&a==Ut[s+1]&&a&24?f=Ut[s]=a:Ut[s]=256;else if(f==64){let c=s+1;for(;c<t&&Ut[c]==64;)c++;let u=s&&a==8||c<t&&Ut[c]==8?l==1?1:8:256;for(let d=s;d<c;d++)Ut[d]=u;s=c-1}else f==8&&l==1&&(Ut[s]=1);a=f,f&7&&(l=f)}for(let s=0,a=0,l=0,f,c,u;s<t;s++)if(c=up[f=r.charCodeAt(s)])if(c<0){for(let d=a-3;d>=0;d-=3)if(en[d+1]==-c){let p=en[d+2],g=p&2?i:p&4?p&1?n:i:0;g&&(Ut[s]=Ut[en[d]]=g),a=d;break}}else{if(en.length==189)break;en[a++]=s,en[a++]=f,en[a++]=l}else if((u=Ut[s])==2||u==1){let d=u==i;l=d?0:1;for(let p=a-3;p>=0;p-=3){let g=en[p+2];if(g&2)break;if(d)en[p+2]|=2;else{if(g&4)break;en[p+2]|=4}}}for(let s=0;s<t;s++)if(Ut[s]==256){let a=s+1;for(;a<t&&Ut[a]==256;)a++;let l=(s?Ut[s-1]:i)==1,f=(a<t?Ut[a]:i)==1,c=l==f?l?1:2:i;for(let u=s;u<a;u++)Ut[u]=c;s=a-1}let o=[];if(i==1)for(let s=0;s<t;){let a=s,l=Ut[s++]!=1;for(;s<t&&l==(Ut[s]!=1);)s++;if(l)for(let f=s;f>a;){let c=f,u=Ut[--f]!=2;for(;f>a&&u==(Ut[f-1]!=2);)f--;o.push(new go(f,c,u?2:1))}else o.push(new go(a,s,0))}else for(let s=0;s<t;){let a=s,l=Ut[s++]==2;for(;s<t&&l==(Ut[s]==2);)s++;o.push(new go(a,s,l?1:2))}return o}function p1(r){return[new go(0,r,0)]}var m1="";function wS(r,e,t,i,n){var o;let s=i.head-r.from,a=-1;if(s==0){if(!n||!r.length)return null;e[0].level!=t&&(s=e[0].side(!1,t),a=0)}else if(s==r.length){if(n)return null;let d=e[e.length-1];d.level!=t&&(s=d.side(!0,t),a=e.length-1)}a<0&&(a=go.find(e,s,(o=i.bidiLevel)!==null&&o!==void 0?o:-1,i.assoc));let l=e[a];s==l.side(n,t)&&(l=e[a+=n?1:-1],s=l.side(!n,t));let f=n==(l.dir==t),c=or(r.text,s,f);if(m1=r.text.slice(Math.min(s,c),Math.max(s,c)),c!=l.side(n,t))return K.cursor(c+r.from,f?-1:1,l.level);let u=a==(n?e.length-1:0)?null:e[a+(n?1:-1)];return!u&&l.level!=t?K.cursor(n?r.to:r.from,n?-1:1,t):u&&u.level<l.level?K.cursor(u.side(!n,t)+r.from,n?1:-1,u.level):K.cursor(c+r.from,n?-1:1,l.level)}var mo="\uFFFF",du=class{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(ke.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=mo}readRange(e,t){if(!e)return this;let i=e.parentNode;for(let n=e;;){this.findPointBefore(i,n),this.readNode(n);let o=n.nextSibling;if(o==t)break;let s=We.get(n),a=We.get(o);(s&&a?s.breakAfter:(s?s.breakAfter:dy(n))||dy(o)&&(n.nodeName!="BR"||n.cmIgnore))&&this.lineBreak(),n=o}return this.findPointBefore(i,t),this}readTextNode(e){let t=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,t.length));for(let i=0,n=this.lineSeparator?null:/\r\n?|\n/g;;){let o=-1,s=1,a;if(this.lineSeparator?(o=t.indexOf(this.lineSeparator,i),s=this.lineSeparator.length):(a=n.exec(t))&&(o=a.index,s=a[0].length),this.append(t.slice(i,o<0?t.length:o)),o<0)break;if(this.lineBreak(),s>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=s-1);i=o+s}}readNode(e){if(e.cmIgnore)return;let t=We.get(e),i=t&&t.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let n=i.iter();!n.next().done;)n.lineBreak?this.lineBreak():this.append(n.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==t&&(i.pos=this.text.length)}findPointInside(e,t){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+Math.min(t,i.offset))}};function dy(r){return r.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(r.nodeName)}var pu=class{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}},mu=class extends We{constructor(e){super(),this.view=e,this.compositionDeco=he.none,this.decorations=[],this.dynamicDecorationMap=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new dr],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new pi(0,0,0,e.state.doc.length)],0)}get editorView(){return this.view}get length(){return this.view.state.doc.length}update(e){let t=e.changedRanges;this.minWidth>0&&t.length&&(t.every(({fromA:s,toA:a})=>a<this.minWidthFrom||s>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=he.none:(e.transactions.length||this.dirty)&&(this.compositionDeco=ES(this.view,e.changes)),(ue.ie||ue.chrome)&&!this.compositionDeco.size&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let i=this.decorations,n=this.updateDeco(),o=SS(i,n,e.changes);return t=pi.extendWithRanges(t,o),this.dirty==0&&t.length==0?!1:(this.updateInner(t,e.startState.doc.length),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=ue.chrome||ue.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(o),this.dirty=0,o&&(o.written||i.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""});let n=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof Bn&&o.widget instanceof gu&&n.push(o.dom);i.updateGaps(n)}updateChildren(e,t){let i=this.childCursor(t);for(let n=e.length-1;;n--){let o=n>=0?e[n]:null;if(!o)break;let{fromA:s,toA:a,fromB:l,toB:f}=o,{content:c,breakAtStart:u,openStart:d,openEnd:p}=sf.build(this.view.state.doc,l,f,this.decorations,this.dynamicDecorationMap),{i:g,off:b}=i.findPos(a,1),{i:k,off:_}=i.findPos(s,-1);Ky(this,k,_,g,b,c,u,d,p)}}updateSelection(e=!1,t=!1){if((e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange(),!(t||this.mayControlSelection()))return;let i=this.forceSelection;this.forceSelection=!1;let n=this.view.state.selection.main,o=this.domAtPos(n.anchor),s=n.empty?o:this.domAtPos(n.head);if(ue.gecko&&n.empty&&AS(o)){let l=document.createTextNode("");this.view.observer.ignore(()=>o.node.insertBefore(l,o.node.childNodes[o.offset]||null)),o=s=new sr(l,0),i=!0}let a=this.view.observer.selectionRange;(i||!a.focusNode||!lu(o.node,o.offset,a.anchorNode,a.anchorOffset)||!lu(s.node,s.offset,a.focusNode,a.focusOffset))&&(this.view.observer.ignore(()=>{ue.android&&ue.chrome&&this.dom.contains(a.focusNode)&&_S(a.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let l=au(this.view.root);if(l)if(n.empty){if(ue.gecko){let f=kS(o.node,o.offset);if(f&&f!=3){let c=x1(o.node,o.offset,f==1?1:-1);c&&(o=new sr(c,f==1?0:c.nodeValue.length))}}l.collapse(o.node,o.offset),n.bidiLevel!=null&&a.cursorBidiLevel!=null&&(a.cursorBidiLevel=n.bidiLevel)}else if(l.extend){l.collapse(o.node,o.offset);try{l.extend(s.node,s.offset)}catch{}}else{let f=document.createRange();n.anchor>n.head&&([o,s]=[s,o]),f.setEnd(s.node,s.offset),f.setStart(o.node,o.offset),l.removeAllRanges(),l.addRange(f)}}),this.view.observer.setSelectionRange(o,s)),this.impreciseAnchor=o.precise?null:new sr(a.anchorNode,a.anchorOffset),this.impreciseHead=s.precise?null:new sr(a.focusNode,a.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let{view:e}=this,t=e.state.selection.main,i=au(e.root),{anchorNode:n,anchorOffset:o}=e.observer.selectionRange;if(!i||!t.empty||!t.assoc||!i.modify)return;let s=dr.find(this,t.head);if(!s)return;let a=s.posAtStart;if(t.head==a||t.head==a+s.length)return;let l=this.coordsAt(t.head,-1),f=this.coordsAt(t.head,1);if(!l||!f||l.bottom>f.top)return;let c=this.domAtPos(t.head+t.assoc);i.collapse(c.node,c.offset),i.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let u=e.observer.selectionRange;e.docView.posFromDOM(u.anchorNode,u.anchorOffset)!=t.from&&i.collapse(n,o)}mayControlSelection(){let e=this.view.root.activeElement;return e==this.dom||iu(this.dom,this.view.observer.selectionRange)&&!(e&&this.dom.contains(e))}nearest(e){for(let t=e;t;){let i=We.get(t);if(i&&i.rootView==this)return i;t=t.parentNode}return null}posFromDOM(e,t){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,t)+i.posAtStart}domAtPos(e){let{i:t,off:i}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let n=this.children[t];if(i<n.length||n instanceof dr)break;t++,i=0}return this.children[t].domAtPos(i)}coordsAt(e,t){for(let i=this.length,n=this.children.length-1;;n--){let o=this.children[n],s=i-o.breakAfter-o.length;if(e>s||e==s&&o.type!=Ke.WidgetBefore&&o.type!=Ke.WidgetAfter&&(!n||t==2||this.children[n-1].breakAfter||this.children[n-1].type==Ke.WidgetBefore&&t>-2))return o.coordsAt(e-s,t);i=s}}measureVisibleLineHeights(e){let t=[],{from:i,to:n}=e,o=this.view.contentDOM.clientWidth,s=o>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==Nt.LTR;for(let f=0,c=0;c<this.children.length;c++){let u=this.children[c],d=f+u.length;if(d>n)break;if(f>=i){let p=u.dom.getBoundingClientRect();if(t.push(p.height),s){let g=u.dom.lastChild,b=g?nf(g):[];if(b.length){let k=b[b.length-1],_=l?k.right-p.left:p.right-k.left;_>a&&(a=_,this.minWidth=o,this.minWidthFrom=f,this.minWidthTo=d)}}}f=d+u.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?Nt.RTL:Nt.LTR}measureTextSize(){for(let n of this.children)if(n instanceof dr){let o=n.measureTextSize();if(o)return o}let e=document.createElement("div"),t,i;return e.className="cm-line",e.style.width="99999px",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let n=nf(e.firstChild)[0];t=e.getBoundingClientRect().height,i=n?n.width/27:7,e.remove()}),{lineHeight:t,charWidth:i}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new cu(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let i=0,n=0;;n++){let o=n==t.viewports.length?null:t.viewports[n],s=o?o.from-1:this.length;if(s>i){let a=t.lineBlockAt(s).bottom-t.lineBlockAt(i).top;e.push(he.replace({widget:new gu(a),block:!0,inclusive:!0,isBlockGap:!0}).range(i,s))}if(!o)break;i=o.to+1}return he.set(e)}updateDeco(){let e=this.view.state.facet(af).map((t,i)=>(this.dynamicDecorationMap[i]=typeof t=="function")?t(this.view):t);for(let t=e.length;t<e.length+3;t++)this.dynamicDecorationMap[t]=!1;return this.decorations=[...e,this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let{range:t}=e,i=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),n;if(!i)return;!t.empty&&(n=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(i={left:Math.min(i.left,n.left),top:Math.min(i.top,n.top),right:Math.max(i.right,n.right),bottom:Math.max(i.bottom,n.bottom)});let o=0,s=0,a=0,l=0;for(let c of this.view.state.facet(h1).map(u=>u(this.view)))if(c){let{left:u,right:d,top:p,bottom:g}=c;u!=null&&(o=Math.max(o,u)),d!=null&&(s=Math.max(s,d)),p!=null&&(a=Math.max(a,p)),g!=null&&(l=Math.max(l,g))}let f={left:i.left-o,top:i.top-a,right:i.right+s,bottom:i.bottom+l};aS(this.view.scrollDOM,f,t.head<t.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==Nt.LTR)}};function AS(r){return r.node.nodeType==1&&r.node.firstChild&&(r.offset==0||r.node.childNodes[r.offset-1].contentEditable=="false")&&(r.offset==r.node.childNodes.length||r.node.childNodes[r.offset].contentEditable=="false")}var gu=class extends $r{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}};function g1(r){let e=r.observer.selectionRange,t=e.focusNode&&x1(e.focusNode,e.focusOffset,0);if(!t)return null;let i=r.docView.nearest(t);if(!i)return null;if(i instanceof dr){let n=t;for(;n.parentNode!=i.dom;)n=n.parentNode;let o=n.previousSibling;for(;o&&!We.get(o);)o=o.previousSibling;let s=o?We.get(o).posAtEnd:i.posAtStart;return{from:s,to:s,node:n,text:t}}else{for(;;){let{parent:o}=i;if(!o)return null;if(o instanceof dr)break;i=o}let n=i.posAtStart;return{from:n,to:n+i.length,node:i.dom,text:t}}}function ES(r,e){let t=g1(r);if(!t)return he.none;let{from:i,to:n,node:o,text:s}=t,a=e.mapPos(i,1),l=Math.max(a,e.mapPos(n,-1)),{state:f}=r,c=o.nodeType==3?o.nodeValue:new du([],f).readRange(o.firstChild,null).text;if(l-a<c.length)if(f.doc.sliceString(a,Math.min(f.doc.length,a+c.length),mo)==c)l=a+c.length;else if(f.doc.sliceString(Math.max(0,l-c.length),l,mo)==c)a=l-c.length;else return he.none;else if(f.doc.sliceString(a,l,mo)!=c)return he.none;let u=We.get(o);return u instanceof uu?u=u.widget.topView:u&&(u.parent=null),he.set(he.replace({widget:new hp(o,s,u),inclusive:!0}).range(a,l))}var hp=class extends $r{constructor(e,t,i){super(),this.top=e,this.text=t,this.topView=i}eq(e){return this.top==e.top&&this.text==e.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return uu}};function x1(r,e,t){for(;;){if(r.nodeType==3)return r;if(r.nodeType==1&&e>0&&t<=0)r=r.childNodes[e-1],e=of(r);else if(r.nodeType==1&&e<r.childNodes.length&&t>=0)r=r.childNodes[e],e=0;else return null}}function kS(r,e){return r.nodeType!=1?0:(e&&r.childNodes[e-1].contentEditable=="false"?1:0)|(e<r.childNodes.length&&r.childNodes[e].contentEditable=="false"?2:0)}var dp=class{constructor(){this.changes=[]}compareRange(e,t){lp(e,t,this.changes)}comparePoint(e,t){lp(e,t,this.changes)}};function SS(r,e,t){let i=new dp;return Pe.compare(r,e,t,i),i.changes}function _S(r,e){for(let t=r;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function CS(r,e,t=1){let i=r.charCategorizer(e),n=r.doc.lineAt(e),o=e-n.from;if(n.length==0)return K.cursor(e);o==0?t=1:o==n.length&&(t=-1);let s=o,a=o;t<0?s=or(n.text,o,!1):a=or(n.text,o);let l=i(n.text.slice(s,a));for(;s>0;){let f=or(n.text,s,!1);if(i(n.text.slice(f,s))!=l)break;s=f}for(;a<n.length;){let f=or(n.text,a);if(i(n.text.slice(a,f))!=l)break;a=f}return K.range(s+n.from,a+n.from)}function TS(r,e){return e.left>r?e.left-r:Math.max(0,r-e.right)}function MS(r,e){return e.top>r?e.top-r:Math.max(0,r-e.bottom)}function K0(r,e){return r.top<e.bottom-1&&r.bottom>e.top+1}function py(r,e){return e<r.top?{top:e,left:r.left,right:r.right,bottom:r.bottom}:r}function my(r,e){return e>r.bottom?{top:r.top,left:r.left,right:r.right,bottom:e}:r}function pp(r,e,t){let i,n,o,s,a=!1,l,f,c,u;for(let g=r.firstChild;g;g=g.nextSibling){let b=nf(g);for(let k=0;k<b.length;k++){let _=b[k];n&&K0(n,_)&&(_=py(my(_,n.bottom),n.top));let P=TS(e,_),N=MS(t,_);if(P==0&&N==0)return g.nodeType==3?gy(g,e,t):pp(g,e,t);(!i||s>N||s==N&&o>P)&&(i=g,n=_,o=P,s=N,a=!P||(P>0?k<b.length-1:k>0)),P==0?t>_.bottom&&(!c||c.bottom<_.bottom)?(l=g,c=_):t<_.top&&(!u||u.top>_.top)&&(f=g,u=_):c&&K0(c,_)?c=my(c,_.bottom):u&&K0(u,_)&&(u=py(u,_.top))}}if(c&&c.bottom>=t?(i=l,n=c):u&&u.top<=t&&(i=f,n=u),!i)return{node:r,offset:0};let d=Math.max(n.left,Math.min(n.right,e));if(i.nodeType==3)return gy(i,d,t);if(a&&i.contentEditable!="false")return pp(i,d,t);let p=Array.prototype.indexOf.call(r.childNodes,i)+(e>=(n.left+n.right)/2?1:0);return{node:r,offset:p}}function gy(r,e,t){let i=r.nodeValue.length,n=-1,o=1e9,s=0;for(let a=0;a<i;a++){let l=pa(r,a,a+1).getClientRects();for(let f=0;f<l.length;f++){let c=l[f];if(c.top==c.bottom)continue;s||(s=e-c.left);let u=(c.top>t?c.top-t:t-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&u<o){let d=e>=(c.left+c.right)/2,p=d;if((ue.chrome||ue.gecko)&&pa(r,a).getBoundingClientRect().left==c.right&&(p=!d),u<=0)return{node:r,offset:a+(p?1:0)};n=a+(p?1:0),o=u}}}return{node:r,offset:n>-1?n:s>0?r.nodeValue.length:0}}function b1(r,{x:e,y:t},i,n=-1){var o;let s=r.contentDOM.getBoundingClientRect(),a=s.top+r.viewState.paddingTop,l,{docHeight:f}=r.viewState,c=t-a;if(c<0)return 0;if(c>f)return r.state.doc.length;for(let _=r.defaultLineHeight/2,P=!1;l=r.elementAtHeight(c),l.type!=Ke.Text;)for(;c=n>0?l.bottom+_:l.top-_,!(c>=0&&c<=f);){if(P)return i?null:0;P=!0,n=-n}t=a+c;let u=l.from;if(u<r.viewport.from)return r.viewport.from==0?0:i?null:xy(r,s,l,e,t);if(u>r.viewport.to)return r.viewport.to==r.state.doc.length?r.state.doc.length:i?null:xy(r,s,l,e,t);let d=r.dom.ownerDocument,p=r.root.elementFromPoint?r.root:d,g=p.elementFromPoint(e,t);g&&!r.contentDOM.contains(g)&&(g=null),g||(e=Math.max(s.left+1,Math.min(s.right-1,e)),g=p.elementFromPoint(e,t),g&&!r.contentDOM.contains(g)&&(g=null));let b,k=-1;if(g&&((o=r.docView.nearest(g))===null||o===void 0?void 0:o.isEditable)!=!1){if(d.caretPositionFromPoint){let _=d.caretPositionFromPoint(e,t);_&&({offsetNode:b,offset:k}=_)}else if(d.caretRangeFromPoint){let _=d.caretRangeFromPoint(e,t);_&&({startContainer:b,startOffset:k}=_,(!r.contentDOM.contains(b)||ue.safari&&OS(b,k,e)||ue.chrome&&NS(b,k,e))&&(b=void 0))}}if(!b||!r.docView.dom.contains(b)){let _=dr.find(r.docView,u);if(!_)return c>l.top+l.height/2?l.to:l.from;({node:b,offset:k}=pp(_.dom,e,t))}return r.docView.posFromDOM(b,k)}function xy(r,e,t,i,n){let o=Math.round((i-e.left)*r.defaultCharacterWidth);if(r.lineWrapping&&t.height>r.defaultLineHeight*1.5){let a=Math.floor((n-t.top)/r.defaultLineHeight);o+=a*r.viewState.heightOracle.lineLength}let s=r.state.sliceDoc(t.from,t.to);return t.from+Jc(s,o,r.state.tabSize)}function OS(r,e,t){let i;if(r.nodeType!=3||e!=(i=r.nodeValue.length))return!1;for(let n=r.nextSibling;n;n=n.nextSibling)if(n.nodeType!=1||n.nodeName!="BR")return!1;return pa(r,i-1,i).getBoundingClientRect().left>t}function NS(r,e,t){if(e!=0)return!1;for(let n=r;;){let o=n.parentNode;if(!o||o.nodeType!=1||o.firstChild!=n)return!1;if(o.classList.contains("cm-line"))break;n=o}let i=r.nodeType==1?r.getBoundingClientRect():pa(r,0,Math.max(r.nodeValue.length,1)).getBoundingClientRect();return t-i.left>5}function PS(r,e,t,i){let n=r.state.doc.lineAt(e.head),o=!i||!r.lineWrapping?null:r.coordsAtPos(e.assoc<0&&e.head>n.from?e.head-1:e.head);if(o){let l=r.dom.getBoundingClientRect(),f=r.textDirectionAt(n.from),c=r.posAtCoords({x:t==(f==Nt.LTR)?l.right-1:l.left+1,y:(o.top+o.bottom)/2});if(c!=null)return K.cursor(c,t?-1:1)}let s=dr.find(r.docView,e.head),a=s?t?s.posAtEnd:s.posAtStart:t?n.to:n.from;return K.cursor(a,t?-1:1)}function by(r,e,t,i){let n=r.state.doc.lineAt(e.head),o=r.bidiSpans(n),s=r.textDirectionAt(n.from);for(let a=e,l=null;;){let f=wS(n,o,s,a,t),c=m1;if(!f){if(n.number==(t?r.state.doc.lines:1))return a;c=`
`,n=r.state.doc.line(n.number+(t?1:-1)),o=r.bidiSpans(n),f=K.cursor(t?n.from:n.to)}if(l){if(!l(c))return a}else{if(!i)return f;l=i(c)}a=f}}function IS(r,e,t){let i=r.state.charCategorizer(e),n=i(t);return o=>{let s=i(o);return n==ze.Space&&(n=s),n==s}}function RS(r,e,t,i){let n=e.head,o=t?1:-1;if(n==(t?r.state.doc.length:0))return K.cursor(n,e.assoc);let s=e.goalColumn,a,l=r.contentDOM.getBoundingClientRect(),f=r.coordsAtPos(n),c=r.documentTop;if(f)s==null&&(s=f.left-l.left),a=o<0?f.top:f.bottom;else{let p=r.viewState.lineBlockAt(n);s==null&&(s=Math.min(l.right-l.left,r.defaultCharacterWidth*(n-p.from))),a=(o<0?p.top:p.bottom)+c}let u=l.left+s,d=i??r.defaultLineHeight>>1;for(let p=0;;p+=10){let g=a+(d+p)*o,b=b1(r,{x:u,y:g},!1,o);if(g<l.top||g>l.bottom||(o<0?b<n:b>n))return K.cursor(b,e.assoc,void 0,s)}}function Q0(r,e,t){let i=r.state.facet(u1).map(n=>n(r));for(;;){let n=!1;for(let o of i)o.between(t.from-1,t.from+1,(s,a,l)=>{t.from>s&&t.from<a&&(t=e.head>t.from?K.cursor(s,1):K.cursor(a,-1),n=!0)});if(!n)return t}}var mp=class{constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.mouseSelection=null;for(let t in ar){let i=ar[t];e.contentDOM.addEventListener(t,n=>{!yy(e,n)||this.ignoreDuringComposition(n)||t=="keydown"&&this.keydown(e,n)||(this.mustFlushObserver(n)&&e.observer.forceFlush(),this.runCustomHandlers(t,e,n)?n.preventDefault():i(e,n))},xp[t]),this.registeredEvents.push(t)}ue.chrome&&ue.chrome_version==102&&e.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?e.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,e.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=e.hasFocus,ue.safari&&e.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e,t){var i;let n;this.customHandlers=[];for(let o of t)if(n=(i=o.update(e).spec)===null||i===void 0?void 0:i.domEventHandlers){this.customHandlers.push({plugin:o.value,handlers:n});for(let s in n)this.registeredEvents.indexOf(s)<0&&s!="scroll"&&(this.registeredEvents.push(s),e.contentDOM.addEventListener(s,a=>{!yy(e,a)||this.runCustomHandlers(s,e,a)&&a.preventDefault()}))}}runCustomHandlers(e,t,i){for(let n of this.customHandlers){let o=n.handlers[e];if(o)try{if(o.call(n.plugin,i,t)||i.defaultPrevented)return!0}catch(s){kr(t.state,s)}}return!1}runScrollHandlers(e,t){this.lastScrollTop=e.scrollDOM.scrollTop,this.lastScrollLeft=e.scrollDOM.scrollLeft;for(let i of this.customHandlers){let n=i.handlers.scroll;if(n)try{n.call(i.plugin,t,e)}catch(o){kr(e.state,o)}}}keydown(e,t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),t.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(ue.android&&ue.chrome&&!t.synthetic&&(t.keyCode==13||t.keyCode==8))return e.observer.delayAndroidKey(t.key,t.keyCode),!0;let i;return ue.ios&&!t.synthetic&&!t.altKey&&!t.metaKey&&((i=y1.find(n=>n.keyCode==t.keyCode))&&!t.ctrlKey||DS.indexOf(t.key)>-1&&t.ctrlKey&&!t.shiftKey)?(this.pendingIOSKey=i||t,setTimeout(()=>this.flushIOSKey(e),250),!0):!1}flushIOSKey(e){let t=this.pendingIOSKey;return t?(this.pendingIOSKey=void 0,ha(e.contentDOM,t.key,t.keyCode)):!1}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:ue.safari&&!ue.ios&&Date.now()-this.compositionEndedAt<100?(this.compositionEndedAt=0,!0):!1:!1}mustFlushObserver(e){return e.type=="keydown"&&e.keyCode!=229}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}},y1=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],DS="dthko",v1=[16,17,18,20,91,92,224,225],gp=class{constructor(e,t,i,n){this.view=e,this.style=i,this.mustSelect=n,this.lastEvent=t;let o=e.contentDOM.ownerDocument;o.addEventListener("mousemove",this.move=this.move.bind(this)),o.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(ke.allowMultipleSelections)&&BS(e,t),this.dragMove=FS(e,t),this.dragging=LS(e,t)&&k1(t)==1?null:!1,this.dragging===!1&&(t.preventDefault(),this.select(t))}move(e){if(e.buttons==0)return this.destroy();this.dragging===!1&&this.select(this.lastEvent=e)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}select(e){let t=this.style.get(e,this.extend,this.multiple);(this.mustSelect||!t.eq(this.view.state.selection)||t.main.assoc!=this.view.state.selection.main.assoc)&&this.view.dispatch({selection:t,userEvent:"select.pointer",scrollIntoView:!0}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}};function BS(r,e){let t=r.state.facet(r1);return t.length?t[0](e):ue.mac?e.metaKey:e.ctrlKey}function FS(r,e){let t=r.state.facet(i1);return t.length?t[0](e):ue.mac?!e.altKey:!e.ctrlKey}function LS(r,e){let{main:t}=r.state.selection;if(t.empty)return!1;let i=au(r.root);if(!i||i.rangeCount==0)return!0;let n=i.getRangeAt(0).getClientRects();for(let o=0;o<n.length;o++){let s=n[o];if(s.left<=e.clientX&&s.right>=e.clientX&&s.top<=e.clientY&&s.bottom>=e.clientY)return!0}return!1}function yy(r,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,i;t!=r.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(i=We.get(t))&&i.ignoreEvent(e))return!1;return!0}var ar=Object.create(null),xp=Object.create(null),w1=ue.ie&&ue.ie_version<15||ue.ios&&ue.webkit_version<604;function US(r){let e=r.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{r.focus(),t.remove(),A1(r,t.value)},50)}function A1(r,e){let{state:t}=r,i,n=1,o=t.toText(e),s=o.lines==t.selection.ranges.length;if(bp!=null&&t.selection.ranges.every(l=>l.empty)&&bp==o.toString()){let l=-1;i=t.changeByRange(f=>{let c=t.doc.lineAt(f.from);if(c.from==l)return{range:f};l=c.from;let u=t.toText((s?o.line(n++).text:e)+t.lineBreak);return{changes:{from:c.from,insert:u},range:K.cursor(f.from+u.length)}})}else s?i=t.changeByRange(l=>{let f=o.line(n++);return{changes:{from:l.from,to:l.to,insert:f.text},range:K.cursor(l.from+f.length)}}):i=t.replaceSelection(o);r.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}ar.keydown=(r,e)=>{r.inputState.setSelectionOrigin("select"),e.keyCode==27?r.inputState.lastEscPress=Date.now():v1.indexOf(e.keyCode)<0&&(r.inputState.lastEscPress=0)};ar.touchstart=(r,e)=>{r.inputState.lastTouchTime=Date.now(),r.inputState.setSelectionOrigin("select.pointer")};ar.touchmove=r=>{r.inputState.setSelectionOrigin("select.pointer")};xp.touchstart=xp.touchmove={passive:!0};ar.mousedown=(r,e)=>{if(r.observer.flush(),r.inputState.lastTouchTime>Date.now()-2e3)return;let t=null;for(let i of r.state.facet(n1))if(t=i(r,e),t)break;if(!t&&e.button==0&&(t=jS(r,e)),t){let i=r.root.activeElement!=r.contentDOM;i&&r.observer.ignore(()=>Wy(r.contentDOM)),r.inputState.startMouseSelection(new gp(r,e,t,i))}};function vy(r,e,t,i){if(i==1)return K.cursor(e,t);if(i==2)return CS(r.state,e,t);{let n=dr.find(r.docView,e),o=r.state.doc.lineAt(n?n.posAtEnd:e),s=n?n.posAtStart:o.from,a=n?n.posAtEnd:o.to;return a<r.state.doc.length&&a==o.to&&a++,K.range(s,a)}}var E1=(r,e)=>r>=e.top&&r<=e.bottom,wy=(r,e,t)=>E1(e,t)&&r>=t.left&&r<=t.right;function VS(r,e,t,i){let n=dr.find(r.docView,e);if(!n)return 1;let o=e-n.posAtStart;if(o==0)return 1;if(o==n.length)return-1;let s=n.coordsAt(o,-1);if(s&&wy(t,i,s))return-1;let a=n.coordsAt(o,1);return a&&wy(t,i,a)?1:s&&E1(i,s)?-1:1}function Ay(r,e){let t=r.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:VS(r,t,e.clientX,e.clientY)}}var qS=ue.ie&&ue.ie_version<=11,Ey=null,ky=0,Sy=0;function k1(r){if(!qS)return r.detail;let e=Ey,t=Sy;return Ey=r,Sy=Date.now(),ky=!e||t>Date.now()-400&&Math.abs(e.clientX-r.clientX)<2&&Math.abs(e.clientY-r.clientY)<2?(ky+1)%3:1}function jS(r,e){let t=Ay(r,e),i=k1(e),n=r.state.selection,o=t,s=e;return{update(a){a.docChanged&&(t.pos=a.changes.mapPos(t.pos),n=n.map(a.changes),s=null)},get(a,l,f){let c;s&&a.clientX==s.clientX&&a.clientY==s.clientY?c=o:(c=o=Ay(r,a),s=a);let u=vy(r,c.pos,c.bias,i);if(t.pos!=c.pos&&!l){let d=vy(r,t.pos,t.bias,i),p=Math.min(d.from,u.from),g=Math.max(d.to,u.to);u=p<u.from?K.range(p,g):K.range(g,p)}return l?n.replaceRange(n.main.extend(u.from,u.to)):f&&n.ranges.length>1&&n.ranges.some(d=>d.eq(u))?zS(n,u):f?n.addRange(u):K.create([u])}}}function zS(r,e){for(let t=0;;t++)if(r.ranges[t].eq(e))return K.create(r.ranges.slice(0,t).concat(r.ranges.slice(t+1)),r.mainIndex==t?0:r.mainIndex-(r.mainIndex>t?1:0))}ar.dragstart=(r,e)=>{let{selection:{main:t}}=r.state,{mouseSelection:i}=r.inputState;i&&(i.dragging=t),e.dataTransfer&&(e.dataTransfer.setData("Text",r.state.sliceDoc(t.from,t.to)),e.dataTransfer.effectAllowed="copyMove")};function _y(r,e,t,i){if(!t)return;let n=r.posAtCoords({x:e.clientX,y:e.clientY},!1);e.preventDefault();let{mouseSelection:o}=r.inputState,s=i&&o&&o.dragging&&o.dragMove?{from:o.dragging.from,to:o.dragging.to}:null,a={from:n,insert:t},l=r.state.changes(s?[s,a]:a);r.focus(),r.dispatch({changes:l,selection:{anchor:l.mapPos(n,-1),head:l.mapPos(n,1)},userEvent:s?"move.drop":"input.drop"})}ar.drop=(r,e)=>{if(!e.dataTransfer)return;if(r.state.readOnly)return e.preventDefault();let t=e.dataTransfer.files;if(t&&t.length){e.preventDefault();let i=Array(t.length),n=0,o=()=>{++n==t.length&&_y(r,e,i.filter(s=>s!=null).join(r.state.lineBreak),!1)};for(let s=0;s<t.length;s++){let a=new FileReader;a.onerror=o,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(i[s]=a.result),o()},a.readAsText(t[s])}}else _y(r,e,e.dataTransfer.getData("Text"),!0)};ar.paste=(r,e)=>{if(r.state.readOnly)return e.preventDefault();r.observer.flush();let t=w1?null:e.clipboardData;t?(A1(r,t.getData("text/plain")),e.preventDefault()):US(r)};function HS(r,e){let t=r.dom.parentNode;if(!t)return;let i=t.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),r.focus()},50)}function WS(r){let e=[],t=[],i=!1;for(let n of r.selection.ranges)n.empty||(e.push(r.sliceDoc(n.from,n.to)),t.push(n));if(!e.length){let n=-1;for(let{from:o}of r.selection.ranges){let s=r.doc.lineAt(o);s.number>n&&(e.push(s.text),t.push({from:s.from,to:Math.min(r.doc.length,s.to+1)})),n=s.number}i=!0}return{text:e.join(r.lineBreak),ranges:t,linewise:i}}var bp=null;ar.copy=ar.cut=(r,e)=>{let{text:t,ranges:i,linewise:n}=WS(r.state);if(!t&&!n)return;bp=n?t:null;let o=w1?null:e.clipboardData;o?(e.preventDefault(),o.clearData(),o.setData("text/plain",t)):HS(r,t),e.type=="cut"&&!r.state.readOnly&&r.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"})};function S1(r){setTimeout(()=>{r.hasFocus!=r.inputState.notifiedFocused&&r.update([])},10)}ar.focus=r=>{r.inputState.lastFocusTime=Date.now(),!r.scrollDOM.scrollTop&&(r.inputState.lastScrollTop||r.inputState.lastScrollLeft)&&(r.scrollDOM.scrollTop=r.inputState.lastScrollTop,r.scrollDOM.scrollLeft=r.inputState.lastScrollLeft),S1(r)};ar.blur=r=>{r.observer.clearSelectionRange(),S1(r)};ar.compositionstart=ar.compositionupdate=r=>{r.inputState.compositionFirstChange==null&&(r.inputState.compositionFirstChange=!0),r.inputState.composing<0&&(r.inputState.composing=0)};ar.compositionend=r=>{r.inputState.composing=-1,r.inputState.compositionEndedAt=Date.now(),r.inputState.compositionFirstChange=null,ue.chrome&&ue.android&&r.observer.flushSoon(),setTimeout(()=>{r.inputState.composing<0&&r.docView.compositionDeco.size&&r.update([])},50)};ar.contextmenu=r=>{r.inputState.lastContextMenu=Date.now()};ar.beforeinput=(r,e)=>{var t;let i;if(ue.chrome&&ue.android&&(i=y1.find(n=>n.inputType==e.inputType))&&(r.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let n=((t=window.visualViewport)===null||t===void 0?void 0:t.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>n+10&&r.hasFocus&&(r.contentDOM.blur(),r.focus())},100)}};var Cy=["pre-wrap","normal","pre-line","break-spaces"],yp=class{constructor(){this.doc=Ce.empty,this.lineWrapping=!1,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let i=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.ceil((t-e-i*this.lineLength*.5)/this.lineLength)),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return Cy.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let i=0;i<e.length;i++){let n=e[i];n<0?i++:this.heightSamples[Math.floor(n*10)]||(t=!0,this.heightSamples[Math.floor(n*10)]=!0)}return t}refresh(e,t,i,n,o){let s=Cy.indexOf(e)>-1,a=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=s;if(this.lineWrapping=s,this.lineHeight=t,this.charWidth=i,this.lineLength=n,a){this.heightSamples={};for(let l=0;l<o.length;l++){let f=o[l];f<0?l++:this.heightSamples[Math.floor(f*10)]=!0}}return a}},vp=class{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}},rn=class{constructor(e,t,i,n,o){this.from=e,this.length=t,this.top=i,this.height=n,this.type=o}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(e){let t=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(e.type)?e.type:[e]);return new rn(this.from,this.length+e.length,this.top,this.height+e.height,t)}},Ot=function(r){return r[r.ByPos=0]="ByPos",r[r.ByHeight=1]="ByHeight",r[r.ByPosNoHeight=2]="ByPosNoHeight",r}(Ot||(Ot={})),nu=.001,pr=class{constructor(e,t,i=2){this.length=e,this.height=t,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>nu&&(e.heightChanged=!0),this.height=t)}replace(e,t,i){return pr.of(i)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,i,n){let o=this;for(let s=n.length-1;s>=0;s--){let{fromA:a,toA:l,fromB:f,toB:c}=n[s],u=o.lineAt(a,Ot.ByPosNoHeight,t,0,0),d=u.to>=l?u:o.lineAt(l,Ot.ByPosNoHeight,t,0,0);for(c+=d.to-l,l=d.to;s>0&&u.from<=n[s-1].toA;)a=n[s-1].fromA,f=n[s-1].fromB,s--,a<u.from&&(u=o.lineAt(a,Ot.ByPosNoHeight,t,0,0));f+=u.from-a,a=u.from;let p=lf.build(i,e,f,c);o=o.replace(a,l,p)}return o.updateHeight(i,0)}static empty(){return new Br(0,0)}static of(e){if(e.length==1)return e[0];let t=0,i=e.length,n=0,o=0;for(;;)if(t==i)if(n>o*2){let a=e[t-1];a.break?e.splice(--t,1,a.left,null,a.right):e.splice(--t,1,a.left,a.right),i+=1+a.break,n-=a.size}else if(o>n*2){let a=e[i];a.break?e.splice(i,1,a.left,null,a.right):e.splice(i,1,a.left,a.right),i+=2+a.break,o-=a.size}else break;else if(n<o){let a=e[t++];a&&(n+=a.size)}else{let a=e[--i];a&&(o+=a.size)}let s=0;return e[t-1]==null?(s=1,t--):e[t]==null&&(s=1,i++),new wp(pr.of(e.slice(0,t)),s,pr.of(e.slice(i)))}};pr.prototype.size=1;var xu=class extends pr{constructor(e,t,i){super(e,t),this.type=i}blockAt(e,t,i,n){return new rn(n,this.length,i,this.height,this.type)}lineAt(e,t,i,n,o){return this.blockAt(0,i,n,o)}forEachLine(e,t,i,n,o,s){e<=o+this.length&&t>=o&&s(this.blockAt(0,i,n,o))}updateHeight(e,t=0,i=!1,n){return n&&n.from<=t&&n.more&&this.setHeight(e,n.heights[n.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}},Br=class extends xu{constructor(e,t){super(e,t,Ke.Text),this.collapsed=0,this.widgetHeight=0}replace(e,t,i){let n=i[0];return i.length==1&&(n instanceof Br||n instanceof ir&&n.flags&4)&&Math.abs(this.length-n.length)<10?(n instanceof ir?n=new Br(n.length,this.height):n.height=this.height,this.outdated||(n.outdated=!1),n):pr.of(i)}updateHeight(e,t=0,i=!1,n){return n&&n.from<=t&&n.more?this.setHeight(e,n.heights[n.index++]):(i||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}},ir=class extends pr{constructor(e){super(e,0)}lines(e,t){let i=e.lineAt(t).number,n=e.lineAt(t+this.length).number;return{firstLine:i,lastLine:n,lineHeight:this.height/(n-i+1)}}blockAt(e,t,i,n){let{firstLine:o,lastLine:s,lineHeight:a}=this.lines(t,n),l=Math.max(0,Math.min(s-o,Math.floor((e-i)/a))),{from:f,length:c}=t.line(o+l);return new rn(f,c,i+a*l,a,Ke.Text)}lineAt(e,t,i,n,o){if(t==Ot.ByHeight)return this.blockAt(e,i,n,o);if(t==Ot.ByPosNoHeight){let{from:u,to:d}=i.lineAt(e);return new rn(u,d-u,0,0,Ke.Text)}let{firstLine:s,lineHeight:a}=this.lines(i,o),{from:l,length:f,number:c}=i.lineAt(e);return new rn(l,f,n+a*(c-s),a,Ke.Text)}forEachLine(e,t,i,n,o,s){let{firstLine:a,lineHeight:l}=this.lines(i,o);for(let f=Math.max(e,o),c=Math.min(o+this.length,t);f<=c;){let u=i.lineAt(f);f==e&&(n+=l*(u.number-a)),s(new rn(u.from,u.length,n,l,Ke.Text)),n+=l,f=u.to+1}}replace(e,t,i){let n=this.length-t;if(n>0){let o=i[i.length-1];o instanceof ir?i[i.length-1]=new ir(o.length+n):i.push(null,new ir(n-1))}if(e>0){let o=i[0];o instanceof ir?i[0]=new ir(e+o.length):i.unshift(new ir(e-1),null)}return pr.of(i)}decomposeLeft(e,t){t.push(new ir(e-1),null)}decomposeRight(e,t){t.push(null,new ir(this.length-e-1))}updateHeight(e,t=0,i=!1,n){let o=t+this.length;if(n&&n.from<=t+this.length&&n.more){let s=[],a=Math.max(t,n.from),l=-1,f=e.heightChanged;for(n.from>t&&s.push(new ir(n.from-t-1).updateHeight(e,t));a<=o&&n.more;){let u=e.doc.lineAt(a).length;s.length&&s.push(null);let d=n.heights[n.index++];l==-1?l=d:Math.abs(d-l)>=nu&&(l=-2);let p=new Br(u,d);p.outdated=!1,s.push(p),a+=u+1}a<=o&&s.push(null,new ir(o-a).updateHeight(e,a));let c=pr.of(s);return e.heightChanged=f||l<0||Math.abs(c.height-this.height)>=nu||Math.abs(l-this.lines(e.doc,t).lineHeight)>=nu,c}else(i||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}},wp=class extends pr{constructor(e,t,i){super(e.length+t+i.length,e.height+i.height,t|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,t,i,n){let o=i+this.left.height;return e<o?this.left.blockAt(e,t,i,n):this.right.blockAt(e,t,o,n+this.left.length+this.break)}lineAt(e,t,i,n,o){let s=n+this.left.height,a=o+this.left.length+this.break,l=t==Ot.ByHeight?e<s:e<a,f=l?this.left.lineAt(e,t,i,n,o):this.right.lineAt(e,t,i,s,a);if(this.break||(l?f.to<a:f.from>a))return f;let c=t==Ot.ByPosNoHeight?Ot.ByPosNoHeight:Ot.ByPos;return l?f.join(this.right.lineAt(a,c,i,s,a)):this.left.lineAt(a,c,i,n,o).join(f)}forEachLine(e,t,i,n,o,s){let a=n+this.left.height,l=o+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,t,i,n,o,s),t>=l&&this.right.forEachLine(e,t,i,a,l,s);else{let f=this.lineAt(l,Ot.ByPos,i,n,o);e<f.from&&this.left.forEachLine(e,f.from-1,i,n,o,s),f.to>=e&&f.from<=t&&s(f),t>f.to&&this.right.forEachLine(f.to+1,t,i,a,l,s)}}replace(e,t,i){let n=this.left.length+this.break;if(t<n)return this.balanced(this.left.replace(e,t,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-n,t-n,i));let o=[];e>0&&this.decomposeLeft(e,o);let s=o.length;for(let a of i)o.push(a);if(e>0&&Ty(o,s-1),t<this.length){let a=o.length;this.decomposeRight(t,o),Ty(o,a)}return pr.of(o)}decomposeLeft(e,t){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(i++,e>=i&&t.push(null)),e>i&&this.right.decomposeLeft(e-i,t)}decomposeRight(e,t){let i=this.left.length,n=i+this.break;if(e>=n)return this.right.decomposeRight(e-n,t);e<i&&this.left.decomposeRight(e,t),this.break&&e<n&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?pr.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,i=!1,n){let{left:o,right:s}=this,a=t+o.length+this.break,l=null;return n&&n.from<=t+o.length&&n.more?l=o=o.updateHeight(e,t,i,n):o.updateHeight(e,t,i),n&&n.from<=a+s.length&&n.more?l=s=s.updateHeight(e,a,i,n):s.updateHeight(e,a,i),l?this.balanced(o,s):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}};function Ty(r,e){let t,i;r[e]==null&&(t=r[e-1])instanceof ir&&(i=r[e+1])instanceof ir&&r.splice(e-1,3,new ir(t.length+1+i.length))}var GS=5,lf=class{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let i=Math.min(t,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof Br?n.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new Br(i-this.pos,-1)),this.writtenTo=i,t>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,i){if(e<t||i.heightRelevant){let n=i.widget?i.widget.estimatedHeight:0;n<0&&(n=this.oracle.lineHeight);let o=t-e;i.block?this.addBlock(new xu(o,n,i.type)):(o||n>=GS)&&this.addLineDeco(n,o)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Br(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let i=new ir(t-e);return this.oracle.doc.lineAt(e).to==t&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Br)return e;let t=new Br(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine(),e.type==Ke.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,e.type!=Ke.WidgetBefore&&(this.covering=e)}addLineDeco(e,t){let i=this.ensureLine();i.length+=t,i.collapsed+=t,i.widgetHeight=Math.max(i.widgetHeight,e),this.writtenTo=this.pos=this.pos+t}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof Br)&&!this.isCovered?this.nodes.push(new Br(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let n of this.nodes)n instanceof Br&&n.updateHeight(this.oracle,i),i+=n?n.length:1;return this.nodes}static build(e,t,i,n){let o=new lf(i,e);return Pe.spans(t,i,n,o,0),o.finish(i)}};function KS(r,e,t){let i=new Ap;return Pe.compare(r,e,t,i,0),i.changes}var Ap=class{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,i,n){(e<t||i&&i.heightRelevant||n&&n.heightRelevant)&&lp(e,t,this.changes,5)}};function QS(r,e){let t=r.getBoundingClientRect(),i=r.ownerDocument,n=i.defaultView||window,o=Math.max(0,t.left),s=Math.min(n.innerWidth,t.right),a=Math.max(0,t.top),l=Math.min(n.innerHeight,t.bottom);for(let f=r.parentNode;f&&f!=i.body;)if(f.nodeType==1){let c=f,u=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&u.overflow!="visible"){let d=c.getBoundingClientRect();o=Math.max(o,d.left),s=Math.min(s,d.right),a=Math.max(a,d.top),l=f==r.parentNode?d.bottom:Math.min(l,d.bottom)}f=u.position=="absolute"||u.position=="fixed"?c.offsetParent:c.parentNode}else if(f.nodeType==11)f=f.host;else break;return{left:o-t.left,right:Math.max(o,s)-t.left,top:a-(t.top+e),bottom:Math.max(a,l)-(t.top+e)}}function JS(r,e){let t=r.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}var ef=class{constructor(e,t,i){this.from=e,this.to=t,this.size=i}static same(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let n=e[i],o=t[i];if(n.from!=o.from||n.to!=o.to||n.size!=o.size)return!1}return!0}draw(e){return he.replace({widget:new Ep(this.size,e)}).range(this.from,this.to)}},Ep=class extends $r{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}},bu=class{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.heightOracle=new yp,this.scaler=My,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Nt.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1,this.stateDeco=e.facet(af).filter(t=>typeof t!="function"),this.heightMap=pr.empty().applyChanges(this.stateDeco,Ce.empty,this.heightOracle.setDoc(e.doc),[new pi(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=he.set(this.lineGaps.map(t=>t.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let i=0;i<=1;i++){let n=i?t.head:t.anchor;if(!e.some(({from:o,to:s})=>n>=o&&n<=s)){let{from:o,to:s}=this.lineBlockAt(n);e.push(new fa(o,s))}}this.viewports=e.sort((i,n)=>i.from-n.from),this.scaler=this.heightMap.height<=7e6?My:new kp(this.heightOracle.doc,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.state.doc,0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:Yl(e,this.scaler))})}update(e,t=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(af).filter(f=>typeof f!="function");let n=e.changedRanges,o=pi.extendWithRanges(n,KS(i,this.stateDeco,e?e.changes:Ft.empty(this.state.doc.length))),s=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),o),this.heightMap.height!=s&&(e.flags|=2);let a=o.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<a.from||t.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,t));let l=!e.changes.empty||e.flags&2||a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,this.updateForViewport(),l&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>2e3<<1)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(l1)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,i=window.getComputedStyle(t),n=this.heightOracle,o=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?Nt.RTL:Nt.LTR;let s=this.heightOracle.mustRefreshForWrapping(o),a=s||this.mustMeasureContent||this.contentDOMHeight!=t.clientHeight;this.contentDOMHeight=t.clientHeight,this.mustMeasureContent=!1;let l=0,f=0,c=parseInt(i.paddingTop)||0,u=parseInt(i.paddingBottom)||0;(this.paddingTop!=c||this.paddingBottom!=u)&&(this.paddingTop=c,this.paddingBottom=u,l|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(n.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,l|=8);let d=(this.printing?JS:QS)(t,this.paddingTop),p=d.top-this.pixelViewport.top,g=d.bottom-this.pixelViewport.bottom;this.pixelViewport=d;let b=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(b!=this.inView&&(this.inView=b,b&&(a=!0)),!this.inView&&!this.scrollTarget)return 0;let k=t.clientWidth;if((this.contentDOMWidth!=k||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=k,this.editorHeight=e.scrollDOM.clientHeight,l|=8),a){let P=e.docView.measureVisibleLineHeights(this.viewport);if(n.mustRefreshForHeights(P)&&(s=!0),s||n.lineWrapping&&Math.abs(k-this.contentDOMWidth)>n.charWidth){let{lineHeight:N,charWidth:I}=e.docView.measureTextSize();s=N>0&&n.refresh(o,N,I,k/I,P),s&&(e.docView.minWidth=0,l|=8)}p>0&&g>0?f=Math.max(p,g):p<0&&g<0&&(f=Math.min(p,g)),n.heightChanged=!1;for(let N of this.viewports){let I=N.from==this.viewport.from?P:e.docView.measureVisibleLineHeights(N);this.heightMap=(s?pr.empty().applyChanges(this.stateDeco,Ce.empty,this.heightOracle,[new pi(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(n,0,s,new vp(N.from,I))}n.heightChanged&&(l|=2)}let _=!this.viewportIsAppropriate(this.viewport,f)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return _&&(this.viewport=this.getViewport(f,this.scrollTarget)),this.updateForViewport(),(l&2||_)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>2e3<<1)&&this.updateLineGaps(this.ensureLineGaps(s?[]:this.lineGaps,e)),l|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),l}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),n=this.heightMap,o=this.state.doc,{visibleTop:s,visibleBottom:a}=this,l=new fa(n.lineAt(s-i*1e3,Ot.ByHeight,o,0,0).from,n.lineAt(a+(1-i)*1e3,Ot.ByHeight,o,0,0).to);if(t){let{head:f}=t.range;if(f<l.from||f>l.to){let c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),u=n.lineAt(f,Ot.ByPos,o,0,0),d;t.y=="center"?d=(u.top+u.bottom)/2-c/2:t.y=="start"||t.y=="nearest"&&f<l.from?d=u.top:d=u.bottom-c,l=new fa(n.lineAt(d-1e3/2,Ot.ByHeight,o,0,0).from,n.lineAt(d+c+1e3/2,Ot.ByHeight,o,0,0).to)}}return l}mapViewport(e,t){let i=t.mapPos(e.from,-1),n=t.mapPos(e.to,1);return new fa(this.heightMap.lineAt(i,Ot.ByPos,this.state.doc,0,0).from,this.heightMap.lineAt(n,Ot.ByPos,this.state.doc,0,0).to)}viewportIsAppropriate({from:e,to:t},i=0){if(!this.inView)return!0;let{top:n}=this.heightMap.lineAt(e,Ot.ByPos,this.state.doc,0,0),{bottom:o}=this.heightMap.lineAt(t,Ot.ByPos,this.state.doc,0,0),{visibleTop:s,visibleBottom:a}=this;return(e==0||n<=s-Math.max(10,Math.min(-i,250)))&&(t==this.state.doc.length||o>=a+Math.max(10,Math.min(i,250)))&&n>s-2*1e3&&o<a+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let i=[];for(let n of e)t.touchesRange(n.from,n.to)||i.push(new ef(t.mapPos(n.from),t.mapPos(n.to),n.size));return i}ensureLineGaps(e,t){let i=this.heightOracle.lineWrapping,n=i?1e4:2e3,o=n>>1,s=n<<1;if(this.defaultTextDirection!=Nt.LTR&&!i)return[];let a=[],l=(f,c,u,d)=>{if(c-f<o)return;let p=this.state.selection.main,g=[p.from];p.empty||g.push(p.to);for(let k of g)if(k>f&&k<c){l(f,k-10,u,d),l(k+10,c,u,d);return}let b=XS(e,k=>k.from>=u.from&&k.to<=u.to&&Math.abs(k.from-f)<o&&Math.abs(k.to-c)<o&&!g.some(_=>k.from<_&&k.to>_));if(!b){if(c<u.to&&t&&i&&t.visibleRanges.some(k=>k.from<=c&&k.to>=c)){let k=t.moveToLineBoundary(K.cursor(c),!1,!0).head;k>f&&(c=k)}b=new ef(f,c,this.gapSize(u,f,c,d))}a.push(b)};for(let f of this.viewportLines){if(f.length<s)continue;let c=YS(f.from,f.to,this.stateDeco);if(c.total<s)continue;let u=this.scrollTarget?this.scrollTarget.range.head:null,d,p;if(i){let g=n/this.heightOracle.lineLength*this.heightOracle.lineHeight,b,k;if(u!=null){let _=eu(c,u),P=((this.visibleBottom-this.visibleTop)/2+g)/f.height;b=_-P,k=_+P}else b=(this.visibleTop-f.top-g)/f.height,k=(this.visibleBottom-f.top+g)/f.height;d=Zc(c,b),p=Zc(c,k)}else{let g=c.total*this.heightOracle.charWidth,b=n*this.heightOracle.charWidth,k,_;if(u!=null){let P=eu(c,u),N=((this.pixelViewport.right-this.pixelViewport.left)/2+b)/g;k=P-N,_=P+N}else k=(this.pixelViewport.left-b)/g,_=(this.pixelViewport.right+b)/g;d=Zc(c,k),p=Zc(c,_)}d>f.from&&l(f.from,d,f,c),p<f.to&&l(p,f.to,f,c)}return a}gapSize(e,t,i,n){let o=eu(n,i)-eu(n,t);return this.heightOracle.lineWrapping?e.height*o:n.total*this.heightOracle.charWidth*o}updateLineGaps(e){ef.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=he.set(e.map(t=>t.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];Pe.spans(e,this.viewport.from,this.viewport.to,{span(n,o){t.push({from:n,to:o})},point(){}},20);let i=t.length!=this.visibleRanges.length||this.visibleRanges.some((n,o)=>n.from!=t[o].from||n.to!=t[o].to);return this.visibleRanges=t,i?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||Yl(this.heightMap.lineAt(e,Ot.ByPos,this.state.doc,0,0),this.scaler)}lineBlockAtHeight(e){return Yl(this.heightMap.lineAt(this.scaler.fromDOM(e),Ot.ByHeight,this.state.doc,0,0),this.scaler)}elementAtHeight(e){return Yl(this.heightMap.blockAt(this.scaler.fromDOM(e),this.state.doc,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}},fa=class{constructor(e,t){this.from=e,this.to=t}};function YS(r,e,t){let i=[],n=r,o=0;return Pe.spans(t,r,e,{span(){},point(s,a){s>n&&(i.push({from:n,to:s}),o+=s-n),n=a}},20),n<e&&(i.push({from:n,to:e}),o+=e-n),{total:o,ranges:i}}function Zc({total:r,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let i=Math.floor(r*t);for(let n=0;;n++){let{from:o,to:s}=e[n],a=s-o;if(i<=a)return o+i;i-=a}}function eu(r,e){let t=0;for(let{from:i,to:n}of r.ranges){if(e<=n){t+=e-i;break}t+=n-i}return t/r.total}function XS(r,e){for(let t of r)if(e(t))return t}var My={toDOM(r){return r},fromDOM(r){return r},scale:1},kp=class{constructor(e,t,i){let n=0,o=0,s=0;this.viewports=i.map(({from:a,to:l})=>{let f=t.lineAt(a,Ot.ByPos,e,0,0).top,c=t.lineAt(l,Ot.ByPos,e,0,0).bottom;return n+=c-f,{from:a,to:l,top:f,bottom:c,domTop:0,domBottom:0}}),this.scale=(7e6-n)/(t.height-n);for(let a of this.viewports)a.domTop=s+(a.top-o)*this.scale,s=a.domBottom=a.domTop+(a.bottom-a.top),o=a.bottom}toDOM(e){for(let t=0,i=0,n=0;;t++){let o=t<this.viewports.length?this.viewports[t]:null;if(!o||e<o.top)return n+(e-i)*this.scale;if(e<=o.bottom)return o.domTop+(e-o.top);i=o.bottom,n=o.domBottom}}fromDOM(e){for(let t=0,i=0,n=0;;t++){let o=t<this.viewports.length?this.viewports[t]:null;if(!o||e<o.domTop)return i+(e-n)/this.scale;if(e<=o.domBottom)return o.top+(e-o.domTop);i=o.bottom,n=o.domBottom}}};function Yl(r,e){if(e.scale==1)return r;let t=e.toDOM(r.top),i=e.toDOM(r.bottom);return new rn(r.from,r.length,t,i-t,Array.isArray(r.type)?r.type.map(n=>Yl(n,e)):r.type)}var tu=oe.define({combine:r=>r.join(" ")}),Sp=oe.define({combine:r=>r.indexOf(!0)>-1}),_p=di.newName(),_1=di.newName(),C1=di.newName(),T1={"&light":"."+_1,"&dark":"."+C1};function Cp(r,e,t){return new di(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,n=>{if(n=="&")return r;if(!t||!t[n])throw new RangeError(`Unsupported selector: ${n}`);return t[n]}):r+" "+i}})}var $S=Cp("."+_p,{"&.cm-editor":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,minHeight:"100%",display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 4px"},".cm-selectionLayer":{zIndex:-1,contain:"size style"},".cm-selectionBackground":{position:"absolute"},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{zIndex:100,contain:"size style",pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{position:"absolute",borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},T1),Tp=class{constructor(e,t,i,n){this.typeOver=n,this.bounds=null,this.text="";let{impreciseHead:o,impreciseAnchor:s}=e.docView;if(!(e.state.readOnly&&t>-1))if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,i,0))){let a=o||s?[]:e8(e),l=new du(a,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=t8(a,this.bounds.from)}else{let a=e.observer.selectionRange,l=o&&o.node==a.focusNode&&o.offset==a.focusOffset||!da(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),f=s&&s.node==a.anchorNode&&s.offset==a.anchorOffset||!da(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset);this.newSel=K.single(f,l)}}};function M1(r,e){let t,{newSel:i}=e,n=r.state.selection.main;if(e.bounds){let{from:o,to:s}=e.bounds,a=n.from,l=null;(r.inputState.lastKeyCode===8&&r.inputState.lastKeyTime>Date.now()-100||ue.android&&e.text.length<s-o)&&(a=n.to,l="end");let f=ZS(r.state.doc.sliceString(o,s,mo),e.text,a-o,l);f&&(ue.chrome&&r.inputState.lastKeyCode==13&&f.toB==f.from+2&&e.text.slice(f.from,f.toB)==mo+mo&&f.toB--,t={from:o+f.from,to:o+f.toA,insert:Ce.of(e.text.slice(f.from,f.toB).split(mo))})}else i&&(!r.hasFocus||!r.state.facet(Su)||i.main.eq(n))&&(i=null);if(!t&&!i)return!1;if(!t&&e.typeOver&&!n.empty&&i&&i.main.empty?t={from:n.from,to:n.to,insert:r.state.doc.slice(n.from,n.to)}:t&&t.from>=n.from&&t.to<=n.to&&(t.from!=n.from||t.to!=n.to)&&n.to-n.from-(t.to-t.from)<=4?t={from:n.from,to:n.to,insert:r.state.doc.slice(n.from,t.from).append(t.insert).append(r.state.doc.slice(t.to,n.to))}:(ue.mac||ue.android)&&t&&t.from==t.to&&t.from==n.head-1&&/^\. ?$/.test(t.insert.toString())?(i&&t.insert.length==2&&(i=K.single(i.main.anchor-1,i.main.head-1)),t={from:n.from,to:n.to,insert:Ce.of([" "])}):ue.chrome&&t&&t.from==t.to&&t.from==n.head&&t.insert.toString()==`
 `&&r.lineWrapping&&(i&&(i=K.single(i.main.anchor-1,i.main.head-1)),t={from:n.from,to:n.to,insert:Ce.of([" "])}),t){let o=r.state;if(ue.ios&&r.inputState.flushIOSKey(r)||ue.android&&(t.from==n.from&&t.to==n.to&&t.insert.length==1&&t.insert.lines==2&&ha(r.contentDOM,"Enter",13)||t.from==n.from-1&&t.to==n.to&&t.insert.length==0&&ha(r.contentDOM,"Backspace",8)||t.from==n.from&&t.to==n.to+1&&t.insert.length==0&&ha(r.contentDOM,"Delete",46)))return!0;let s=t.insert.toString();if(r.state.facet(s1).some(f=>f(r,t.from,t.to,s)))return!0;r.inputState.composing>=0&&r.inputState.composing++;let a;if(t.from>=n.from&&t.to<=n.to&&t.to-t.from>=(n.to-n.from)/3&&(!i||i.main.empty&&i.main.from==t.from+t.insert.length)&&r.inputState.composing<0){let f=n.from<t.from?o.sliceDoc(n.from,t.from):"",c=n.to>t.to?o.sliceDoc(t.to,n.to):"";a=o.replaceSelection(r.state.toText(f+t.insert.sliceString(0,void 0,r.state.lineBreak)+c))}else{let f=o.changes(t),c=i&&!o.selection.main.eq(i.main)&&i.main.to<=f.newLength?i.main:void 0;if(o.selection.ranges.length>1&&r.inputState.composing>=0&&t.to<=n.to&&t.to>=n.to-10){let u=r.state.sliceDoc(t.from,t.to),d=g1(r)||r.state.doc.lineAt(n.head),p=n.to-t.to,g=n.to-n.from;a=o.changeByRange(b=>{if(b.from==n.from&&b.to==n.to)return{changes:f,range:c||b.map(f)};let k=b.to-p,_=k-u.length;if(b.to-b.from!=g||r.state.sliceDoc(_,k)!=u||d&&b.to>=d.from&&b.from<=d.to)return{range:b};let P=o.changes({from:_,to:k,insert:t.insert}),N=b.to-n.to;return{changes:P,range:c?K.range(Math.max(0,c.anchor+N),Math.max(0,c.head+N)):b.map(P)}})}else a={changes:f,selection:c&&o.selection.replaceRange(c)}}let l="input.type";return r.composing&&(l+=".compose",r.inputState.compositionFirstChange&&(l+=".start",r.inputState.compositionFirstChange=!1)),r.dispatch(a,{scrollIntoView:!0,userEvent:l}),!0}else if(i&&!i.main.eq(n)){let o=!1,s="select";return r.inputState.lastSelectionTime>Date.now()-50&&(r.inputState.lastSelectionOrigin=="select"&&(o=!0),s=r.inputState.lastSelectionOrigin),r.dispatch({selection:i,scrollIntoView:o,userEvent:s}),!0}else return!1}function ZS(r,e,t,i){let n=Math.min(r.length,e.length),o=0;for(;o<n&&r.charCodeAt(o)==e.charCodeAt(o);)o++;if(o==n&&r.length==e.length)return null;let s=r.length,a=e.length;for(;s>0&&a>0&&r.charCodeAt(s-1)==e.charCodeAt(a-1);)s--,a--;if(i=="end"){let l=Math.max(0,o-Math.min(s,a));t-=s+l-o}if(s<o&&r.length<e.length){let l=t<=o&&t>=s?o-t:0;o-=l,a=o+(a-s),s=o}else if(a<o){let l=t<=o&&t>=a?o-t:0;o-=l,s=o+(s-a),a=o}return{from:o,toA:s,toB:a}}function e8(r){let e=[];if(r.root.activeElement!=r.contentDOM)return e;let{anchorNode:t,anchorOffset:i,focusNode:n,focusOffset:o}=r.observer.selectionRange;return t&&(e.push(new pu(t,i)),(n!=t||o!=i)&&e.push(new pu(n,o))),e}function t8(r,e){if(r.length==0)return null;let t=r[0].pos,i=r.length==2?r[1].pos:t;return t>-1&&i>-1?K.single(t+e,i+e):null}var r8={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},J0=ue.ie&&ue.ie_version<=11,Mp=class{constructor(e){this.view=e,this.active=!1,this.selectionRange=new ep,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resize=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let i of t)this.queue.push(i);(ue.ie&&ue.ie_version<=11||ue.ios&&e.composing)&&t.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),J0&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resize=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resize.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runScrollHandlers(this.view,e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,i)=>t!=e[i]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,n=this.selectionRange;if(i.state.facet(Su)?i.root.activeElement!=this.dom:!iu(i.dom,n))return;let o=n.anchorNode&&i.docView.nearest(n.anchorNode);if(o&&o.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(ue.ie&&ue.ie_version<=11||ue.android&&ue.chrome)&&!i.state.selection.main.empty&&n.focusNode&&lu(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=ue.safari&&e.root.nodeType==11&&oS(this.dom.ownerDocument)==this.dom&&i8(this.view)||au(e.root);if(!t||this.selectionRange.eq(t))return!1;let i=iu(this.dom,t);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&fS(this.dom,t)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(t),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let i=this.dom;i;)if(i.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=t)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,r8),J0&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){!this.active||(this.active=!1,this.observer.disconnect(),J0&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var i;if(!this.delayedAndroidKey){let n=()=>{let o=this.delayedAndroidKey;o&&(this.clearDelayedAndroidKey(),!this.flush()&&o.force&&ha(this.dom,o.key,o.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(n)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}processRecords(){let e=this.queue;for(let o of this.observer.takeRecords())e.push(o);e.length&&(this.queue=[]);let t=-1,i=-1,n=!1;for(let o of e){let s=this.readMutation(o);!s||(s.typeOver&&(n=!0),t==-1?{from:t,to:i}=s:(t=Math.min(s.from,t),i=Math.max(s.to,i)))}return{from:t,to:i,typeOver:n}}readChange(){let{from:e,to:t,typeOver:i}=this.processRecords(),n=this.selectionChanged&&iu(this.dom,this.selectionRange);return e<0&&!n?null:(e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1,new Tp(this.view,e,t,i))}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return!1;let i=this.view.state,n=M1(this.view,t);return this.view.state==i&&this.view.update([]),n}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.dirty|=4),e.type=="childList"){let i=Oy(t,e.previousSibling||e.target.previousSibling,-1),n=Oy(t,e.nextSibling||e.target.nextSibling,1);return{from:i?t.posAfter(i):t.posAtStart,to:n?t.posBefore(n):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,t,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(i=this.resize)===null||i===void 0||i.disconnect();for(let n of this.scrollTargets)n.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}};function Oy(r,e,t){for(;e;){let i=We.get(e);if(i&&i.parent==r)return i;let n=e.parentNode;e=n!=r.dom?n:t>0?e.nextSibling:e.previousSibling}return null}function i8(r){let e=null;function t(l){l.preventDefault(),l.stopImmediatePropagation(),e=l.getTargetRanges()[0]}if(r.contentDOM.addEventListener("beforeinput",t,!0),r.dom.ownerDocument.execCommand("indent"),r.contentDOM.removeEventListener("beforeinput",t,!0),!e)return null;let i=e.startContainer,n=e.startOffset,o=e.endContainer,s=e.endOffset,a=r.docView.domAtPos(r.state.selection.main.anchor);return lu(a.node,a.offset,o,s)&&([i,n,o,s]=[o,s,i,n]),{anchorNode:i,anchorOffset:n,focusNode:o,focusOffset:s}}var le=class{constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: absolute; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=e.dispatch||(t=>this.update([t])),this.dispatch=this.dispatch.bind(this),this._root=e.root||lS(e.parent)||document,this.viewState=new bu(e.state||ke.create(e)),this.plugins=this.state.facet(Ql).map(t=>new Zl(t));for(let t of this.plugins)t.update(this);this.observer=new Mp(this),this.inputState=new mp(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new mu(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}dispatch(...e){this._dispatch(e.length==1&&e[0]instanceof Lt?e[0]:this.state.update(...e))}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,i=!1,n,o=this.state;for(let f of e){if(f.startState!=o)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");o=f.state}if(this.destroyed){this.viewState.state=o;return}let s=this.observer.delayedAndroidKey,a=null;if(s?(this.observer.clearDelayedAndroidKey(),a=this.observer.readChange(),(a&&!this.state.doc.eq(o.doc)||!this.state.selection.eq(o.selection))&&(a=null)):this.observer.clear(),o.facet(ke.phrases)!=this.state.facet(ke.phrases))return this.setState(o);n=xa.create(this,o,e);let l=this.viewState.scrollTarget;try{this.updateState=2;for(let f of e){if(l&&(l=l.map(f.changes)),f.scrollIntoView){let{main:c}=f.state.selection;l=new ga(c.empty?c:K.cursor(c.head,c.head>c.anchor?-1:1))}for(let c of f.effects)c.is(hy)&&(l=c.value)}this.viewState.update(n,l),this.bidiCache=ba.update(this.bidiCache,n.changes),n.empty||(this.updatePlugins(n),this.inputState.update(n)),t=this.docView.update(n),this.state.facet(Jl)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(f=>f.isUserEvent("select.pointer")))}finally{this.updateState=0}if(n.startState.facet(tu)!=n.state.facet(tu)&&(this.viewState.mustMeasureContent=!0),(t||i||l||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!n.empty)for(let f of this.state.facet(fp))f(n);a&&!M1(this,a)&&s.force&&ha(this.contentDOM,s.key,s.keyCode)}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new bu(e),this.plugins=e.facet(Ql).map(i=>new Zl(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView=new mu(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(Ql),i=e.state.facet(Ql);if(t!=i){let n=[];for(let o of i){let s=t.indexOf(o);if(s<0)n.push(new Zl(o));else{let a=this.plugins[s];a.mustUpdate=e,n.push(a)}}for(let o of this.plugins)o.mustUpdate!=e&&o.destroy(this);this.plugins=n,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let n of this.plugins)n.mustUpdate=e;for(let n=0;n<this.plugins.length;n++)this.plugins[n].update(this)}measure(e=!0){if(this.destroyed)return;this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,{scrollHeight:i,scrollTop:n,clientHeight:o}=this.scrollDOM,s=n>i-o-4?i:n;try{for(let a=0;;a++){this.updateState=1;let l=this.viewport,f=this.viewState.lineBlockAtHeight(s),c=this.viewState.measure(this);if(!c&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];c&4||([this.measureRequests,u]=[u,this.measureRequests]);let d=u.map(k=>{try{return k.read(this)}catch(_){return kr(this.state,_),Ny}}),p=xa.create(this,this.state,[]),g=!1,b=!1;p.flags|=c,t?t.flags|=c:t=p,this.updateState=2,p.empty||(this.updatePlugins(p),this.inputState.update(p),this.updateAttrs(),g=this.docView.update(p));for(let k=0;k<u.length;k++)if(d[k]!=Ny)try{let _=u[k];_.write&&_.write(d[k],this)}catch(_){kr(this.state,_)}if(this.viewState.editorHeight)if(this.viewState.scrollTarget)this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,b=!0;else{let k=this.viewState.lineBlockAt(f.from).top-f.top;(k>1||k<-1)&&(this.scrollDOM.scrollTop+=k,b=!0)}if(g&&this.docView.updateSelection(!0),this.viewport.from==l.from&&this.viewport.to==l.to&&!b&&this.measureRequests.length==0)break}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let a of this.state.facet(fp))a(t)}get themeClasses(){return _p+" "+(this.state.facet(Sp)?C1:_1)+" "+this.state.facet(tu)}updateAttrs(){let e=Py(this,f1,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(Su)?"true":"false",class:"cm-content",style:`${ue.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),Py(this,c1,t);let i=this.observer.ignore(()=>{let n=ap(this.contentDOM,this.contentAttrs,t),o=ap(this.dom,this.editorAttrs,e);return n||o});return this.editorAttrs=e,this.contentAttrs=t,i}showAnnouncements(e){let t=!0;for(let i of e)for(let n of i.effects)if(n.is(le.announce)){t&&(this.announceDOM.textContent=""),t=!1;let o=this.announceDOM.appendChild(document.createElement("div"));o.textContent=n.value}}mountStyles(){this.styleModules=this.state.facet(Jl),di.mount(this.root,this.styleModules.concat($S).reverse())}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(i=>i.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,i){return Q0(this,e,by(this,e,t,i))}moveByGroup(e,t){return Q0(this,e,by(this,e,t,i=>IS(this,e.head,i)))}moveToLineBoundary(e,t,i=!0){return PS(this,e,t,i)}moveVertically(e,t,i){return Q0(this,e,RS(this,e,t,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),b1(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let i=this.docView.coordsAt(e,t);if(!i||i.left==i.right)return i;let n=this.state.doc.lineAt(e),o=this.bidiSpans(n),s=o[go.find(o,e-n.from,-1,t)];return Lp(i,s.dir==Nt.LTR==t>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(a1)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>n8)return p1(e.length);let t=this.textDirectionAt(e.from);for(let n of this.bidiCache)if(n.from==e.from&&n.dir==t)return n.order;let i=vS(e.text,t);return this.bidiCache.push(new ba(e.from,e.to,t,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||ue.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{Wy(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return hy.of(new ga(typeof e=="number"?K.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}static domEventHandlers(e){return Qe.define(()=>({}),{eventHandlers:e})}static theme(e,t){let i=di.newName(),n=[tu.of(i),Jl.of(Cp(`.${i}`,e))];return t&&t.dark&&n.push(Sp.of(!0)),n}static baseTheme(e){return Zi.lowest(Jl.of(Cp("."+_p,e,T1)))}static findFromDOM(e){var t;let i=e.querySelector(".cm-content"),n=i&&We.get(i)||We.get(e);return((t=n?.rootView)===null||t===void 0?void 0:t.view)||null}};le.styleModule=Jl;le.inputHandler=s1;le.perLineTextDirection=a1;le.exceptionSink=o1;le.updateListener=fp;le.editable=Su;le.mouseSelectionStyle=n1;le.dragMovesSelection=i1;le.clickAddsSelectionRange=r1;le.decorations=af;le.atomicRanges=u1;le.scrollMargins=h1;le.darkTheme=Sp;le.contentAttributes=c1;le.editorAttributes=f1;le.lineWrapping=le.contentAttributes.of({class:"cm-lineWrapping"});le.announce=me.define();var n8=4096,Ny={},ba=class{constructor(e,t,i,n){this.from=e,this.to=t,this.dir=i,this.order=n}static update(e,t){if(t.empty)return e;let i=[],n=e.length?e[e.length-1].dir:Nt.LTR;for(let o=Math.max(0,e.length-10);o<e.length;o++){let s=e[o];s.dir==n&&!t.touchesRange(s.from,s.to)&&i.push(new ba(t.mapPos(s.from,1),t.mapPos(s.to,-1),s.dir,s.order))}return i}};function Py(r,e,t){for(let i=r.state.facet(e),n=i.length-1;n>=0;n--){let o=i[n],s=typeof o=="function"?o(r):o;s&&sp(s,t)}return t}var o8=ue.mac?"mac":ue.windows?"win":ue.linux?"linux":"key";function s8(r,e){let t=r.split(/-(?!$)/),i=t[t.length-1];i=="Space"&&(i=" ");let n,o,s,a;for(let l=0;l<t.length-1;++l){let f=t[l];if(/^(cmd|meta|m)$/i.test(f))a=!0;else if(/^a(lt)?$/i.test(f))n=!0;else if(/^(c|ctrl|control)$/i.test(f))o=!0;else if(/^s(hift)?$/i.test(f))s=!0;else if(/^mod$/i.test(f))e=="mac"?a=!0:o=!0;else throw new Error("Unrecognized modifier name: "+f)}return n&&(i="Alt-"+i),o&&(i="Ctrl-"+i),a&&(i="Meta-"+i),s&&(i="Shift-"+i),i}function ru(r,e,t){return e.altKey&&(r="Alt-"+r),e.ctrlKey&&(r="Ctrl-"+r),e.metaKey&&(r="Meta-"+r),t!==!1&&e.shiftKey&&(r="Shift-"+r),r}var a8=Zi.default(le.domEventHandlers({keydown(r,e){return P1(O1(e.state),r,e,"editor")}})),cf=oe.define({enables:a8}),Iy=new WeakMap;function O1(r){let e=r.facet(cf),t=Iy.get(e);return t||Iy.set(e,t=f8(e.reduce((i,n)=>i.concat(n),[]))),t}function N1(r,e,t){return P1(O1(r.state),e,r,t)}var po=null,l8=4e3;function f8(r,e=o8){let t=Object.create(null),i=Object.create(null),n=(s,a)=>{let l=i[s];if(l==null)i[s]=a;else if(l!=a)throw new Error("Key binding "+s+" is used both as a regular binding and as a multi-stroke prefix")},o=(s,a,l,f)=>{var c,u;let d=t[s]||(t[s]=Object.create(null)),p=a.split(/ (?!$)/).map(k=>s8(k,e));for(let k=1;k<p.length;k++){let _=p.slice(0,k).join(" ");n(_,!0),d[_]||(d[_]={preventDefault:!0,run:[P=>{let N=po={view:P,prefix:_,scope:s};return setTimeout(()=>{po==N&&(po=null)},l8),!0}]})}let g=p.join(" ");n(g,!1);let b=d[g]||(d[g]={preventDefault:!1,run:((u=(c=d._any)===null||c===void 0?void 0:c.run)===null||u===void 0?void 0:u.slice())||[]});l&&b.run.push(l),f&&(b.preventDefault=!0)};for(let s of r){let a=s.scope?s.scope.split(" "):["editor"];if(s.any)for(let f of a){let c=t[f]||(t[f]=Object.create(null));c._any||(c._any={preventDefault:!1,run:[]});for(let u in c)c[u].run.push(s.any)}let l=s[e]||s.key;if(!!l)for(let f of a)o(f,l,s.run,s.preventDefault),s.shift&&o(f,"Shift-"+l,s.shift,s.preventDefault)}return t}function P1(r,e,t,i){let n=oy(e),o=Jt(n,0),s=Ar(o)==n.length&&n!=" ",a="",l=!1;po&&po.view==t&&po.scope==i&&(a=po.prefix+" ",(l=v1.indexOf(e.keyCode)<0)&&(po=null));let f=new Set,c=g=>{if(g){for(let b of g.run)if(!f.has(b)&&(f.add(b),b(t,e)))return!0;g.preventDefault&&(l=!0)}return!1},u=r[i],d,p;if(u){if(c(u[a+ru(n,e,!s)]))return!0;if(s&&(e.shiftKey||e.altKey||e.metaKey||o>127)&&(d=Dn[e.keyCode])&&d!=n){if(c(u[a+ru(d,e,!0)]))return!0;if(e.shiftKey&&(p=aa[e.keyCode])!=n&&p!=d&&c(u[a+ru(p,e,!1)]))return!0}else if(s&&e.shiftKey&&c(u[a+ru(n,e,!0)]))return!0;if(c(u._any))return!0}return l}var I1=!ue.ios,Xl=oe.define({combine(r){return Er(r,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function R1(r={}){return[Xl.of(r),c8,u8,l1.of(!0)]}var yu=class{constructor(e,t,i,n,o){this.left=e,this.top=t,this.width=i,this.height=n,this.className=o}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width>=0&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}},c8=Qe.fromClass(class{constructor(r){this.view=r,this.rangePieces=[],this.cursors=[],this.measureReq={read:this.readPos.bind(this),write:this.drawSel.bind(this)},this.selectionLayer=r.scrollDOM.appendChild(document.createElement("div")),this.selectionLayer.className="cm-selectionLayer",this.selectionLayer.setAttribute("aria-hidden","true"),this.cursorLayer=r.scrollDOM.appendChild(document.createElement("div")),this.cursorLayer.className="cm-cursorLayer",this.cursorLayer.setAttribute("aria-hidden","true"),r.requestMeasure(this.measureReq),this.setBlinkRate()}setBlinkRate(){this.cursorLayer.style.animationDuration=this.view.state.facet(Xl).cursorBlinkRate+"ms"}update(r){let e=r.startState.facet(Xl)!=r.state.facet(Xl);(e||r.selectionSet||r.geometryChanged||r.viewportChanged)&&this.view.requestMeasure(this.measureReq),r.transactions.some(t=>t.scrollIntoView)&&(this.cursorLayer.style.animationName=this.cursorLayer.style.animationName=="cm-blink"?"cm-blink2":"cm-blink"),e&&this.setBlinkRate()}readPos(){let{state:r}=this.view,e=r.facet(Xl),t=r.selection.ranges.map(n=>n.empty?[]:h8(this.view,n)).reduce((n,o)=>n.concat(o)),i=[];for(let n of r.selection.ranges){let o=n==r.selection.main;if(n.empty?!o||I1:e.drawRangeCursor){let s=d8(this.view,n,o);s&&i.push(s)}}return{rangePieces:t,cursors:i}}drawSel({rangePieces:r,cursors:e}){if(r.length!=this.rangePieces.length||r.some((t,i)=>!t.eq(this.rangePieces[i]))){this.selectionLayer.textContent="";for(let t of r)this.selectionLayer.appendChild(t.draw());this.rangePieces=r}if(e.length!=this.cursors.length||e.some((t,i)=>!t.eq(this.cursors[i]))){let t=this.cursorLayer.children;if(t.length!==e.length){this.cursorLayer.textContent="";for(let i of e)this.cursorLayer.appendChild(i.draw())}else e.forEach((i,n)=>i.adjust(t[n]));this.cursors=e}}destroy(){this.selectionLayer.remove(),this.cursorLayer.remove()}}),D1={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};I1&&(D1[".cm-line"].caretColor="transparent !important");var u8=Zi.highest(le.theme(D1));function B1(r){let e=r.scrollDOM.getBoundingClientRect();return{left:(r.textDirection==Nt.LTR?e.left:e.right-r.scrollDOM.clientWidth)-r.scrollDOM.scrollLeft,top:e.top-r.scrollDOM.scrollTop}}function Ry(r,e,t){let i=K.cursor(e);return{from:Math.max(t.from,r.moveToLineBoundary(i,!1,!0).from),to:Math.min(t.to,r.moveToLineBoundary(i,!0,!0).from),type:Ke.Text}}function Dy(r,e){let t=r.lineBlockAt(e);if(Array.isArray(t.type)){for(let i of t.type)if(i.to>e||i.to==e&&(i.to==t.to||i.type==Ke.Text))return i}return t}function h8(r,e){if(e.to<=r.viewport.from||e.from>=r.viewport.to)return[];let t=Math.max(e.from,r.viewport.from),i=Math.min(e.to,r.viewport.to),n=r.textDirection==Nt.LTR,o=r.contentDOM,s=o.getBoundingClientRect(),a=B1(r),l=window.getComputedStyle(o.firstChild),f=s.left+parseInt(l.paddingLeft)+Math.min(0,parseInt(l.textIndent)),c=s.right-parseInt(l.paddingRight),u=Dy(r,t),d=Dy(r,i),p=u.type==Ke.Text?u:null,g=d.type==Ke.Text?d:null;if(r.lineWrapping&&(p&&(p=Ry(r,t,p)),g&&(g=Ry(r,i,g))),p&&g&&p.from==g.from)return k(_(e.from,e.to,p));{let N=p?_(e.from,null,p):P(u,!1),I=g?_(null,e.to,g):P(d,!0),D=[];return(p||u).to<(g||d).from-1?D.push(b(f,N.bottom,c,I.top)):N.bottom<I.top&&r.elementAtHeight((N.bottom+I.top)/2).type==Ke.Text&&(N.bottom=I.top=(N.bottom+I.top)/2),k(N).concat(D).concat(k(I))}function b(N,I,D,B){return new yu(N-a.left,I-a.top-.01,D-N,B-I+.01,"cm-selectionBackground")}function k({top:N,bottom:I,horizontal:D}){let B=[];for(let V=0;V<D.length;V+=2)B.push(b(D[V],N,D[V+1],I));return B}function _(N,I,D){let B=1e9,V=-1e9,W=[];function Y(ce,M,h,x,A){let S=r.coordsAtPos(ce,ce==D.to?-2:2),C=r.coordsAtPos(h,h==D.from?2:-2);B=Math.min(S.top,C.top,B),V=Math.max(S.bottom,C.bottom,V),A==Nt.LTR?W.push(n&&M?f:S.left,n&&x?c:C.right):W.push(!n&&x?f:C.left,!n&&M?c:S.right)}let $=N??D.from,Z=I??D.to;for(let ce of r.visibleRanges)if(ce.to>$&&ce.from<Z)for(let M=Math.max(ce.from,$),h=Math.min(ce.to,Z);;){let x=r.state.doc.lineAt(M);for(let A of r.bidiSpans(x)){let S=A.from+x.from,C=A.to+x.from;if(S>=h)break;C>M&&Y(Math.max(S,M),N==null&&S<=$,Math.min(C,h),I==null&&C>=Z,A.dir)}if(M=x.to+1,M>=h)break}return W.length==0&&Y($,N==null,Z,I==null,r.textDirection),{top:B,bottom:V,horizontal:W}}function P(N,I){let D=s.top+(I?N.top:N.bottom);return{top:D,bottom:D,horizontal:[]}}}function d8(r,e,t){let i=r.coordsAtPos(e.head,e.assoc||1);if(!i)return null;let n=B1(r);return new yu(i.left-n.left,i.top-n.top,-1,i.bottom-i.top,t?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary")}var F1=me.define({map(r,e){return r==null?null:e.mapPos(r)}}),$l=Mt.define({create(){return null},update(r,e){return r!=null&&(r=e.changes.mapPos(r)),e.effects.reduce((t,i)=>i.is(F1)?i.value:t,r)}}),p8=Qe.fromClass(class{constructor(r){this.view=r,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(r){var e;let t=r.state.field($l);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(r.startState.field($l)!=t||r.docChanged||r.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let r=this.view.state.field($l),e=r!=null&&this.view.coordsAtPos(r);if(!e)return null;let t=this.view.scrollDOM.getBoundingClientRect();return{left:e.left-t.left+this.view.scrollDOM.scrollLeft,top:e.top-t.top+this.view.scrollDOM.scrollTop,height:e.bottom-e.top}}drawCursor(r){this.cursor&&(r?(this.cursor.style.left=r.left+"px",this.cursor.style.top=r.top+"px",this.cursor.style.height=r.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(r){this.view.state.field($l)!=r&&this.view.dispatch({effects:F1.of(r)})}},{eventHandlers:{dragover(r){this.setDropPos(this.view.posAtCoords({x:r.clientX,y:r.clientY}))},dragleave(r){(r.target==this.view.contentDOM||!this.view.contentDOM.contains(r.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function L1(){return[$l,p8]}function By(r,e,t,i,n){e.lastIndex=0;for(let o=r.iterRange(t,i),s=t,a;!o.next().done;s+=o.value.length)if(!o.lineBreak)for(;a=e.exec(o.value);)n(s+a.index,a)}function m8(r,e){let t=r.visibleRanges;if(t.length==1&&t[0].from==r.viewport.from&&t[0].to==r.viewport.to)return t;let i=[];for(let{from:n,to:o}of t)n=Math.max(r.state.doc.lineAt(n).from,n-e),o=Math.min(r.state.doc.lineAt(o).to,o+e),i.length&&i[i.length-1].to>=n?i[i.length-1].to=o:i.push({from:n,to:o});return i}var Op=class{constructor(e){let{regexp:t,decoration:i,decorate:n,boundary:o,maxLength:s=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,n)this.addMatch=(a,l,f,c)=>n(c,f,f+a[0].length,a,l);else if(typeof i=="function")this.addMatch=(a,l,f,c)=>{let u=i(a,l,f);u&&c(f,f+a[0].length,u)};else if(i)this.addMatch=(a,l,f,c)=>c(f,f+a[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=o,this.maxLength=s}createDeco(e){let t=new Yr,i=t.add.bind(t);for(let{from:n,to:o}of m8(e,this.maxLength))By(e.state.doc,this.regexp,n,o,(s,a)=>this.addMatch(a,e,s,i));return t.finish()}updateDeco(e,t){let i=1e9,n=-1;return e.docChanged&&e.changes.iterChanges((o,s,a,l)=>{l>e.view.viewport.from&&a<e.view.viewport.to&&(i=Math.min(a,i),n=Math.max(l,n))}),e.viewportChanged||n-i>1e3?this.createDeco(e.view):n>-1?this.updateRange(e.view,t.map(e.changes),i,n):t}updateRange(e,t,i,n){for(let o of e.visibleRanges){let s=Math.max(o.from,i),a=Math.min(o.to,n);if(a>s){let l=e.state.doc.lineAt(s),f=l.to<a?e.state.doc.lineAt(a):l,c=Math.max(o.from,l.from),u=Math.min(o.to,f.to);if(this.boundary){for(;s>l.from;s--)if(this.boundary.test(l.text[s-1-l.from])){c=s;break}for(;a<f.to;a++)if(this.boundary.test(f.text[a-f.from])){u=a;break}}let d=[],p,g=(b,k,_)=>d.push(_.range(b,k));if(l==f)for(this.regexp.lastIndex=c-l.from;(p=this.regexp.exec(l.text))&&p.index<u-l.from;)this.addMatch(p,e,p.index+l.from,g);else By(e.state.doc,this.regexp,c,u,(b,k)=>this.addMatch(k,e,b,g));t=t.update({filterFrom:c,filterTo:u,filter:(b,k)=>b<c||k>u,add:d})}}return t}},Np=/x/.unicode!=null?"gu":"g",g8=new RegExp(`[\0-\b
-\x7F-\x9F\xAD\u061C\u200B\u200E\u200F\u2028\u2029\u202D\u202E\u2066\u2067\u2069\uFEFF\uFFF9-\uFFFC]`,Np),x8={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"},Y0=null;function b8(){var r;if(Y0==null&&typeof document<"u"&&document.body){let e=document.body.style;Y0=((r=e.tabSize)!==null&&r!==void 0?r:e.MozTabSize)!=null}return Y0||!1}var ou=oe.define({combine(r){let e=Er(r,{render:null,specialChars:g8,addSpecialChars:null});return(e.replaceTabs=!b8())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,Np)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,Np)),e}});function U1(r={}){return[ou.of(r),y8()]}var Fy=null;function y8(){return Fy||(Fy=Qe.fromClass(class{constructor(r){this.view=r,this.decorations=he.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(r.state.facet(ou)),this.decorations=this.decorator.createDeco(r)}makeDecorator(r){return new Op({regexp:r.specialChars,decoration:(e,t,i)=>{let{doc:n}=t.state,o=Jt(e[0],0);if(o==9){let s=n.lineAt(i),a=t.state.tabSize,l=ho(s.text,a,i-s.from);return he.replace({widget:new Ip((a-l%a)*this.view.defaultCharacterWidth)})}return this.decorationCache[o]||(this.decorationCache[o]=he.replace({widget:new Pp(r,o)}))},boundary:r.replaceTabs?void 0:/[^]/})}update(r){let e=r.state.facet(ou);r.startState.facet(ou)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(r.view)):this.decorations=this.decorator.updateDeco(r,this.decorations)}},{decorations:r=>r.decorations}))}var v8="\u2022";function w8(r){return r>=32?v8:r==10?"\u2424":String.fromCharCode(9216+r)}var Pp=class extends $r{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=w8(this.code),i=e.state.phrase("Control character")+" "+(x8[this.code]||"0x"+this.code.toString(16)),n=this.options.render&&this.options.render(this.code,i,t);if(n)return n;let o=document.createElement("span");return o.textContent=t,o.title=i,o.setAttribute("aria-label",i),o.className="cm-specialChar",o}ignoreEvent(){return!1}},Ip=class extends $r{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}};function V1(){return E8}var A8=he.line({class:"cm-activeLine"}),E8=Qe.fromClass(class{constructor(r){this.decorations=this.getDeco(r)}update(r){(r.docChanged||r.selectionSet)&&(this.decorations=this.getDeco(r.view))}getDeco(r){let e=-1,t=[];for(let i of r.state.selection.ranges){let n=r.lineBlockAt(i.head);n.from>e&&(t.push(A8.range(n.from)),e=n.from)}return he.set(t)}},{decorations:r=>r.decorations});var Rp=2e3;function k8(r,e,t){let i=Math.min(e.line,t.line),n=Math.max(e.line,t.line),o=[];if(e.off>Rp||t.off>Rp||e.col<0||t.col<0){let s=Math.min(e.off,t.off),a=Math.max(e.off,t.off);for(let l=i;l<=n;l++){let f=r.doc.line(l);f.length<=a&&o.push(K.range(f.from+s,f.to+a))}}else{let s=Math.min(e.col,t.col),a=Math.max(e.col,t.col);for(let l=i;l<=n;l++){let f=r.doc.line(l),c=Jc(f.text,s,r.tabSize,!0);if(c<0)o.push(K.cursor(f.to));else{let u=Jc(f.text,a,r.tabSize);o.push(K.range(f.from+c,f.from+u))}}}return o}function S8(r,e){let t=r.coordsAtPos(r.viewport.from);return t?Math.round(Math.abs((t.left-e)/r.defaultCharacterWidth)):-1}function Ly(r,e){let t=r.posAtCoords({x:e.clientX,y:e.clientY},!1),i=r.state.doc.lineAt(t),n=t-i.from,o=n>Rp?-1:n==i.length?S8(r,e.clientX):ho(i.text,r.state.tabSize,t-i.from);return{line:i.number,col:o,off:n}}function _8(r,e){let t=Ly(r,e),i=r.state.selection;return t?{update(n){if(n.docChanged){let o=n.changes.mapPos(n.startState.doc.line(t.line).from),s=n.state.doc.lineAt(o);t={line:s.number,col:t.col,off:Math.min(t.off,s.length)},i=i.map(n.changes)}},get(n,o,s){let a=Ly(r,n);if(!a)return i;let l=k8(r.state,t,a);return l.length?s?K.create(l.concat(i.ranges)):K.create(l):i}}:null}function q1(r){let e=r?.eventFilter||(t=>t.altKey&&t.button==0);return le.mouseSelectionStyle.of((t,i)=>e(i)?_8(t,i):null)}var C8={Alt:[18,r=>r.altKey],Control:[17,r=>r.ctrlKey],Shift:[16,r=>r.shiftKey],Meta:[91,r=>r.metaKey]},T8={style:"cursor: crosshair"};function j1(r={}){let[e,t]=C8[r.key||"Alt"],i=Qe.fromClass(class{constructor(n){this.view=n,this.isDown=!1}set(n){this.isDown!=n&&(this.isDown=n,this.view.update([]))}},{eventHandlers:{keydown(n){this.set(n.keyCode==e||t(n))},keyup(n){(n.keyCode==e||!t(n))&&this.set(!1)},mousemove(n){this.set(t(n))}}});return[i,le.contentAttributes.of(n=>{var o;return!((o=n.plugin(i))===null||o===void 0)&&o.isDown?T8:null})]}var X0="-10000px",vu=class{constructor(e,t,i){this.facet=t,this.createTooltipView=i,this.input=e.state.facet(t),this.tooltips=this.input.filter(n=>n),this.tooltipViews=this.tooltips.map(i)}update(e){var t;let i=e.state.facet(this.facet),n=i.filter(s=>s);if(i===this.input){for(let s of this.tooltipViews)s.update&&s.update(e);return!1}let o=[];for(let s=0;s<n.length;s++){let a=n[s],l=-1;if(!!a){for(let f=0;f<this.tooltips.length;f++){let c=this.tooltips[f];c&&c.create==a.create&&(l=f)}if(l<0)o[s]=this.createTooltipView(a);else{let f=o[s]=this.tooltipViews[l];f.update&&f.update(e)}}}for(let s of this.tooltipViews)o.indexOf(s)<0&&(s.dom.remove(),(t=s.destroy)===null||t===void 0||t.call(s));return this.input=i,this.tooltips=n,this.tooltipViews=o,!0}};function M8(r){let{win:e}=r;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}var $0=oe.define({combine:r=>{var e,t,i;return{position:ue.ios?"absolute":((e=r.find(n=>n.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=r.find(n=>n.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((i=r.find(n=>n.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||M8}}}),z1=Qe.fromClass(class{constructor(r){this.view=r,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let e=r.state.facet($0);this.position=e.position,this.parent=e.parent,this.classes=r.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new vu(r,uf,t=>this.createTooltip(t)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),r.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let r of this.manager.tooltipViews)this.intersectionObserver.observe(r.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(r){r.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(r);e&&this.observeIntersection();let t=e||r.geometryChanged,i=r.state.facet($0);if(i.position!=this.position){this.position=i.position;for(let n of this.manager.tooltipViews)n.dom.style.position=this.position;t=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let n of this.manager.tooltipViews)this.container.appendChild(n.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(r){let e=r.create(this.view);if(e.dom.classList.add("cm-tooltip"),r.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let t=document.createElement("div");t.className="cm-tooltip-arrow",e.dom.appendChild(t)}return e.dom.style.position=this.position,e.dom.style.top=X0,this.container.appendChild(e.dom),e.mount&&e.mount(this.view),e}destroy(){var r,e;this.view.win.removeEventListener("resize",this.measureSoon);for(let t of this.manager.tooltipViews)t.dom.remove(),(r=t.destroy)===null||r===void 0||r.call(t);(e=this.intersectionObserver)===null||e===void 0||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let r=this.view.dom.getBoundingClientRect();return{editor:r,parent:this.parent?this.container.getBoundingClientRect():r,pos:this.manager.tooltips.map((e,t)=>{let i=this.manager.tooltipViews[t];return i.getCoords?i.getCoords(e.pos):this.view.coordsAtPos(e.pos)}),size:this.manager.tooltipViews.map(({dom:e})=>e.getBoundingClientRect()),space:this.view.state.facet($0).tooltipSpace(this.view)}}writeMeasure(r){let{editor:e,space:t}=r,i=[];for(let n=0;n<this.manager.tooltips.length;n++){let o=this.manager.tooltips[n],s=this.manager.tooltipViews[n],{dom:a}=s,l=r.pos[n],f=r.size[n];if(!l||l.bottom<=Math.max(e.top,t.top)||l.top>=Math.min(e.bottom,t.bottom)||l.right<Math.max(e.left,t.left)-.1||l.left>Math.min(e.right,t.right)+.1){a.style.top=X0;continue}let c=o.arrow?s.dom.querySelector(".cm-tooltip-arrow"):null,u=c?7:0,d=f.right-f.left,p=f.bottom-f.top,g=s.offset||N8,b=this.view.textDirection==Nt.LTR,k=f.width>t.right-t.left?b?t.left:t.right-f.width:b?Math.min(l.left-(c?14:0)+g.x,t.right-d):Math.max(t.left,l.left-d+(c?14:0)-g.x),_=!!o.above;!o.strictSide&&(_?l.top-(f.bottom-f.top)-g.y<t.top:l.bottom+(f.bottom-f.top)+g.y>t.bottom)&&_==t.bottom-l.bottom>l.top-t.top&&(_=!_);let P=_?l.top-p-u-g.y:l.bottom+u+g.y,N=k+d;if(s.overlap!==!0)for(let I of i)I.left<N&&I.right>k&&I.top<P+p&&I.bottom>P&&(P=_?I.top-p-2-u:I.bottom+u+2);this.position=="absolute"?(a.style.top=P-r.parent.top+"px",a.style.left=k-r.parent.left+"px"):(a.style.top=P+"px",a.style.left=k+"px"),c&&(c.style.left=`${l.left+(b?g.x:-g.x)-(k+14-7)}px`),s.overlap!==!0&&i.push({left:k,top:P,right:N,bottom:P+p}),a.classList.toggle("cm-tooltip-above",_),a.classList.toggle("cm-tooltip-below",!_),s.positioned&&s.positioned()}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let r of this.manager.tooltipViews)r.dom.style.top=X0}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),O8=le.baseTheme({".cm-tooltip":{zIndex:100},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:`${7}px`,width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:`${7}px solid transparent`,borderRight:`${7}px solid transparent`},".cm-tooltip-above &":{bottom:`-${7}px`,"&:before":{borderTop:`${7}px solid #bbb`},"&:after":{borderTop:`${7}px solid #f5f5f5`,bottom:"1px"}},".cm-tooltip-below &":{top:`-${7}px`,"&:before":{borderBottom:`${7}px solid #bbb`},"&:after":{borderBottom:`${7}px solid #f5f5f5`,top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),N8={x:0,y:0},uf=oe.define({enables:[z1,O8]}),wu=oe.define(),ff=class{constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new vu(e,wu,t=>this.createHostedView(t))}static create(e){return new ff(e)}createHostedView(e){let t=e.create(this.view);return t.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(t.dom),this.mounted&&t.mount&&t.mount(this.view),t}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(){for(let e of this.manager.tooltipViews)e.positioned&&e.positioned()}update(e){this.manager.update(e)}},P8=uf.compute([wu],r=>{let e=r.facet(wu).filter(t=>t);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.filter(t=>t.end!=null).map(t=>t.end)),create:ff.create,above:e[0].above,arrow:e.some(t=>t.arrow)}}),Dp=class{constructor(e,t,i,n,o){this.view=e,this.source=t,this.field=i,this.setHover=n,this.hoverTime=o,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:e}=this,t=this.view.contentDOM.contains(e.target)?this.view.posAtCoords(e):null;if(t==null)return;let i=this.view.coordsAtPos(t);if(i==null||e.y<i.top||e.y>i.bottom||e.x<i.left-this.view.defaultCharacterWidth||e.x>i.right+this.view.defaultCharacterWidth)return;let n=this.view.bidiSpans(this.view.state.doc.lineAt(t)).find(a=>a.from<=t&&a.to>=t),o=n&&n.dir==Nt.RTL?-1:1,s=this.source(this.view,t,e.x<i.left?-o:o);if(s?.then){let a=this.pending={pos:t};s.then(l=>{this.pending==a&&(this.pending=null,l&&this.view.dispatch({effects:this.setHover.of(l)}))},l=>kr(this.view.state,l,"hover tooltip"))}else s&&this.view.dispatch({effects:this.setHover.of(s)})}mousemove(e){var t;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let i=this.active;if(i&&!Uy(this.lastMove.target)||this.pending){let{pos:n}=i||this.pending,o=(t=i?.end)!==null&&t!==void 0?t:n;(n==o?this.view.posAtCoords(this.lastMove)!=n:!I8(this.view,n,o,e.clientX,e.clientY,6))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&!Uy(e.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}};function Uy(r){for(let e=r;e;e=e.parentNode)if(e.nodeType==1&&e.classList.contains("cm-tooltip"))return!0;return!1}function I8(r,e,t,i,n,o){let s=document.createRange(),a=r.domAtPos(e),l=r.domAtPos(t);s.setEnd(l.node,l.offset),s.setStart(a.node,a.offset);let f=s.getClientRects();s.detach();for(let c=0;c<f.length;c++){let u=f[c];if(Math.max(u.top-n,n-u.bottom,u.left-i,i-u.right)<=o)return!0}return!1}function H1(r,e={}){let t=me.define(),i=Mt.define({create(){return null},update(n,o){if(n&&(e.hideOnChange&&(o.docChanged||o.selection)||e.hideOn&&e.hideOn(o,n)))return null;if(n&&o.docChanged){let s=o.changes.mapPos(n.pos,-1,hr.TrackDel);if(s==null)return null;let a=Object.assign(Object.create(null),n);a.pos=s,n.end!=null&&(a.end=o.changes.mapPos(n.end)),n=a}for(let s of o.effects)s.is(t)&&(n=s.value),s.is(R8)&&(n=null);return n},provide:n=>wu.from(n)});return[i,Qe.define(n=>new Dp(n,r,i,t,e.hoverTime||300)),P8]}function W1(r,e){let t=r.plugin(z1);if(!t)return null;let i=t.manager.tooltips.indexOf(e);return i<0?null:t.manager.tooltipViews[i]}var R8=me.define();var Vy=oe.define({combine(r){let e,t;for(let i of r)e=e||i.topContainer,t=t||i.bottomContainer;return{topContainer:e,bottomContainer:t}}});function ws(r,e){let t=r.plugin(G1),i=t?t.specs.indexOf(e):-1;return i>-1?t.panels[i]:null}var G1=Qe.fromClass(class{constructor(r){this.input=r.state.facet(vs),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(r));let e=r.state.facet(Vy);this.top=new ca(r,!0,e.topContainer),this.bottom=new ca(r,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(r){let e=r.state.facet(Vy);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new ca(r.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new ca(r.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=r.state.facet(vs);if(t!=this.input){let i=t.filter(l=>l),n=[],o=[],s=[],a=[];for(let l of i){let f=this.specs.indexOf(l),c;f<0?(c=l(r.view),a.push(c)):(c=this.panels[f],c.update&&c.update(r)),n.push(c),(c.top?o:s).push(c)}this.specs=i,this.panels=n,this.top.sync(o),this.bottom.sync(s);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let i of this.panels)i.update&&i.update(r)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:r=>le.scrollMargins.of(e=>{let t=e.plugin(r);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})}),ca=class{constructor(e,t,i){this.view=e,this.top=t,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=qy(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=qy(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}};function qy(r){let e=r.nextSibling;return r.remove(),e}var vs=oe.define({enables:G1}),Zr=class extends Bi{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}};Zr.prototype.elementClass="";Zr.prototype.toDOM=void 0;Zr.prototype.mapMode=hr.TrackBefore;Zr.prototype.startSide=Zr.prototype.endSide=-1;Zr.prototype.point=!0;var su=oe.define(),D8={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Pe.empty,lineMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},tf=oe.define();function qp(r){return[K1(),tf.of(Object.assign(Object.assign({},D8),r))]}var Bp=oe.define({combine:r=>r.some(e=>e)});function K1(r){let e=[B8];return r&&r.fixed===!1&&e.push(Bp.of(!0)),e}var B8=Qe.fromClass(class{constructor(r){this.view=r,this.prevViewport=r.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=r.state.facet(tf).map(e=>new Au(r,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!r.state.facet(Bp),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),r.scrollDOM.insertBefore(this.dom,r.contentDOM)}update(r){if(this.updateGutters(r)){let e=this.prevViewport,t=r.view.viewport,i=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(i<(t.to-t.from)*.8)}r.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(Bp)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=r.view.viewport}syncGutters(r){let e=this.dom.nextSibling;r&&this.dom.remove();let t=Pe.iter(this.view.state.facet(su),this.view.viewport.from),i=[],n=this.gutters.map(o=>new Fp(o,this.view.viewport,-this.view.documentPadding.top));for(let o of this.view.viewportLineBlocks){let s;if(Array.isArray(o.type)){for(let a of o.type)if(a.type==Ke.Text){s=a;break}}else s=o.type==Ke.Text?o:void 0;if(!!s){i.length&&(i=[]),Q1(t,i,o.from);for(let a of n)a.line(this.view,s,i)}}for(let o of n)o.finish();r&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(r){let e=r.startState.facet(tf),t=r.state.facet(tf),i=r.docChanged||r.heightChanged||r.viewportChanged||!Pe.eq(r.startState.facet(su),r.state.facet(su),r.view.viewport.from,r.view.viewport.to);if(e==t)for(let n of this.gutters)n.update(r)&&(i=!0);else{i=!0;let n=[];for(let o of t){let s=e.indexOf(o);s<0?n.push(new Au(this.view,o)):(this.gutters[s].update(r),n.push(this.gutters[s]))}for(let o of this.gutters)o.dom.remove(),n.indexOf(o)<0&&o.destroy();for(let o of n)this.dom.appendChild(o.dom);this.gutters=n}return i}destroy(){for(let r of this.gutters)r.destroy();this.dom.remove()}},{provide:r=>le.scrollMargins.of(e=>{let t=e.plugin(r);return!t||t.gutters.length==0||!t.fixed?null:e.textDirection==Nt.LTR?{left:t.dom.offsetWidth}:{right:t.dom.offsetWidth}})});function jy(r){return Array.isArray(r)?r:[r]}function Q1(r,e,t){for(;r.value&&r.from<=t;)r.from==t&&e.push(r.value),r.next()}var Fp=class{constructor(e,t,i){this.gutter=e,this.height=i,this.localMarkers=[],this.i=0,this.cursor=Pe.iter(e.markers,t.from)}line(e,t,i){this.localMarkers.length&&(this.localMarkers=[]),Q1(this.cursor,this.localMarkers,t.from);let n=i.length?this.localMarkers.concat(i):this.localMarkers,o=this.gutter.config.lineMarker(e,t,n);o&&n.unshift(o);let s=this.gutter;if(n.length==0&&!s.config.renderEmptyElements)return;let a=t.top-this.height;if(this.i==s.elements.length){let l=new Eu(e,t.height,a,n);s.elements.push(l),s.dom.appendChild(l.dom)}else s.elements[this.i].update(e,t.height,a,n);this.height=t.bottom,this.i++}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}},Au=class{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in t.domEventHandlers)this.dom.addEventListener(i,n=>{let o=e.lineBlockAtHeight(n.clientY-e.documentTop);t.domEventHandlers[i](e,o,n)&&n.preventDefault()});this.markers=jy(t.markers(e)),t.initialSpacer&&(this.spacer=new Eu(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=jy(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let n=this.config.updateSpacer(this.spacer.markers[0],e);n!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[n])}let i=e.view.viewport;return!Pe.eq(this.markers,t,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}},Eu=class{constructor(e,t,i,n){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,i,n)}update(e,t,i,n){this.height!=t&&(this.dom.style.height=(this.height=t)+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),F8(this.markers,n)||this.setMarkers(e,n)}setMarkers(e,t){let i="cm-gutterElement",n=this.dom.firstChild;for(let o=0,s=0;;){let a=s,l=o<t.length?t[o++]:null,f=!1;if(l){let c=l.elementClass;c&&(i+=" "+c);for(let u=s;u<this.markers.length;u++)if(this.markers[u].compare(l)){a=u,f=!0;break}}else a=this.markers.length;for(;s<a;){let c=this.markers[s++];if(c.toDOM){c.destroy(n);let u=n.nextSibling;n.remove(),n=u}}if(!l)break;l.toDOM&&(f?n=n.nextSibling:this.dom.insertBefore(l.toDOM(e),n)),f&&s++}this.dom.className=i,this.markers=t}destroy(){this.setMarkers(null,[])}};function F8(r,e){if(r.length!=e.length)return!1;for(let t=0;t<r.length;t++)if(!r[t].compare(e[t]))return!1;return!0}var L8=oe.define(),ua=oe.define({combine(r){return Er(r,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let i=Object.assign({},e);for(let n in t){let o=i[n],s=t[n];i[n]=o?(a,l,f)=>o(a,l,f)||s(a,l,f):s}return i}})}}),rf=class extends Zr{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}};function Z0(r,e){return r.state.facet(ua).formatNumber(e,r.state)}var U8=tf.compute([ua],r=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(L8)},lineMarker(e,t,i){return i.some(n=>n.toDOM)?null:new rf(Z0(e,e.state.doc.lineAt(t.from).number))},lineMarkerChange:e=>e.startState.facet(ua)!=e.state.facet(ua),initialSpacer(e){return new rf(Z0(e,zy(e.state.doc.lines)))},updateSpacer(e,t){let i=Z0(t.view,zy(t.view.state.doc.lines));return i==e.number?e:new rf(i)},domEventHandlers:r.facet(ua).domEventHandlers}));function J1(r={}){return[ua.of(r),K1(),U8]}function zy(r){let e=9;for(;e<r;)e=e*10+9;return e}var V8=new class extends Zr{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},q8=su.compute(["selection"],r=>{let e=[],t=-1;for(let i of r.selection.ranges){let n=r.doc.lineAt(i.head).from;n>t&&(t=n,e.push(V8.range(n)))}return Pe.of(e)});function Y1(){return q8}var j8=0,hf=class{constructor(e,t){this.from=e,this.to=t}},Ee=class{constructor(e={}){this.id=j8++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=gr.match(e)),t=>{let i=e(t);return i===void 0?null:[this,i]}}};Ee.closedBy=new Ee({deserialize:r=>r.split(" ")});Ee.openedBy=new Ee({deserialize:r=>r.split(" ")});Ee.group=new Ee({deserialize:r=>r.split(" ")});Ee.contextHash=new Ee({perNode:!0});Ee.lookAhead=new Ee({perNode:!0});Ee.mounted=new Ee({perNode:!0});var z8=Object.create(null),gr=class{constructor(e,t,i,n=0){this.name=e,this.props=t,this.id=i,this.flags=n}static define(e){let t=e.props&&e.props.length?Object.create(null):z8,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),n=new gr(e.name||"",t,e.id,i);if(e.props){for(let o of e.props)if(Array.isArray(o)||(o=o(n)),o){if(o[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[o[0].id]=o[1]}}return n}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(Ee.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let n of i.split(" "))t[n]=e[i];return i=>{for(let n=i.prop(Ee.group),o=-1;o<(n?n.length:0);o++){let s=t[o<0?i.name:n[o]];if(s)return s}}}};gr.none=new gr("",Object.create(null),0,8);var ya=class{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let i of this.types){let n=null;for(let o of e){let s=o(i);s&&(n||(n=Object.assign({},i.props)),n[s[0].id]=s[1])}t.push(n?new gr(i.name,n,i.id,i.flags):i)}return new ya(t)}},_u=new WeakMap,X1=new WeakMap,mr;(function(r){r[r.ExcludeBuffers=1]="ExcludeBuffers",r[r.IncludeAnonymous=2]="IncludeAnonymous",r[r.IgnoreMounts=4]="IgnoreMounts",r[r.IgnoreOverlays=8]="IgnoreOverlays"})(mr||(mr={}));var Je=class{constructor(e,t,i,n,o){if(this.type=e,this.children=t,this.positions=i,this.length=n,this.props=null,o&&o.length){this.props=Object.create(null);for(let[s,a]of o)this.props[typeof s=="number"?s:s.id]=a}}toString(){let e=this.prop(Ee.mounted);if(e&&!e.overlay)return e.tree.toString();let t="";for(let i of this.children){let n=i.toString();n&&(t&&(t+=","),t+=n)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new wa(this.topNode,e)}cursorAt(e,t=0,i=0){let n=_u.get(this)||this.topNode,o=new wa(n);return o.moveTo(e,t),_u.set(this,o._tree),o}get topNode(){return new Fi(this,0,0,null)}resolve(e,t=0){let i=va(_u.get(this)||this.topNode,e,t,!1);return _u.set(this,i),i}resolveInner(e,t=0){let i=va(X1.get(this)||this.topNode,e,t,!0);return X1.set(this,i),i}iterate(e){let{enter:t,leave:i,from:n=0,to:o=this.length}=e;for(let s=this.cursor((e.mode||0)|mr.IncludeAnonymous);;){let a=!1;if(s.from<=o&&s.to>=n&&(s.type.isAnonymous||t(s)!==!1)){if(s.firstChild())continue;a=!0}for(;a&&i&&!s.type.isAnonymous&&i(s),!s.nextSibling();){if(!s.parent())return;a=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:Wp(gr.none,this.children,this.positions,0,this.children.length,0,this.length,(t,i,n)=>new Je(this.type,t,i,n,this.propValues),e.makeTree||((t,i,n)=>new Je(gr.none,t,i,n)))}static build(e){return H8(e)}};Je.empty=new Je(gr.none,[],[],0);var df=class{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new df(this.buffer,this.index)}},Ln=class{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return gr.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],n=this.set.types[t],o=n.name;if(/\W/.test(o)&&!n.isError&&(o=JSON.stringify(o)),e+=4,i==e)return o;let s=[];for(;e<i;)s.push(this.childString(e)),e=this.buffer[e+3];return o+"("+s.join(",")+")"}findChild(e,t,i,n,o){let{buffer:s}=this,a=-1;for(let l=e;l!=t&&!(Z1(o,n,s[l+1],s[l+2])&&(a=l,i>0));l=s[l+3]);return a}slice(e,t,i,n){let o=this.buffer,s=new Uint16Array(t-e);for(let a=e,l=0;a<t;)s[l++]=o[a++],s[l++]=o[a++]-i,s[l++]=o[a++]-i,s[l++]=o[a++]-e;return new Ln(s,n-i,this.set)}};function Z1(r,e,t,i){switch(r){case-2:return t<e;case-1:return i>=e&&t<e;case 0:return t<e&&i>e;case 1:return t<=e&&i>e;case 2:return i>e;case 4:return!0}}function ev(r,e){let t=r.childBefore(e);for(;t;){let i=t.lastChild;if(!i||i.to!=t.to)break;i.type.isError&&i.from==i.to?(r=t,t=i.prevSibling):t=i}return r}function va(r,e,t,i){for(var n;r.from==r.to||(t<1?r.from>=e:r.from>e)||(t>-1?r.to<=e:r.to<e);){let s=!i&&r instanceof Fi&&r.index<0?null:r.parent;if(!s)return r;r=s}let o=i?0:mr.IgnoreOverlays;if(i)for(let s=r,a=s.parent;a;s=a,a=s.parent)s instanceof Fi&&s.index<0&&((n=a.enter(e,t,o))===null||n===void 0?void 0:n.from)!=s.from&&(r=a);for(;;){let s=r.enter(e,t,o);if(!s)return r;r=s}}var Fi=class{constructor(e,t,i,n){this._tree=e,this.from=t,this.index=i,this._parent=n}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,n,o=0){for(let s=this;;){for(let{children:a,positions:l}=s._tree,f=t>0?a.length:-1;e!=f;e+=t){let c=a[e],u=l[e]+s.from;if(!!Z1(n,i,u,u+c.length)){if(c instanceof Ln){if(o&mr.ExcludeBuffers)continue;let d=c.findChild(0,c.buffer.length,t,i-u,n);if(d>-1)return new on(new jp(s,c,e,u),null,d)}else if(o&mr.IncludeAnonymous||!c.type.isAnonymous||Hp(c)){let d;if(!(o&mr.IgnoreMounts)&&c.props&&(d=c.prop(Ee.mounted))&&!d.overlay)return new Fi(d.tree,u,e,s);let p=new Fi(c,u,e,s);return o&mr.IncludeAnonymous||!p.type.isAnonymous?p:p.nextChild(t<0?c.children.length-1:0,t,i,n)}}}if(o&mr.IncludeAnonymous||!s.type.isAnonymous||(s.index>=0?e=s.index+t:e=t<0?-1:s._parent._tree.children.length,s=s._parent,!s))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,i=0){let n;if(!(i&mr.IgnoreOverlays)&&(n=this._tree.prop(Ee.mounted))&&n.overlay){let o=e-this.from;for(let{from:s,to:a}of n.overlay)if((t>0?s<=o:s<o)&&(t<0?a>=o:a>o))return new Fi(n.tree,n.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new wa(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,t=0){return va(this,e,t,!1)}resolveInner(e,t=0){return va(this,e,t,!0)}enterUnfinishedNodesBefore(e){return ev(this,e)}getChild(e,t=null,i=null){let n=Tu(this,e,t,i);return n.length?n[0]:null}getChildren(e,t=null,i=null){return Tu(this,e,t,i)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return Mu(this,e)}};function Tu(r,e,t,i){let n=r.cursor(),o=[];if(!n.firstChild())return o;if(t!=null){for(;!n.type.is(t);)if(!n.nextSibling())return o}for(;;){if(i!=null&&n.type.is(i))return o;if(n.type.is(e)&&o.push(n.node),!n.nextSibling())return i==null?o:[]}}function Mu(r,e,t=e.length-1){for(let i=r.parent;t>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[t]&&e[t]!=i.name)return!1;t--}}return!0}var jp=class{constructor(e,t,i,n){this.parent=e,this.buffer=t,this.index=i,this.start=n}},on=class{constructor(e,t,i){this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}child(e,t,i){let{buffer:n}=this.context,o=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.context.start,i);return o<0?null:new on(this.context,this,o)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,i=0){if(i&mr.ExcludeBuffers)return null;let{buffer:n}=this.context,o=n.findChild(this.index+4,n.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return o<0?null:new on(this.context,this,o)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new on(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new on(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}cursor(e=0){return new wa(this,e)}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,n=this.index+4,o=i.buffer[this.index+3];if(o>n){let s=i.buffer[this.index+1],a=i.buffer[this.index+2];e.push(i.slice(n,o,s,a)),t.push(0)}return new Je(this.type,e,t,this.to-this.from)}resolve(e,t=0){return va(this,e,t,!1)}resolveInner(e,t=0){return va(this,e,t,!0)}enterUnfinishedNodesBefore(e){return ev(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,t=null,i=null){let n=Tu(this,e,t,i);return n.length?n[0]:null}getChildren(e,t=null,i=null){return Tu(this,e,t,i)}get node(){return this}matchContext(e){return Mu(this,e)}},wa=class{constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Fi)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}get name(){return this.type.name}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:i,buffer:n}=this.buffer;return this.type=t||n.set.types[n.buffer[e]],this.from=i+n.buffer[e+1],this.to=i+n.buffer[e+2],!0}yield(e){return e?e instanceof Fi?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:n}=this.buffer,o=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.buffer.start,i);return o<0?!1:(this.stack.push(this.index),this.yieldBuf(o))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?i&mr.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&mr.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&mr.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let n=i<0?0:this.stack[i]+4;if(this.index!=n)return this.yieldBuf(t.findChild(n,this.index,-1,0,4))}else{let n=t.buffer[this.index+3];if(n<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(n)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:n}=this;if(n){if(e>0){if(this.index<n.buffer.buffer.length)return!1}else for(let o=0;o<this.index;o++)if(n.buffer.buffer[o+3]<this.index)return!1;({index:t,parent:i}=n)}else({index:t,_parent:i}=this._tree);for(;i;{index:t,_parent:i}=i)if(t>-1)for(let o=t+e,s=e<0?-1:i._tree.children.length;o!=s;o+=e){let a=i._tree.children[o];if(this.mode&mr.IncludeAnonymous||a instanceof Ln||!a.type.isAnonymous||Hp(a))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer){e:for(let n=this.index,o=this.stack.length;o>=0;){for(let s=e;s;s=s._parent)if(s.index==n){if(n==this.index)return s;t=s,i=o+1;break e}n=this.stack[--o]}}for(let n=i;n<this.stack.length;n++)t=new on(this.buffer,t,this.stack[n]);return this.bufferNode=new on(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let n=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(n=!0)}for(;n&&t&&t(this),n=this.type.isAnonymous,!this.nextSibling();){if(!i)return;this.parent(),i--,n=!0}}}matchContext(e){if(!this.buffer)return Mu(this.node,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let n=e.length-1,o=this.stack.length-1;n>=0;o--){if(o<0)return Mu(this.node,e,n);let s=i[t.buffer[this.stack[o]]];if(!s.isAnonymous){if(e[n]&&e[n]!=s.name)return!1;n--}}return!0}};function Hp(r){return r.children.some(e=>e instanceof Ln||!e.type.isAnonymous||Hp(e))}function H8(r){var e;let{buffer:t,nodeSet:i,maxBufferLength:n=1024,reused:o=[],minRepeatType:s=i.types.length}=r,a=Array.isArray(t)?new df(t,t.length):t,l=i.types,f=0,c=0;function u(I,D,B,V,W){let{id:Y,start:$,end:Z,size:ce}=a,M=c;for(;ce<0;)if(a.next(),ce==-1){let C=o[Y];B.push(C),V.push($-I);return}else if(ce==-3){f=Y;return}else if(ce==-4){c=Y;return}else throw new RangeError(`Unrecognized record size: ${ce}`);let h=l[Y],x,A,S=$-I;if(Z-$<=n&&(A=b(a.pos-D,W))){let C=new Uint16Array(A.size-A.skip),v=a.pos-A.size,T=C.length;for(;a.pos>v;)T=k(A.start,C,T);x=new Ln(C,Z-A.start,i),S=A.start-I}else{let C=a.pos-ce;a.next();let v=[],T=[],E=Y>=s?Y:-1,m=0,w=Z;for(;a.pos>C;)E>=0&&a.id==E&&a.size>=0?(a.end<=w-n&&(p(v,T,$,m,a.end,w,E,M),m=v.length,w=a.end),a.next()):u($,C,v,T,E);if(E>=0&&m>0&&m<v.length&&p(v,T,$,m,$,w,E,M),v.reverse(),T.reverse(),E>-1&&m>0){let z=d(h);x=Wp(h,v,T,0,v.length,0,Z-$,z,z)}else x=g(h,v,T,Z-$,M-Z)}B.push(x),V.push(S)}function d(I){return(D,B,V)=>{let W=0,Y=D.length-1,$,Z;if(Y>=0&&($=D[Y])instanceof Je){if(!Y&&$.type==I&&$.length==V)return $;(Z=$.prop(Ee.lookAhead))&&(W=B[Y]+$.length+Z)}return g(I,D,B,V,W)}}function p(I,D,B,V,W,Y,$,Z){let ce=[],M=[];for(;I.length>V;)ce.push(I.pop()),M.push(D.pop()+B-W);I.push(g(i.types[$],ce,M,Y-W,Z-Y)),D.push(W-B)}function g(I,D,B,V,W=0,Y){if(f){let $=[Ee.contextHash,f];Y=Y?[$].concat(Y):[$]}if(W>25){let $=[Ee.lookAhead,W];Y=Y?[$].concat(Y):[$]}return new Je(I,D,B,V,Y)}function b(I,D){let B=a.fork(),V=0,W=0,Y=0,$=B.end-n,Z={size:0,start:0,skip:0};e:for(let ce=B.pos-I;B.pos>ce;){let M=B.size;if(B.id==D&&M>=0){Z.size=V,Z.start=W,Z.skip=Y,Y+=4,V+=4,B.next();continue}let h=B.pos-M;if(M<0||h<ce||B.start<$)break;let x=B.id>=s?4:0,A=B.start;for(B.next();B.pos>h;){if(B.size<0)if(B.size==-3)x+=4;else break e;else B.id>=s&&(x+=4);B.next()}W=A,V+=M,Y+=x}return(D<0||V==I)&&(Z.size=V,Z.start=W,Z.skip=Y),Z.size>4?Z:void 0}function k(I,D,B){let{id:V,start:W,end:Y,size:$}=a;if(a.next(),$>=0&&V<s){let Z=B;if($>4){let ce=a.pos-($-4);for(;a.pos>ce;)B=k(I,D,B)}D[--B]=Z,D[--B]=Y-I,D[--B]=W-I,D[--B]=V}else $==-3?f=V:$==-4&&(c=V);return B}let _=[],P=[];for(;a.pos>0;)u(r.start||0,r.bufferStart||0,_,P,-1);let N=(e=r.length)!==null&&e!==void 0?e:_.length?P[0]+_[0].length:0;return new Je(l[r.topID],_.reverse(),P.reverse(),N)}var $1=new WeakMap;function Cu(r,e){if(!r.isAnonymous||e instanceof Ln||e.type!=r)return 1;let t=$1.get(e);if(t==null){t=1;for(let i of e.children){if(i.type!=r||!(i instanceof Je)){t=1;break}t+=Cu(r,i)}$1.set(e,t)}return t}function Wp(r,e,t,i,n,o,s,a,l){let f=0;for(let g=i;g<n;g++)f+=Cu(r,e[g]);let c=Math.ceil(f*1.5/8),u=[],d=[];function p(g,b,k,_,P){for(let N=k;N<_;){let I=N,D=b[N],B=Cu(r,g[N]);for(N++;N<_;N++){let V=Cu(r,g[N]);if(B+V>=c)break;B+=V}if(N==I+1){if(B>c){let V=g[I];p(V.children,V.positions,0,V.children.length,b[I]+P);continue}u.push(g[I])}else{let V=b[N-1]+g[N-1].length-D;u.push(Wp(r,g,b,I,N,D,V,null,l))}d.push(D+P-o)}}return p(e,t,i,n,0),(a||l)(u,d,s)}var sn=class{constructor(e,t,i,n,o=!1,s=!1){this.from=e,this.to=t,this.tree=i,this.offset=n,this.open=(o?1:0)|(s?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],i=!1){let n=[new sn(0,e.length,e,0,!1,i)];for(let o of t)o.to>e.length&&n.push(o);return n}static applyChanges(e,t,i=128){if(!t.length)return e;let n=[],o=1,s=e.length?e[0]:null;for(let a=0,l=0,f=0;;a++){let c=a<t.length?t[a]:null,u=c?c.fromA:1e9;if(u-l>=i)for(;s&&s.from<u;){let d=s;if(l>=d.from||u<=d.to||f){let p=Math.max(d.from,l)-f,g=Math.min(d.to,u)-f;d=p>=g?null:new sn(p,g,d.tree,d.offset+f,a>0,!!c)}if(d&&n.push(d),s.to>u)break;s=o<e.length?e[o++]:null}if(!c)break;l=c.toA,f=c.toA-c.toB}return n}},pf=class{startParse(e,t,i){return typeof e=="string"&&(e=new zp(e)),i=i?i.length?i.map(n=>new hf(n.from,n.to)):[new hf(0,0)]:[new hf(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let n=this.startParse(e,t,i);for(;;){let o=n.advance();if(o)return o}}},zp=class{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}};var qP=new Ee({perNode:!0});var W8=0,gi=class{constructor(e,t,i){this.set=e,this.base=t,this.modified=i,this.id=W8++}static define(e){if(e?.base)throw new Error("Can not derive from a modified tag");let t=new gi([],null,[]);if(t.set.push(t),e)for(let i of e.set)t.set.push(i);return t}static defineModifier(){let e=new Aa;return t=>t.modified.indexOf(e)>-1?t:Aa.get(t.base||t,t.modified.concat(e).sort((i,n)=>i.id-n.id))}},G8=0,Aa=class{constructor(){this.instances=[],this.id=G8++}static get(e,t){if(!t.length)return e;let i=t[0].instances.find(a=>a.base==e&&K8(t,a.modified));if(i)return i;let n=[],o=new gi(n,e,t);for(let a of t)a.instances.push(o);let s=Q8(t);for(let a of e.set)if(!a.modified.length)for(let l of s)n.push(Aa.get(a,l));return o}};function K8(r,e){return r.length==e.length&&r.every((t,i)=>t==e[i])}function Q8(r){let e=[[]];for(let t=0;t<r.length;t++)for(let i=0,n=e.length;i<n;i++)e.push(e[i].concat(r[t]));return e.sort((t,i)=>i.length-t.length)}function iv(r){let e=Object.create(null);for(let t in r){let i=r[t];Array.isArray(i)||(i=[i]);for(let n of t.split(" "))if(n){let o=[],s=2,a=n;for(let u=0;;){if(a=="..."&&u>0&&u+3==n.length){s=1;break}let d=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!d)throw new RangeError("Invalid path: "+n);if(o.push(d[0]=="*"?"":d[0][0]=='"'?JSON.parse(d[0]):d[0]),u+=d[0].length,u==n.length)break;let p=n[u++];if(u==n.length&&p=="!"){s=0;break}if(p!="/")throw new RangeError("Invalid path: "+n);a=n.slice(u)}let l=o.length-1,f=o[l];if(!f)throw new RangeError("Invalid path: "+n);let c=new Ea(i,s,l>0?o.slice(0,l):null);e[f]=c.sort(e[f])}}return nv.add(e)}var nv=new Ee,Ea=class{constructor(e,t,i,n){this.tags=e,this.mode=t,this.context=i,this.next=n}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}};Ea.empty=new Ea([],2,null);function Jp(r,e){let t=Object.create(null);for(let o of r)if(!Array.isArray(o.tag))t[o.tag.id]=o.class;else for(let s of o.tag)t[s.id]=o.class;let{scope:i,all:n=null}=e||{};return{style:o=>{let s=n;for(let a of o)for(let l of a.set){let f=t[l.id];if(f){s=s?s+" "+f:f;break}}return s},scope:i}}function J8(r,e){let t=null;for(let i of r){let n=i.style(e);n&&(t=t?t+" "+n:n)}return t}function ov(r,e,t,i=0,n=r.length){let o=new Kp(i,Array.isArray(e)?e:[e],t);o.highlightRange(r.cursor(),i,n,"",o.highlighters),o.flush(n)}var Kp=class{constructor(e,t,i){this.at=e,this.highlighters=t,this.span=i,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,i,n,o){let{type:s,from:a,to:l}=e;if(a>=i||l<=t)return;s.isTop&&(o=this.highlighters.filter(p=>!p.scope||p.scope(s)));let f=n,c=Y8(e)||Ea.empty,u=J8(o,c.tags);if(u&&(f&&(f+=" "),f+=u,c.mode==1&&(n+=(n?" ":"")+u)),this.startSpan(e.from,f),c.opaque)return;let d=e.tree&&e.tree.prop(Ee.mounted);if(d&&d.overlay){let p=e.node.enter(d.overlay[0].from+a,1),g=this.highlighters.filter(k=>!k.scope||k.scope(d.tree.type)),b=e.firstChild();for(let k=0,_=a;;k++){let P=k<d.overlay.length?d.overlay[k]:null,N=P?P.from+a:l,I=Math.max(t,_),D=Math.min(i,N);if(I<D&&b)for(;e.from<D&&(this.highlightRange(e,I,D,n,o),this.startSpan(Math.min(i,e.to),f),!(e.to>=N||!e.nextSibling())););if(!P||N>i)break;_=P.to+a,_>t&&(this.highlightRange(p.cursor(),Math.max(t,P.from+a),Math.min(i,_),n,g),this.startSpan(_,f))}b&&e.parent()}else if(e.firstChild()){do if(!(e.to<=t)){if(e.from>=i)break;this.highlightRange(e,t,i,n,o),this.startSpan(Math.min(i,e.to),f)}while(e.nextSibling());e.parent()}}};function Y8(r){let e=r.type.prop(nv);for(;e&&e.context&&!r.matchContext(e.context);)e=e.next;return e||null}var ee=gi.define,Ou=ee(),bo=ee(),tv=ee(bo),rv=ee(bo),yo=ee(),Nu=ee(yo),Gp=ee(yo),fn=ee(),As=ee(fn),an=ee(),ln=ee(),Qp=ee(),mf=ee(Qp),Pu=ee(),ie={comment:Ou,lineComment:ee(Ou),blockComment:ee(Ou),docComment:ee(Ou),name:bo,variableName:ee(bo),typeName:tv,tagName:ee(tv),propertyName:rv,attributeName:ee(rv),className:ee(bo),labelName:ee(bo),namespace:ee(bo),macroName:ee(bo),literal:yo,string:Nu,docString:ee(Nu),character:ee(Nu),attributeValue:ee(Nu),number:Gp,integer:ee(Gp),float:ee(Gp),bool:ee(yo),regexp:ee(yo),escape:ee(yo),color:ee(yo),url:ee(yo),keyword:an,self:ee(an),null:ee(an),atom:ee(an),unit:ee(an),modifier:ee(an),operatorKeyword:ee(an),controlKeyword:ee(an),definitionKeyword:ee(an),moduleKeyword:ee(an),operator:ln,derefOperator:ee(ln),arithmeticOperator:ee(ln),logicOperator:ee(ln),bitwiseOperator:ee(ln),compareOperator:ee(ln),updateOperator:ee(ln),definitionOperator:ee(ln),typeOperator:ee(ln),controlOperator:ee(ln),punctuation:Qp,separator:ee(Qp),bracket:mf,angleBracket:ee(mf),squareBracket:ee(mf),paren:ee(mf),brace:ee(mf),content:fn,heading:As,heading1:ee(As),heading2:ee(As),heading3:ee(As),heading4:ee(As),heading5:ee(As),heading6:ee(As),contentSeparator:ee(fn),list:ee(fn),quote:ee(fn),emphasis:ee(fn),strong:ee(fn),link:ee(fn),monospace:ee(fn),strikethrough:ee(fn),inserted:ee(),deleted:ee(),changed:ee(),invalid:ee(),meta:Pu,documentMeta:ee(Pu),annotation:ee(Pu),processingInstruction:ee(Pu),definition:gi.defineModifier(),constant:gi.defineModifier(),function:gi.defineModifier(),standard:gi.defineModifier(),local:gi.defineModifier(),special:gi.defineModifier()},HP=Jp([{tag:ie.link,class:"tok-link"},{tag:ie.heading,class:"tok-heading"},{tag:ie.emphasis,class:"tok-emphasis"},{tag:ie.strong,class:"tok-strong"},{tag:ie.keyword,class:"tok-keyword"},{tag:ie.atom,class:"tok-atom"},{tag:ie.bool,class:"tok-bool"},{tag:ie.url,class:"tok-url"},{tag:ie.labelName,class:"tok-labelName"},{tag:ie.inserted,class:"tok-inserted"},{tag:ie.deleted,class:"tok-deleted"},{tag:ie.literal,class:"tok-literal"},{tag:ie.string,class:"tok-string"},{tag:ie.number,class:"tok-number"},{tag:[ie.regexp,ie.escape,ie.special(ie.string)],class:"tok-string2"},{tag:ie.variableName,class:"tok-variableName"},{tag:ie.local(ie.variableName),class:"tok-variableName tok-local"},{tag:ie.definition(ie.variableName),class:"tok-variableName tok-definition"},{tag:ie.special(ie.variableName),class:"tok-variableName2"},{tag:ie.definition(ie.propertyName),class:"tok-propertyName tok-definition"},{tag:ie.typeName,class:"tok-typeName"},{tag:ie.namespace,class:"tok-namespace"},{tag:ie.className,class:"tok-className"},{tag:ie.macroName,class:"tok-macroName"},{tag:ie.propertyName,class:"tok-propertyName"},{tag:ie.operator,class:"tok-operator"},{tag:ie.comment,class:"tok-comment"},{tag:ie.meta,class:"tok-meta"},{tag:ie.invalid,class:"tok-invalid"},{tag:ie.punctuation,class:"tok-punctuation"}]);var Yp,bf=new Ee;function X8(r){return oe.define({combine:r?e=>e.concat(r):void 0})}var ei=class{constructor(e,t,i=[],n=""){this.data=e,this.name=n,ke.prototype.hasOwnProperty("tree")||Object.defineProperty(ke.prototype,"tree",{get(){return nr(this)}}),this.parser=t,this.extension=[Ao.of(this),ke.languageData.of((o,s,a)=>o.facet(sv(o,s,a)))].concat(i)}isActiveAt(e,t,i=-1){return sv(e,t,i)==this.data}findRegions(e){let t=e.facet(Ao);if(t?.data==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let i=[],n=(o,s)=>{if(o.prop(bf)==this.data){i.push({from:s,to:s+o.length});return}let a=o.prop(Ee.mounted);if(a){if(a.tree.prop(bf)==this.data){if(a.overlay)for(let l of a.overlay)i.push({from:l.from+s,to:l.to+s});else i.push({from:s,to:s+o.length});return}else if(a.overlay){let l=i.length;if(n(a.tree,a.overlay[0].from+s),i.length>l)return}}for(let l=0;l<o.children.length;l++){let f=o.children[l];f instanceof Je&&n(f,o.positions[l]+s)}};return n(nr(e),0),i}get allowsNesting(){return!0}};ei.setState=me.define();function sv(r,e,t){let i=r.facet(Ao);if(!i)return null;let n=i.data;if(i.allowsNesting)for(let o=nr(r).topNode;o;o=o.enter(e,t,mr.ExcludeBuffers))n=o.type.prop(bf)||n;return n}function nr(r){let e=r.field(ei.state,!1);return e?e.tree:Je.empty}var em=class{constructor(e,t=e.length){this.doc=e,this.length=t,this.cursorPos=0,this.string="",this.cursor=e.iter()}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let i=this.cursorPos-this.string.length;return e<i||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-i,t-i)}},gf=null,vo=class{constructor(e,t,i=[],n,o,s,a,l){this.parser=e,this.state=t,this.fragments=i,this.tree=n,this.treeLen=o,this.viewport=s,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,t,i){return new vo(e,t,[],Je.empty,0,i,[],null)}startParse(){return this.parser.startParse(new em(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=Je.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let n=Date.now()+e;e=()=>Date.now()>n}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let n=this.parse.advance();if(n)if(this.fragments=this.withoutTempSkipped(sn.addTree(n,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=n,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(sn.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=gf;gf=this;try{return e()}finally{gf=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=av(e,t.from,t.to);return e}changes(e,t){let{fragments:i,tree:n,treeLen:o,viewport:s,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((f,c,u,d)=>l.push({fromA:f,toA:c,fromB:u,toB:d})),i=sn.applyChanges(i,l),n=Je.empty,o=0,s={from:e.mapPos(s.from,-1),to:e.mapPos(s.to,1)},this.skipped.length){a=[];for(let f of this.skipped){let c=e.mapPos(f.from,1),u=e.mapPos(f.to,-1);c<u&&a.push({from:c,to:u})}}}return new vo(this.parser,t,i,n,o,s,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:n,to:o}=this.skipped[i];n<e.to&&o>e.from&&(this.fragments=av(this.fragments,n,o),this.skipped.splice(i--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends pf{createParse(t,i,n){let o=n[0].from,s=n[n.length-1].to;return{parsedPos:o,advance(){let l=gf;if(l){for(let f of n)l.tempSkipped.push(f);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=s,new Je(gr.none,[],[],s-o)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return gf}};function av(r,e,t){return sn.applyChanges(r,[{fromA:e,toA:t,fromB:e,toB:t}])}var wo=class{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,i)||t.takeTree(),new wo(t)}static init(e){let t=Math.min(3e3,e.doc.length),i=vo.create(e.facet(Ao).parser,e,{from:0,to:t});return i.work(20,t)||i.takeTree(),new wo(i)}};ei.state=Mt.define({create:wo.init,update(r,e){for(let t of e.effects)if(t.is(ei.setState))return t.value;return e.startState.facet(Ao)!=e.state.facet(Ao)?wo.init(e.state):r.apply(e)}});var uv=r=>{let e=setTimeout(()=>r(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(uv=r=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(r,{timeout:500-100})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});var Xp=typeof navigator<"u"&&((Yp=navigator.scheduling)===null||Yp===void 0?void 0:Yp.isInputPending)?()=>navigator.scheduling.isInputPending():null,$8=Qe.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(ei.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(ei.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=uv(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:n}}=this.view,o=i.field(ei.state);if(o.tree==o.context.tree&&o.context.isDone(n+1e5))return;let s=Date.now()+Math.min(this.chunkBudget,100,e&&!Xp?Math.max(25,e.timeRemaining()-5):1e9),a=o.context.treeLen<n&&i.doc.length>n+1e3,l=o.context.work(()=>Xp&&Xp()||Date.now()>s,n+(a?0:1e5));this.chunkBudget-=Date.now()-t,(l||this.chunkBudget<=0)&&(o.context.takeTree(),this.view.dispatch({effects:ei.setState.of(new wo(o.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(o.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>kr(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Ao=oe.define({combine(r){return r.length?r[0]:null},enables:r=>[ei.state,$8,le.contentAttributes.compute([r],e=>{let t=e.facet(r);return t&&t.name?{"data-language":t.name}:{}})]}),Iu=class{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}};var hv=oe.define(),wf=oe.define({combine:r=>{if(!r.length)return"  ";if(!/^(?: +|\t+)$/.test(r[0]))throw new Error("Invalid indent unit: "+JSON.stringify(r[0]));return r[0]}});function Eo(r){let e=r.facet(wf);return e.charCodeAt(0)==9?r.tabSize*e.length:e.length}function _a(r,e){let t="",i=r.tabSize;if(r.facet(wf).charCodeAt(0)==9)for(;e>=i;)t+="	",e-=i;for(let n=0;n<e;n++)t+=" ";return t}function Lu(r,e){r instanceof ke&&(r=new Es(r));for(let i of r.state.facet(hv)){let n=i(r,e);if(n!=null)return n}let t=nr(r.state);return t?e5(r,t,e):null}var Es=class{constructor(e,t={}){this.state=e,this.options=t,this.unit=Eo(e)}lineAt(e,t=1){let i=this.state.doc.lineAt(e),{simulateBreak:n,simulateDoubleBreak:o}=this.options;return n!=null&&n>=i.from&&n<=i.to?o&&n==e?{text:"",from:e}:(t<0?n<e:n<=e)?{text:i.text.slice(n-i.from),from:n}:{text:i.text.slice(0,n-i.from),from:i.from}:i}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:n}=this.lineAt(e,t);return i.slice(e-n,Math.min(i.length,e+100-n))}column(e,t=1){let{text:i,from:n}=this.lineAt(e,t),o=this.countColumn(i,e-n),s=this.options.overrideIndentation?this.options.overrideIndentation(n):-1;return s>-1&&(o+=s-this.countColumn(i,i.search(/\S|$/))),o}countColumn(e,t=e.length){return ho(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:i,from:n}=this.lineAt(e,t),o=this.options.overrideIndentation;if(o){let s=o(n);if(s>-1)return s}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}},Z8=new Ee;function e5(r,e,t){return dv(e.resolveInner(t).enterUnfinishedNodesBefore(t),t,r)}function t5(r){return r.pos==r.options.simulateBreak&&r.options.simulateDoubleBreak}function r5(r){let e=r.type.prop(Z8);if(e)return e;let t=r.firstChild,i;if(t&&(i=t.type.prop(Ee.closedBy))){let n=r.lastChild,o=n&&i.indexOf(n.name)>-1;return s=>s5(s,!0,1,void 0,o&&!t5(s)?n.from:void 0)}return r.parent==null?i5:null}function dv(r,e,t){for(;r;r=r.parent){let i=r5(r);if(i)return i(yf.create(t,e,r))}return null}function i5(){return 0}var yf=class extends Es{constructor(e,t,i){super(e.state,e.options),this.base=e,this.pos=t,this.node=i}static create(e,t,i){return new yf(e,t,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){let e=this.state.doc.lineAt(this.node.from);for(;;){let t=this.node.resolve(e.from);for(;t.parent&&t.parent.from==t.from;)t=t.parent;if(n5(t,this.node))break;e=this.state.doc.lineAt(t.from)}return this.lineIndent(e.from)}continue(){let e=this.node.parent;return e?dv(e,this.pos,this.base):0}};function n5(r,e){for(let t=e;t;t=t.parent)if(r==t)return!0;return!1}function o5(r){let e=r.node,t=e.childAfter(e.from),i=e.lastChild;if(!t)return null;let n=r.options.simulateBreak,o=r.state.doc.lineAt(t.from),s=n==null||n<=o.from?o.to:Math.min(o.to,n);for(let a=t.to;;){let l=e.childAfter(a);if(!l||l==i)return null;if(!l.type.isSkipped)return l.from<s?t:null;a=l.to}}function s5(r,e,t,i,n){let o=r.textAfter,s=o.match(/^\s*/)[0].length,a=i&&o.slice(s,s+i.length)==i||n==r.pos+s,l=e?o5(r):null;return l?a?r.column(l.from):r.column(l.to):r.baseIndent+(a?0:r.unit*t)}var a5=200;function pv(){return ke.transactionFilter.of(r=>{if(!r.docChanged||!r.isUserEvent("input.type")&&!r.isUserEvent("input.complete"))return r;let e=r.startState.languageDataAt("indentOnInput",r.startState.selection.main.head);if(!e.length)return r;let t=r.newDoc,{head:i}=r.newSelection.main,n=t.lineAt(i);if(i>n.from+a5)return r;let o=t.sliceString(n.from,i);if(!e.some(f=>f.test(o)))return r;let{state:s}=r,a=-1,l=[];for(let{head:f}of s.selection.ranges){let c=s.doc.lineAt(f);if(c.from==a)continue;a=c.from;let u=Lu(s,c.from);if(u==null)continue;let d=/^\s*/.exec(c.text)[0],p=_a(s,u);d!=p&&l.push({from:c.from,to:c.from+d.length,insert:p})}return l.length?[r,{changes:l,sequential:!0}]:r})}var l5=oe.define(),f5=new Ee;function c5(r,e,t){let i=nr(r);if(i.length<t)return null;let n=i.resolveInner(t),o=null;for(let s=n;s;s=s.parent){if(s.to<=t||s.from>t)continue;if(o&&s.from<e)break;let a=s.type.prop(f5);if(a&&(s.to<i.length-50||i.length==r.doc.length||!u5(s))){let l=a(s,r);l&&l.from<=t&&l.from>=e&&l.to>t&&(o=l)}}return o}function u5(r){let e=r.lastChild;return e&&e.to==r.to&&e.type.isError}function Ru(r,e,t){for(let i of r.facet(l5)){let n=i(r,e,t);if(n)return n}return c5(r,e,t)}function mv(r,e){let t=e.mapPos(r.from,1),i=e.mapPos(r.to,-1);return t>=i?void 0:{from:t,to:i}}var Uu=me.define({map:mv}),Af=me.define({map:mv});function gv(r){let e=[];for(let{head:t}of r.state.selection.ranges)e.some(i=>i.from<=t&&i.to>=t)||e.push(r.lineBlockAt(t));return e}var ks=Mt.define({create(){return he.none},update(r,e){r=r.map(e.changes);for(let t of e.effects)t.is(Uu)&&!h5(r,t.value.from,t.value.to)?r=r.update({add:[lv.range(t.value.from,t.value.to)]}):t.is(Af)&&(r=r.update({filter:(i,n)=>t.value.from!=i||t.value.to!=n,filterFrom:t.value.from,filterTo:t.value.to}));if(e.selection){let t=!1,{head:i}=e.selection.main;r.between(i,i,(n,o)=>{n<i&&o>i&&(t=!0)}),t&&(r=r.update({filterFrom:i,filterTo:i,filter:(n,o)=>o<=i||n>=i}))}return r},provide:r=>le.decorations.from(r),toJSON(r,e){let t=[];return r.between(0,e.doc.length,(i,n)=>{t.push(i,n)}),t},fromJSON(r){if(!Array.isArray(r)||r.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<r.length;){let i=r[t++],n=r[t++];if(typeof i!="number"||typeof n!="number")throw new RangeError("Invalid JSON for fold state");e.push(lv.range(i,n))}return he.set(e,!0)}});function Du(r,e,t){var i;let n=null;return(i=r.field(ks,!1))===null||i===void 0||i.between(e,t,(o,s)=>{(!n||n.from>o)&&(n={from:o,to:s})}),n}function h5(r,e,t){let i=!1;return r.between(e,e,(n,o)=>{n==e&&o==t&&(i=!0)}),i}function xv(r,e){return r.field(ks,!1)?e:e.concat(me.appendConfig.of(wv()))}var d5=r=>{for(let e of gv(r)){let t=Ru(r.state,e.from,e.to);if(t)return r.dispatch({effects:xv(r.state,[Uu.of(t),bv(r,t)])}),!0}return!1},p5=r=>{if(!r.state.field(ks,!1))return!1;let e=[];for(let t of gv(r)){let i=Du(r.state,t.from,t.to);i&&e.push(Af.of(i),bv(r,i,!1))}return e.length&&r.dispatch({effects:e}),e.length>0};function bv(r,e,t=!0){let i=r.state.doc.lineAt(e.from).number,n=r.state.doc.lineAt(e.to).number;return le.announce.of(`${r.state.phrase(t?"Folded lines":"Unfolded lines")} ${i} ${r.state.phrase("to")} ${n}.`)}var m5=r=>{let{state:e}=r,t=[];for(let i=0;i<e.doc.length;){let n=r.lineBlockAt(i),o=Ru(e,n.from,n.to);o&&t.push(Uu.of(o)),i=(o?r.lineBlockAt(o.to):n).to+1}return t.length&&r.dispatch({effects:xv(r.state,t)}),!!t.length},g5=r=>{let e=r.state.field(ks,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,r.state.doc.length,(i,n)=>{t.push(Af.of({from:i,to:n}))}),r.dispatch({effects:t}),!0},yv=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:d5},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:p5},{key:"Ctrl-Alt-[",run:m5},{key:"Ctrl-Alt-]",run:g5}],x5={placeholderDOM:null,placeholderText:"\u2026"},vv=oe.define({combine(r){return Er(r,x5)}});function wv(r){let e=[ks,y5];return r&&e.push(vv.of(r)),e}var lv=he.replace({widget:new class extends $r{toDOM(r){let{state:e}=r,t=e.facet(vv),i=o=>{let s=r.lineBlockAt(r.posAtDOM(o.target)),a=Du(r.state,s.from,s.to);a&&r.dispatch({effects:Af.of(a)}),o.preventDefault()};if(t.placeholderDOM)return t.placeholderDOM(r,i);let n=document.createElement("span");return n.textContent=t.placeholderText,n.setAttribute("aria-label",e.phrase("folded code")),n.title=e.phrase("unfold"),n.className="cm-foldPlaceholder",n.onclick=i,n}}}),b5={openText:"\u2304",closedText:"\u203A",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1},xf=class extends Zr{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}};function Av(r={}){let e=Object.assign(Object.assign({},b5),r),t=new xf(e,!0),i=new xf(e,!1),n=Qe.fromClass(class{constructor(s){this.from=s.viewport.from,this.markers=this.buildMarkers(s)}update(s){(s.docChanged||s.viewportChanged||s.startState.facet(Ao)!=s.state.facet(Ao)||s.startState.field(ks,!1)!=s.state.field(ks,!1)||nr(s.startState)!=nr(s.state)||e.foldingChanged(s))&&(this.markers=this.buildMarkers(s.view))}buildMarkers(s){let a=new Yr;for(let l of s.viewportLineBlocks){let f=Du(s.state,l.from,l.to)?i:Ru(s.state,l.from,l.to)?t:null;f&&a.add(l.from,l.from,f)}return a.finish()}}),{domEventHandlers:o}=e;return[n,qp({class:"cm-foldGutter",markers(s){var a;return((a=s.plugin(n))===null||a===void 0?void 0:a.markers)||Pe.empty},initialSpacer(){return new xf(e,!1)},domEventHandlers:Object.assign(Object.assign({},o),{click:(s,a,l)=>{if(o.click&&o.click(s,a,l))return!0;let f=Du(s.state,a.from,a.to);if(f)return s.dispatch({effects:Af.of(f)}),!0;let c=Ru(s.state,a.from,a.to);return c?(s.dispatch({effects:Uu.of(c)}),!0):!1}})}),wv()]}var y5=le.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}}),ka=class{constructor(e,t){this.specs=e;let i;function n(a){let l=di.newName();return(i||(i=Object.create(null)))["."+l]=a,l}let o=typeof t.all=="string"?t.all:t.all?n(t.all):void 0,s=t.scope;this.scope=s instanceof ei?a=>a.prop(bf)==s.data:s?a=>a==s:void 0,this.style=Jp(e.map(a=>({tag:a.tag,class:a.class||n(Object.assign({},a,{tag:null}))})),{all:o}).style,this.module=i?new di(i):null,this.themeType=t.themeType}static define(e,t){return new ka(e,t||{})}},tm=oe.define(),Ev=oe.define({combine(r){return r.length?[r[0]]:null}});function $p(r){let e=r.facet(tm);return e.length?e:r.facet(Ev)}function kv(r,e){let t=[v5],i;return r instanceof ka&&(r.module&&t.push(le.styleModule.of(r.module)),i=r.themeType),e?.fallback?t.push(Ev.of(r)):i?t.push(tm.computeN([le.darkTheme],n=>n.facet(le.darkTheme)==(i=="dark")?[r]:[])):t.push(tm.of(r)),t}var rm=class{constructor(e){this.markCache=Object.create(null),this.tree=nr(e.state),this.decorations=this.buildDeco(e,$p(e.state))}update(e){let t=nr(e.state),i=$p(e.state),n=i!=$p(e.startState);t.length<e.view.viewport.to&&!n&&t.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(t!=this.tree||e.viewportChanged||n)&&(this.tree=t,this.decorations=this.buildDeco(e.view,i))}buildDeco(e,t){if(!t||!this.tree.length)return he.none;let i=new Yr;for(let{from:n,to:o}of e.visibleRanges)ov(this.tree,t,(s,a,l)=>{i.add(s,a,this.markCache[l]||(this.markCache[l]=he.mark({class:l})))},n,o);return i.finish()}},v5=Zi.high(Qe.fromClass(rm,{decorations:r=>r.decorations})),Sv=ka.define([{tag:ie.meta,color:"#7a757a"},{tag:ie.link,textDecoration:"underline"},{tag:ie.heading,textDecoration:"underline",fontWeight:"bold"},{tag:ie.emphasis,fontStyle:"italic"},{tag:ie.strong,fontWeight:"bold"},{tag:ie.strikethrough,textDecoration:"line-through"},{tag:ie.keyword,color:"#708"},{tag:[ie.atom,ie.bool,ie.url,ie.contentSeparator,ie.labelName],color:"#219"},{tag:[ie.literal,ie.inserted],color:"#164"},{tag:[ie.string,ie.deleted],color:"#a11"},{tag:[ie.regexp,ie.escape,ie.special(ie.string)],color:"#e40"},{tag:ie.definition(ie.variableName),color:"#00f"},{tag:ie.local(ie.variableName),color:"#30a"},{tag:[ie.typeName,ie.namespace],color:"#085"},{tag:ie.className,color:"#167"},{tag:[ie.special(ie.variableName),ie.macroName],color:"#256"},{tag:ie.definition(ie.propertyName),color:"#00c"},{tag:ie.comment,color:"#940"},{tag:ie.invalid,color:"#f00"}]),w5=le.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),_v=1e4,Cv="()[]{}",Tv=oe.define({combine(r){return Er(r,{afterCursor:!0,brackets:Cv,maxScanDistance:_v,renderMatch:k5})}}),A5=he.mark({class:"cm-matchingBracket"}),E5=he.mark({class:"cm-nonmatchingBracket"});function k5(r){let e=[],t=r.matched?A5:E5;return e.push(t.range(r.start.from,r.start.to)),r.end&&e.push(t.range(r.end.from,r.end.to)),e}var S5=Mt.define({create(){return he.none},update(r,e){if(!e.docChanged&&!e.selection)return r;let t=[],i=e.state.facet(Tv);for(let n of e.state.selection.ranges){if(!n.empty)continue;let o=Li(e.state,n.head,-1,i)||n.head>0&&Li(e.state,n.head-1,1,i)||i.afterCursor&&(Li(e.state,n.head,1,i)||n.head<e.state.doc.length&&Li(e.state,n.head+1,-1,i));o&&(t=t.concat(i.renderMatch(o,e.state)))}return he.set(t,!0)},provide:r=>le.decorations.from(r)}),_5=[S5,w5];function Mv(r={}){return[Tv.of(r),_5]}function im(r,e,t){let i=r.prop(e<0?Ee.openedBy:Ee.closedBy);if(i)return i;if(r.name.length==1){let n=t.indexOf(r.name);if(n>-1&&n%2==(e<0?1:0))return[t[n+e]]}return null}function Li(r,e,t,i={}){let n=i.maxScanDistance||_v,o=i.brackets||Cv,s=nr(r),a=s.resolveInner(e,t);for(let l=a;l;l=l.parent){let f=im(l.type,t,o);if(f&&l.from<l.to)return C5(r,e,t,l,f,o)}return T5(r,e,t,s,a.type,n,o)}function C5(r,e,t,i,n,o){let s=i.parent,a={from:i.from,to:i.to},l=0,f=s?.cursor();if(f&&(t<0?f.childBefore(i.from):f.childAfter(i.to)))do if(t<0?f.to<=i.from:f.from>=i.to){if(l==0&&n.indexOf(f.type.name)>-1&&f.from<f.to)return{start:a,end:{from:f.from,to:f.to},matched:!0};if(im(f.type,t,o))l++;else if(im(f.type,-t,o)){if(l==0)return{start:a,end:f.from==f.to?void 0:{from:f.from,to:f.to},matched:!1};l--}}while(t<0?f.prevSibling():f.nextSibling());return{start:a,matched:!1}}function T5(r,e,t,i,n,o,s){let a=t<0?r.sliceDoc(e-1,e):r.sliceDoc(e,e+1),l=s.indexOf(a);if(l<0||l%2==0!=t>0)return null;let f={from:t<0?e-1:e,to:t>0?e+1:e},c=r.doc.iterRange(e,t>0?r.doc.length:0),u=0;for(let d=0;!c.next().done&&d<=o;){let p=c.value;t<0&&(d+=p.length);let g=e+d*t;for(let b=t>0?0:p.length-1,k=t>0?p.length:-1;b!=k;b+=t){let _=s.indexOf(p[b]);if(!(_<0||i.resolveInner(g+b,1).type!=n))if(_%2==0==t>0)u++;else{if(u==1)return{start:f,end:{from:g+b,to:g+b+1},matched:_>>1==l>>1};u--}}t>0&&(d+=p.length)}return c.done?{start:f,matched:!1}:null}function fv(r,e,t,i=0,n=0){e==null&&(e=r.search(/[^\s\u00a0]/),e==-1&&(e=r.length));let o=n;for(let s=i;s<e;s++)r.charCodeAt(s)==9?o+=t-o%t:o++;return o}var Bu=class{constructor(e,t,i){this.string=e,this.tabSize=t,this.indentUnit=i,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let t=this.string.charAt(this.pos),i;if(typeof e=="string"?i=t==e:i=t&&(e instanceof RegExp?e.test(t):e(t)),i)return++this.pos,t}eatWhile(e){let t=this.pos;for(;this.eat(e););return this.pos>t}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=fv(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){return fv(this.string,null,this.tabSize)}match(e,t,i){if(typeof e=="string"){let n=s=>i?s.toLowerCase():s,o=this.string.substr(this.pos,e.length);return n(o)==n(e)?(t!==!1&&(this.pos+=e.length),!0):null}else{let n=this.string.slice(this.pos).match(e);return n&&n.index>0?null:(n&&t!==!1&&(this.pos+=n[0].length),n)}}current(){return this.string.slice(this.start,this.pos)}};function M5(r){return{name:r.name||"",token:r.token,blankLine:r.blankLine||(()=>{}),startState:r.startState||(()=>!0),copyState:r.copyState||O5,indent:r.indent||(()=>null),languageData:r.languageData||{},tokenTable:r.tokenTable||sm}}function O5(r){if(typeof r!="object")return r;let e={};for(let t in r){let i=r[t];e[t]=i instanceof Array?i.slice():i}return e}var Sa=class extends ei{constructor(e){let t=X8(e.languageData),i=M5(e),n,o=new class extends pf{createParse(s,a,l){return new nm(n,s,a,l)}};super(t,o,[hv.of((s,a)=>this.getIndent(s,a))],e.name),this.topNode=R5(t),n=this,this.streamParser=i,this.stateAfter=new Ee({perNode:!0}),this.tokenTable=e.tokenTable?new Fu(i.tokenTable):I5}static define(e){return new Sa(e)}getIndent(e,t){let i=nr(e.state),n=i.resolve(t);for(;n&&n.type!=this.topNode;)n=n.parent;if(!n)return null;let o=om(this,i,0,n.from,t),s,a;if(o?(a=o.state,s=o.pos+1):(a=this.streamParser.startState(e.unit),s=0),t-s>1e4)return null;for(;s<t;){let f=e.state.doc.lineAt(s),c=Math.min(t,f.to);if(f.length){let u=new Bu(f.text,e.state.tabSize,e.unit);for(;u.pos<c-f.from;)Nv(this.streamParser.token,u,a)}else this.streamParser.blankLine(a,e.unit);if(c==t)break;s=f.to+1}let{text:l}=e.lineAt(t);return this.streamParser.indent(a,/^\s*(.*)/.exec(l)[1],e)}get allowsNesting(){return!1}};function om(r,e,t,i,n){let o=t>=i&&t+e.length<=n&&e.prop(r.stateAfter);if(o)return{state:r.streamParser.copyState(o),pos:t+e.length};for(let s=e.children.length-1;s>=0;s--){let a=e.children[s],l=t+e.positions[s],f=a instanceof Je&&l<n&&om(r,a,l,i,n);if(f)return f}return null}function Ov(r,e,t,i,n){if(n&&t<=0&&i>=e.length)return e;!n&&e.type==r.topNode&&(n=!0);for(let o=e.children.length-1;o>=0;o--){let s=e.positions[o],a=e.children[o],l;if(s<i&&a instanceof Je){if(!(l=Ov(r,a,t-s,i-s,n)))break;return n?new Je(e.type,e.children.slice(0,o).concat(l),e.positions.slice(0,o+1),s+l.length):l}}return null}function N5(r,e,t,i){for(let n of e){let o=n.from+(n.openStart?25:0),s=n.to-(n.openEnd?25:0),a=o<=t&&s>t&&om(r,n.tree,0-n.offset,t,s),l;if(a&&(l=Ov(r,n.tree,t+n.offset,a.pos+n.offset,!1)))return{state:a.state,tree:l}}return{state:r.streamParser.startState(i?Eo(i):4),tree:Je.empty}}var nm=class{constructor(e,t,i,n){this.lang=e,this.input=t,this.fragments=i,this.ranges=n,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=n[n.length-1].to;let o=vo.get(),s=n[0].from,{state:a,tree:l}=N5(e,i,s,o?.state);this.state=a,this.parsedPos=this.chunkStart=s+l.length;for(let f=0;f<l.children.length;f++)this.chunks.push(l.children[f]),this.chunkPos.push(l.positions[f]);o&&this.parsedPos<o.viewport.from-1e5&&(this.state=this.lang.streamParser.startState(Eo(o.state)),o.skipUntilInView(this.parsedPos,o.viewport.from),this.parsedPos=o.viewport.from),this.moveRangeIndex()}advance(){let e=vo.get(),t=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),i=Math.min(t,this.chunkStart+2048);for(e&&(i=Math.min(i,e.viewport.to));this.parsedPos<i;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=t?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,t),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let t=this.input.chunk(e);if(this.input.lineChunks)t==`
`&&(t="");else{let i=t.indexOf(`
`);i>-1&&(t=t.slice(0,i))}return e+t.length<=this.to?t:t.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,t=this.lineAfter(e),i=e+t.length;for(let n=this.rangeIndex;;){let o=this.ranges[n].to;if(o>=i||(t=t.slice(0,o-(i-t.length)),n++,n==this.ranges.length))break;let s=this.ranges[n].from,a=this.lineAfter(s);t+=a,i=s+a.length}return{line:t,end:i}}skipGapsTo(e,t,i){for(;;){let n=this.ranges[this.rangeIndex].to,o=e+t;if(i>0?n>o:n>=o)break;let s=this.ranges[++this.rangeIndex].from;t+=s-n}return t}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,t,i,n,o){if(this.ranges.length>1){o=this.skipGapsTo(t,o,1),t+=o;let s=this.chunk.length;o=this.skipGapsTo(i,o,-1),i+=o,n+=this.chunk.length-s}return this.chunk.push(e,t,i,n),o}parseLine(e){let{line:t,end:i}=this.nextLine(),n=0,{streamParser:o}=this.lang,s=new Bu(t,e?e.state.tabSize:4,e?Eo(e.state):2);if(s.eol())o.blankLine(this.state,s.indentUnit);else for(;!s.eol();){let a=Nv(o.token,s,this.state);if(a&&(n=this.emitToken(this.lang.tokenTable.resolve(a),this.parsedPos+s.start,this.parsedPos+s.pos,4,n)),s.start>1e4)break}this.parsedPos=i,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=Je.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:P5,topID:0,maxBufferLength:2048,reused:this.chunkReused});e=new Je(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new Je(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}};function Nv(r,e,t){e.start=e.pos;for(let i=0;i<10;i++){let n=r(e,t);if(e.pos>e.start)return n}throw new Error("Stream parser failed to advance stream.")}var sm=Object.create(null),vf=[gr.none],P5=new ya(vf),cv=[],Pv=Object.create(null);for(let[r,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])Pv[r]=Iv(sm,e);var Fu=class{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),Pv)}resolve(e){return e?this.table[e]||(this.table[e]=Iv(this.extra,e)):0}},I5=new Fu(sm);function Zp(r,e){cv.indexOf(r)>-1||(cv.push(r),console.warn(e))}function Iv(r,e){let t=null;for(let o of e.split(".")){let s=r[o]||ie[o];s?typeof s=="function"?t?t=s(t):Zp(o,`Modifier ${o} used at start of tag`):t?Zp(o,`Tag ${o} used as modifier`):t=s:Zp(o,`Unknown highlighting tag ${o}`)}if(!t)return 0;let i=e.replace(/ /g,"_"),n=gr.define({id:vf.length,name:i,props:[iv({[i]:t})]});return vf.push(n),n.id}function R5(r){let e=gr.define({id:vf.length,name:"Document",props:[bf.add(()=>r)]});return vf.push(e),e}var D5=r=>{let e=dm(r.state);return e.line?B5(r):e.block?L5(r):!1};function hm(r,e){return({state:t,dispatch:i})=>{if(t.readOnly)return!1;let n=r(e,t);return n?(i(t.update(n)),!0):!1}}var B5=hm(q5,0);var F5=hm(qv,0);var L5=hm((r,e)=>qv(r,e,V5(e)),0);function dm(r,e=r.selection.main.head){let t=r.languageDataAt("commentTokens",e);return t.length?t[0]:{}}var Ef=50;function U5(r,{open:e,close:t},i,n){let o=r.sliceDoc(i-Ef,i),s=r.sliceDoc(n,n+Ef),a=/\s*$/.exec(o)[0].length,l=/^\s*/.exec(s)[0].length,f=o.length-a;if(o.slice(f-e.length,f)==e&&s.slice(l,l+t.length)==t)return{open:{pos:i-a,margin:a&&1},close:{pos:n+l,margin:l&&1}};let c,u;n-i<=2*Ef?c=u=r.sliceDoc(i,n):(c=r.sliceDoc(i,i+Ef),u=r.sliceDoc(n-Ef,n));let d=/^\s*/.exec(c)[0].length,p=/\s*$/.exec(u)[0].length,g=u.length-p-t.length;return c.slice(d,d+e.length)==e&&u.slice(g,g+t.length)==t?{open:{pos:i+d+e.length,margin:/\s/.test(c.charAt(d+e.length))?1:0},close:{pos:n-p-t.length,margin:/\s/.test(u.charAt(g-1))?1:0}}:null}function V5(r){let e=[];for(let t of r.selection.ranges){let i=r.doc.lineAt(t.from),n=t.to<=i.to?i:r.doc.lineAt(t.to),o=e.length-1;o>=0&&e[o].to>i.from?e[o].to=n.to:e.push({from:i.from,to:n.to})}return e}function qv(r,e,t=e.selection.ranges){let i=t.map(o=>dm(e,o.from).block);if(!i.every(o=>o))return null;let n=t.map((o,s)=>U5(e,i[s],o.from,o.to));if(r!=2&&!n.every(o=>o))return{changes:e.changes(t.map((o,s)=>n[s]?[]:[{from:o.from,insert:i[s].open+" "},{from:o.to,insert:" "+i[s].close}]))};if(r!=1&&n.some(o=>o)){let o=[];for(let s=0,a;s<n.length;s++)if(a=n[s]){let l=i[s],{open:f,close:c}=a;o.push({from:f.pos-l.open.length,to:f.pos+f.margin},{from:c.pos-c.margin,to:c.pos+l.close.length})}return{changes:o}}return null}function q5(r,e,t=e.selection.ranges){let i=[],n=-1;for(let{from:o,to:s}of t){let a=i.length,l=1e9;for(let f=o;f<=s;){let c=e.doc.lineAt(f);if(c.from>n&&(o==s||s>c.from)){n=c.from;let u=dm(e,f).line;if(!u)continue;let d=/^\s*/.exec(c.text)[0].length,p=d==c.length,g=c.text.slice(d,d+u.length)==u?d:-1;d<c.text.length&&d<l&&(l=d),i.push({line:c,comment:g,token:u,indent:d,empty:p,single:!1})}f=c.to+1}if(l<1e9)for(let f=a;f<i.length;f++)i[f].indent<i[f].line.text.length&&(i[f].indent=l);i.length==a+1&&(i[a].single=!0)}if(r!=2&&i.some(o=>o.comment<0&&(!o.empty||o.single))){let o=[];for(let{line:a,token:l,indent:f,empty:c,single:u}of i)(u||!c)&&o.push({from:a.from+f,insert:l+" "});let s=e.changes(o);return{changes:s,selection:e.selection.map(s,1)}}else if(r!=1&&i.some(o=>o.comment>=0)){let o=[];for(let{line:s,comment:a,token:l}of i)if(a>=0){let f=s.from+a,c=f+l.length;s.text[c-s.from]==" "&&c++,o.push({from:f,to:c})}return{changes:o}}return null}var lm=Di.define(),j5=Di.define(),z5=oe.define(),jv=oe.define({combine(r){return Er(r,{minDepth:100,newGroupDelay:500},{minDepth:Math.max,newGroupDelay:Math.min})}});function H5(r){let e=0;return r.iterChangedRanges((t,i)=>e=i),e}var zv=Mt.define({create(){return bi.empty},update(r,e){let t=e.state.facet(jv),i=e.annotation(lm);if(i){let l=e.docChanged?K.single(H5(e.changes)):void 0,f=Sr.fromTransaction(e,l),c=i.side,u=c==0?r.undone:r.done;return f?u=qu(u,u.length,t.minDepth,f):u=Kv(u,e.startState.selection),new bi(c==0?i.rest:u,c==0?u:i.rest)}let n=e.annotation(j5);if((n=="full"||n=="before")&&(r=r.isolate()),e.annotation(Lt.addToHistory)===!1)return e.changes.empty?r:r.addMapping(e.changes.desc);let o=Sr.fromTransaction(e),s=e.annotation(Lt.time),a=e.annotation(Lt.userEvent);return o?r=r.addChanges(o,s,a,t.newGroupDelay,t.minDepth):e.selection&&(r=r.addSelection(e.startState.selection,s,a,t.newGroupDelay)),(n=="full"||n=="after")&&(r=r.isolate()),r},toJSON(r){return{done:r.done.map(e=>e.toJSON()),undone:r.undone.map(e=>e.toJSON())}},fromJSON(r){return new bi(r.done.map(Sr.fromJSON),r.undone.map(Sr.fromJSON))}});function Hv(r={}){return[zv,jv.of(r),le.domEventHandlers({beforeinput(e,t){let i=e.inputType=="historyUndo"?Wv:e.inputType=="historyRedo"?fm:null;return i?(e.preventDefault(),i(t)):!1}})]}function ju(r,e){return function({state:t,dispatch:i}){if(!e&&t.readOnly)return!1;let n=t.field(zv,!1);if(!n)return!1;let o=n.pop(r,t,e);return o?(i(o),!0):!1}}var Wv=ju(0,!1),fm=ju(1,!1),W5=ju(0,!0),G5=ju(1,!0);var Sr=class{constructor(e,t,i,n,o){this.changes=e,this.effects=t,this.mapped=i,this.startSelection=n,this.selectionsAfter=o}setSelAfter(e){return new Sr(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(n=>n.toJSON())}}static fromJSON(e){return new Sr(e.changes&&Ft.fromJSON(e.changes),[],e.mapped&&Jr.fromJSON(e.mapped),e.startSelection&&K.fromJSON(e.startSelection),e.selectionsAfter.map(K.fromJSON))}static fromTransaction(e,t){let i=xi;for(let n of e.startState.facet(z5)){let o=n(e);o.length&&(i=i.concat(o))}return!i.length&&e.changes.empty?null:new Sr(e.changes.invert(e.startState.doc),i,void 0,t||e.startState.selection,xi)}static selection(e){return new Sr(void 0,xi,void 0,void 0,e)}};function qu(r,e,t,i){let n=e+1>t+20?e-t-1:0,o=r.slice(n,e);return o.push(i),o}function K5(r,e){let t=[],i=!1;return r.iterChangedRanges((n,o)=>t.push(n,o)),e.iterChangedRanges((n,o,s,a)=>{for(let l=0;l<t.length;){let f=t[l++],c=t[l++];a>=f&&s<=c&&(i=!0)}}),i}function Q5(r,e){return r.ranges.length==e.ranges.length&&r.ranges.filter((t,i)=>t.empty!=e.ranges[i].empty).length===0}function Gv(r,e){return r.length?e.length?r.concat(e):r:e}var xi=[],J5=200;function Kv(r,e){if(r.length){let t=r[r.length-1],i=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-J5));return i.length&&i[i.length-1].eq(e)?r:(i.push(e),qu(r,r.length-1,1e9,t.setSelAfter(i)))}else return[Sr.selection([e])]}function Y5(r){let e=r[r.length-1],t=r.slice();return t[r.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function am(r,e){if(!r.length)return r;let t=r.length,i=xi;for(;t;){let n=X5(r[t-1],e,i);if(n.changes&&!n.changes.empty||n.effects.length){let o=r.slice(0,t);return o[t-1]=n,o}else e=n.mapped,t--,i=n.selectionsAfter}return i.length?[Sr.selection(i)]:xi}function X5(r,e,t){let i=Gv(r.selectionsAfter.length?r.selectionsAfter.map(a=>a.map(e)):xi,t);if(!r.changes)return Sr.selection(i);let n=r.changes.map(e),o=e.mapDesc(r.changes,!0),s=r.mapped?r.mapped.composeDesc(o):o;return new Sr(n,me.mapEffects(r.effects,e),s,r.startSelection.map(o),i)}var $5=/^(input\.type|delete)($|\.)/,bi=class{constructor(e,t,i=0,n=void 0){this.done=e,this.undone=t,this.prevTime=i,this.prevUserEvent=n}isolate(){return this.prevTime?new bi(this.done,this.undone):this}addChanges(e,t,i,n,o){let s=this.done,a=s[s.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!i||$5.test(i))&&(!a.selectionsAfter.length&&t-this.prevTime<n&&K5(a.changes,e.changes)||i=="input.type.compose")?s=qu(s,s.length-1,o,new Sr(e.changes.compose(a.changes),Gv(e.effects,a.effects),a.mapped,a.startSelection,xi)):s=qu(s,s.length,o,e),new bi(s,xi,t,i)}addSelection(e,t,i,n){let o=this.done.length?this.done[this.done.length-1].selectionsAfter:xi;return o.length>0&&t-this.prevTime<n&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&Q5(o[o.length-1],e)?this:new bi(Kv(this.done,e),this.undone,t,i)}addMapping(e){return new bi(am(this.done,e),am(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,i){let n=e==0?this.done:this.undone;if(n.length==0)return null;let o=n[n.length-1];if(i&&o.selectionsAfter.length)return t.update({selection:o.selectionsAfter[o.selectionsAfter.length-1],annotations:lm.of({side:e,rest:Y5(n)}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(o.changes){let s=n.length==1?xi:n.slice(0,n.length-1);return o.mapped&&(s=am(s,o.mapped)),t.update({changes:o.changes,selection:o.startSelection,effects:o.effects,annotations:lm.of({side:e,rest:s}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}};bi.empty=new bi(xi,xi);var Qv=[{key:"Mod-z",run:Wv,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:fm,preventDefault:!0},{linux:"Ctrl-Shift-z",run:fm,preventDefault:!0},{key:"Mod-u",run:W5,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:G5,preventDefault:!0}];function Ca(r,e){return K.create(r.ranges.map(e),r.mainIndex)}function cn(r,e){return r.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Ui({state:r,dispatch:e},t){let i=Ca(r.selection,t);return i.eq(r.selection)?!1:(e(cn(r,i)),!0)}function zu(r,e){return K.cursor(e?r.to:r.from)}function Jv(r,e){return Ui(r,t=>t.empty?r.moveByChar(t,e):zu(t,e))}function _r(r){return r.textDirectionAt(r.state.selection.main.head)==Nt.LTR}var Yv=r=>Jv(r,!_r(r)),Xv=r=>Jv(r,_r(r));function $v(r,e){return Ui(r,t=>t.empty?r.moveByGroup(t,e):zu(t,e))}var Z5=r=>$v(r,!_r(r)),e7=r=>$v(r,_r(r));function t7(r,e,t){if(e.type.prop(t))return!0;let i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(r.sliceDoc(e.from,e.to)))||e.firstChild}function Hu(r,e,t){let i=nr(r).resolveInner(e.head),n=t?Ee.closedBy:Ee.openedBy;for(let l=e.head;;){let f=t?i.childAfter(l):i.childBefore(l);if(!f)break;t7(r,f,n)?i=f:l=t?f.to:f.from}let o=i.type.prop(n),s,a;return o&&(s=t?Li(r,i.from,1):Li(r,i.to,-1))&&s.matched?a=t?s.end.to:s.end.from:a=t?i.to:i.from,K.cursor(a,t?-1:1)}var r7=r=>Ui(r,e=>Hu(r.state,e,!_r(r))),i7=r=>Ui(r,e=>Hu(r.state,e,_r(r)));function Zv(r,e){return Ui(r,t=>{if(!t.empty)return zu(t,e);let i=r.moveVertically(t,e);return i.head!=t.head?i:r.moveToLineBoundary(t,e)})}var ew=r=>Zv(r,!1),tw=r=>Zv(r,!0);function rw(r){return Math.max(r.defaultLineHeight,Math.min(r.dom.clientHeight,innerHeight)-5)}function iw(r,e){let{state:t}=r,i=Ca(t.selection,a=>a.empty?r.moveVertically(a,e,rw(r)):zu(a,e));if(i.eq(t.selection))return!1;let n=r.coordsAtPos(t.selection.main.head),o=r.scrollDOM.getBoundingClientRect(),s;return n&&n.top>o.top&&n.bottom<o.bottom&&n.top-o.top<=r.scrollDOM.scrollHeight-r.scrollDOM.scrollTop-r.scrollDOM.clientHeight&&(s=le.scrollIntoView(i.main.head,{y:"start",yMargin:n.top-o.top})),r.dispatch(cn(t,i),{effects:s}),!0}var Rv=r=>iw(r,!1),cm=r=>iw(r,!0);function ko(r,e,t){let i=r.lineBlockAt(e.head),n=r.moveToLineBoundary(e,t);if(n.head==e.head&&n.head!=(t?i.to:i.from)&&(n=r.moveToLineBoundary(e,t,!1)),!t&&n.head==i.from&&i.length){let o=/^\s*/.exec(r.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;o&&e.head!=i.from+o&&(n=K.cursor(i.from+o))}return n}var n7=r=>Ui(r,e=>ko(r,e,!0)),o7=r=>Ui(r,e=>ko(r,e,!1)),s7=r=>Ui(r,e=>ko(r,e,!_r(r))),a7=r=>Ui(r,e=>ko(r,e,_r(r))),l7=r=>Ui(r,e=>K.cursor(r.lineBlockAt(e.head).from,1)),f7=r=>Ui(r,e=>K.cursor(r.lineBlockAt(e.head).to,-1));function c7(r,e,t){let i=!1,n=Ca(r.selection,o=>{let s=Li(r,o.head,-1)||Li(r,o.head,1)||o.head>0&&Li(r,o.head-1,1)||o.head<r.doc.length&&Li(r,o.head+1,-1);if(!s||!s.end)return o;i=!0;let a=s.start.from==o.head?s.end.to:s.end.from;return t?K.range(o.anchor,a):K.cursor(a)});return i?(e(cn(r,n)),!0):!1}var u7=({state:r,dispatch:e})=>c7(r,e,!1);function yi(r,e){let t=Ca(r.state.selection,i=>{let n=e(i);return K.range(i.anchor,n.head,n.goalColumn)});return t.eq(r.state.selection)?!1:(r.dispatch(cn(r.state,t)),!0)}function nw(r,e){return yi(r,t=>r.moveByChar(t,e))}var ow=r=>nw(r,!_r(r)),sw=r=>nw(r,_r(r));function aw(r,e){return yi(r,t=>r.moveByGroup(t,e))}var h7=r=>aw(r,!_r(r)),d7=r=>aw(r,_r(r));var p7=r=>yi(r,e=>Hu(r.state,e,!_r(r))),m7=r=>yi(r,e=>Hu(r.state,e,_r(r)));function lw(r,e){return yi(r,t=>r.moveVertically(t,e))}var fw=r=>lw(r,!1),cw=r=>lw(r,!0);function uw(r,e){return yi(r,t=>r.moveVertically(t,e,rw(r)))}var Dv=r=>uw(r,!1),Bv=r=>uw(r,!0),g7=r=>yi(r,e=>ko(r,e,!0)),x7=r=>yi(r,e=>ko(r,e,!1)),b7=r=>yi(r,e=>ko(r,e,!_r(r))),y7=r=>yi(r,e=>ko(r,e,_r(r))),v7=r=>yi(r,e=>K.cursor(r.lineBlockAt(e.head).from)),w7=r=>yi(r,e=>K.cursor(r.lineBlockAt(e.head).to)),Fv=({state:r,dispatch:e})=>(e(cn(r,{anchor:0})),!0),Lv=({state:r,dispatch:e})=>(e(cn(r,{anchor:r.doc.length})),!0),Uv=({state:r,dispatch:e})=>(e(cn(r,{anchor:r.selection.main.anchor,head:0})),!0),Vv=({state:r,dispatch:e})=>(e(cn(r,{anchor:r.selection.main.anchor,head:r.doc.length})),!0),A7=({state:r,dispatch:e})=>(e(r.update({selection:{anchor:0,head:r.doc.length},userEvent:"select"})),!0),E7=({state:r,dispatch:e})=>{let t=Gu(r).map(({from:i,to:n})=>K.range(i,Math.min(n+1,r.doc.length)));return e(r.update({selection:K.create(t),userEvent:"select"})),!0},k7=({state:r,dispatch:e})=>{let t=Ca(r.selection,i=>{var n;let o=nr(r).resolveInner(i.head,1);for(;!(o.from<i.from&&o.to>=i.to||o.to>i.to&&o.from<=i.from||!(!((n=o.parent)===null||n===void 0)&&n.parent));)o=o.parent;return K.range(o.to,o.from)});return e(cn(r,t)),!0},S7=({state:r,dispatch:e})=>{let t=r.selection,i=null;return t.ranges.length>1?i=K.create([t.main]):t.main.empty||(i=K.create([K.cursor(t.main.head)])),i?(e(cn(r,i)),!0):!1};function Wu(r,e){if(r.state.readOnly)return!1;let t="delete.selection",{state:i}=r,n=i.changeByRange(o=>{let{from:s,to:a}=o;if(s==a){let l=e(s);l<s?(t="delete.backward",l=Vu(r,l,!1)):l>s&&(t="delete.forward",l=Vu(r,l,!0)),s=Math.min(s,l),a=Math.max(a,l)}else s=Vu(r,s,!1),a=Vu(r,a,!0);return s==a?{range:o}:{changes:{from:s,to:a},range:K.cursor(s)}});return n.changes.empty?!1:(r.dispatch(i.update(n,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?le.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function Vu(r,e,t){if(r instanceof le)for(let i of r.state.facet(le.atomicRanges).map(n=>n(r)))i.between(e,e,(n,o)=>{n<e&&o>e&&(e=t?o:n)});return e}var hw=(r,e)=>Wu(r,t=>{let{state:i}=r,n=i.doc.lineAt(t),o,s;if(!e&&t>n.from&&t<n.from+200&&!/[^ \t]/.test(o=n.text.slice(0,t-n.from))){if(o[o.length-1]=="	")return t-1;let a=ho(o,i.tabSize),l=a%Eo(i)||Eo(i);for(let f=0;f<l&&o[o.length-1-f]==" ";f++)t--;s=t}else s=or(n.text,t-n.from,e,e)+n.from,s==t&&n.number!=(e?i.doc.lines:1)&&(s+=e?1:-1);return s}),um=r=>hw(r,!1),dw=r=>hw(r,!0),pw=(r,e)=>Wu(r,t=>{let i=t,{state:n}=r,o=n.doc.lineAt(i),s=n.charCategorizer(i);for(let a=null;;){if(i==(e?o.to:o.from)){i==t&&o.number!=(e?n.doc.lines:1)&&(i+=e?1:-1);break}let l=or(o.text,i-o.from,e)+o.from,f=o.text.slice(Math.min(i,l)-o.from,Math.max(i,l)-o.from),c=s(f);if(a!=null&&c!=a)break;(f!=" "||i!=t)&&(a=c),i=l}return i}),mw=r=>pw(r,!1),_7=r=>pw(r,!0),gw=r=>Wu(r,e=>{let t=r.lineBlockAt(e).to;return e<t?t:Math.min(r.state.doc.length,e+1)}),C7=r=>Wu(r,e=>{let t=r.lineBlockAt(e).from;return e>t?t:Math.max(0,e-1)});var T7=({state:r,dispatch:e})=>{if(r.readOnly)return!1;let t=r.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:Ce.of(["",""])},range:K.cursor(i.from)}));return e(r.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},M7=({state:r,dispatch:e})=>{if(r.readOnly)return!1;let t=r.changeByRange(i=>{if(!i.empty||i.from==0||i.from==r.doc.length)return{range:i};let n=i.from,o=r.doc.lineAt(n),s=n==o.from?n-1:or(o.text,n-o.from,!1)+o.from,a=n==o.to?n+1:or(o.text,n-o.from,!0)+o.from;return{changes:{from:s,to:a,insert:r.doc.slice(n,a).append(r.doc.slice(s,n))},range:K.cursor(a)}});return t.changes.empty?!1:(e(r.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Gu(r){let e=[],t=-1;for(let i of r.selection.ranges){let n=r.doc.lineAt(i.from),o=r.doc.lineAt(i.to);if(!i.empty&&i.to==o.from&&(o=r.doc.lineAt(i.to-1)),t>=n.number){let s=e[e.length-1];s.to=o.to,s.ranges.push(i)}else e.push({from:n.from,to:o.to,ranges:[i]});t=o.number+1}return e}function xw(r,e,t){if(r.readOnly)return!1;let i=[],n=[];for(let o of Gu(r)){if(t?o.to==r.doc.length:o.from==0)continue;let s=r.doc.lineAt(t?o.to+1:o.from-1),a=s.length+1;if(t){i.push({from:o.to,to:s.to},{from:o.from,insert:s.text+r.lineBreak});for(let l of o.ranges)n.push(K.range(Math.min(r.doc.length,l.anchor+a),Math.min(r.doc.length,l.head+a)))}else{i.push({from:s.from,to:o.from},{from:o.to,insert:r.lineBreak+s.text});for(let l of o.ranges)n.push(K.range(l.anchor-a,l.head-a))}}return i.length?(e(r.update({changes:i,scrollIntoView:!0,selection:K.create(n,r.selection.mainIndex),userEvent:"move.line"})),!0):!1}var O7=({state:r,dispatch:e})=>xw(r,e,!1),N7=({state:r,dispatch:e})=>xw(r,e,!0);function bw(r,e,t){if(r.readOnly)return!1;let i=[];for(let n of Gu(r))t?i.push({from:n.from,insert:r.doc.slice(n.from,n.to)+r.lineBreak}):i.push({from:n.to,insert:r.lineBreak+r.doc.slice(n.from,n.to)});return e(r.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}var P7=({state:r,dispatch:e})=>bw(r,e,!1),I7=({state:r,dispatch:e})=>bw(r,e,!0),R7=r=>{if(r.state.readOnly)return!1;let{state:e}=r,t=e.changes(Gu(e).map(({from:n,to:o})=>(n>0?n--:o<e.doc.length&&o++,{from:n,to:o}))),i=Ca(e.selection,n=>r.moveVertically(n,!0)).map(t);return r.dispatch({changes:t,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function D7(r,e){if(/\(\)|\[\]|\{\}/.test(r.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=nr(r).resolveInner(e),i=t.childBefore(e),n=t.childAfter(e),o;return i&&n&&i.to<=e&&n.from>=e&&(o=i.type.prop(Ee.closedBy))&&o.indexOf(n.name)>-1&&r.doc.lineAt(i.to).from==r.doc.lineAt(n.from).from?{from:i.to,to:n.from}:null}var B7=yw(!1),F7=yw(!0);function yw(r){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=e.changeByRange(n=>{let{from:o,to:s}=n,a=e.doc.lineAt(o),l=!r&&o==s&&D7(e,o);r&&(o=s=(s<=a.to?a:e.doc.lineAt(s)).to);let f=new Es(e,{simulateBreak:o,simulateDoubleBreak:!!l}),c=Lu(f,o);for(c==null&&(c=/^\s*/.exec(e.doc.lineAt(o).text)[0].length);s<a.to&&/\s/.test(a.text[s-a.from]);)s++;l?{from:o,to:s}=l:o>a.from&&o<a.from+100&&!/\S/.test(a.text.slice(0,o))&&(o=a.from);let u=["",_a(e,c)];return l&&u.push(_a(e,f.lineIndent(a.from,-1))),{changes:{from:o,to:s,insert:Ce.of(u)},range:K.cursor(o+1+u[1].length)}});return t(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function pm(r,e){let t=-1;return r.changeByRange(i=>{let n=[];for(let s=i.from;s<=i.to;){let a=r.doc.lineAt(s);a.number>t&&(i.empty||i.to>a.from)&&(e(a,n,i),t=a.number),s=a.to+1}let o=r.changes(n);return{changes:n,range:K.range(o.mapPos(i.anchor,1),o.mapPos(i.head,1))}})}var L7=({state:r,dispatch:e})=>{if(r.readOnly)return!1;let t=Object.create(null),i=new Es(r,{overrideIndentation:o=>{let s=t[o];return s??-1}}),n=pm(r,(o,s,a)=>{let l=Lu(i,o.from);if(l==null)return;/\S/.test(o.text)||(l=0);let f=/^\s*/.exec(o.text)[0],c=_a(r,l);(f!=c||a.from<o.from+f.length)&&(t[o.from]=l,s.push({from:o.from,to:o.from+f.length,insert:c}))});return n.changes.empty||e(r.update(n,{userEvent:"indent"})),!0},U7=({state:r,dispatch:e})=>r.readOnly?!1:(e(r.update(pm(r,(t,i)=>{i.push({from:t.from,insert:r.facet(wf)})}),{userEvent:"input.indent"})),!0),V7=({state:r,dispatch:e})=>r.readOnly?!1:(e(r.update(pm(r,(t,i)=>{let n=/^\s*/.exec(t.text)[0];if(!n)return;let o=ho(n,r.tabSize),s=0,a=_a(r,Math.max(0,o-Eo(r)));for(;s<n.length&&s<a.length&&n.charCodeAt(s)==a.charCodeAt(s);)s++;i.push({from:t.from+s,to:t.from+n.length,insert:a.slice(s)})}),{userEvent:"delete.dedent"})),!0);var q7=[{key:"Ctrl-b",run:Yv,shift:ow,preventDefault:!0},{key:"Ctrl-f",run:Xv,shift:sw},{key:"Ctrl-p",run:ew,shift:fw},{key:"Ctrl-n",run:tw,shift:cw},{key:"Ctrl-a",run:l7,shift:v7},{key:"Ctrl-e",run:f7,shift:w7},{key:"Ctrl-d",run:dw},{key:"Ctrl-h",run:um},{key:"Ctrl-k",run:gw},{key:"Ctrl-Alt-h",run:mw},{key:"Ctrl-o",run:T7},{key:"Ctrl-t",run:M7},{key:"Ctrl-v",run:cm}],j7=[{key:"ArrowLeft",run:Yv,shift:ow,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:Z5,shift:h7,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:s7,shift:b7,preventDefault:!0},{key:"ArrowRight",run:Xv,shift:sw,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:e7,shift:d7,preventDefault:!0},{mac:"Cmd-ArrowRight",run:a7,shift:y7,preventDefault:!0},{key:"ArrowUp",run:ew,shift:fw,preventDefault:!0},{mac:"Cmd-ArrowUp",run:Fv,shift:Uv},{mac:"Ctrl-ArrowUp",run:Rv,shift:Dv},{key:"ArrowDown",run:tw,shift:cw,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Lv,shift:Vv},{mac:"Ctrl-ArrowDown",run:cm,shift:Bv},{key:"PageUp",run:Rv,shift:Dv},{key:"PageDown",run:cm,shift:Bv},{key:"Home",run:o7,shift:x7,preventDefault:!0},{key:"Mod-Home",run:Fv,shift:Uv},{key:"End",run:n7,shift:g7,preventDefault:!0},{key:"Mod-End",run:Lv,shift:Vv},{key:"Enter",run:B7},{key:"Mod-a",run:A7},{key:"Backspace",run:um,shift:um},{key:"Delete",run:dw},{key:"Mod-Backspace",mac:"Alt-Backspace",run:mw},{key:"Mod-Delete",mac:"Alt-Delete",run:_7},{mac:"Mod-Backspace",run:C7},{mac:"Mod-Delete",run:gw}].concat(q7.map(r=>({mac:r.key,run:r.run,shift:r.shift}))),vw=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:r7,shift:p7},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:i7,shift:m7},{key:"Alt-ArrowUp",run:O7},{key:"Shift-Alt-ArrowUp",run:P7},{key:"Alt-ArrowDown",run:N7},{key:"Shift-Alt-ArrowDown",run:I7},{key:"Escape",run:S7},{key:"Mod-Enter",run:F7},{key:"Alt-l",mac:"Ctrl-l",run:E7},{key:"Mod-i",run:k7,preventDefault:!0},{key:"Mod-[",run:V7},{key:"Mod-]",run:U7},{key:"Mod-Alt-\\",run:L7},{key:"Shift-Mod-k",run:R7},{key:"Shift-Mod-\\",run:u7},{key:"Mod-/",run:D5},{key:"Alt-A",run:F5}].concat(j7);function Ve(){var r=arguments[0];typeof r=="string"&&(r=document.createElement(r));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var n=t[i];typeof n=="string"?r.setAttribute(i,n):n!=null&&(r[i]=n)}e++}for(;e<arguments.length;e++)ww(r,arguments[e]);return r}function ww(r,e){if(typeof e=="string")r.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)r.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)ww(r,e[t]);else throw new RangeError("Unsupported child node: "+e)}var Aw=typeof String.prototype.normalize=="function"?r=>r.normalize("NFKD"):r=>r,Co=class{constructor(e,t,i=0,n=e.length,o,s){this.test=s,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,n),this.bufferStart=i,this.normalize=o?a=>o(Aw(a)):Aw,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Jt(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=Kl(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=Ar(e);let n=this.normalize(t);for(let o=0,s=i;;o++){let a=n.charCodeAt(o),l=this.match(a,s);if(l)return this.value=l,this;if(o==n.length-1)break;s==i&&o<t.length&&t.charCodeAt(o)==a&&s++}}}match(e,t){let i=null;for(let n=0;n<this.matches.length;n+=2){let o=this.matches[n],s=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?i={from:this.matches[n+1],to:t+1}:(this.matches[n]++,s=!0)),s||(this.matches.splice(n,2),n-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:t,to:t+1}:this.matches.push(1,t)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferPos)&&(i=null),i}};typeof Symbol<"u"&&(Co.prototype[Symbol.iterator]=function(){return this});var _w={from:-1,to:-1,match:/.*/.exec("")},wm="gm"+(/x/.unicode==null?"":"u"),Ju=class{constructor(e,t,i,n=0,o=e.length){if(this.text=e,this.to=o,this.curLine="",this.done=!1,this.value=_w,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new Yu(e,t,i,n,o);this.re=new RegExp(t,wm+(i?.ignoreCase?"i":"")),this.test=i?.test,this.iter=e.iter();let s=e.lineAt(n);this.curLineStart=s.from,this.matchPos=Xu(e,n),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let i=this.curLineStart+t.index,n=i+t[0].length;if(this.matchPos=Xu(this.text,n+(i==n?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<n||i>this.value.to)&&(!this.test||this.test(i,n,t)))return this.value={from:i,to:n,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}},mm=new WeakMap,So=class{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,i){let n=mm.get(e);if(!n||n.from>=i||n.to<=t){let a=new So(t,e.sliceString(t,i));return mm.set(e,a),a}if(n.from==t&&n.to==i)return n;let{text:o,from:s}=n;return s>t&&(o=e.sliceString(t,s)+o,s=t),n.to<i&&(o+=e.sliceString(n.to,i)),mm.set(e,new So(s,o)),new So(t,o.slice(t-s,i-s))}},Yu=class{constructor(e,t,i,n,o){this.text=e,this.to=o,this.done=!1,this.value=_w,this.matchPos=Xu(e,n),this.re=new RegExp(t,wm+(i?.ignoreCase?"i":"")),this.test=i?.test,this.flat=So.get(e,n,this.chunkEnd(n+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let i=this.flat.from+t.index,n=i+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,n,t)))return this.value={from:i,to:n,match:t},this.matchPos=Xu(this.text,n+(i==n?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=So.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}};typeof Symbol<"u"&&(Ju.prototype[Symbol.iterator]=Yu.prototype[Symbol.iterator]=function(){return this});function z7(r){try{return new RegExp(r,wm),!0}catch{return!1}}function Xu(r,e){if(e>=r.length)return e;let t=r.lineAt(e),i;for(;e<t.to&&(i=t.text.charCodeAt(e-t.from))>=56320&&i<57344;)e++;return e}function gm(r){let e=Ve("input",{class:"cm-textfield",name:"line"}),t=Ve("form",{class:"cm-gotoLine",onkeydown:n=>{n.keyCode==27?(n.preventDefault(),r.dispatch({effects:$u.of(!1)}),r.focus()):n.keyCode==13&&(n.preventDefault(),i())},onsubmit:n=>{n.preventDefault(),i()}},Ve("label",r.state.phrase("Go to line"),": ",e)," ",Ve("button",{class:"cm-button",type:"submit"},r.state.phrase("go")));function i(){let n=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(e.value);if(!n)return;let{state:o}=r,s=o.doc.lineAt(o.selection.main.head),[,a,l,f,c]=n,u=f?+f.slice(1):0,d=l?+l:s.number;if(l&&c){let g=d/100;a&&(g=g*(a=="-"?-1:1)+s.number/o.doc.lines),d=Math.round(o.doc.lines*g)}else l&&a&&(d=d*(a=="-"?-1:1)+s.number);let p=o.doc.line(Math.max(1,Math.min(o.doc.lines,d)));r.dispatch({effects:$u.of(!1),selection:K.cursor(p.from+Math.max(0,Math.min(u,p.length))),scrollIntoView:!0}),r.focus()}return{dom:t}}var $u=me.define(),Ew=Mt.define({create(){return!0},update(r,e){for(let t of e.effects)t.is($u)&&(r=t.value);return r},provide:r=>vs.from(r,e=>e?gm:null)}),H7=r=>{let e=ws(r,gm);if(!e){let t=[$u.of(!0)];r.state.field(Ew,!1)==null&&t.push(me.appendConfig.of([Ew,W7])),r.dispatch({effects:t}),e=ws(r,gm)}return e&&e.dom.querySelector("input").focus(),!0},W7=le.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),G7={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},Cw=oe.define({combine(r){return Er(r,G7,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function Tw(r){let e=[X7,Y7];return r&&e.push(Cw.of(r)),e}var K7=he.mark({class:"cm-selectionMatch"}),Q7=he.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function kw(r,e,t,i){return(t==0||r(e.sliceDoc(t-1,t))!=ze.Word)&&(i==e.doc.length||r(e.sliceDoc(i,i+1))!=ze.Word)}function J7(r,e,t,i){return r(e.sliceDoc(t,t+1))==ze.Word&&r(e.sliceDoc(i-1,i))==ze.Word}var Y7=Qe.fromClass(class{constructor(r){this.decorations=this.getDeco(r)}update(r){(r.selectionSet||r.docChanged||r.viewportChanged)&&(this.decorations=this.getDeco(r.view))}getDeco(r){let e=r.state.facet(Cw),{state:t}=r,i=t.selection;if(i.ranges.length>1)return he.none;let n=i.main,o,s=null;if(n.empty){if(!e.highlightWordAroundCursor)return he.none;let l=t.wordAt(n.head);if(!l)return he.none;s=t.charCategorizer(n.head),o=t.sliceDoc(l.from,l.to)}else{let l=n.to-n.from;if(l<e.minSelectionLength||l>200)return he.none;if(e.wholeWords){if(o=t.sliceDoc(n.from,n.to),s=t.charCategorizer(n.head),!(kw(s,t,n.from,n.to)&&J7(s,t,n.from,n.to)))return he.none}else if(o=t.sliceDoc(n.from,n.to).trim(),!o)return he.none}let a=[];for(let l of r.visibleRanges){let f=new Co(t.doc,o,l.from,l.to);for(;!f.next().done;){let{from:c,to:u}=f.value;if((!s||kw(s,t,c,u))&&(n.empty&&c<=n.from&&u>=n.to?a.push(Q7.range(c,u)):(c>=n.to||u<=n.from)&&a.push(K7.range(c,u)),a.length>e.maxMatches))return he.none}}return he.set(a)}},{decorations:r=>r.decorations}),X7=le.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),$7=({state:r,dispatch:e})=>{let{selection:t}=r,i=K.create(t.ranges.map(n=>r.wordAt(n.head)||K.cursor(n.head)),t.mainIndex);return i.eq(t)?!1:(e(r.update({selection:i})),!0)};function Z7(r,e){let{main:t,ranges:i}=r.selection,n=r.wordAt(t.head),o=n&&n.from==t.from&&n.to==t.to;for(let s=!1,a=new Co(r.doc,e,i[i.length-1].to);;)if(a.next(),a.done){if(s)return null;a=new Co(r.doc,e,0,Math.max(0,i[i.length-1].from-1)),s=!0}else{if(s&&i.some(l=>l.from==a.value.from))continue;if(o){let l=r.wordAt(a.value.from);if(!l||l.from!=a.value.from||l.to!=a.value.to)continue}return a.value}}var e9=({state:r,dispatch:e})=>{let{ranges:t}=r.selection;if(t.some(o=>o.from===o.to))return $7({state:r,dispatch:e});let i=r.sliceDoc(t[0].from,t[0].to);if(r.selection.ranges.some(o=>r.sliceDoc(o.from,o.to)!=i))return!1;let n=Z7(r,i);return n?(e(r.update({selection:r.selection.addRange(K.range(n.from,n.to),!1),effects:le.scrollIntoView(n.to)})),!0):!1},Am=oe.define({combine(r){return Er(r,{top:!1,caseSensitive:!1,literal:!1,wholeWord:!1,createPanel:e=>new vm(e)})}});var Zu=class{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||z7(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new bm(this):new xm(this)}getCursor(e,t=0,i){let n=e.doc?e:ke.create({doc:e});return i==null&&(i=n.doc.length),this.regexp?Ma(this,n,t,i):Ta(this,n,t,i)}},eh=class{constructor(e){this.spec=e}};function Ta(r,e,t,i){return new Co(e.doc,r.unquoted,t,i,r.caseSensitive?void 0:n=>n.toLowerCase(),r.wholeWord?t9(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function t9(r,e){return(t,i,n,o)=>((o>t||o+n.length<i)&&(o=Math.max(0,t-2),n=r.sliceString(o,Math.min(r.length,i+2))),(e(th(n,t-o))!=ze.Word||e(rh(n,t-o))!=ze.Word)&&(e(rh(n,i-o))!=ze.Word||e(th(n,i-o))!=ze.Word))}var xm=class extends eh{constructor(e){super(e)}nextMatch(e,t,i){let n=Ta(this.spec,e,i,e.doc.length).nextOverlapping();return n.done&&(n=Ta(this.spec,e,0,t).nextOverlapping()),n.done?null:n.value}prevMatchInRange(e,t,i){for(let n=i;;){let o=Math.max(t,n-1e4-this.spec.unquoted.length),s=Ta(this.spec,e,o,n),a=null;for(;!s.nextOverlapping().done;)a=s.value;if(a)return a;if(o==t)return null;n-=1e4}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let i=Ta(this.spec,e,0,e.doc.length),n=[];for(;!i.next().done;){if(n.length>=t)return null;n.push(i.value)}return n}highlight(e,t,i,n){let o=Ta(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!o.next().done;)n(o.value.from,o.value.to)}};function Ma(r,e,t,i){return new Ju(e.doc,r.search,{ignoreCase:!r.caseSensitive,test:r.wholeWord?r9(e.charCategorizer(e.selection.main.head)):void 0},t,i)}function th(r,e){return r.slice(or(r,e,!1),e)}function rh(r,e){return r.slice(e,or(r,e))}function r9(r){return(e,t,i)=>!i[0].length||(r(th(i.input,i.index))!=ze.Word||r(rh(i.input,i.index))!=ze.Word)&&(r(rh(i.input,i.index+i[0].length))!=ze.Word||r(th(i.input,i.index+i[0].length))!=ze.Word)}var bm=class extends eh{nextMatch(e,t,i){let n=Ma(this.spec,e,i,e.doc.length).next();return n.done&&(n=Ma(this.spec,e,0,t).next()),n.done?null:n.value}prevMatchInRange(e,t,i){for(let n=1;;n++){let o=Math.max(t,i-n*1e4),s=Ma(this.spec,e,o,i),a=null;for(;!s.next().done;)a=s.value;if(a&&(o==t||a.from>o+10))return a;if(o==t)return null}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace.replace(/\$([$&\d+])/g,(t,i)=>i=="$"?"$":i=="&"?e.match[0]:i!="0"&&+i<e.match.length?e.match[i]:t))}matchAll(e,t){let i=Ma(this.spec,e,0,e.doc.length),n=[];for(;!i.next().done;){if(n.length>=t)return null;n.push(i.value)}return n}highlight(e,t,i,n){let o=Ma(this.spec,e,Math.max(0,t-250),Math.min(i+250,e.doc.length));for(;!o.next().done;)n(o.value.from,o.value.to)}},Sf=me.define(),Em=me.define(),_o=Mt.define({create(r){return new kf(ym(r).create(),null)},update(r,e){for(let t of e.effects)t.is(Sf)?r=new kf(t.value.create(),r.panel):t.is(Em)&&(r=new kf(r.query,t.value?km:null));return r},provide:r=>vs.from(r,e=>e.panel)});var kf=class{constructor(e,t){this.query=e,this.panel=t}},i9=he.mark({class:"cm-searchMatch"}),n9=he.mark({class:"cm-searchMatch cm-searchMatch-selected"}),o9=Qe.fromClass(class{constructor(r){this.view=r,this.decorations=this.highlight(r.state.field(_o))}update(r){let e=r.state.field(_o);(e!=r.startState.field(_o)||r.docChanged||r.selectionSet||r.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:r,panel:e}){if(!e||!r.spec.valid)return he.none;let{view:t}=this,i=new Yr;for(let n=0,o=t.visibleRanges,s=o.length;n<s;n++){let{from:a,to:l}=o[n];for(;n<s-1&&l>o[n+1].from-2*250;)l=o[++n].to;r.highlight(t.state,a,l,(f,c)=>{let u=t.state.selection.ranges.some(d=>d.from==f&&d.to==c);i.add(f,c,u?n9:i9)})}return i.finish()}},{decorations:r=>r.decorations});function _f(r){return e=>{let t=e.state.field(_o,!1);return t&&t.query.spec.valid?r(e,t):Mw(e)}}var ih=_f((r,{query:e})=>{let{to:t}=r.state.selection.main,i=e.nextMatch(r.state,t,t);return i?(r.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:Sm(r,i),userEvent:"select.search"}),!0):!1}),nh=_f((r,{query:e})=>{let{state:t}=r,{from:i}=t.selection.main,n=e.prevMatch(t,i,i);return n?(r.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0,effects:Sm(r,n),userEvent:"select.search"}),!0):!1}),s9=_f((r,{query:e})=>{let t=e.matchAll(r.state,1e3);return!t||!t.length?!1:(r.dispatch({selection:K.create(t.map(i=>K.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),a9=({state:r,dispatch:e})=>{let t=r.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:i,to:n}=t.main,o=[],s=0;for(let a=new Co(r.doc,r.sliceDoc(i,n));!a.next().done;){if(o.length>1e3)return!1;a.value.from==i&&(s=o.length),o.push(K.range(a.value.from,a.value.to))}return e(r.update({selection:K.create(o,s),userEvent:"select.search.matches"})),!0},Sw=_f((r,{query:e})=>{let{state:t}=r,{from:i,to:n}=t.selection.main;if(t.readOnly)return!1;let o=e.nextMatch(t,i,i);if(!o)return!1;let s=[],a,l,f=[];if(o.from==i&&o.to==n&&(l=t.toText(e.getReplacement(o)),s.push({from:o.from,to:o.to,insert:l}),o=e.nextMatch(t,o.from,o.to),f.push(le.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(i).number)+"."))),o){let c=s.length==0||s[0].from>=o.to?0:o.to-o.from-l.length;a={anchor:o.from-c,head:o.to-c},f.push(Sm(r,o))}return r.dispatch({changes:s,selection:a,scrollIntoView:!!a,effects:f,userEvent:"input.replace"}),!0}),l9=_f((r,{query:e})=>{if(r.state.readOnly)return!1;let t=e.matchAll(r.state,1e9).map(n=>{let{from:o,to:s}=n;return{from:o,to:s,insert:e.getReplacement(n)}});if(!t.length)return!1;let i=r.state.phrase("replaced $ matches",t.length)+".";return r.dispatch({changes:t,effects:le.announce.of(i),userEvent:"input.replace.all"}),!0});function km(r){return r.state.facet(Am).createPanel(r)}function ym(r,e){var t,i,n,o;let s=r.selection.main,a=s.empty||s.to>s.from+100?"":r.sliceDoc(s.from,s.to);if(e&&!a)return e;let l=r.facet(Am);return new Zu({search:((t=e?.literal)!==null&&t!==void 0?t:l.literal)?a:a.replace(/\n/g,"\\n"),caseSensitive:(i=e?.caseSensitive)!==null&&i!==void 0?i:l.caseSensitive,literal:(n=e?.literal)!==null&&n!==void 0?n:l.literal,wholeWord:(o=e?.wholeWord)!==null&&o!==void 0?o:l.wholeWord})}var Mw=r=>{let e=r.state.field(_o,!1);if(e&&e.panel){let t=ws(r,km);if(!t)return!1;let i=t.dom.querySelector("[main-field]");if(i&&i!=r.root.activeElement){let n=ym(r.state,e.query.spec);n.valid&&r.dispatch({effects:Sf.of(n)}),i.focus(),i.select()}}else r.dispatch({effects:[Em.of(!0),e?Sf.of(ym(r.state,e.query.spec)):me.appendConfig.of(c9)]});return!0},Ow=r=>{let e=r.state.field(_o,!1);if(!e||!e.panel)return!1;let t=ws(r,km);return t&&t.dom.contains(r.root.activeElement)&&r.focus(),r.dispatch({effects:Em.of(!1)}),!0},Nw=[{key:"Mod-f",run:Mw,scope:"editor search-panel"},{key:"F3",run:ih,shift:nh,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:ih,shift:nh,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:Ow,scope:"editor search-panel"},{key:"Mod-Shift-l",run:a9},{key:"Alt-g",run:H7},{key:"Mod-d",run:e9,preventDefault:!0}],vm=class{constructor(e){this.view=e;let t=this.query=e.state.field(_o).query.spec;this.commit=this.commit.bind(this),this.searchField=Ve("input",{value:t.search,placeholder:ti(e,"Find"),"aria-label":ti(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Ve("input",{value:t.replace,placeholder:ti(e,"Replace"),"aria-label":ti(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Ve("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=Ve("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=Ve("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function i(n,o,s){return Ve("button",{class:"cm-button",name:n,onclick:o,type:"button"},s)}this.dom=Ve("div",{onkeydown:n=>this.keydown(n),class:"cm-search"},[this.searchField,i("next",()=>ih(e),[ti(e,"next")]),i("prev",()=>nh(e),[ti(e,"previous")]),i("select",()=>s9(e),[ti(e,"all")]),Ve("label",null,[this.caseField,ti(e,"match case")]),Ve("label",null,[this.reField,ti(e,"regexp")]),Ve("label",null,[this.wordField,ti(e,"by word")]),...e.state.readOnly?[]:[Ve("br"),this.replaceField,i("replace",()=>Sw(e),[ti(e,"replace")]),i("replaceAll",()=>l9(e),[ti(e,"replace all")]),Ve("button",{name:"close",onclick:()=>Ow(e),"aria-label":ti(e,"close"),type:"button"},["\xD7"])]])}commit(){let e=new Zu({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Sf.of(e)}))}keydown(e){N1(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?nh:ih)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),Sw(this.view))}update(e){for(let t of e.transactions)for(let i of t.effects)i.is(Sf)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Am).top}};function ti(r,e){return r.state.phrase(e)}var Ku=30,Qu=/[\s\.,:;?!]/;function Sm(r,{from:e,to:t}){let i=r.state.doc.lineAt(e),n=r.state.doc.lineAt(t).to,o=Math.max(i.from,e-Ku),s=Math.min(n,t+Ku),a=r.state.sliceDoc(o,s);if(o!=i.from){for(let l=0;l<Ku;l++)if(!Qu.test(a[l+1])&&Qu.test(a[l])){a=a.slice(l);break}}if(s!=n){for(let l=a.length-1;l>a.length-Ku;l--)if(!Qu.test(a[l-1])&&Qu.test(a[l])){a=a.slice(0,l);break}}return le.announce.of(`${r.state.phrase("current match")}. ${a} ${r.state.phrase("on line")} ${i.number}.`)}var f9=le.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),c9=[_o,Zi.lowest(o9),f9];var sh=class{constructor(e,t,i){this.state=e,this.pos=t,this.explicit=i,this.abortListeners=[]}tokenBefore(e){let t=nr(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),i=Math.max(t.from,this.pos-250),n=t.text.slice(i-t.from,this.pos-t.from),o=n.search(Vw(e,!1));return o<0?null:{from:i+o,to:this.pos,text:n.slice(o)}}get aborted(){return this.abortListeners==null}addEventListener(e,t){e=="abort"&&this.abortListeners&&this.abortListeners.push(t)}};function Pw(r){let e=Object.keys(r).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function u9(r){let e=Object.create(null),t=Object.create(null);for(let{label:n}of r){e[n[0]]=!0;for(let o=1;o<n.length;o++)t[n[o]]=!0}let i=Pw(e)+Pw(t)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function h9(r){let e=r.map(n=>typeof n=="string"?{label:n}:n),[t,i]=e.every(n=>/^\w+$/.test(n.label))?[/\w*$/,/\w+$/]:u9(e);return n=>{let o=n.matchBefore(i);return o||n.explicit?{from:o?o.from:n.pos,options:e,validFor:t}:null}}var ah=class{constructor(e,t,i){this.completion=e,this.source=t,this.match=i}};function To(r){return r.selection.main.head}function Vw(r,e){var t;let{source:i}=r,n=e&&i[0]!="^",o=i[i.length-1]!="$";return!n&&!o?r:new RegExp(`${n?"^":""}(?:${i})${o?"$":""}`,(t=r.flags)!==null&&t!==void 0?t:r.ignoreCase?"i":"")}function d9(r,e,t,i){return Object.assign(Object.assign({},r.changeByRange(n=>{if(n==r.selection.main)return{changes:{from:t,to:i,insert:e},range:K.cursor(t+e.length)};let o=i-t;return!n.empty||o&&r.sliceDoc(n.from-o,n.from)!=r.sliceDoc(t,i)?{range:n}:{changes:{from:n.from-o,to:n.from,insert:e},range:K.cursor(n.from-o+e.length)}})),{userEvent:"input.complete"})}function qw(r,e){let t=e.completion.apply||e.completion.label,i=e.source;typeof t=="string"?r.dispatch(d9(r.state,t,i.from,i.to)):t(r,e.completion,i.from,i.to)}var Iw=new WeakMap;function p9(r){if(!Array.isArray(r))return r;let e=Iw.get(r);return e||Iw.set(r,e=h9(r)),e}var Cm=class{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let t=0;t<e.length;){let i=Jt(e,t),n=Ar(i);this.chars.push(i);let o=e.slice(t,t+n),s=o.toUpperCase();this.folded.push(Jt(s==o?o.toLowerCase():s,0)),t+=n}this.astral=e.length!=this.chars.length}match(e){if(this.pattern.length==0)return[0];if(e.length<this.pattern.length)return null;let{chars:t,folded:i,any:n,precise:o,byWord:s}=this;if(t.length==1){let P=Jt(e,0);return P==t[0]?[0,0,Ar(P)]:P==i[0]?[-200,0,Ar(P)]:null}let a=e.indexOf(this.pattern);if(a==0)return[0,0,this.pattern.length];let l=t.length,f=0;if(a<0){for(let P=0,N=Math.min(e.length,200);P<N&&f<l;){let I=Jt(e,P);(I==t[f]||I==i[f])&&(n[f++]=P),P+=Ar(I)}if(f<l)return null}let c=0,u=0,d=!1,p=0,g=-1,b=-1,k=/[a-z]/.test(e),_=!0;for(let P=0,N=Math.min(e.length,200),I=0;P<N&&u<l;){let D=Jt(e,P);a<0&&(c<l&&D==t[c]&&(o[c++]=P),p<l&&(D==t[p]||D==i[p]?(p==0&&(g=P),b=P+1,p++):p=0));let B,V=D<255?D>=48&&D<=57||D>=97&&D<=122?2:D>=65&&D<=90?1:0:(B=Kl(D))!=B.toLowerCase()?1:B!=B.toUpperCase()?2:0;(!P||V==1&&k||I==0&&V!=0)&&(t[u]==D||i[u]==D&&(d=!0)?s[u++]=P:s.length&&(_=!1)),I=V,P+=Ar(D)}return u==l&&s[0]==0&&_?this.result(-100+(d?-200:0),s,e):p==l&&g==0?[-200-e.length,0,b]:a>-1?[-700-e.length,a,a+this.pattern.length]:p==l?[-200+-700-e.length,g,b]:u==l?this.result(-100+(d?-200:0)+-700+(_?0:-1100),s,e):t.length==2?null:this.result((n[0]?-700:0)+-200+-1100,n,e)}result(e,t,i){let n=[e-i.length],o=1;for(let s of t){let a=s+(this.astral?Ar(Jt(i,s)):1);o>1&&n[o-1]==s?n[o-1]=a:(n[o++]=s,n[o++]=a)}return n}},wi=oe.define({combine(r){return Er(r,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,optionClass:(e,t)=>i=>m9(e(i),t(i)),addToOptions:(e,t)=>e.concat(t)})}});function m9(r,e){return r?e?r+" "+e:r:e}function g9(r){let e=r.addToOptions.slice();return r.icons&&e.push({render(t){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),t.type&&i.classList.add(...t.type.split(/\s+/g).map(n=>"cm-completionIcon-"+n)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(t,i,n){let o=document.createElement("span");o.className="cm-completionLabel";let{label:s}=t,a=0;for(let l=1;l<n.length;){let f=n[l++],c=n[l++];f>a&&o.appendChild(document.createTextNode(s.slice(a,f)));let u=o.appendChild(document.createElement("span"));u.appendChild(document.createTextNode(s.slice(f,c))),u.className="cm-completionMatchedText",a=c}return a<s.length&&o.appendChild(document.createTextNode(s.slice(a))),o},position:50},{render(t){if(!t.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=t.detail,i},position:80}),e.sort((t,i)=>t.position-i.position).map(t=>t.render)}function Rw(r,e,t){if(r<=t)return{from:0,to:r};if(e<0&&(e=0),e<=r>>1){let n=Math.floor(e/t);return{from:n*t,to:(n+1)*t}}let i=Math.floor((r-e)/t);return{from:r-(i+1)*t,to:r-i*t}}var Tm=class{constructor(e,t){this.view=e,this.stateField=t,this.info=null,this.placeInfo={read:()=>this.measureInfo(),write:a=>this.positionInfo(a),key:this};let i=e.state.field(t),{options:n,selected:o}=i.open,s=e.state.facet(wi);this.optionContent=g9(s),this.optionClass=s.optionClass,this.range=Rw(n.length,o,s.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.dom.addEventListener("mousedown",a=>{for(let l=a.target,f;l&&l!=this.dom;l=l.parentNode)if(l.nodeName=="LI"&&(f=/-(\d+)$/.exec(l.id))&&+f[1]<n.length){qw(e,n[+f[1]]),a.preventDefault();return}}),this.list=this.dom.appendChild(this.createListBox(n,i.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})}mount(){this.updateSel()}update(e){e.state.field(this.stateField)!=e.startState.field(this.stateField)&&this.updateSel()}positioned(){this.info&&this.view.requestMeasure(this.placeInfo)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=Rw(t.options.length,t.selected,this.view.state.facet(wi).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(t.options,e.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})),this.updateSelectedOption(t.selected)){this.info&&(this.info.remove(),this.info=null);let{completion:i}=t.options[t.selected],{info:n}=i;if(!n)return;let o=typeof n=="string"?document.createTextNode(n):n(i);if(!o)return;"then"in o?o.then(s=>{s&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(s)}).catch(s=>kr(this.view.state,s,"completion info")):this.addInfoPane(o)}}addInfoPane(e){let t=this.info=document.createElement("div");t.className="cm-tooltip cm-completionInfo",t.appendChild(e),this.dom.appendChild(t),this.view.requestMeasure(this.placeInfo)}updateSelectedOption(e){let t=null;for(let i=this.list.firstChild,n=this.range.from;i;i=i.nextSibling,n++)n==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),t=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return t&&b9(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.ownerDocument.defaultView||window,i=this.dom.getBoundingClientRect(),n=this.info.getBoundingClientRect(),o=e.getBoundingClientRect();if(o.top>Math.min(t.innerHeight,i.bottom)-10||o.bottom<Math.max(0,i.top)+10)return null;let s=this.view.textDirection==Nt.RTL,a=s,l=!1,f,c="",u="",d=i.left,p=t.innerWidth-i.right;if(a&&d<Math.min(n.width,p)?a=!1:!a&&p<Math.min(n.width,d)&&(a=!0),n.width<=(a?d:p))c=Math.max(0,Math.min(o.top,t.innerHeight-n.height))-i.top+"px",f=Math.min(400,a?d:p)+"px";else{l=!0,f=Math.min(400,(s?i.right:t.innerWidth-i.left)-30)+"px";let g=t.innerHeight-i.bottom;g>=n.height||g>i.top?c=o.bottom-i.top+"px":u=i.bottom-o.top+"px"}return{top:c,bottom:u,maxWidth:f,class:l?s?"left-narrow":"right-narrow":a?"left":"right"}}positionInfo(e){this.info&&(e?(this.info.style.top=e.top,this.info.style.bottom=e.bottom,this.info.style.maxWidth=e.maxWidth,this.info.className="cm-tooltip cm-completionInfo cm-completionInfo-"+e.class):this.info.style.top="-1e6px")}createListBox(e,t,i){let n=document.createElement("ul");n.id=t,n.setAttribute("role","listbox"),n.setAttribute("aria-expanded","true"),n.setAttribute("aria-label",this.view.state.phrase("Completions"));for(let o=i.from;o<i.to;o++){let{completion:s,match:a}=e[o],l=n.appendChild(document.createElement("li"));l.id=t+"-"+o,l.setAttribute("role","option");let f=this.optionClass(s);f&&(l.className=f);for(let c of this.optionContent){let u=c(s,this.view.state,a);u&&l.appendChild(u)}}return i.from&&n.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&n.classList.add("cm-completionListIncompleteBottom"),n}};function x9(r){return e=>new Tm(e,r)}function b9(r,e){let t=r.getBoundingClientRect(),i=e.getBoundingClientRect();i.top<t.top?r.scrollTop-=t.top-i.top:i.bottom>t.bottom&&(r.scrollTop+=i.bottom-t.bottom)}function Dw(r){return(r.boost||0)*100+(r.apply?10:0)+(r.info?5:0)+(r.type?1:0)}function y9(r,e){let t=[],i=0;for(let a of r)if(a.hasResult())if(a.result.filter===!1){let l=a.result.getMatch;for(let f of a.result.options){let c=[1e9-i++];if(l)for(let u of l(f))c.push(u);t.push(new ah(f,a,c))}}else{let l=new Cm(e.sliceDoc(a.from,a.to)),f;for(let c of a.result.options)(f=l.match(c.label))&&(c.boost!=null&&(f[0]+=c.boost),t.push(new ah(c,a,f)))}let n=[],o=null,s=e.facet(wi).compareCompletions;for(let a of t.sort((l,f)=>f.match[0]-l.match[0]||s(l.completion,f.completion)))!o||o.label!=a.completion.label||o.detail!=a.completion.detail||o.type!=null&&a.completion.type!=null&&o.type!=a.completion.type||o.apply!=a.completion.apply?n.push(a):Dw(a.completion)>Dw(o)&&(n[n.length-1]=a),o=a.completion;return n}var _s=class{constructor(e,t,i,n,o){this.options=e,this.attrs=t,this.tooltip=i,this.timestamp=n,this.selected=o}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new _s(this.options,Bw(t,e),this.tooltip,this.timestamp,e)}static build(e,t,i,n,o){let s=y9(e,t);if(!s.length)return null;let a=t.facet(wi).selectOnOpen?0:-1;if(n&&n.selected!=a&&n.selected!=-1){let l=n.options[n.selected].completion;for(let f=0;f<s.length;f++)if(s[f].completion==l){a=f;break}}return new _s(s,Bw(i,a),{pos:e.reduce((l,f)=>f.hasResult()?Math.min(l,f.from):l,1e8),create:x9(vi),above:o.aboveCursor},n?n.timestamp:Date.now(),a)}map(e){return new _s(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected)}},Oa=class{constructor(e,t,i){this.active=e,this.id=t,this.open=i}static start(){return new Oa(A9,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,i=t.facet(wi),o=(i.override||t.languageDataAt("autocomplete",To(t)).map(p9)).map(a=>(this.active.find(f=>f.source==a)||new Cr(a,this.active.some(f=>f.state!=0)?1:0)).update(e,i));o.length==this.active.length&&o.every((a,l)=>a==this.active[l])&&(o=this.active);let s=e.selection||o.some(a=>a.hasResult()&&e.changes.touchesRange(a.from,a.to))||!v9(o,this.active)?_s.build(o,t,this.id,this.open,i):this.open&&e.docChanged?this.open.map(e.changes):this.open;!s&&o.every(a=>a.state!=1)&&o.some(a=>a.hasResult())&&(o=o.map(a=>a.hasResult()?new Cr(a.source,0):a));for(let a of e.effects)a.is(zw)&&(s=s&&s.setSelected(a.value,this.id));return o==this.active&&s==this.open?this:new Oa(o,this.id,s)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:w9}};function v9(r,e){if(r==e)return!0;for(let t=0,i=0;;){for(;t<r.length&&!r[t].hasResult;)t++;for(;i<e.length&&!e[i].hasResult;)i++;let n=t==r.length,o=i==e.length;if(n||o)return n==o;if(r[t++].result!=e[i++].result)return!1}}var w9={"aria-autocomplete":"list"};function Bw(r,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":r};return e>-1&&(t["aria-activedescendant"]=r+"-"+e),t}var A9=[];function Mm(r){return r.isUserEvent("input.type")?"input":r.isUserEvent("delete.backward")?"delete":null}var Cr=class{constructor(e,t,i=-1){this.source=e,this.state=t,this.explicitPos=i}hasResult(){return!1}update(e,t){let i=Mm(e),n=this;i?n=n.handleUserEvent(e,i,t):e.docChanged?n=n.handleChange(e):e.selection&&n.state!=0&&(n=new Cr(n.source,0));for(let o of e.effects)if(o.is(Nm))n=new Cr(n.source,1,o.value?To(e.state):-1);else if(o.is(lh))n=new Cr(n.source,0);else if(o.is(jw))for(let s of o.value)s.source==n.source&&(n=s);return n}handleUserEvent(e,t,i){return t=="delete"||!i.activateOnTyping?this.map(e.changes):new Cr(this.source,1)}handleChange(e){return e.changes.touchesRange(To(e.startState))?new Cr(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new Cr(this.source,this.state,e.mapPos(this.explicitPos))}},Cs=class extends Cr{constructor(e,t,i,n,o){super(e,2,t),this.result=i,this.from=n,this.to=o}hasResult(){return!0}handleUserEvent(e,t,i){var n;let o=e.changes.mapPos(this.from),s=e.changes.mapPos(this.to,1),a=To(e.state);if((this.explicitPos<0?a<=o:a<this.from)||a>s||t=="delete"&&To(e.startState)==this.from)return new Cr(this.source,t=="input"&&i.activateOnTyping?1:0);let l=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos),f;return E9(this.result.validFor,e.state,o,s)?new Cs(this.source,l,this.result,o,s):this.result.update&&(f=this.result.update(this.result,o,s,new sh(e.state,a,l>=0)))?new Cs(this.source,l,f,f.from,(n=f.to)!==null&&n!==void 0?n:To(e.state)):new Cr(this.source,1,l)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new Cr(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new Cs(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}};function E9(r,e,t,i){if(!r)return!1;let n=e.sliceDoc(t,i);return typeof r=="function"?r(n,t,i,e):Vw(r,!0).test(n)}var Nm=me.define(),lh=me.define(),jw=me.define({map(r,e){return r.map(t=>t.map(e))}}),zw=me.define(),vi=Mt.define({create(){return Oa.start()},update(r,e){return r.update(e)},provide:r=>[uf.from(r,e=>e.tooltip),le.contentAttributes.from(r,e=>e.attrs)]});function oh(r,e="option"){return t=>{let i=t.state.field(vi,!1);if(!i||!i.open||Date.now()-i.open.timestamp<t.state.facet(wi).interactionDelay)return!1;let n=1,o;e=="page"&&(o=W1(t,i.open.tooltip))&&(n=Math.max(2,Math.floor(o.dom.offsetHeight/o.dom.querySelector("li").offsetHeight)-1));let{length:s}=i.open.options,a=i.open.selected>-1?i.open.selected+n*(r?1:-1):r?0:s-1;return a<0?a=e=="page"?0:s-1:a>=s&&(a=e=="page"?s-1:0),t.dispatch({effects:zw.of(a)}),!0}}var k9=r=>{let e=r.state.field(vi,!1);return r.state.readOnly||!e||!e.open||e.open.selected<0||Date.now()-e.open.timestamp<r.state.facet(wi).interactionDelay?!1:(qw(r,e.open.options[e.open.selected]),!0)},S9=r=>r.state.field(vi,!1)?(r.dispatch({effects:Nm.of(!0)}),!0):!1,_9=r=>{let e=r.state.field(vi,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(r.dispatch({effects:lh.of(null)}),!0)},Om=class{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}},Fw=50,C9=50,T9=1e3,M9=Qe.fromClass(class{constructor(r){this.view=r,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let e of r.state.field(vi).active)e.state==1&&this.startQuery(e)}update(r){let e=r.state.field(vi);if(!r.selectionSet&&!r.docChanged&&r.startState.field(vi)==e)return;let t=r.transactions.some(i=>(i.selection||i.docChanged)&&!Mm(i));for(let i=0;i<this.running.length;i++){let n=this.running[i];if(t||n.updates.length+r.transactions.length>C9&&Date.now()-n.time>T9){for(let o of n.context.abortListeners)try{o()}catch(s){kr(this.view.state,s)}n.context.abortListeners=null,this.running.splice(i--,1)}else n.updates.push(...r.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=e.active.some(i=>i.state==1&&!this.running.some(n=>n.active.source==i.source))?setTimeout(()=>this.startUpdate(),Fw):-1,this.composing!=0)for(let i of r.transactions)Mm(i)=="input"?this.composing=2:this.composing==2&&i.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:r}=this.view,e=r.field(vi);for(let t of e.active)t.state==1&&!this.running.some(i=>i.active.source==t.source)&&this.startQuery(t)}startQuery(r){let{state:e}=this.view,t=To(e),i=new sh(e,t,r.explicitPos==t),n=new Om(r,i);this.running.push(n),Promise.resolve(r.source(i)).then(o=>{n.context.aborted||(n.done=o||null,this.scheduleAccept())},o=>{this.view.dispatch({effects:lh.of(null)}),kr(this.view.state,o)})}scheduleAccept(){this.running.every(r=>r.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),Fw))}accept(){var r;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(wi);for(let i=0;i<this.running.length;i++){let n=this.running[i];if(n.done===void 0)continue;if(this.running.splice(i--,1),n.done){let s=new Cs(n.active.source,n.active.explicitPos,n.done,n.done.from,(r=n.done.to)!==null&&r!==void 0?r:To(n.updates.length?n.updates[0].startState:this.view.state));for(let a of n.updates)s=s.update(a,t);if(s.hasResult()){e.push(s);continue}}let o=this.view.state.field(vi).active.find(s=>s.source==n.active.source);if(o&&o.state==1)if(n.done==null){let s=new Cr(n.active.source,0);for(let a of n.updates)s=s.update(a,t);s.state!=1&&e.push(s)}else this.startQuery(o)}e.length&&this.view.dispatch({effects:jw.of(e)})}},{eventHandlers:{blur(){let r=this.view.state.field(vi,!1);r&&r.tooltip&&this.view.state.facet(wi).closeOnBlur&&this.view.dispatch({effects:lh.of(null)})},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:Nm.of(!1)}),20),this.composing=0}}}),O9=le.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",listStyle:"none",margin:0,padding:0,"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer",padding:"1px 3px",lineHeight:1.2}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xB7\xB7\xB7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:`${400}px`,boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:`${30}px`},".cm-completionInfo.cm-completionInfo-right-narrow":{left:`${30}px`},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25CB'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25CC'"}},".cm-completionIcon-variable":{"&:after":{content:"'\u{1D465}'"}},".cm-completionIcon-constant":{"&:after":{content:"'\u{1D436}'"}},".cm-completionIcon-type":{"&:after":{content:"'\u{1D461}'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222A'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25A1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\u{1F511}\uFE0E'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25A2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});var Cf={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Ss=me.define({map(r,e){let t=e.mapPos(r,-1,hr.TrackAfter);return t??void 0}}),Pm=me.define({map(r,e){return e.mapPos(r)}}),Im=new class extends Bi{};Im.startSide=1;Im.endSide=-1;var Hw=Mt.define({create(){return Pe.empty},update(r,e){if(e.selection){let t=e.state.doc.lineAt(e.selection.main.head).from,i=e.startState.doc.lineAt(e.startState.selection.main.head).from;t!=e.changes.mapPos(i,-1)&&(r=Pe.empty)}r=r.map(e.changes);for(let t of e.effects)t.is(Ss)?r=r.update({add:[Im.range(t.value,t.value+1)]}):t.is(Pm)&&(r=r.update({filter:i=>i!=t.value}));return r}});function Ww(){return[P9,Hw]}var _m="()[]{}<>";function Gw(r){for(let e=0;e<_m.length;e+=2)if(_m.charCodeAt(e)==r)return _m.charAt(e+1);return Kl(r<128?r:r+1)}function Kw(r,e){return r.languageDataAt("closeBrackets",e)[0]||Cf}var N9=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),P9=le.inputHandler.of((r,e,t,i)=>{if((N9?r.composing:r.compositionStarted)||r.state.readOnly)return!1;let n=r.state.selection.main;if(i.length>2||i.length==2&&Ar(Jt(i,0))==1||e!=n.from||t!=n.to)return!1;let o=R9(r.state,i);return o?(r.dispatch(o),!0):!1}),I9=({state:r,dispatch:e})=>{if(r.readOnly)return!1;let i=Kw(r,r.selection.main.head).brackets||Cf.brackets,n=null,o=r.changeByRange(s=>{if(s.empty){let a=D9(r.doc,s.head);for(let l of i)if(l==a&&fh(r.doc,s.head)==Gw(Jt(l,0)))return{changes:{from:s.head-l.length,to:s.head+l.length},range:K.cursor(s.head-l.length)}}return{range:n=s}});return n||e(r.update(o,{scrollIntoView:!0,userEvent:"delete.backward"})),!n},Qw=[{key:"Backspace",run:I9}];function R9(r,e){let t=Kw(r,r.selection.main.head),i=t.brackets||Cf.brackets;for(let n of i){let o=Gw(Jt(n,0));if(e==n)return o==n?L9(r,n,i.indexOf(n+n+n)>-1,t):B9(r,n,o,t.before||Cf.before);if(e==o&&Jw(r,r.selection.main.from))return F9(r,n,o)}return null}function Jw(r,e){let t=!1;return r.field(Hw).between(0,r.doc.length,i=>{i==e&&(t=!0)}),t}function fh(r,e){let t=r.sliceString(e,e+2);return t.slice(0,Ar(Jt(t,0)))}function D9(r,e){let t=r.sliceString(e-2,e);return Ar(Jt(t,0))==t.length?t:t.slice(1)}function B9(r,e,t,i){let n=null,o=r.changeByRange(s=>{if(!s.empty)return{changes:[{insert:e,from:s.from},{insert:t,from:s.to}],effects:Ss.of(s.to+e.length),range:K.range(s.anchor+e.length,s.head+e.length)};let a=fh(r.doc,s.head);return!a||/\s/.test(a)||i.indexOf(a)>-1?{changes:{insert:e+t,from:s.head},effects:Ss.of(s.head+e.length),range:K.cursor(s.head+e.length)}:{range:n=s}});return n?null:r.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function F9(r,e,t){let i=null,n=r.selection.ranges.map(o=>o.empty&&fh(r.doc,o.head)==t?K.cursor(o.head+t.length):i=o);return i?null:r.update({selection:K.create(n,r.selection.mainIndex),scrollIntoView:!0,effects:r.selection.ranges.map(({from:o})=>Pm.of(o))})}function L9(r,e,t,i){let n=i.stringPrefixes||Cf.stringPrefixes,o=null,s=r.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:e,from:a.to}],effects:Ss.of(a.to+e.length),range:K.range(a.anchor+e.length,a.head+e.length)};let l=a.head,f=fh(r.doc,l),c;if(f==e){if(Lw(r,l))return{changes:{insert:e+e,from:l},effects:Ss.of(l+e.length),range:K.cursor(l+e.length)};if(Jw(r,l)){let u=t&&r.sliceDoc(l,l+e.length*3)==e+e+e;return{range:K.cursor(l+e.length*(u?3:1)),effects:Pm.of(l)}}}else{if(t&&r.sliceDoc(l-2*e.length,l)==e+e&&(c=Uw(r,l-2*e.length,n))>-1&&Lw(r,c))return{changes:{insert:e+e+e+e,from:l},effects:Ss.of(l+e.length),range:K.cursor(l+e.length)};if(r.charCategorizer(l)(f)!=ze.Word&&Uw(r,l,n)>-1&&!U9(r,l,e,n))return{changes:{insert:e+e,from:l},effects:Ss.of(l+e.length),range:K.cursor(l+e.length)}}return{range:o=a}});return o?null:r.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function Lw(r,e){let t=nr(r).resolveInner(e+1);return t.parent&&t.from==e}function U9(r,e,t,i){let n=nr(r).resolveInner(e,-1),o=i.reduce((s,a)=>Math.max(s,a.length),0);for(let s=0;s<5;s++){let a=r.sliceDoc(n.from,Math.min(n.to,n.from+t.length+o)),l=a.indexOf(t);if(!l||l>-1&&i.indexOf(a.slice(0,l))>-1){let c=n.firstChild;for(;c&&c.from==n.from&&c.to-c.from>t.length+l;){if(r.sliceDoc(c.to-t.length,c.to)==t)return!1;c=c.firstChild}return!0}let f=n.to==e&&n.parent;if(!f)break;n=f}return!1}function Uw(r,e,t){let i=r.charCategorizer(e);if(i(r.sliceDoc(e-1,e))!=ze.Word)return e;for(let n of t){let o=e-n.length;if(r.sliceDoc(o,e)==n&&i(r.sliceDoc(o-1,o))!=ze.Word)return o}return-1}function Yw(r={}){return[vi,wi.of(r),M9,V9,O9]}var Rm=[{key:"Ctrl-Space",run:S9},{key:"Escape",run:_9},{key:"ArrowDown",run:oh(!0)},{key:"ArrowUp",run:oh(!1)},{key:"PageDown",run:oh(!0,"page")},{key:"PageUp",run:oh(!1,"page")},{key:"Enter",run:k9}],V9=Zi.highest(cf.computeN([wi],r=>r.facet(wi).defaultKeymap?[Rm]:[]));var Bm=class{constructor(e,t,i){this.from=e,this.to=t,this.diagnostic=i}},Un=class{constructor(e,t,i){this.diagnostics=e,this.panel=t,this.selected=i}static init(e,t,i){let n=e,o=i.facet(Na).markerFilter;o&&(n=o(n));let s=he.set(n.map(a=>a.from==a.to||a.from==a.to-1&&i.doc.lineAt(a.from).to==a.from?he.widget({widget:new Fm(a),diagnostic:a}).range(a.from):he.mark({attributes:{class:"cm-lintRange cm-lintRange-"+a.severity},diagnostic:a}).range(a.from,a.to)),!0);return new Un(s,t,Pa(s))}};function Pa(r,e=null,t=0){let i=null;return r.between(t,1e9,(n,o,{spec:s})=>{if(!(e&&s.diagnostic!=e))return i=new Bm(n,o,s.diagnostic),!1}),i}function q9(r,e){return!!(r.effects.some(t=>t.is(Lm))||r.changes.touchesRange(e.pos))}function $w(r,e){return r.field(ri,!1)?e:e.concat(me.appendConfig.of([ri,le.decorations.compute([ri],t=>{let{selected:i,panel:n}=t.field(ri);return!i||!n||i.from==i.to?he.none:he.set([z9.range(i.from,i.to)])}),H1(H9,{hideOn:q9}),Y9]))}function j9(r,e){return{effects:$w(r,[Lm.of(e)])}}var Lm=me.define(),Um=me.define(),Zw=me.define(),ri=Mt.define({create(){return new Un(he.none,null,null)},update(r,e){if(e.docChanged){let t=r.diagnostics.map(e.changes),i=null;if(r.selected){let n=e.changes.mapPos(r.selected.from,1);i=Pa(t,r.selected.diagnostic,n)||Pa(t,null,n)}r=new Un(t,r.panel,i)}for(let t of e.effects)t.is(Lm)?r=Un.init(t.value,r.panel,e.state):t.is(Um)?r=new Un(r.diagnostics,t.value?Ia.open:null,r.selected):t.is(Zw)&&(r=new Un(r.diagnostics,r.panel,t.value));return r},provide:r=>[vs.from(r,e=>e.panel),le.decorations.from(r,e=>e.diagnostics)]});var z9=he.mark({class:"cm-lintRange cm-lintRange-active"});function H9(r,e,t){let{diagnostics:i}=r.state.field(ri),n=[],o=2e8,s=0;i.between(e-(t<0?1:0),e+(t>0?1:0),(l,f,{spec:c})=>{e>=l&&e<=f&&(l==f||(e>l||t>0)&&(e<f||t<0))&&(n.push(c.diagnostic),o=Math.min(l,o),s=Math.max(f,s))});let a=r.state.facet(Na).tooltipFilter;return a&&(n=a(n)),n.length?{pos:o,end:s,above:r.state.doc.lineAt(o).to<s,create(){return{dom:W9(r,n)}}}:null}function W9(r,e){return Ve("ul",{class:"cm-tooltip-lint"},e.map(t=>r2(r,t,!1)))}var G9=r=>{let e=r.state.field(ri,!1);(!e||!e.panel)&&r.dispatch({effects:$w(r.state,[Um.of(!0)])});let t=ws(r,Ia.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},Xw=r=>{let e=r.state.field(ri,!1);return!e||!e.panel?!1:(r.dispatch({effects:Um.of(!1)}),!0)},K9=r=>{let e=r.state.field(ri,!1);if(!e)return!1;let t=r.state.selection.main,i=e.diagnostics.iter(t.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==t.from&&i.to==t.to)?!1:(r.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},e2=[{key:"Mod-Shift-m",run:G9},{key:"F8",run:K9}],Q9=Qe.fromClass(class{constructor(r){this.view=r,this.timeout=-1,this.set=!0;let{delay:e}=r.state.facet(Na);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){let r=Date.now();if(r<this.lintTime-10)setTimeout(this.run,this.lintTime-r);else{this.set=!1;let{state:e}=this.view,{sources:t}=e.facet(Na);Promise.all(t.map(i=>Promise.resolve(i(this.view)))).then(i=>{let n=i.reduce((o,s)=>o.concat(s));this.view.state.doc==e.doc&&this.view.dispatch(j9(this.view.state,n))},i=>{kr(this.view.state,i)})}}update(r){let e=r.state.facet(Na);(r.docChanged||e!=r.startState.facet(Na))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),Na=oe.define({combine(r){return Object.assign({sources:r.map(e=>e.source)},Er(r.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null}))},enables:Q9});function t2(r){let e=[];if(r)e:for(let{name:t}of r){for(let i=0;i<t.length;i++){let n=t[i];if(/[a-zA-Z]/.test(n)&&!e.some(o=>o.toLowerCase()==n.toLowerCase())){e.push(n);continue e}}e.push("")}return e}function r2(r,e,t){var i;let n=t?t2(e.actions):[];return Ve("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},Ve("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),(i=e.actions)===null||i===void 0?void 0:i.map((o,s)=>{let a=u=>{u.preventDefault();let d=Pa(r.state.field(ri).diagnostics,e);d&&o.apply(r,d.from,d.to)},{name:l}=o,f=n[s]?l.indexOf(n[s]):-1,c=f<0?l:[l.slice(0,f),Ve("u",l.slice(f,f+1)),l.slice(f+1)];return Ve("button",{type:"button",class:"cm-diagnosticAction",onclick:a,onmousedown:a,"aria-label":` Action: ${l}${f<0?"":` (access key "${n[s]})"`}.`},c)}),e.source&&Ve("div",{class:"cm-diagnosticSource"},e.source))}var Fm=class extends $r{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return Ve("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}},ch=class{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=r2(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}},Ia=class{constructor(e){this.view=e,this.items=[];let t=n=>{if(n.keyCode==27)Xw(this.view),this.view.focus();else if(n.keyCode==38||n.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(n.keyCode==40||n.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(n.keyCode==36)this.moveSelection(0);else if(n.keyCode==35)this.moveSelection(this.items.length-1);else if(n.keyCode==13)this.view.focus();else if(n.keyCode>=65&&n.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:o}=this.items[this.selectedIndex],s=t2(o.actions);for(let a=0;a<s.length;a++)if(s[a].toUpperCase().charCodeAt(0)==n.keyCode){let l=Pa(this.view.state.field(ri).diagnostics,o);l&&o.actions[a].apply(e,l.from,l.to)}}else return;n.preventDefault()},i=n=>{for(let o=0;o<this.items.length;o++)this.items[o].dom.contains(n.target)&&this.moveSelection(o)};this.list=Ve("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:i}),this.dom=Ve("div",{class:"cm-panel-lint"},this.list,Ve("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>Xw(this.view)},"\xD7")),this.update()}get selectedIndex(){let e=this.view.state.field(ri).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(ri),i=0,n=!1,o=null;for(e.between(0,this.view.state.doc.length,(s,a,{spec:l})=>{let f=-1,c;for(let u=i;u<this.items.length;u++)if(this.items[u].diagnostic==l.diagnostic){f=u;break}f<0?(c=new ch(this.view,l.diagnostic),this.items.splice(i,0,c),n=!0):(c=this.items[f],f>i&&(this.items.splice(i,f-i),n=!0)),t&&c.diagnostic==t.diagnostic?c.dom.hasAttribute("aria-selected")||(c.dom.setAttribute("aria-selected","true"),o=c):c.dom.hasAttribute("aria-selected")&&c.dom.removeAttribute("aria-selected"),i++});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)n=!0,this.items.pop();this.items.length==0&&(this.items.push(new ch(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),n=!0),o?(this.list.setAttribute("aria-activedescendant",o.id),this.view.requestMeasure({key:this,read:()=>({sel:o.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:s,panel:a})=>{s.top<a.top?this.list.scrollTop-=a.top-s.top:s.bottom>a.bottom&&(this.list.scrollTop+=s.bottom-a.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),n&&this.sync()}sync(){let e=this.list.firstChild;function t(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)t();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(ri),i=Pa(t.diagnostics,this.items[e].diagnostic);!i||this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:Zw.of(i)})}static open(e){return new Ia(e)}};function J9(r,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(r)}</svg>')`}function Dm(r){return J9(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${r}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}var Y9=le.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Dm("#d11")},".cm-lintRange-warning":{backgroundImage:Dm("orange")},".cm-lintRange-info":{backgroundImage:Dm("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});var i2=(()=>[J1(),Y1(),U1(),Hv(),Av(),R1(),L1(),ke.allowMultipleSelections.of(!0),pv(),kv(Sv,{fallback:!0}),Mv(),Ww(),Yw(),q1(),j1(),V1(),Tw(),cf.of([...Qw,...vw,...Nw,...Qv,...yv,...Rm,...e2])])();var X9={pragma:!0,solidity:!0,import:!0,as:!0,from:!0,contract:!0,constructor:!0,is:!0,function:!0,modifier:!0,pure:!0,view:!0,payable:!0,constant:!0,anonymous:!0,indexed:!0,returns:!0,return:!0,event:!0,struct:!0,mapping:!0,interface:!0,using:!0,library:!0,storage:!0,memory:!0,calldata:!0,public:!0,private:!0,external:!0,internal:!0,emit:!0,assembly:!0,abstract:!0,after:!0,catch:!0,final:!0,in:!0,inline:!0,let:!0,match:!0,null:!0,of:!0,relocatable:!0,static:!0,try:!0,typeof:!0,var:!0},$9={pragma:!0,returns:!0,address:!0,contract:!0,function:!0,struct:!0},Z9={wei:!0,szabo:!0,finney:!0,ether:!0},e_={seconds:!0,minutes:!0,hours:!0,days:!0,weeks:!0},n2={block:["coinbase","difficulty","gaslimit","number","timestamp"],msg:["data","sender","sig","value"],tx:["gasprice","origin"]},t_={now:!0,gasleft:!0,blockhash:!0},r_={assert:!0,require:!0,revert:!0,throw:!0},i_={addmod:!0,mulmod:!0,keccak256:!0,sha256:!0,ripemd160:!0,ecrecover:!0},n_={this:!0,selfdestruct:!0,super:!0},o_={type:!0},o2={},s_={if:!0,else:!0,while:!0,do:!0,for:!0,break:!0,continue:!0,switch:!0,case:!0,default:!0},a_={bool:!0,byte:!0,string:!0,enum:!0,address:!0},l_={alias:!0,apply:!0,auto:!0,copyof:!0,define:!0,immutable:!0,implements:!0,macro:!0,mutable:!0,override:!0,partial:!0,promise:!0,reference:!0,sealed:!0,sizeof:!0,supports:!0,typedef:!0,unchecked:!0},f_={abi:["decode","encodePacked","encodeWithSelector","encodeWithSignature","encode"]},c_=["transfer","send","balance","call","delegatecall","staticcall"],u_=["title","author","notice","dev","param","return"],h_={delete:!0,new:!0,true:!0,false:!0},s2=/[+\-*&^%:=<>!|/~]/,d_=/[-]/,Vn;function uh(r,e){let t=r.next();if(t==='"'||t==="'"||t==="`")return e.tokenize=p_(t),e.tokenize(r,e);if(m_(r,e))return"version";if(t==="."&&c_.some(function(o){return r.match(`${o}`)}))return"addressFunction";if(typeof t=="string"&&l2(t,r))return"number";if(typeof t=="string"&&/[[\]{}(),;:.]/.test(t))return v_(t,e);if(t==="/"){if(r.eat("*"))return e.tokenize=a2,a2(r,e);if(r.match(/\/{2}/)){for(t=r.next();t;){if(t==="@"){r.backUp(1),e.grammar="doc";break}t=r.next()}return"doc"}if(r.eat("/"))return r.skipToEnd(),"comment"}if(typeof t=="string"&&d_.test(t)){let o=r.peek();return typeof o=="string"&&l2(o,r)?"number":"operator"}if(typeof t=="string"&&s2.test(t))return r.eatWhile(s2),"operator";r.eatWhile(/[\w$_\xa1-\uffff]/);let i=r.current();if(e.grammar==="doc")return u_.some(function(o){return i===`@${o}`})?"docReserve":"doc";if(i==="solidity"&&e.lastToken==="pragma"&&(e.lastToken=e.lastToken+" "+i),Object.prototype.propertyIsEnumerable.call(X9,i))return(i==="case"||i==="default")&&(Vn="case"),Object.prototype.propertyIsEnumerable.call($9,i)&&(e.lastToken=i),"keyword";if(Object.prototype.propertyIsEnumerable.call(Z9,i))return"etherUnit";if(Object.prototype.propertyIsEnumerable.call(n_,i))return"contractRelated";if(Object.prototype.propertyIsEnumerable.call(s_,i)||Object.prototype.propertyIsEnumerable.call(o_,i)||Object.prototype.propertyIsEnumerable.call(l_,i))return"keyword";if(Object.prototype.propertyIsEnumerable.call(a_,i)||Object.prototype.propertyIsEnumerable.call(e_,i)||g_(i)||x_(i)||b_(i))return e.lastToken+="variable","keyword";if(Object.prototype.propertyIsEnumerable.call(h_,i))return"atom";if(Object.prototype.propertyIsEnumerable.call(r_,i))return"errorHandling";if(Object.prototype.propertyIsEnumerable.call(i_,i))return"mathematicalAndCryptographic";if(Object.prototype.propertyIsEnumerable.call(t_,i)||Object.prototype.propertyIsEnumerable.call(n2,i)&&n2[i].some(function(o){return r.match(`.${o}`)}))return"variable-2";if(i==="abi"&&f_[i].some(function(o){return r.match(`.${o}`)}))return"abi";let n=y_(i,r);return n??((e.lastToken==="functionName("||e.lastToken==="returns(")&&Object.prototype.propertyIsEnumerable.call(o2,i)?(e.lastToken+="variable","variable"):e.lastToken==="function"?(e.lastToken="functionName",e.para==null&&(e.grammar="function",e.para=""),e.para+="functionName","functionName"):e.lastToken==="functionName(variable"?(e.lastToken="functionName(","parameterValue"):e.lastToken==="returns(variable"?(e.lastToken="returns(","parameterValue"):(e.lastToken==="address"&&i==="payable"&&(e.lastToken="address payable"),(e.lastToken==="contract"||e.lastToken==="struct")&&(o2[i]=!0,e.lastToken=null),e.grammar==="function"?"parameterValue":"variable"))}function p_(r){return function(e,t){let i=!1,n,o=!1;for(n=e.next();n!=null;){if(n===r&&!i){o=!0;break}i=!i&&r!=="`"&&n==="\\",n=e.next()}return(o||!(i||r==="`"))&&(t.tokenize=uh),"string"}}function a2(r,e){let t=!1,i=r.next();for(;i;){if(i==="/"&&t){e.tokenize=uh;break}t=i==="*",i=r.next()}return"comment"}function m_(r,e){if(e.lastToken==="pragma solidity")return e.lastToken=null,!e.startOfLine&&(r.match(/[\^{0}][0-9.]+/)||r.match(/[>=]+?[\s]*[0-9.]+[\s]*[<]?[\s]*[0-9.]+/))}function l2(r,e){if(/[\d.]/.test(r))return r==="."?e.match(/^[0-9]+([eE][-+]?[0-9]+)?/):r==="0"?e.match(/^[xX][0-9a-fA-F]+/)||e.match(/^0[0-7]+/):e.match(/^[0-9]*\.?[0-9]*([eE][-+]?[0-9]+)?/),!0}function g_(r){if(r.match(/^[u]?int/)){if(r.indexOf("t")+1===r.length)return!0;let e=Number(r.substr(r.indexOf("t")+1,r.length));return e%8===0&&e<=256}}function x_(r){if(r.match(/^bytes/)){if(r.indexOf("s")+1===r.length)return!0;let e=r.substr(r.indexOf("s")+1,r.length);return Number(e)<=32}}function b_(r){if(r.match(/^[u]?fixed([0-9]+x[0-9]+)?/)){if(r.indexOf("d")+1===r.length)return!0;let e=r.substr(r.indexOf("d")+1,r.length).split("x").map(Number);return e[0]%8===0&&e[0]<=256&&e[1]<=80}}function y_(r,e){if(r.match(/^hex/)&&e.peek()==='"'){let t=!1,i,n="",o="";for(i=e.next();i;){if(o+=i,i==='"'&&t){if(n=o.substring(1,o.length-1),n.match(/^[0-9a-fA-F]+$/))return"number";e.backUp(o.length);break}t=t||i==='"',i=e.next()}}}function v_(r,e){return r===","&&e.para==="functionName(variable"&&(e.para="functionName("),e.para!=null&&e.para.startsWith("functionName")&&(r===")"?e.para.endsWith("(")&&(e.para=e.para.substr(0,e.para.length-1),e.para==="functionName"&&(e.grammar="")):r==="("&&(e.para+=r)),r==="("&&e.lastToken==="functionName"?e.lastToken+=r:r===")"&&e.lastToken==="functionName("?e.lastToken=null:r==="("&&e.lastToken==="returns"?e.lastToken+=r:r===")"&&(e.lastToken==="returns("||e.lastToken==="returns(variable")&&(e.lastToken=null),r==="("&&e.lastToken==="address"&&(e.lastToken+=r),Vn=r,null}var hh=class{constructor(e,t,i,n,o){this.indented=e,this.column=t,this.type=i,this.align=n,this.prev=o}};function Vm(r,e,t){return r.context=new hh(r.indented,e,t,null,r.context),r.context}function f2(r){if(!r.context.prev)return;let e=r.context.type;return(e===")"||e==="]"||e==="}")&&(r.indented=r.context.indented),r.context=r.context.prev}var w_={startState(r){return{tokenize:null,context:new hh(0-r,0,"top",!1,null),indented:0,startOfLine:!0,grammar:null,lastToken:null,para:null}},token(r,e){let t=e.context;if(r.sol()&&(t.align==null&&(t.align=!1),e.indented=r.indentation(),e.startOfLine=!0,t.type==="case"&&(t.type="}"),e.grammar==="doc"&&(e.grammar=null)),r.eatSpace())return null;Vn=null;let i=(e.tokenize||uh)(r,e);return i==="comment"||(t.align==null&&(t.align=!0),Vn==="{"?Vm(e,r.column(),"}"):Vn==="["?Vm(e,r.column(),"]"):Vn==="("?Vm(e,r.column(),")"):Vn==="case"?t.type="case":(Vn==="}"&&t.type==="}"||Vn===t.type)&&f2(e),e.startOfLine=!1),i},indent(r,e,t){if(r.tokenize!==uh&&r.tokenize!=null)return null;let i=r.context,n=e&&e.charAt(0);if(i.type==="case"&&/^(?:case|default)\b/.test(e))return r.context.type="}",i.indented;let o=n===i.type;return i.align?i.column+(o?0:1):i.indented+(o?0:t.unit)},electricChars:"{}):",closeBrackets:"()[]{}''\"\"``",fold:"brace",blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//"},c2=new Iu(Sa.define(w_));var qs={};ta(qs,{BaseContract:()=>Gf,BigNumber:()=>H,Contract:()=>rl,ContractFactory:()=>Zh,FixedNumber:()=>Kt,Signer:()=>Wr,VoidSigner:()=>Io,Wallet:()=>Sn,Wordlist:()=>Wi,constants:()=>tg,errors:()=>ii,getDefaultProvider:()=>dx,logger:()=>uO,providers:()=>px,utils:()=>xx,version:()=>bx,wordlists:()=>nl});var k2=Ri(jm());var d2="logger/5.7.0";var p2=!1,m2=!1,dh={debug:1,default:2,info:2,warning:3,error:4,off:5},g2=dh.default,zm=null;function A_(){try{let r=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test".normalize(e)!=="test")throw new Error("bad normalize")}catch{r.push(e)}}),r.length)throw new Error("missing "+r.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(r){return r.message}return null}var x2=A_(),Hm;(function(r){r.DEBUG="DEBUG",r.INFO="INFO",r.WARNING="WARNING",r.ERROR="ERROR",r.OFF="OFF"})(Hm||(Hm={}));var ii;(function(r){r.UNKNOWN_ERROR="UNKNOWN_ERROR",r.NOT_IMPLEMENTED="NOT_IMPLEMENTED",r.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",r.NETWORK_ERROR="NETWORK_ERROR",r.SERVER_ERROR="SERVER_ERROR",r.TIMEOUT="TIMEOUT",r.BUFFER_OVERRUN="BUFFER_OVERRUN",r.NUMERIC_FAULT="NUMERIC_FAULT",r.MISSING_NEW="MISSING_NEW",r.INVALID_ARGUMENT="INVALID_ARGUMENT",r.MISSING_ARGUMENT="MISSING_ARGUMENT",r.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",r.CALL_EXCEPTION="CALL_EXCEPTION",r.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",r.NONCE_EXPIRED="NONCE_EXPIRED",r.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",r.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",r.TRANSACTION_REPLACED="TRANSACTION_REPLACED",r.ACTION_REJECTED="ACTION_REJECTED"})(ii||(ii={}));var b2="0123456789abcdef",O=class{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){let i=e.toLowerCase();dh[i]==null&&this.throwArgumentError("invalid log level name","logLevel",e),!(g2>dh[i])&&console.log.apply(console,t)}debug(...e){this._log(O.levels.DEBUG,e)}info(...e){this._log(O.levels.INFO,e)}warn(...e){this._log(O.levels.WARNING,e)}makeError(e,t,i){if(m2)return this.makeError("censored error",t,{});t||(t=O.errors.UNKNOWN_ERROR),i||(i={});let n=[];Object.keys(i).forEach(l=>{let f=i[l];try{if(f instanceof Uint8Array){let c="";for(let u=0;u<f.length;u++)c+=b2[f[u]>>4],c+=b2[f[u]&15];n.push(l+"=Uint8Array(0x"+c+")")}else n.push(l+"="+JSON.stringify(f))}catch{n.push(l+"="+JSON.stringify(i[l].toString()))}}),n.push(`code=${t}`),n.push(`version=${this.version}`);let o=e,s="";switch(t){case ii.NUMERIC_FAULT:{s="NUMERIC_FAULT";let l=e;switch(l){case"overflow":case"underflow":case"division-by-zero":s+="-"+l;break;case"negative-power":case"negative-width":s+="-unsupported";break;case"unbound-bitwise-result":s+="-unbound-result";break}break}case ii.CALL_EXCEPTION:case ii.INSUFFICIENT_FUNDS:case ii.MISSING_NEW:case ii.NONCE_EXPIRED:case ii.REPLACEMENT_UNDERPRICED:case ii.TRANSACTION_REPLACED:case ii.UNPREDICTABLE_GAS_LIMIT:s=t;break}s&&(e+=" [ See: https://links.ethers.org/v5-errors-"+s+" ]"),n.length&&(e+=" ("+n.join(", ")+")");let a=new Error(e);return a.reason=o,a.code=t,Object.keys(i).forEach(function(l){a[l]=i[l]}),a}throwError(e,t,i){throw this.makeError(e,t,i)}throwArgumentError(e,t,i){return this.throwError(e,O.errors.INVALID_ARGUMENT,{argument:t,value:i})}assert(e,t,i,n){e||this.throwError(t,i,n)}assertArgument(e,t,i,n){e||this.throwArgumentError(t,i,n)}checkNormalize(e){e==null&&(e="platform missing String.prototype.normalize"),x2&&this.throwError("platform missing String.prototype.normalize",O.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:x2})}checkSafeUint53(e,t){typeof e=="number"&&(t==null&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,O.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,O.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,i){i?i=": "+i:i="",e<t&&this.throwError("missing argument"+i,O.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+i,O.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){(e===Object||e==null)&&this.throwError("missing new",O.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",O.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||e==null)&&this.throwError("missing new",O.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return zm||(zm=new O(d2)),zm}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",O.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),p2){if(!e)return;this.globalLogger().throwError("error censorship permanent",O.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}m2=!!e,p2=!!t}static setLogLevel(e){let t=dh[e.toLowerCase()];if(t==null){O.globalLogger().warn("invalid log level - "+e);return}g2=t}static from(e){return new O(e)}};O.errors=ii;O.levels=Hm;var y2="bytes/5.7.0";var Gt=new O(y2);function w2(r){return!!r.toHexString}function Ra(r){return r.slice||(r.slice=function(){let e=Array.prototype.slice.call(arguments);return Ra(new Uint8Array(Array.prototype.slice.apply(r,e)))}),r}function qn(r){return pe(r)&&!(r.length%2)||Ai(r)}function v2(r){return typeof r=="number"&&r==r&&r%1===0}function Ai(r){if(r==null)return!1;if(r.constructor===Uint8Array)return!0;if(typeof r=="string"||!v2(r.length)||r.length<0)return!1;for(let e=0;e<r.length;e++){let t=r[e];if(!v2(t)||t<0||t>=256)return!1}return!0}function j(r,e){if(e||(e={}),typeof r=="number"){Gt.checkSafeUint53(r,"invalid arrayify value");let t=[];for(;r;)t.unshift(r&255),r=parseInt(String(r/256));return t.length===0&&t.push(0),Ra(new Uint8Array(t))}if(e.allowMissingPrefix&&typeof r=="string"&&r.substring(0,2)!=="0x"&&(r="0x"+r),w2(r)&&(r=r.toHexString()),pe(r)){let t=r.substring(2);t.length%2&&(e.hexPad==="left"?t="0"+t:e.hexPad==="right"?t+="0":Gt.throwArgumentError("hex data is odd-length","value",r));let i=[];for(let n=0;n<t.length;n+=2)i.push(parseInt(t.substring(n,n+2),16));return Ra(new Uint8Array(i))}return Ai(r)?Ra(new Uint8Array(r)):Gt.throwArgumentError("invalid arrayify value","value",r)}function ve(r){let e=r.map(n=>j(n)),t=e.reduce((n,o)=>n+o.length,0),i=new Uint8Array(t);return e.reduce((n,o)=>(i.set(o,n),n+o.length),0),Ra(i)}function ni(r){let e=j(r);if(e.length===0)return e;let t=0;for(;t<e.length&&e[t]===0;)t++;return t&&(e=e.slice(t)),e}function Ts(r,e){r=j(r),r.length>e&&Gt.throwArgumentError("value out of range","value",arguments[0]);let t=new Uint8Array(e);return t.set(r,e-r.length),Ra(t)}function pe(r,e){return!(typeof r!="string"||!r.match(/^0x[0-9A-Fa-f]*$/)||e&&r.length!==2+2*e)}var Wm="0123456789abcdef";function Q(r,e){if(e||(e={}),typeof r=="number"){Gt.checkSafeUint53(r,"invalid hexlify value");let t="";for(;r;)t=Wm[r&15]+t,r=Math.floor(r/16);return t.length?(t.length%2&&(t="0"+t),"0x"+t):"0x00"}if(typeof r=="bigint")return r=r.toString(16),r.length%2?"0x0"+r:"0x"+r;if(e.allowMissingPrefix&&typeof r=="string"&&r.substring(0,2)!=="0x"&&(r="0x"+r),w2(r))return r.toHexString();if(pe(r))return r.length%2&&(e.hexPad==="left"?r="0x0"+r.substring(2):e.hexPad==="right"?r+="0":Gt.throwArgumentError("hex data is odd-length","value",r)),r.toLowerCase();if(Ai(r)){let t="0x";for(let i=0;i<r.length;i++){let n=r[i];t+=Wm[(n&240)>>4]+Wm[n&15]}return t}return Gt.throwArgumentError("invalid hexlify value","value",r)}function Tr(r){if(typeof r!="string")r=Q(r);else if(!pe(r)||r.length%2)return null;return(r.length-2)/2}function qe(r,e,t){return typeof r!="string"?r=Q(r):(!pe(r)||r.length%2)&&Gt.throwArgumentError("invalid hexData","value",r),e=2+2*e,t!=null?"0x"+r.substring(e,2+2*t):"0x"+r.substring(e)}function Xt(r){let e="0x";return r.forEach(t=>{e+=Q(t).substring(2)}),e}function un(r){let e=Gm(Q(r,{hexPad:"left"}));return e==="0x"?"0x0":e}function Gm(r){typeof r!="string"&&(r=Q(r)),pe(r)||Gt.throwArgumentError("invalid hex string","value",r),r=r.substring(2);let e=0;for(;e<r.length&&r[e]==="0";)e++;return"0x"+r.substring(e)}function Se(r,e){for(typeof r!="string"?r=Q(r):pe(r)||Gt.throwArgumentError("invalid hex string","value",r),r.length>2*e+2&&Gt.throwArgumentError("value out of range","value",arguments[1]);r.length<2*e+2;)r="0x0"+r.substring(2);return r}function hn(r){let e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(qn(r)){let t=j(r);t.length===64?(e.v=27+(t[32]>>7),t[32]&=127,e.r=Q(t.slice(0,32)),e.s=Q(t.slice(32,64))):t.length===65?(e.r=Q(t.slice(0,32)),e.s=Q(t.slice(32,64)),e.v=t[64]):Gt.throwArgumentError("invalid signature string","signature",r),e.v<27&&(e.v===0||e.v===1?e.v+=27:Gt.throwArgumentError("signature invalid v byte","signature",r)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(t[32]|=128),e._vs=Q(t.slice(32,64))}else{if(e.r=r.r,e.s=r.s,e.v=r.v,e.recoveryParam=r.recoveryParam,e._vs=r._vs,e._vs!=null){let n=Ts(j(e._vs),32);e._vs=Q(n);let o=n[0]>=128?1:0;e.recoveryParam==null?e.recoveryParam=o:e.recoveryParam!==o&&Gt.throwArgumentError("signature recoveryParam mismatch _vs","signature",r),n[0]&=127;let s=Q(n);e.s==null?e.s=s:e.s!==s&&Gt.throwArgumentError("signature v mismatch _vs","signature",r)}if(e.recoveryParam==null)e.v==null?Gt.throwArgumentError("signature missing v and recoveryParam","signature",r):e.v===0||e.v===1?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(e.v==null)e.v=27+e.recoveryParam;else{let n=e.v===0||e.v===1?e.v:1-e.v%2;e.recoveryParam!==n&&Gt.throwArgumentError("signature recoveryParam mismatch v","signature",r)}e.r==null||!pe(e.r)?Gt.throwArgumentError("signature missing or invalid r","signature",r):e.r=Se(e.r,32),e.s==null||!pe(e.s)?Gt.throwArgumentError("signature missing or invalid s","signature",r):e.s=Se(e.s,32);let t=j(e.s);t[0]>=128&&Gt.throwArgumentError("signature s out of range","signature",r),e.recoveryParam&&(t[0]|=128);let i=Q(t);e._vs&&(pe(e._vs)||Gt.throwArgumentError("signature invalid _vs","signature",r),e._vs=Se(e._vs,32)),e._vs==null?e._vs=i:e._vs!==i&&Gt.throwArgumentError("signature _vs mismatch v and s","signature",r)}return e.yParityAndS=e._vs,e.compact=e.r+e.yParityAndS.substring(2),e}function Tf(r){return r=hn(r),Q(ve([r.r,r.s,r.recoveryParam?"0x1c":"0x1b"]))}var ph="bignumber/5.7.0";var Mf=k2.default.BN,jn=new O(ph),Km={},A2=9007199254740991;function S2(r){return r!=null&&(H.isBigNumber(r)||typeof r=="number"&&r%1===0||typeof r=="string"&&!!r.match(/^-?[0-9]+$/)||pe(r)||typeof r=="bigint"||Ai(r))}var E2=!1,H=class{constructor(e,t){e!==Km&&jn.throwError("cannot call constructor directly; use BigNumber.from",O.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=t,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return jr(Te(this).fromTwos(e))}toTwos(e){return jr(Te(this).toTwos(e))}abs(){return this._hex[0]==="-"?H.from(this._hex.substring(1)):this}add(e){return jr(Te(this).add(Te(e)))}sub(e){return jr(Te(this).sub(Te(e)))}div(e){return H.from(e).isZero()&&Ei("division-by-zero","div"),jr(Te(this).div(Te(e)))}mul(e){return jr(Te(this).mul(Te(e)))}mod(e){let t=Te(e);return t.isNeg()&&Ei("division-by-zero","mod"),jr(Te(this).umod(t))}pow(e){let t=Te(e);return t.isNeg()&&Ei("negative-power","pow"),jr(Te(this).pow(t))}and(e){let t=Te(e);return(this.isNegative()||t.isNeg())&&Ei("unbound-bitwise-result","and"),jr(Te(this).and(t))}or(e){let t=Te(e);return(this.isNegative()||t.isNeg())&&Ei("unbound-bitwise-result","or"),jr(Te(this).or(t))}xor(e){let t=Te(e);return(this.isNegative()||t.isNeg())&&Ei("unbound-bitwise-result","xor"),jr(Te(this).xor(t))}mask(e){return(this.isNegative()||e<0)&&Ei("negative-width","mask"),jr(Te(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&Ei("negative-width","shl"),jr(Te(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&Ei("negative-width","shr"),jr(Te(this).shrn(e))}eq(e){return Te(this).eq(Te(e))}lt(e){return Te(this).lt(Te(e))}lte(e){return Te(this).lte(Te(e))}gt(e){return Te(this).gt(Te(e))}gte(e){return Te(this).gte(Te(e))}isNegative(){return this._hex[0]==="-"}isZero(){return Te(this).isZero()}toNumber(){try{return Te(this).toNumber()}catch{Ei("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return jn.throwError("this platform does not support BigInt",O.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(arguments[0]===10?E2||(E2=!0,jn.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):arguments[0]===16?jn.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",O.errors.UNEXPECTED_ARGUMENT,{}):jn.throwError("BigNumber.toString does not accept parameters",O.errors.UNEXPECTED_ARGUMENT,{})),Te(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof H)return e;if(typeof e=="string")return e.match(/^-?0x[0-9a-f]+$/i)?new H(Km,Of(e)):e.match(/^-?[0-9]+$/)?new H(Km,Of(new Mf(e))):jn.throwArgumentError("invalid BigNumber string","value",e);if(typeof e=="number")return e%1&&Ei("underflow","BigNumber.from",e),(e>=A2||e<=-A2)&&Ei("overflow","BigNumber.from",e),H.from(String(e));let t=e;if(typeof t=="bigint")return H.from(t.toString());if(Ai(t))return H.from(Q(t));if(t)if(t.toHexString){let i=t.toHexString();if(typeof i=="string")return H.from(i)}else{let i=t._hex;if(i==null&&t.type==="BigNumber"&&(i=t.hex),typeof i=="string"&&(pe(i)||i[0]==="-"&&pe(i.substring(1))))return H.from(i)}return jn.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!!(e&&e._isBigNumber)}};function Of(r){if(typeof r!="string")return Of(r.toString(16));if(r[0]==="-")return r=r.substring(1),r[0]==="-"&&jn.throwArgumentError("invalid hex","value",r),r=Of(r),r==="0x00"?r:"-"+r;if(r.substring(0,2)!=="0x"&&(r="0x"+r),r==="0x")return"0x00";for(r.length%2&&(r="0x0"+r.substring(2));r.length>4&&r.substring(0,4)==="0x00";)r="0x"+r.substring(4);return r}function jr(r){return H.from(Of(r))}function Te(r){let e=H.from(r).toHexString();return e[0]==="-"?new Mf("-"+e.substring(3),16):new Mf(e.substring(2),16)}function Ei(r,e,t){let i={fault:r,operation:e};return t!=null&&(i.value=t),jn.throwError(r,O.errors.NUMERIC_FAULT,i)}function Qm(r){return new Mf(r,36).toString(16)}function Jm(r){return new Mf(r,16).toString(36)}var Fr=new O(ph),Nf={},C2=H.from(0),T2=H.from(-1);function M2(r,e,t,i){let n={fault:e,operation:t};return i!==void 0&&(n.value=i),Fr.throwError(r,O.errors.NUMERIC_FAULT,n)}var Pf="0";for(;Pf.length<256;)Pf+=Pf;function Ym(r){if(typeof r!="number")try{r=H.from(r).toNumber()}catch{}return typeof r=="number"&&r>=0&&r<=256&&!(r%1)?"1"+Pf.substring(0,r):Fr.throwArgumentError("invalid decimal size","decimals",r)}function Da(r,e){e==null&&(e=0);let t=Ym(e);r=H.from(r);let i=r.lt(C2);i&&(r=r.mul(T2));let n=r.mod(t).toString();for(;n.length<t.length-1;)n="0"+n;n=n.match(/^([0-9]*[1-9]|0)(0*)/)[1];let o=r.div(t).toString();return t.length===1?r=o:r=o+"."+n,i&&(r="-"+r),r}function ki(r,e){e==null&&(e=0);let t=Ym(e);(typeof r!="string"||!r.match(/^-?[0-9.]+$/))&&Fr.throwArgumentError("invalid decimal value","value",r);let i=r.substring(0,1)==="-";i&&(r=r.substring(1)),r==="."&&Fr.throwArgumentError("missing value","value",r);let n=r.split(".");n.length>2&&Fr.throwArgumentError("too many decimal points","value",r);let o=n[0],s=n[1];for(o||(o="0"),s||(s="0");s[s.length-1]==="0";)s=s.substring(0,s.length-1);for(s.length>t.length-1&&M2("fractional component exceeds decimals","underflow","parseFixed"),s===""&&(s="0");s.length<t.length-1;)s+="0";let a=H.from(o),l=H.from(s),f=a.mul(t).add(l);return i&&(f=f.mul(T2)),f}var zn=class{constructor(e,t,i,n){e!==Nf&&Fr.throwError("cannot use FixedFormat constructor; use FixedFormat.from",O.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.signed=t,this.width=i,this.decimals=n,this.name=(t?"":"u")+"fixed"+String(i)+"x"+String(n),this._multiplier=Ym(n),Object.freeze(this)}static from(e){if(e instanceof zn)return e;typeof e=="number"&&(e=`fixed128x${e}`);let t=!0,i=128,n=18;if(typeof e=="string"){if(e!=="fixed")if(e==="ufixed")t=!1;else{let o=e.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);o||Fr.throwArgumentError("invalid fixed format","format",e),t=o[1]!=="u",i=parseInt(o[2]),n=parseInt(o[3])}}else if(e){let o=(s,a,l)=>e[s]==null?l:(typeof e[s]!==a&&Fr.throwArgumentError("invalid fixed format ("+s+" not "+a+")","format."+s,e[s]),e[s]);t=o("signed","boolean",t),i=o("width","number",i),n=o("decimals","number",n)}return i%8&&Fr.throwArgumentError("invalid fixed format width (not byte aligned)","format.width",i),n>80&&Fr.throwArgumentError("invalid fixed format (decimals too large)","format.decimals",n),new zn(Nf,t,i,n)}},Kt=class{constructor(e,t,i,n){e!==Nf&&Fr.throwError("cannot use FixedNumber constructor; use FixedNumber.from",O.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.format=n,this._hex=t,this._value=i,this._isFixedNumber=!0,Object.freeze(this)}_checkFormat(e){this.format.name!==e.format.name&&Fr.throwArgumentError("incompatible format; use fixedNumber.toFormat","other",e)}addUnsafe(e){this._checkFormat(e);let t=ki(this._value,this.format.decimals),i=ki(e._value,e.format.decimals);return Kt.fromValue(t.add(i),this.format.decimals,this.format)}subUnsafe(e){this._checkFormat(e);let t=ki(this._value,this.format.decimals),i=ki(e._value,e.format.decimals);return Kt.fromValue(t.sub(i),this.format.decimals,this.format)}mulUnsafe(e){this._checkFormat(e);let t=ki(this._value,this.format.decimals),i=ki(e._value,e.format.decimals);return Kt.fromValue(t.mul(i).div(this.format._multiplier),this.format.decimals,this.format)}divUnsafe(e){this._checkFormat(e);let t=ki(this._value,this.format.decimals),i=ki(e._value,e.format.decimals);return Kt.fromValue(t.mul(this.format._multiplier).div(i),this.format.decimals,this.format)}floor(){let e=this.toString().split(".");e.length===1&&e.push("0");let t=Kt.from(e[0],this.format),i=!e[1].match(/^(0*)$/);return this.isNegative()&&i&&(t=t.subUnsafe(_2.toFormat(t.format))),t}ceiling(){let e=this.toString().split(".");e.length===1&&e.push("0");let t=Kt.from(e[0],this.format),i=!e[1].match(/^(0*)$/);return!this.isNegative()&&i&&(t=t.addUnsafe(_2.toFormat(t.format))),t}round(e){e==null&&(e=0);let t=this.toString().split(".");if(t.length===1&&t.push("0"),(e<0||e>80||e%1)&&Fr.throwArgumentError("invalid decimal count","decimals",e),t[1].length<=e)return this;let i=Kt.from("1"+Pf.substring(0,e),this.format),n=E_.toFormat(this.format);return this.mulUnsafe(i).addUnsafe(n).floor().divUnsafe(i)}isZero(){return this._value==="0.0"||this._value==="0"}isNegative(){return this._value[0]==="-"}toString(){return this._value}toHexString(e){if(e==null)return this._hex;e%8&&Fr.throwArgumentError("invalid byte width","width",e);let t=H.from(this._hex).fromTwos(this.format.width).toTwos(e).toHexString();return Se(t,e/8)}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return Kt.fromString(this._value,e)}static fromValue(e,t,i){return i==null&&t!=null&&!S2(t)&&(i=t,t=null),t==null&&(t=0),i==null&&(i="fixed"),Kt.fromString(Da(e,t),zn.from(i))}static fromString(e,t){t==null&&(t="fixed");let i=zn.from(t),n=ki(e,i.decimals);!i.signed&&n.lt(C2)&&M2("unsigned value cannot be negative","overflow","value",e);let o=null;i.signed?o=n.toTwos(i.width).toHexString():(o=n.toHexString(),o=Se(o,i.width/8));let s=Da(n,i.decimals);return new Kt(Nf,o,s,i)}static fromBytes(e,t){t==null&&(t="fixed");let i=zn.from(t);if(j(e).length>i.width/8)throw new Error("overflow");let n=H.from(e);i.signed&&(n=n.fromTwos(i.width));let o=n.toTwos((i.signed?0:1)+i.width).toHexString(),s=Da(n,i.decimals);return new Kt(Nf,o,s,i)}static from(e,t){if(typeof e=="string")return Kt.fromString(e,t);if(Ai(e))return Kt.fromBytes(e,t);try{return Kt.fromValue(e,0,t)}catch(i){if(i.code!==O.errors.INVALID_ARGUMENT)throw i}return Fr.throwArgumentError("invalid FixedNumber value","value",e)}static isFixedNumber(e){return!!(e&&e._isFixedNumber)}},_2=Kt.from(1),E_=Kt.from("0.5");var O2="properties/5.7.0";var k_=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(c){try{f(i.next(c))}catch(u){s(u)}}function l(c){try{f(i.throw(c))}catch(u){s(u)}}function f(c){c.done?o(c.value):n(c.value).then(a,l)}f((i=i.apply(r,e||[])).next())})},mh=new O(O2);function L(r,e,t){Object.defineProperty(r,e,{enumerable:!0,value:t,writable:!1})}function qt(r,e){for(let t=0;t<32;t++){if(r[e])return r[e];if(!r.prototype||typeof r.prototype!="object")break;r=Object.getPrototypeOf(r.prototype).constructor}return null}function je(r){return k_(this,void 0,void 0,function*(){let e=Object.keys(r).map(i=>{let n=r[i];return Promise.resolve(n).then(o=>({key:i,value:o}))});return(yield Promise.all(e)).reduce((i,n)=>(i[n.key]=n.value,i),{})})}function Ba(r,e){(!r||typeof r!="object")&&mh.throwArgumentError("invalid object","object",r),Object.keys(r).forEach(t=>{e[t]||mh.throwArgumentError("invalid object key - "+t,"transaction:"+t,r)})}function Be(r){let e={};for(let t in r)e[t]=r[t];return e}var S_={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function N2(r){if(r==null||S_[typeof r])return!0;if(Array.isArray(r)||typeof r=="object"){if(!Object.isFrozen(r))return!1;let e=Object.keys(r);for(let t=0;t<e.length;t++){let i=null;try{i=r[e[t]]}catch{continue}if(!N2(i))return!1}return!0}return mh.throwArgumentError(`Cannot deepCopy ${typeof r}`,"object",r)}function __(r){if(N2(r))return r;if(Array.isArray(r))return Object.freeze(r.map(e=>Vt(e)));if(typeof r=="object"){let e={};for(let t in r){let i=r[t];i!==void 0&&L(e,t,Vt(i))}return e}return mh.throwArgumentError(`Cannot deepCopy ${typeof r}`,"object",r)}function Vt(r){return __(r)}var oi=class{constructor(e){for(let t in e)this[t]=Vt(e[t])}};var dn="abi/5.7.0";var Ie=new O(dn),Ms={},P2={calldata:!0,memory:!0,storage:!0},C_={calldata:!0,memory:!0};function gh(r,e){if(r==="bytes"||r==="string"){if(P2[e])return!0}else if(r==="address"){if(e==="payable")return!0}else if((r.indexOf("[")>=0||r==="tuple")&&C_[e])return!0;return(P2[e]||e==="payable")&&Ie.throwArgumentError("invalid modifier","name",e),!1}function T_(r,e){let t=r;function i(a){Ie.throwArgumentError(`unexpected character at position ${a}`,"param",r)}r=r.replace(/\s/g," ");function n(a){let l={type:"",name:"",parent:a,state:{allowType:!0}};return e&&(l.indexed=!1),l}let o={type:"",name:"",state:{allowType:!0}},s=o;for(let a=0;a<r.length;a++){let l=r[a];switch(l){case"(":s.state.allowType&&s.type===""?s.type="tuple":s.state.allowParams||i(a),s.state.allowType=!1,s.type=Fa(s.type),s.components=[n(s)],s=s.components[0];break;case")":delete s.state,s.name==="indexed"&&(e||i(a),s.indexed=!0,s.name=""),gh(s.type,s.name)&&(s.name=""),s.type=Fa(s.type);let f=s;s=s.parent,s||i(a),delete f.parent,s.state.allowParams=!1,s.state.allowName=!0,s.state.allowArray=!0;break;case",":delete s.state,s.name==="indexed"&&(e||i(a),s.indexed=!0,s.name=""),gh(s.type,s.name)&&(s.name=""),s.type=Fa(s.type);let c=n(s.parent);s.parent.components.push(c),delete s.parent,s=c;break;case" ":s.state.allowType&&s.type!==""&&(s.type=Fa(s.type),delete s.state.allowType,s.state.allowName=!0,s.state.allowParams=!0),s.state.allowName&&s.name!==""&&(s.name==="indexed"?(e||i(a),s.indexed&&i(a),s.indexed=!0,s.name=""):gh(s.type,s.name)?s.name="":s.state.allowName=!1);break;case"[":s.state.allowArray||i(a),s.type+=l,s.state.allowArray=!1,s.state.allowName=!1,s.state.readArray=!0;break;case"]":s.state.readArray||i(a),s.type+=l,s.state.readArray=!1,s.state.allowArray=!0,s.state.allowName=!0;break;default:s.state.allowType?(s.type+=l,s.state.allowParams=!0,s.state.allowArray=!0):s.state.allowName?(s.name+=l,delete s.state.allowArray):s.state.readArray?s.type+=l:i(a)}}return s.parent&&Ie.throwArgumentError("unexpected eof","param",r),delete o.state,s.name==="indexed"?(e||i(t.length-7),s.indexed&&i(t.length-7),s.indexed=!0,s.name=""):gh(s.type,s.name)&&(s.name=""),o.type=Fa(o.type),o}function xh(r,e){for(let t in e)L(r,t,e[t])}var Me=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),M_=new RegExp(/^(.*)\[([0-9]*)\]$/),Pt=class{constructor(e,t){e!==Ms&&Ie.throwError("use fromString",O.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),xh(this,t);let i=this.type.match(M_);i?xh(this,{arrayLength:parseInt(i[2]||"-1"),arrayChildren:Pt.fromObject({type:i[1],components:this.components}),baseType:"array"}):xh(this,{arrayLength:null,arrayChildren:null,baseType:this.components!=null?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}format(e){if(e||(e=Me.sighash),Me[e]||Ie.throwArgumentError("invalid format type","format",e),e===Me.json){let i={type:this.baseType==="tuple"?"tuple":this.type,name:this.name||void 0};return typeof this.indexed=="boolean"&&(i.indexed=this.indexed),this.components&&(i.components=this.components.map(n=>JSON.parse(n.format(e)))),JSON.stringify(i)}let t="";return this.baseType==="array"?(t+=this.arrayChildren.format(e),t+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):this.baseType==="tuple"?(e!==Me.sighash&&(t+=this.type),t+="("+this.components.map(i=>i.format(e)).join(e===Me.full?", ":",")+")"):t+=this.type,e!==Me.sighash&&(this.indexed===!0&&(t+=" indexed"),e===Me.full&&this.name&&(t+=" "+this.name)),t}static from(e,t){return typeof e=="string"?Pt.fromString(e,t):Pt.fromObject(e)}static fromObject(e){return Pt.isParamType(e)?e:new Pt(Ms,{name:e.name||null,type:Fa(e.type),indexed:e.indexed==null?null:!!e.indexed,components:e.components?e.components.map(Pt.fromObject):null})}static fromString(e,t){function i(n){return Pt.fromObject({name:n.name,type:n.type,indexed:n.indexed,components:n.components})}return i(T_(e,!!t))}static isParamType(e){return!!(e!=null&&e._isParamType)}};function If(r,e){return N_(r).map(t=>Pt.fromString(t,e))}var Ur=class{constructor(e,t){e!==Ms&&Ie.throwError("use a static from method",O.errors.UNSUPPORTED_OPERATION,{operation:"new Fragment()"}),xh(this,t),this._isFragment=!0,Object.freeze(this)}static from(e){return Ur.isFragment(e)?e:typeof e=="string"?Ur.fromString(e):Ur.fromObject(e)}static fromObject(e){if(Ur.isFragment(e))return e;switch(e.type){case"function":return Or.fromObject(e);case"event":return Lr.fromObject(e);case"constructor":return Mr.fromObject(e);case"error":return si.fromObject(e);case"fallback":case"receive":return null}return Ie.throwArgumentError("invalid fragment object","value",e)}static fromString(e){return e=e.replace(/\s/g," "),e=e.replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," "),e=e.trim(),e.split(" ")[0]==="event"?Lr.fromString(e.substring(5).trim()):e.split(" ")[0]==="function"?Or.fromString(e.substring(8).trim()):e.split("(")[0].trim()==="constructor"?Mr.fromString(e.trim()):e.split(" ")[0]==="error"?si.fromString(e.substring(5).trim()):Ie.throwArgumentError("unsupported fragment","value",e)}static isFragment(e){return!!(e&&e._isFragment)}},Lr=class extends Ur{format(e){if(e||(e=Me.sighash),Me[e]||Ie.throwArgumentError("invalid format type","format",e),e===Me.json)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(i=>JSON.parse(i.format(e)))});let t="";return e!==Me.sighash&&(t+="event "),t+=this.name+"("+this.inputs.map(i=>i.format(e)).join(e===Me.full?", ":",")+") ",e!==Me.sighash&&this.anonymous&&(t+="anonymous "),t.trim()}static from(e){return typeof e=="string"?Lr.fromString(e):Lr.fromObject(e)}static fromObject(e){if(Lr.isEventFragment(e))return e;e.type!=="event"&&Ie.throwArgumentError("invalid event object","value",e);let t={name:Rf(e.name),anonymous:e.anonymous,inputs:e.inputs?e.inputs.map(Pt.fromObject):[],type:"event"};return new Lr(Ms,t)}static fromString(e){let t=e.match(Df);t||Ie.throwArgumentError("invalid event string","value",e);let i=!1;return t[3].split(" ").forEach(n=>{switch(n.trim()){case"anonymous":i=!0;break;case"":break;default:Ie.warn("unknown modifier: "+n)}}),Lr.fromObject({name:t[1].trim(),anonymous:i,inputs:If(t[2],!0),type:"event"})}static isEventFragment(e){return e&&e._isFragment&&e.type==="event"}};function R2(r,e){e.gas=null;let t=r.split("@");return t.length!==1?(t.length>2&&Ie.throwArgumentError("invalid human-readable ABI signature","value",r),t[1].match(/^[0-9]+$/)||Ie.throwArgumentError("invalid human-readable ABI signature gas","value",r),e.gas=H.from(t[1]),t[0]):r}function D2(r,e){e.constant=!1,e.payable=!1,e.stateMutability="nonpayable",r.split(" ").forEach(t=>{switch(t.trim()){case"constant":e.constant=!0;break;case"payable":e.payable=!0,e.stateMutability="payable";break;case"nonpayable":e.payable=!1,e.stateMutability="nonpayable";break;case"pure":e.constant=!0,e.stateMutability="pure";break;case"view":e.constant=!0,e.stateMutability="view";break;case"external":case"public":case"":break;default:console.log("unknown modifier: "+t)}})}function B2(r){let e={constant:!1,payable:!0,stateMutability:"payable"};return r.stateMutability!=null?(e.stateMutability=r.stateMutability,e.constant=e.stateMutability==="view"||e.stateMutability==="pure",r.constant!=null&&!!r.constant!==e.constant&&Ie.throwArgumentError("cannot have constant function with mutability "+e.stateMutability,"value",r),e.payable=e.stateMutability==="payable",r.payable!=null&&!!r.payable!==e.payable&&Ie.throwArgumentError("cannot have payable function with mutability "+e.stateMutability,"value",r)):r.payable!=null?(e.payable=!!r.payable,r.constant==null&&!e.payable&&r.type!=="constructor"&&Ie.throwArgumentError("unable to determine stateMutability","value",r),e.constant=!!r.constant,e.constant?e.stateMutability="view":e.stateMutability=e.payable?"payable":"nonpayable",e.payable&&e.constant&&Ie.throwArgumentError("cannot have constant payable function","value",r)):r.constant!=null?(e.constant=!!r.constant,e.payable=!e.constant,e.stateMutability=e.constant?"view":"payable"):r.type!=="constructor"&&Ie.throwArgumentError("unable to determine stateMutability","value",r),e}var Mr=class extends Ur{format(e){if(e||(e=Me.sighash),Me[e]||Ie.throwArgumentError("invalid format type","format",e),e===Me.json)return JSON.stringify({type:"constructor",stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(i=>JSON.parse(i.format(e)))});e===Me.sighash&&Ie.throwError("cannot format a constructor for sighash",O.errors.UNSUPPORTED_OPERATION,{operation:"format(sighash)"});let t="constructor("+this.inputs.map(i=>i.format(e)).join(e===Me.full?", ":",")+") ";return this.stateMutability&&this.stateMutability!=="nonpayable"&&(t+=this.stateMutability+" "),t.trim()}static from(e){return typeof e=="string"?Mr.fromString(e):Mr.fromObject(e)}static fromObject(e){if(Mr.isConstructorFragment(e))return e;e.type!=="constructor"&&Ie.throwArgumentError("invalid constructor object","value",e);let t=B2(e);t.constant&&Ie.throwArgumentError("constructor cannot be constant","value",e);let i={name:null,type:e.type,inputs:e.inputs?e.inputs.map(Pt.fromObject):[],payable:t.payable,stateMutability:t.stateMutability,gas:e.gas?H.from(e.gas):null};return new Mr(Ms,i)}static fromString(e){let t={type:"constructor"};e=R2(e,t);let i=e.match(Df);return(!i||i[1].trim()!=="constructor")&&Ie.throwArgumentError("invalid constructor string","value",e),t.inputs=If(i[2].trim(),!1),D2(i[3].trim(),t),Mr.fromObject(t)}static isConstructorFragment(e){return e&&e._isFragment&&e.type==="constructor"}},Or=class extends Mr{format(e){if(e||(e=Me.sighash),Me[e]||Ie.throwArgumentError("invalid format type","format",e),e===Me.json)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(i=>JSON.parse(i.format(e))),outputs:this.outputs.map(i=>JSON.parse(i.format(e)))});let t="";return e!==Me.sighash&&(t+="function "),t+=this.name+"("+this.inputs.map(i=>i.format(e)).join(e===Me.full?", ":",")+") ",e!==Me.sighash&&(this.stateMutability?this.stateMutability!=="nonpayable"&&(t+=this.stateMutability+" "):this.constant&&(t+="view "),this.outputs&&this.outputs.length&&(t+="returns ("+this.outputs.map(i=>i.format(e)).join(", ")+") "),this.gas!=null&&(t+="@"+this.gas.toString()+" ")),t.trim()}static from(e){return typeof e=="string"?Or.fromString(e):Or.fromObject(e)}static fromObject(e){if(Or.isFunctionFragment(e))return e;e.type!=="function"&&Ie.throwArgumentError("invalid function object","value",e);let t=B2(e),i={type:e.type,name:Rf(e.name),constant:t.constant,inputs:e.inputs?e.inputs.map(Pt.fromObject):[],outputs:e.outputs?e.outputs.map(Pt.fromObject):[],payable:t.payable,stateMutability:t.stateMutability,gas:e.gas?H.from(e.gas):null};return new Or(Ms,i)}static fromString(e){let t={type:"function"};e=R2(e,t);let i=e.split(" returns ");i.length>2&&Ie.throwArgumentError("invalid function string","value",e);let n=i[0].match(Df);if(n||Ie.throwArgumentError("invalid function signature","value",e),t.name=n[1].trim(),t.name&&Rf(t.name),t.inputs=If(n[2],!1),D2(n[3].trim(),t),i.length>1){let o=i[1].match(Df);(o[1].trim()!=""||o[3].trim()!="")&&Ie.throwArgumentError("unexpected tokens","value",e),t.outputs=If(o[2],!1)}else t.outputs=[];return Or.fromObject(t)}static isFunctionFragment(e){return e&&e._isFragment&&e.type==="function"}};function I2(r){let e=r.format();return(e==="Error(string)"||e==="Panic(uint256)")&&Ie.throwArgumentError(`cannot specify user defined ${e} error`,"fragment",r),r}var si=class extends Ur{format(e){if(e||(e=Me.sighash),Me[e]||Ie.throwArgumentError("invalid format type","format",e),e===Me.json)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(i=>JSON.parse(i.format(e)))});let t="";return e!==Me.sighash&&(t+="error "),t+=this.name+"("+this.inputs.map(i=>i.format(e)).join(e===Me.full?", ":",")+") ",t.trim()}static from(e){return typeof e=="string"?si.fromString(e):si.fromObject(e)}static fromObject(e){if(si.isErrorFragment(e))return e;e.type!=="error"&&Ie.throwArgumentError("invalid error object","value",e);let t={type:e.type,name:Rf(e.name),inputs:e.inputs?e.inputs.map(Pt.fromObject):[]};return I2(new si(Ms,t))}static fromString(e){let t={type:"error"},i=e.match(Df);return i||Ie.throwArgumentError("invalid error signature","value",e),t.name=i[1].trim(),t.name&&Rf(t.name),t.inputs=If(i[2],!1),I2(si.fromObject(t))}static isErrorFragment(e){return e&&e._isFragment&&e.type==="error"}};function Fa(r){return r.match(/^uint($|[^1-9])/)?r="uint256"+r.substring(4):r.match(/^int($|[^1-9])/)&&(r="int256"+r.substring(3)),r}var O_=new RegExp("^[a-zA-Z$_][a-zA-Z0-9$_]*$");function Rf(r){return(!r||!r.match(O_))&&Ie.throwArgumentError(`invalid identifier "${r}"`,"value",r),r}var Df=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$");function N_(r){r=r.trim();let e=[],t="",i=0;for(let n=0;n<r.length;n++){let o=r[n];o===","&&i===0?(e.push(t),t=""):(t+=o,o==="("?i++:o===")"&&(i--,i===-1&&Ie.throwArgumentError("unbalanced parenthesis","value",r)))}return t&&e.push(t),e}var Xm=new O(dn);function La(r){let e=[],t=function(i,n){if(!!Array.isArray(n))for(let o in n){let s=i.slice();s.push(o);try{t(s,n[o])}catch(a){e.push({path:s,error:a})}}};return t([],r),e}var $t=class{constructor(e,t,i,n){this.name=e,this.type=t,this.localName=i,this.dynamic=n}_throwError(e,t){Xm.throwArgumentError(e,this.localName,t)}},Os=class{constructor(e){L(this,"wordSize",e||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(e)}get data(){return Xt(this._data)}get length(){return this._dataLength}_writeData(e){return this._data.push(e),this._dataLength+=e.length,e.length}appendWriter(e){return this._writeData(ve(e._data))}writeBytes(e){let t=j(e),i=t.length%this.wordSize;return i&&(t=ve([t,this._padding.slice(i)])),this._writeData(t)}_getValue(e){let t=j(H.from(e));return t.length>this.wordSize&&Xm.throwError("value out-of-bounds",O.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:t.length}),t.length%this.wordSize&&(t=ve([this._padding.slice(t.length%this.wordSize),t])),t}writeValue(e){return this._writeData(this._getValue(e))}writeUpdatableValue(){let e=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,t=>{this._data[e]=this._getValue(t)}}},Ns=class{constructor(e,t,i,n){L(this,"_data",j(e)),L(this,"wordSize",t||32),L(this,"_coerceFunc",i),L(this,"allowLoose",n),this._offset=0}get data(){return Q(this._data)}get consumed(){return this._offset}static coerce(e,t){let i=e.match("^u?int([0-9]+)$");return i&&parseInt(i[1])<=48&&(t=t.toNumber()),t}coerce(e,t){return this._coerceFunc?this._coerceFunc(e,t):Ns.coerce(e,t)}_peekBytes(e,t,i){let n=Math.ceil(t/this.wordSize)*this.wordSize;return this._offset+n>this._data.length&&(this.allowLoose&&i&&this._offset+t<=this._data.length?n=t:Xm.throwError("data out-of-bounds",O.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+n})),this._data.slice(this._offset,this._offset+n)}subReader(e){return new Ns(this._data.slice(this._offset+e),this.wordSize,this._coerceFunc,this.allowLoose)}readBytes(e,t){let i=this._peekBytes(0,e,!!t);return this._offset+=i.length,i.slice(0,e)}readValue(){return H.from(this.readBytes(this.wordSize))}};var L2=Ri(F2());function we(r){return"0x"+L2.default.keccak_256(j(r))}var yh={};ta(yh,{decode:()=>Bf,encode:()=>Hn});var U2="rlp/5.7.0";var pn=new O(U2);function V2(r){let e=[];for(;r;)e.unshift(r&255),r>>=8;return e}function q2(r,e,t){let i=0;for(let n=0;n<t;n++)i=i*256+r[e+n];return i}function z2(r){if(Array.isArray(r)){let i=[];if(r.forEach(function(o){i=i.concat(z2(o))}),i.length<=55)return i.unshift(192+i.length),i;let n=V2(i.length);return n.unshift(247+n.length),n.concat(i)}qn(r)||pn.throwArgumentError("RLP object must be BytesLike","object",r);let e=Array.prototype.slice.call(j(r));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;let t=V2(e.length);return t.unshift(183+t.length),t.concat(e)}function Hn(r){return Q(z2(r))}function j2(r,e,t,i){let n=[];for(;t<e+1+i;){let o=H2(r,t);n.push(o.result),t+=o.consumed,t>e+1+i&&pn.throwError("child data too short",O.errors.BUFFER_OVERRUN,{})}return{consumed:1+i,result:n}}function H2(r,e){if(r.length===0&&pn.throwError("data too short",O.errors.BUFFER_OVERRUN,{}),r[e]>=248){let t=r[e]-247;e+1+t>r.length&&pn.throwError("data short segment too short",O.errors.BUFFER_OVERRUN,{});let i=q2(r,e+1,t);return e+1+t+i>r.length&&pn.throwError("data long segment too short",O.errors.BUFFER_OVERRUN,{}),j2(r,e,e+1+t,t+i)}else if(r[e]>=192){let t=r[e]-192;return e+1+t>r.length&&pn.throwError("data array too short",O.errors.BUFFER_OVERRUN,{}),j2(r,e,e+1,t)}else if(r[e]>=184){let t=r[e]-183;e+1+t>r.length&&pn.throwError("data array too short",O.errors.BUFFER_OVERRUN,{});let i=q2(r,e+1,t);e+1+t+i>r.length&&pn.throwError("data array too short",O.errors.BUFFER_OVERRUN,{});let n=Q(r.slice(e+1+t,e+1+t+i));return{consumed:1+t+i,result:n}}else if(r[e]>=128){let t=r[e]-128;e+1+t>r.length&&pn.throwError("data too short",O.errors.BUFFER_OVERRUN,{});let i=Q(r.slice(e+1,e+1+t));return{consumed:1+t,result:i}}return{consumed:1,result:Q(r[e])}}function Bf(r){let e=j(r),t=H2(e,0);return t.consumed!==e.length&&pn.throwArgumentError("invalid rlp data","data",r),t.result}var W2="address/5.7.0";var Mo=new O(W2);function G2(r){pe(r,20)||Mo.throwArgumentError("invalid address","address",r),r=r.toLowerCase();let e=r.substring(2).split(""),t=new Uint8Array(40);for(let n=0;n<40;n++)t[n]=e[n].charCodeAt(0);let i=j(we(t));for(let n=0;n<40;n+=2)i[n>>1]>>4>=8&&(e[n]=e[n].toUpperCase()),(i[n>>1]&15)>=8&&(e[n+1]=e[n+1].toUpperCase());return"0x"+e.join("")}var P_=9007199254740991;function I_(r){return Math.log10?Math.log10(r):Math.log(r)/Math.LN10}var $m={};for(let r=0;r<10;r++)$m[String(r)]=String(r);for(let r=0;r<26;r++)$m[String.fromCharCode(65+r)]=String(10+r);var K2=Math.floor(I_(P_));function Q2(r){r=r.toUpperCase(),r=r.substring(4)+r.substring(0,2)+"00";let e=r.split("").map(i=>$m[i]).join("");for(;e.length>=K2;){let i=e.substring(0,K2);e=parseInt(i,10)%97+e.substring(i.length)}let t=String(98-parseInt(e,10)%97);for(;t.length<2;)t="0"+t;return t}function Ae(r){let e=null;if(typeof r!="string"&&Mo.throwArgumentError("invalid address","address",r),r.match(/^(0x)?[0-9a-fA-F]{40}$/))r.substring(0,2)!=="0x"&&(r="0x"+r),e=G2(r),r.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==r&&Mo.throwArgumentError("bad address checksum","address",r);else if(r.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(r.substring(2,4)!==Q2(r)&&Mo.throwArgumentError("bad icap checksum","address",r),e=Qm(r.substring(4));e.length<40;)e="0"+e;e=G2("0x"+e)}else Mo.throwArgumentError("invalid address","address",r);return e}function J2(r){try{return Ae(r),!0}catch{}return!1}function Y2(r){let e=Jm(Ae(r).substring(2)).toUpperCase();for(;e.length<30;)e="0"+e;return"XE"+Q2("XE00"+e)+e}function Ps(r){let e=null;try{e=Ae(r.from)}catch{Mo.throwArgumentError("missing from address","transaction",r)}let t=ni(j(H.from(r.nonce).toHexString()));return Ae(qe(we(Hn([e,t])),12))}function X2(r,e,t){return Tr(e)!==32&&Mo.throwArgumentError("salt must be 32 bytes","salt",e),Tr(t)!==32&&Mo.throwArgumentError("initCodeHash must be 32 bytes","initCodeHash",t),Ae(qe(we(ve(["0xff",Ae(r),e,t])),12))}var vh=class extends $t{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){try{t=Ae(t)}catch(i){this._throwError(i.message,t)}return e.writeValue(t)}decode(e){return Ae(Se(e.readValue().toHexString(),20))}};var wh=class extends $t{constructor(e){super(e.name,e.type,void 0,e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,t){return this.coder.encode(e,t)}decode(e){return this.coder.decode(e)}};var Ua=new O(dn);function Zm(r,e,t){let i=null;if(Array.isArray(t))i=t;else if(t&&typeof t=="object"){let l={};i=e.map(f=>{let c=f.localName;return c||Ua.throwError("cannot encode object for signature with missing names",O.errors.INVALID_ARGUMENT,{argument:"values",coder:f,value:t}),l[c]&&Ua.throwError("cannot encode object for signature with duplicate names",O.errors.INVALID_ARGUMENT,{argument:"values",coder:f,value:t}),l[c]=!0,t[c]})}else Ua.throwArgumentError("invalid tuple value","tuple",t);e.length!==i.length&&Ua.throwArgumentError("types/value length mismatch","tuple",t);let n=new Os(r.wordSize),o=new Os(r.wordSize),s=[];e.forEach((l,f)=>{let c=i[f];if(l.dynamic){let u=o.length;l.encode(o,c);let d=n.writeUpdatableValue();s.push(p=>{d(p+u)})}else l.encode(n,c)}),s.forEach(l=>{l(n.length)});let a=r.appendWriter(n);return a+=r.appendWriter(o),a}function eg(r,e){let t=[],i=r.subReader(0);e.forEach(o=>{let s=null;if(o.dynamic){let a=r.readValue(),l=i.subReader(a.toNumber());try{s=o.decode(l)}catch(f){if(f.code===O.errors.BUFFER_OVERRUN)throw f;s=f,s.baseType=o.name,s.name=o.localName,s.type=o.type}}else try{s=o.decode(r)}catch(a){if(a.code===O.errors.BUFFER_OVERRUN)throw a;s=a,s.baseType=o.name,s.name=o.localName,s.type=o.type}s!=null&&t.push(s)});let n=e.reduce((o,s)=>{let a=s.localName;return a&&(o[a]||(o[a]=0),o[a]++),o},{});e.forEach((o,s)=>{let a=o.localName;if(!a||n[a]!==1||(a==="length"&&(a="_length"),t[a]!=null))return;let l=t[s];l instanceof Error?Object.defineProperty(t,a,{enumerable:!0,get:()=>{throw l}}):t[a]=l});for(let o=0;o<t.length;o++){let s=t[o];s instanceof Error&&Object.defineProperty(t,o,{enumerable:!0,get:()=>{throw s}})}return Object.freeze(t)}var Ah=class extends $t{constructor(e,t,i){let n=e.type+"["+(t>=0?t:"")+"]",o=t===-1||e.dynamic;super("array",n,i,o),this.coder=e,this.length=t}defaultValue(){let e=this.coder.defaultValue(),t=[];for(let i=0;i<this.length;i++)t.push(e);return t}encode(e,t){Array.isArray(t)||this._throwError("expected array value",t);let i=this.length;i===-1&&(i=t.length,e.writeValue(t.length)),Ua.checkArgumentCount(t.length,i,"coder array"+(this.localName?" "+this.localName:""));let n=[];for(let o=0;o<t.length;o++)n.push(this.coder);return Zm(e,n,t)}decode(e){let t=this.length;t===-1&&(t=e.readValue().toNumber(),t*32>e._data.length&&Ua.throwError("insufficient data length",O.errors.BUFFER_OVERRUN,{length:e._data.length,count:t}));let i=[];for(let n=0;n<t;n++)i.push(new wh(this.coder));return e.coerce(this.name,eg(e,i))}};var Eh=class extends $t{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){return e.writeValue(t?1:0)}decode(e){return e.coerce(this.type,!e.readValue().isZero())}};var Ff=class extends $t{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=j(t);let i=e.writeValue(t.length);return i+=e.writeBytes(t),i}decode(e){return e.readBytes(e.readValue().toNumber(),!0)}},kh=class extends Ff{constructor(e){super("bytes",e)}decode(e){return e.coerce(this.name,Q(super.decode(e)))}};var Sh=class extends $t{constructor(e,t){let i="bytes"+String(e);super(i,i,t,!1),this.size=e}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(e,t){let i=j(t);return i.length!==this.size&&this._throwError("incorrect data length",t),e.writeBytes(i)}decode(e){return e.coerce(this.name,Q(e.readBytes(this.size)))}};var _h=class extends $t{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return t!=null&&this._throwError("not null",t),e.writeBytes([])}decode(e){return e.readBytes(0),e.coerce(this.name,null)}};var tg={};ta(tg,{AddressZero:()=>Ch,EtherSymbol:()=>r3,HashZero:()=>qa,MaxInt256:()=>t3,MaxUint256:()=>Oh,MinInt256:()=>e3,NegativeOne:()=>Th,One:()=>Mh,Two:()=>$2,WeiPerEther:()=>Z2,Zero:()=>Va});var Ch="0x0000000000000000000000000000000000000000";var Th=H.from(-1),Va=H.from(0),Mh=H.from(1),$2=H.from(2),Z2=H.from("1000000000000000000"),Oh=H.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),e3=H.from("-0x8000000000000000000000000000000000000000000000000000000000000000"),t3=H.from("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");var qa="0x0000000000000000000000000000000000000000000000000000000000000000";var r3="\u039E";var Nh=class extends $t{constructor(e,t,i){let n=(t?"int":"uint")+e*8;super(n,n,i,!1),this.size=e,this.signed=t}defaultValue(){return 0}encode(e,t){let i=H.from(t),n=Oh.mask(e.wordSize*8);if(this.signed){let o=n.mask(this.size*8-1);(i.gt(o)||i.lt(o.add(Mh).mul(Th)))&&this._throwError("value out-of-bounds",t)}else(i.lt(Va)||i.gt(n.mask(this.size*8)))&&this._throwError("value out-of-bounds",t);return i=i.toTwos(this.size*8).mask(this.size*8),this.signed&&(i=i.fromTwos(this.size*8).toTwos(8*e.wordSize)),e.writeValue(i)}decode(e){let t=e.readValue().mask(this.size*8);return this.signed&&(t=t.fromTwos(this.size*8)),e.coerce(this.name,t)}};var i3="strings/5.7.0";var n3=new O(i3),Vr;(function(r){r.current="",r.NFC="NFC",r.NFD="NFD",r.NFKC="NFKC",r.NFKD="NFKD"})(Vr||(Vr={}));var Nr;(function(r){r.UNEXPECTED_CONTINUE="unexpected continuation byte",r.BAD_PREFIX="bad codepoint prefix",r.OVERRUN="string overrun",r.MISSING_CONTINUE="missing continuation byte",r.OUT_OF_RANGE="out of UTF-8 range",r.UTF16_SURROGATE="UTF-16 surrogate",r.OVERLONG="overlong representation"})(Nr||(Nr={}));function R_(r,e,t,i,n){return n3.throwArgumentError(`invalid codepoint at offset ${e}; ${r}`,"bytes",t)}function o3(r,e,t,i,n){if(r===Nr.BAD_PREFIX||r===Nr.UNEXPECTED_CONTINUE){let o=0;for(let s=e+1;s<t.length&&t[s]>>6===2;s++)o++;return o}return r===Nr.OVERRUN?t.length-e-1:0}function D_(r,e,t,i,n){return r===Nr.OVERLONG?(i.push(n),0):(i.push(65533),o3(r,e,t,i,n))}var Ph=Object.freeze({error:R_,ignore:o3,replace:D_});function ig(r,e){e==null&&(e=Ph.error),r=j(r);let t=[],i=0;for(;i<r.length;){let n=r[i++];if(n>>7===0){t.push(n);continue}let o=null,s=null;if((n&224)===192)o=1,s=127;else if((n&240)===224)o=2,s=2047;else if((n&248)===240)o=3,s=65535;else{(n&192)===128?i+=e(Nr.UNEXPECTED_CONTINUE,i-1,r,t):i+=e(Nr.BAD_PREFIX,i-1,r,t);continue}if(i-1+o>=r.length){i+=e(Nr.OVERRUN,i-1,r,t);continue}let a=n&(1<<8-o-1)-1;for(let l=0;l<o;l++){let f=r[i];if((f&192)!=128){i+=e(Nr.MISSING_CONTINUE,i,r,t),a=null;break}a=a<<6|f&63,i++}if(a!==null){if(a>1114111){i+=e(Nr.OUT_OF_RANGE,i-1-o,r,t,a);continue}if(a>=55296&&a<=57343){i+=e(Nr.UTF16_SURROGATE,i-1-o,r,t,a);continue}if(a<=s){i+=e(Nr.OVERLONG,i-1-o,r,t,a);continue}t.push(a)}}return t}function Re(r,e=Vr.current){e!=Vr.current&&(n3.checkNormalize(),r=r.normalize(e));let t=[];for(let i=0;i<r.length;i++){let n=r.charCodeAt(i);if(n<128)t.push(n);else if(n<2048)t.push(n>>6|192),t.push(n&63|128);else if((n&64512)==55296){i++;let o=r.charCodeAt(i);if(i>=r.length||(o&64512)!==56320)throw new Error("invalid utf-8 string");let s=65536+((n&1023)<<10)+(o&1023);t.push(s>>18|240),t.push(s>>12&63|128),t.push(s>>6&63|128),t.push(s&63|128)}else t.push(n>>12|224),t.push(n>>6&63|128),t.push(n&63|128)}return j(t)}function rg(r){let e="0000"+r.toString(16);return"\\u"+e.substring(e.length-4)}function ng(r,e){return'"'+ig(r,e).map(t=>{if(t<256){switch(t){case 8:return"\\b";case 9:return"\\t";case 10:return"\\n";case 13:return"\\r";case 34:return'\\"';case 92:return"\\\\"}if(t>=32&&t<127)return String.fromCharCode(t)}return t<=65535?rg(t):(t-=65536,rg((t>>10&1023)+55296)+rg((t&1023)+56320))}).join("")+'"'}function Ih(r){return r.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function zr(r,e){return Ih(ig(r,e))}function Oo(r,e=Vr.current){return ig(Re(r,e))}function og(r){let e=Re(r);if(e.length>31)throw new Error("bytes32 string must be less than 32 bytes");return Q(ve([e,qa]).slice(0,32))}function sg(r){let e=j(r);if(e.length!==32)throw new Error("invalid bytes32 - not 32 bytes long");if(e[31]!==0)throw new Error("invalid bytes32 string - no null terminator");let t=31;for(;e[t-1]===0;)t--;return zr(e.slice(0,t))}function B_(r){if(r.length%4!==0)throw new Error("bad data");let e=[];for(let t=0;t<r.length;t+=4)e.push(parseInt(r.substring(t,t+4),16));return e}function ag(r,e){e||(e=function(n){return[parseInt(n,16)]});let t=0,i={};return r.split(",").forEach(n=>{let o=n.split(":");t+=parseInt(o[0],16),i[t]=e(o[1])}),i}function s3(r){let e=0;return r.split(",").map(t=>{let i=t.split("-");i.length===1?i[1]="0":i[1]===""&&(i[1]="1");let n=e+parseInt(i[0],16);return e=parseInt(i[1],16),{l:n,h:e}})}function lg(r,e){let t=0;for(let i=0;i<e.length;i++){let n=e[i];if(t+=n.l,r>=t&&r<=t+n.h&&(r-t)%(n.d||1)===0){if(n.e&&n.e.indexOf(r-t)!==-1)continue;return n}}return null}var F_=s3("221,13-1b,5f-,40-10,51-f,11-3,3-3,2-2,2-4,8,2,15,2d,28-8,88,48,27-,3-5,11-20,27-,8,28,3-5,12,18,b-a,1c-4,6-16,2-d,2-2,2,1b-4,17-9,8f-,10,f,1f-2,1c-34,33-14e,4,36-,13-,6-2,1a-f,4,9-,3-,17,8,2-2,5-,2,8-,3-,4-8,2-3,3,6-,16-6,2-,7-3,3-,17,8,3,3,3-,2,6-3,3-,4-a,5,2-6,10-b,4,8,2,4,17,8,3,6-,b,4,4-,2-e,2-4,b-10,4,9-,3-,17,8,3-,5-,9-2,3-,4-7,3-3,3,4-3,c-10,3,7-2,4,5-2,3,2,3-2,3-2,4-2,9,4-3,6-2,4,5-8,2-e,d-d,4,9,4,18,b,6-3,8,4,5-6,3-8,3-3,b-11,3,9,4,18,b,6-3,8,4,5-6,3-6,2,3-3,b-11,3,9,4,18,11-3,7-,4,5-8,2-7,3-3,b-11,3,13-2,19,a,2-,8-2,2-3,7,2,9-11,4-b,3b-3,1e-24,3,2-,3,2-,2-5,5,8,4,2,2-,3,e,4-,6,2,7-,b-,3-21,49,23-5,1c-3,9,25,10-,2-2f,23,6,3,8-2,5-5,1b-45,27-9,2a-,2-3,5b-4,45-4,53-5,8,40,2,5-,8,2,5-,28,2,5-,20,2,5-,8,2,5-,8,8,18,20,2,5-,8,28,14-5,1d-22,56-b,277-8,1e-2,52-e,e,8-a,18-8,15-b,e,4,3-b,5e-2,b-15,10,b-5,59-7,2b-555,9d-3,5b-5,17-,7-,27-,7-,9,2,2,2,20-,36,10,f-,7,14-,4,a,54-3,2-6,6-5,9-,1c-10,13-1d,1c-14,3c-,10-6,32-b,240-30,28-18,c-14,a0,115-,3,66-,b-76,5,5-,1d,24,2,5-2,2,8-,35-2,19,f-10,1d-3,311-37f,1b,5a-b,d7-19,d-3,41,57-,68-4,29-3,5f,29-37,2e-2,25-c,2c-2,4e-3,30,78-3,64-,20,19b7-49,51a7-59,48e-2,38-738,2ba5-5b,222f-,3c-94,8-b,6-4,1b,6,2,3,3,6d-20,16e-f,41-,37-7,2e-2,11-f,5-b,18-,b,14,5-3,6,88-,2,bf-2,7-,7-,7-,4-2,8,8-9,8-2ff,20,5-b,1c-b4,27-,27-cbb1,f7-9,28-2,b5-221,56,48,3-,2-,3-,5,d,2,5,3,42,5-,9,8,1d,5,6,2-2,8,153-3,123-3,33-27fd,a6da-5128,21f-5df,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3,2-1d,61-ff7d"),L_="ad,34f,1806,180b,180c,180d,200b,200c,200d,2060,feff".split(",").map(r=>parseInt(r,16)),U_=[{h:25,s:32,l:65},{h:30,s:32,e:[23],l:127},{h:54,s:1,e:[48],l:64,d:2},{h:14,s:1,l:57,d:2},{h:44,s:1,l:17,d:2},{h:10,s:1,e:[2,6,8],l:61,d:2},{h:16,s:1,l:68,d:2},{h:84,s:1,e:[18,24,66],l:19,d:2},{h:26,s:32,e:[17],l:435},{h:22,s:1,l:71,d:2},{h:15,s:80,l:40},{h:31,s:32,l:16},{h:32,s:1,l:80,d:2},{h:52,s:1,l:42,d:2},{h:12,s:1,l:55,d:2},{h:40,s:1,e:[38],l:15,d:2},{h:14,s:1,l:48,d:2},{h:37,s:48,l:49},{h:148,s:1,l:6351,d:2},{h:88,s:1,l:160,d:2},{h:15,s:16,l:704},{h:25,s:26,l:854},{h:25,s:32,l:55915},{h:37,s:40,l:1247},{h:25,s:-119711,l:53248},{h:25,s:-119763,l:52},{h:25,s:-119815,l:52},{h:25,s:-119867,e:[1,4,5,7,8,11,12,17],l:52},{h:25,s:-119919,l:52},{h:24,s:-119971,e:[2,7,8,17],l:52},{h:24,s:-120023,e:[2,7,13,15,16,17],l:52},{h:25,s:-120075,l:52},{h:25,s:-120127,l:52},{h:25,s:-120179,l:52},{h:25,s:-120231,l:52},{h:25,s:-120283,l:52},{h:25,s:-120335,l:52},{h:24,s:-119543,e:[17],l:56},{h:24,s:-119601,e:[17],l:58},{h:24,s:-119659,e:[17],l:58},{h:24,s:-119717,e:[17],l:58},{h:24,s:-119775,e:[17],l:58}],V_=ag("b5:3bc,c3:ff,7:73,2:253,5:254,3:256,1:257,5:259,1:25b,3:260,1:263,2:269,1:268,5:26f,1:272,2:275,7:280,3:283,5:288,3:28a,1:28b,5:292,3f:195,1:1bf,29:19e,125:3b9,8b:3b2,1:3b8,1:3c5,3:3c6,1:3c0,1a:3ba,1:3c1,1:3c3,2:3b8,1:3b5,1bc9:3b9,1c:1f76,1:1f77,f:1f7a,1:1f7b,d:1f78,1:1f79,1:1f7c,1:1f7d,107:63,5:25b,4:68,1:68,1:68,3:69,1:69,1:6c,3:6e,4:70,1:71,1:72,1:72,1:72,7:7a,2:3c9,2:7a,2:6b,1:e5,1:62,1:63,3:65,1:66,2:6d,b:3b3,1:3c0,6:64,1b574:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3"),q_=ag("179:1,2:1,2:1,5:1,2:1,a:4f,a:1,8:1,2:1,2:1,3:1,5:1,3:1,4:1,2:1,3:1,4:1,8:2,1:1,2:2,1:1,2:2,27:2,195:26,2:25,1:25,1:25,2:40,2:3f,1:3f,33:1,11:-6,1:-9,1ac7:-3a,6d:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,b:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,c:-8,2:-8,2:-8,2:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,49:-8,1:-8,1:-4a,1:-4a,d:-56,1:-56,1:-56,1:-56,d:-8,1:-8,f:-8,1:-8,3:-7"),j_=ag("df:00730073,51:00690307,19:02BC006E,a7:006A030C,18a:002003B9,16:03B903080301,20:03C503080301,1d7:05650582,190f:00680331,1:00740308,1:0077030A,1:0079030A,1:006102BE,b6:03C50313,2:03C503130300,2:03C503130301,2:03C503130342,2a:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,3:1F7003B9,1:03B103B9,1:03AC03B9,2:03B10342,1:03B1034203B9,5:03B103B9,6:1F7403B9,1:03B703B9,1:03AE03B9,2:03B70342,1:03B7034203B9,5:03B703B9,6:03B903080300,1:03B903080301,3:03B90342,1:03B903080342,b:03C503080300,1:03C503080301,1:03C10313,2:03C50342,1:03C503080342,b:1F7C03B9,1:03C903B9,1:03CE03B9,2:03C90342,1:03C9034203B9,5:03C903B9,ac:00720073,5b:00B00063,6:00B00066,d:006E006F,a:0073006D,1:00740065006C,1:0074006D,124f:006800700061,2:00610075,2:006F0076,b:00700061,1:006E0061,1:03BC0061,1:006D0061,1:006B0061,1:006B0062,1:006D0062,1:00670062,3:00700066,1:006E0066,1:03BC0066,4:0068007A,1:006B0068007A,1:006D0068007A,1:00670068007A,1:00740068007A,15:00700061,1:006B00700061,1:006D00700061,1:006700700061,8:00700076,1:006E0076,1:03BC0076,1:006D0076,1:006B0076,1:006D0076,1:00700077,1:006E0077,1:03BC0077,1:006D0077,1:006B0077,1:006D0077,1:006B03C9,1:006D03C9,2:00620071,3:00632215006B0067,1:0063006F002E,1:00640062,1:00670079,2:00680070,2:006B006B,1:006B006D,9:00700068,2:00700070006D,1:00700072,2:00730076,1:00770062,c723:00660066,1:00660069,1:0066006C,1:006600660069,1:00660066006C,1:00730074,1:00730074,d:05740576,1:05740565,1:0574056B,1:057E0576,1:0574056D",B_),z_=s3("80-20,2a0-,39c,32,f71,18e,7f2-f,19-7,30-4,7-5,f81-b,5,a800-20ff,4d1-1f,110,fa-6,d174-7,2e84-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,2,1f-5f,ff7f-20001");function H_(r){return r.reduce((e,t)=>(t.forEach(i=>{e.push(i)}),e),[])}function W_(r){return!!lg(r,F_)}function G_(r){let e=lg(r,U_);if(e)return[r+e.s];let t=V_[r];if(t)return t;let i=q_[r];if(i)return[r+i[0]];let n=j_[r];return n||null}function K_(r){return!!lg(r,z_)}function fg(r){if(r.match(/^[a-z0-9-]*$/i)&&r.length<=59)return r.toLowerCase();let e=Oo(r);e=H_(e.map(i=>{if(L_.indexOf(i)>=0)return[];if(i>=65024&&i<=65039)return[];let n=G_(i);return n||[i]})),e=Oo(Ih(e),Vr.NFKC),e.forEach(i=>{if(K_(i))throw new Error("STRINGPREP_CONTAINS_PROHIBITED")}),e.forEach(i=>{if(W_(i))throw new Error("STRINGPREP_CONTAINS_UNASSIGNED")});let t=Ih(e);if(t.substring(0,1)==="-"||t.substring(2,4)==="--"||t.substring(t.length-1)==="-")throw new Error("invalid hyphen");return t}var Rh=class extends Ff{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,Re(t))}decode(e){return zr(super.decode(e))}};var Is=class extends $t{constructor(e,t){let i=!1,n=[];e.forEach(s=>{s.dynamic&&(i=!0),n.push(s.type)});let o="tuple("+n.join(",")+")";super("tuple",o,t,i),this.coders=e}defaultValue(){let e=[];this.coders.forEach(i=>{e.push(i.defaultValue())});let t=this.coders.reduce((i,n)=>{let o=n.localName;return o&&(i[o]||(i[o]=0),i[o]++),i},{});return this.coders.forEach((i,n)=>{let o=i.localName;!o||t[o]!==1||(o==="length"&&(o="_length"),e[o]==null&&(e[o]=e[n]))}),Object.freeze(e)}encode(e,t){return Zm(e,this.coders,t)}decode(e){return e.coerce(this.name,eg(e,this.coders))}};var Dh=new O(dn),Q_=new RegExp(/^bytes([0-9]*)$/),J_=new RegExp(/^(u?int)([0-9]*)$/),ja=class{constructor(e){L(this,"coerceFunc",e||null)}_getCoder(e){switch(e.baseType){case"address":return new vh(e.name);case"bool":return new Eh(e.name);case"string":return new Rh(e.name);case"bytes":return new kh(e.name);case"array":return new Ah(this._getCoder(e.arrayChildren),e.arrayLength,e.name);case"tuple":return new Is((e.components||[]).map(i=>this._getCoder(i)),e.name);case"":return new _h(e.name)}let t=e.type.match(J_);if(t){let i=parseInt(t[2]||"256");return(i===0||i>256||i%8!==0)&&Dh.throwArgumentError("invalid "+t[1]+" bit length","param",e),new Nh(i/8,t[1]==="int",e.name)}if(t=e.type.match(Q_),t){let i=parseInt(t[1]);return(i===0||i>32)&&Dh.throwArgumentError("invalid bytes length","param",e),new Sh(i,e.name)}return Dh.throwArgumentError("invalid type","type",e.type)}_getWordSize(){return 32}_getReader(e,t){return new Ns(e,this._getWordSize(),this.coerceFunc,t)}_getWriter(){return new Os(this._getWordSize())}getDefaultValue(e){let t=e.map(n=>this._getCoder(Pt.from(n)));return new Is(t,"_").defaultValue()}encode(e,t){e.length!==t.length&&Dh.throwError("types/values length mismatch",O.errors.INVALID_ARGUMENT,{count:{types:e.length,values:t.length},value:{types:e,values:t}});let i=e.map(s=>this._getCoder(Pt.from(s))),n=new Is(i,"_"),o=this._getWriter();return n.encode(o,t),o.data}decode(e,t,i){let n=e.map(s=>this._getCoder(Pt.from(s)));return new Is(n,"_").decode(this._getReader(j(t),i))}},Lf=new ja;function ai(r){return we(Re(r))}var Bh="hash/5.7.0";var cg={};ta(cg,{decode:()=>za,encode:()=>Ha});function za(r){r=atob(r);let e=[];for(let t=0;t<r.length;t++)e.push(r.charCodeAt(t));return j(e)}function Ha(r){r=j(r);let e="";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return btoa(e)}function l3(r,e){e==null&&(e=1);let t=[],i=t.forEach,n=function(o,s){i.call(o,function(a){s>0&&Array.isArray(a)?n(a,s-1):t.push(a)})};return n(r,e),t}function Y_(r){let e={};for(let t=0;t<r.length;t++){let i=r[t];e[i[0]]=i[1]}return e}function X_(r){let e=0;function t(){return r[e++]<<8|r[e++]}let i=t(),n=1,o=[0,1];for(let D=1;D<i;D++)o.push(n+=t());let s=t(),a=e;e+=s;let l=0,f=0;function c(){return l==0&&(f=f<<8|r[e++],l=8),f>>--l&1}let u=31,d=Math.pow(2,u),p=d>>>1,g=p>>1,b=d-1,k=0;for(let D=0;D<u;D++)k=k<<1|c();let _=[],P=0,N=d;for(;;){let D=Math.floor(((k-P+1)*n-1)/N),B=0,V=i;for(;V-B>1;){let $=B+V>>>1;D<o[$]?V=$:B=$}if(B==0)break;_.push(B);let W=P+Math.floor(N*o[B]/n),Y=P+Math.floor(N*o[B+1]/n)-1;for(;((W^Y)&p)==0;)k=k<<1&b|c(),W=W<<1&b,Y=Y<<1&b|1;for(;W&~Y&g;)k=k&p|k<<1&b>>>1|c(),W=W<<1^p,Y=(Y^p)<<1|p|1;P=W,N=1+Y-W}let I=i-4;return _.map(D=>{switch(D-I){case 3:return I+65792+(r[a++]<<16|r[a++]<<8|r[a++]);case 2:return I+256+(r[a++]<<8|r[a++]);case 1:return I+r[a++];default:return D-1}})}function $_(r){let e=0;return()=>r[e++]}function f3(r){return $_(X_(r))}function Z_(r){return r&1?~r>>1:r>>1}function eC(r,e){let t=Array(r);for(let i=0;i<r;i++)t[i]=1+e();return t}function a3(r,e){let t=Array(r);for(let i=0,n=-1;i<r;i++)t[i]=n+=1+e();return t}function tC(r,e){let t=Array(r);for(let i=0,n=0;i<r;i++)t[i]=n+=Z_(e());return t}function Uf(r,e){let t=a3(r(),r),i=r(),n=a3(i,r),o=eC(i,r);for(let s=0;s<i;s++)for(let a=0;a<o[s];a++)t.push(n[s]+a);return e?t.map(s=>e[s]):t}function c3(r){let e=[];for(;;){let t=r();if(t==0)break;e.push(iC(t,r))}for(;;){let t=r()-1;if(t<0)break;e.push(nC(t,r))}return Y_(l3(e))}function rC(r){let e=[];for(;;){let t=r();if(t==0)break;e.push(t)}return e}function u3(r,e,t){let i=Array(r).fill(void 0).map(()=>[]);for(let n=0;n<e;n++)tC(r,t).forEach((o,s)=>i[s].push(o));return i}function iC(r,e){let t=1+e(),i=e(),n=rC(e),o=u3(n.length,1+r,e);return l3(o.map((s,a)=>{let l=s[0],f=s.slice(1);return Array(n[a]).fill(void 0).map((c,u)=>{let d=u*i;return[l+u*t,f.map(p=>p+d)]})}))}function nC(r,e){let t=1+e();return u3(t,1+r,e).map(n=>[n[0],n.slice(1)])}function h3(r){let e=Uf(r).sort((i,n)=>i-n);return t();function t(){let i=[];for(;;){let f=Uf(r,e);if(f.length==0)break;i.push({set:new Set(f),node:t()})}i.sort((f,c)=>c.set.size-f.set.size);let n=r(),o=n%3;n=n/3|0;let s=!!(n&1);n>>=1;let a=n==1,l=n==2;return{branches:i,valid:o,fe0f:s,save:a,check:l}}}function d3(){return f3(za("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA=="))}var Fh=d3(),oC=new Set(Uf(Fh)),sC=new Set(Uf(Fh)),aC=c3(Fh),lC=h3(Fh),p3=45,m3=95;function g3(r){return Oo(r)}function fC(r){return r.filter(e=>e!=65039)}function x3(r){for(let e of r.split(".")){let t=g3(e);try{for(let i=t.lastIndexOf(m3)-1;i>=0;i--)if(t[i]!==m3)throw new Error("underscore only allowed at start");if(t.length>=4&&t.every(i=>i<128)&&t[2]===p3&&t[3]===p3)throw new Error("invalid label extension")}catch(i){throw new Error(`Invalid label "${e}": ${i.message}`)}}return r}function b3(r){return x3(cC(r,fC))}function cC(r,e){let t=g3(r).reverse(),i=[];for(;t.length;){let n=hC(t);if(n){i.push(...e(n));continue}let o=t.pop();if(oC.has(o)){i.push(o);continue}if(sC.has(o))continue;let s=aC[o];if(s){i.push(...s);continue}throw new Error(`Disallowed codepoint: 0x${o.toString(16).toUpperCase()}`)}return x3(uC(String.fromCodePoint(...i)))}function uC(r){return r.normalize("NFC")}function hC(r,e){var t;let i=lC,n,o,s=[],a=r.length;for(e&&(e.length=0);a;){let l=r[--a];if(i=(t=i.branches.find(f=>f.set.has(l)))===null||t===void 0?void 0:t.node,!i)break;if(i.save)o=l;else if(i.check&&l===o)break;s.push(l),i.fe0f&&(s.push(65039),a>0&&r[a-1]==65039&&a--),i.valid&&(n=s.slice(),i.valid==2&&n.splice(1,1),e&&e.push(...r.slice(a).reverse()),r.length=a)}return n}var dC=new O(Bh),v3=new Uint8Array(32);v3.fill(0);function y3(r){if(r.length===0)throw new Error("invalid ENS name; empty component");return r}function ug(r){let e=Re(b3(r)),t=[];if(r.length===0)return t;let i=0;for(let n=0;n<e.length;n++)e[n]===46&&(t.push(y3(e.slice(i,n))),i=n+1);if(i>=e.length)throw new Error("invalid ENS name; empty component");return t.push(y3(e.slice(i))),t}function hg(r){try{return ug(r).length!==0}catch{}return!1}function No(r){typeof r!="string"&&dC.throwArgumentError("invalid ENS name; not a string","name",r);let e=v3,t=ug(r);for(;t.length;)e=we(ve([e,we(t.pop())]));return Q(e)}function Vf(r){return Q(ve(ug(r).map(e=>{if(e.length>63)throw new Error("invalid DNS encoded entry; length exceeds 63 bytes");let t=new Uint8Array(e.length+1);return t.set(e,1),t[0]=t.length-1,t})))+"00"}var w3=`Ethereum Signed Message:
`;function Wa(r){return typeof r=="string"&&(r=Re(r)),we(ve([Re(w3),Re(String(r.length)),r]))}var pC=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(c){try{f(i.next(c))}catch(u){s(u)}}function l(c){try{f(i.throw(c))}catch(u){s(u)}}function f(c){c.done?o(c.value):n(c.value).then(a,l)}f((i=i.apply(r,e||[])).next())})},jt=new O(Bh),S3=new Uint8Array(32);S3.fill(0);var mC=H.from(-1),_3=H.from(0),C3=H.from(1),gC=H.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function xC(r){let e=j(r),t=e.length%32;return t?Xt([e,S3.slice(t)]):Q(e)}var bC=Se(C3.toHexString(),32),yC=Se(_3.toHexString(),32),A3={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},dg=["name","version","chainId","verifyingContract","salt"];function E3(r){return function(e){return typeof e!="string"&&jt.throwArgumentError(`invalid domain value for ${JSON.stringify(r)}`,`domain.${r}`,e),e}}var vC={name:E3("name"),version:E3("version"),chainId:function(r){try{return H.from(r).toString()}catch{}return jt.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",r)},verifyingContract:function(r){try{return Ae(r).toLowerCase()}catch{}return jt.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",r)},salt:function(r){try{let e=j(r);if(e.length!==32)throw new Error("bad length");return Q(e)}catch{}return jt.throwArgumentError('invalid domain value "salt"',"domain.salt",r)}};function pg(r){{let e=r.match(/^(u?)int(\d*)$/);if(e){let t=e[1]==="",i=parseInt(e[2]||"256");(i%8!==0||i>256||e[2]&&e[2]!==String(i))&&jt.throwArgumentError("invalid numeric width","type",r);let n=gC.mask(t?i-1:i),o=t?n.add(C3).mul(mC):_3;return function(s){let a=H.from(s);return(a.lt(o)||a.gt(n))&&jt.throwArgumentError(`value out-of-bounds for ${r}`,"value",s),Se(a.toTwos(256).toHexString(),32)}}}{let e=r.match(/^bytes(\d+)$/);if(e){let t=parseInt(e[1]);return(t===0||t>32||e[1]!==String(t))&&jt.throwArgumentError("invalid bytes width","type",r),function(i){return j(i).length!==t&&jt.throwArgumentError(`invalid length for ${r}`,"value",i),xC(i)}}}switch(r){case"address":return function(e){return Se(Ae(e),32)};case"bool":return function(e){return e?bC:yC};case"bytes":return function(e){return we(e)};case"string":return function(e){return ai(e)}}return null}function k3(r,e){return`${r}(${e.map(({name:t,type:i})=>i+" "+t).join(",")})`}var zt=class{constructor(e){L(this,"types",Object.freeze(Vt(e))),L(this,"_encoderCache",{}),L(this,"_types",{});let t={},i={},n={};Object.keys(e).forEach(a=>{t[a]={},i[a]=[],n[a]={}});for(let a in e){let l={};e[a].forEach(f=>{l[f.name]&&jt.throwArgumentError(`duplicate variable name ${JSON.stringify(f.name)} in ${JSON.stringify(a)}`,"types",e),l[f.name]=!0;let c=f.type.match(/^([^\x5b]*)(\x5b|$)/)[1];c===a&&jt.throwArgumentError(`circular type reference to ${JSON.stringify(c)}`,"types",e),!pg(c)&&(i[c]||jt.throwArgumentError(`unknown type ${JSON.stringify(c)}`,"types",e),i[c].push(a),t[a][c]=!0)})}let o=Object.keys(i).filter(a=>i[a].length===0);o.length===0?jt.throwArgumentError("missing primary type","types",e):o.length>1&&jt.throwArgumentError(`ambiguous primary types or unused types: ${o.map(a=>JSON.stringify(a)).join(", ")}`,"types",e),L(this,"primaryType",o[0]);function s(a,l){l[a]&&jt.throwArgumentError(`circular type reference to ${JSON.stringify(a)}`,"types",e),l[a]=!0,Object.keys(t[a]).forEach(f=>{!i[f]||(s(f,l),Object.keys(l).forEach(c=>{n[c][f]=!0}))}),delete l[a]}s(this.primaryType,{});for(let a in n){let l=Object.keys(n[a]);l.sort(),this._types[a]=k3(a,e[a])+l.map(f=>k3(f,e[f])).join("")}}getEncoder(e){let t=this._encoderCache[e];return t||(t=this._encoderCache[e]=this._getEncoder(e)),t}_getEncoder(e){{let n=pg(e);if(n)return n}let t=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(t){let n=t[1],o=this.getEncoder(n),s=parseInt(t[3]);return a=>{s>=0&&a.length!==s&&jt.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",a);let l=a.map(o);return this._types[n]&&(l=l.map(we)),we(Xt(l))}}let i=this.types[e];if(i){let n=ai(this._types[e]);return o=>{let s=i.map(({name:a,type:l})=>{let f=this.getEncoder(l)(o[a]);return this._types[l]?we(f):f});return s.unshift(n),Xt(s)}}return jt.throwArgumentError(`unknown type: ${e}`,"type",e)}encodeType(e){let t=this._types[e];return t||jt.throwArgumentError(`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return we(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,i){if(pg(e))return i(e,t);let n=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(n){let s=n[1],a=parseInt(n[3]);return a>=0&&t.length!==a&&jt.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",t),t.map(l=>this._visit(s,l,i))}let o=this.types[e];return o?o.reduce((s,{name:a,type:l})=>(s[a]=this._visit(l,t[a],i),s),{}):jt.throwArgumentError(`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new zt(e)}static getPrimaryType(e){return zt.from(e).primaryType}static hashStruct(e,t,i){return zt.from(t).hashStruct(e,i)}static hashDomain(e){let t=[];for(let i in e){let n=A3[i];n||jt.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(i)}`,"domain",e),t.push({name:i,type:n})}return t.sort((i,n)=>dg.indexOf(i.name)-dg.indexOf(n.name)),zt.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,i){return Xt(["0x1901",zt.hashDomain(e),zt.from(t).hash(i)])}static hash(e,t,i){return we(zt.encode(e,t,i))}static resolveNames(e,t,i,n){return pC(this,void 0,void 0,function*(){e=Be(e);let o={};e.verifyingContract&&!pe(e.verifyingContract,20)&&(o[e.verifyingContract]="0x");let s=zt.from(t);s.visit(i,(a,l)=>(a==="address"&&!pe(l,20)&&(o[l]="0x"),l));for(let a in o)o[a]=yield n(a);return e.verifyingContract&&o[e.verifyingContract]&&(e.verifyingContract=o[e.verifyingContract]),i=s.visit(i,(a,l)=>a==="address"&&o[l]?o[l]:l),{domain:e,value:i}})}static getPayload(e,t,i){zt.hashDomain(e);let n={},o=[];dg.forEach(l=>{let f=e[l];f!=null&&(n[l]=vC[l](f),o.push({name:l,type:A3[l]}))});let s=zt.from(t),a=Be(t);return a.EIP712Domain?jt.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",t):a.EIP712Domain=o,s.encode(i),{types:a,domain:n,primaryType:s.primaryType,message:s.visit(i,(l,f)=>{if(l.match(/^bytes(\d*)/))return Q(j(f));if(l.match(/^u?int/))return H.from(f).toString();switch(l){case"address":return f.toLowerCase();case"bool":return!!f;case"string":return typeof f!="string"&&jt.throwArgumentError("invalid string","value",f),f}return jt.throwArgumentError("unsupported type","type",l)})}}};var Ht=new O(dn);var Ga=class extends oi{},Ka=class extends oi{},mg=class extends oi{},Wn=class extends oi{static isIndexed(e){return!!(e&&e._isIndexed)}},wC={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:!0},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"]}};function T3(r,e){let t=new Error(`deferred error during ABI decoding triggered accessing ${r}`);return t.error=e,t}var Po=class{constructor(e){let t=[];typeof e=="string"?t=JSON.parse(e):t=e,L(this,"fragments",t.map(i=>Ur.from(i)).filter(i=>i!=null)),L(this,"_abiCoder",qt(new.target,"getAbiCoder")()),L(this,"functions",{}),L(this,"errors",{}),L(this,"events",{}),L(this,"structs",{}),this.fragments.forEach(i=>{let n=null;switch(i.type){case"constructor":if(this.deploy){Ht.warn("duplicate definition - constructor");return}L(this,"deploy",i);return;case"function":n=this.functions;break;case"event":n=this.events;break;case"error":n=this.errors;break;default:return}let o=i.format();if(n[o]){Ht.warn("duplicate definition - "+o);return}n[o]=i}),this.deploy||L(this,"deploy",Mr.from({payable:!1,type:"constructor"})),L(this,"_isInterface",!0)}format(e){e||(e=Me.full),e===Me.sighash&&Ht.throwArgumentError("interface does not support formatting sighash","format",e);let t=this.fragments.map(i=>i.format(e));return e===Me.json?JSON.stringify(t.map(i=>JSON.parse(i))):t}static getAbiCoder(){return Lf}static getAddress(e){return Ae(e)}static getSighash(e){return qe(ai(e.format()),0,4)}static getEventTopic(e){return ai(e.format())}getFunction(e){if(pe(e)){for(let i in this.functions)if(e===this.getSighash(i))return this.functions[i];Ht.throwArgumentError("no matching function","sighash",e)}if(e.indexOf("(")===-1){let i=e.trim(),n=Object.keys(this.functions).filter(o=>o.split("(")[0]===i);return n.length===0?Ht.throwArgumentError("no matching function","name",i):n.length>1&&Ht.throwArgumentError("multiple matching functions","name",i),this.functions[n[0]]}let t=this.functions[Or.fromString(e).format()];return t||Ht.throwArgumentError("no matching function","signature",e),t}getEvent(e){if(pe(e)){let i=e.toLowerCase();for(let n in this.events)if(i===this.getEventTopic(n))return this.events[n];Ht.throwArgumentError("no matching event","topichash",i)}if(e.indexOf("(")===-1){let i=e.trim(),n=Object.keys(this.events).filter(o=>o.split("(")[0]===i);return n.length===0?Ht.throwArgumentError("no matching event","name",i):n.length>1&&Ht.throwArgumentError("multiple matching events","name",i),this.events[n[0]]}let t=this.events[Lr.fromString(e).format()];return t||Ht.throwArgumentError("no matching event","signature",e),t}getError(e){if(pe(e)){let i=qt(this.constructor,"getSighash");for(let n in this.errors){let o=this.errors[n];if(e===i(o))return this.errors[n]}Ht.throwArgumentError("no matching error","sighash",e)}if(e.indexOf("(")===-1){let i=e.trim(),n=Object.keys(this.errors).filter(o=>o.split("(")[0]===i);return n.length===0?Ht.throwArgumentError("no matching error","name",i):n.length>1&&Ht.throwArgumentError("multiple matching errors","name",i),this.errors[n[0]]}let t=this.errors[Or.fromString(e).format()];return t||Ht.throwArgumentError("no matching error","signature",e),t}getSighash(e){if(typeof e=="string")try{e=this.getFunction(e)}catch(t){try{e=this.getError(e)}catch{throw t}}return qt(this.constructor,"getSighash")(e)}getEventTopic(e){return typeof e=="string"&&(e=this.getEvent(e)),qt(this.constructor,"getEventTopic")(e)}_decodeParams(e,t){return this._abiCoder.decode(e,t)}_encodeParams(e,t){return this._abiCoder.encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){typeof e=="string"&&(e=this.getError(e));let i=j(t);return Q(i.slice(0,4))!==this.getSighash(e)&&Ht.throwArgumentError(`data signature does not match error ${e.name}.`,"data",Q(i)),this._decodeParams(e.inputs,i.slice(4))}encodeErrorResult(e,t){return typeof e=="string"&&(e=this.getError(e)),Q(ve([this.getSighash(e),this._encodeParams(e.inputs,t||[])]))}decodeFunctionData(e,t){typeof e=="string"&&(e=this.getFunction(e));let i=j(t);return Q(i.slice(0,4))!==this.getSighash(e)&&Ht.throwArgumentError(`data signature does not match function ${e.name}.`,"data",Q(i)),this._decodeParams(e.inputs,i.slice(4))}encodeFunctionData(e,t){return typeof e=="string"&&(e=this.getFunction(e)),Q(ve([this.getSighash(e),this._encodeParams(e.inputs,t||[])]))}decodeFunctionResult(e,t){typeof e=="string"&&(e=this.getFunction(e));let i=j(t),n=null,o="",s=null,a=null,l=null;switch(i.length%this._abiCoder._getWordSize()){case 0:try{return this._abiCoder.decode(e.outputs,i)}catch{}break;case 4:{let f=Q(i.slice(0,4)),c=wC[f];if(c)s=this._abiCoder.decode(c.inputs,i.slice(4)),a=c.name,l=c.signature,c.reason&&(n=s[0]),a==="Error"?o=`; VM Exception while processing transaction: reverted with reason string ${JSON.stringify(s[0])}`:a==="Panic"&&(o=`; VM Exception while processing transaction: reverted with panic code ${s[0]}`);else try{let u=this.getError(f);s=this._abiCoder.decode(u.inputs,i.slice(4)),a=u.name,l=u.format()}catch{}break}}return Ht.throwError("call revert exception"+o,O.errors.CALL_EXCEPTION,{method:e.format(),data:Q(t),errorArgs:s,errorName:a,errorSignature:l,reason:n})}encodeFunctionResult(e,t){return typeof e=="string"&&(e=this.getFunction(e)),Q(this._abiCoder.encode(e.outputs,t||[]))}encodeFilterTopics(e,t){typeof e=="string"&&(e=this.getEvent(e)),t.length>e.inputs.length&&Ht.throwError("too many arguments for "+e.format(),O.errors.UNEXPECTED_ARGUMENT,{argument:"values",value:t});let i=[];e.anonymous||i.push(this.getEventTopic(e));let n=(o,s)=>o.type==="string"?ai(s):o.type==="bytes"?we(Q(s)):(o.type==="bool"&&typeof s=="boolean"&&(s=s?"0x01":"0x00"),o.type.match(/^u?int/)&&(s=H.from(s).toHexString()),o.type==="address"&&this._abiCoder.encode(["address"],[s]),Se(Q(s),32));for(t.forEach((o,s)=>{let a=e.inputs[s];if(!a.indexed){o!=null&&Ht.throwArgumentError("cannot filter non-indexed parameters; must be null","contract."+a.name,o);return}o==null?i.push(null):a.baseType==="array"||a.baseType==="tuple"?Ht.throwArgumentError("filtering with tuples or arrays not supported","contract."+a.name,o):Array.isArray(o)?i.push(o.map(l=>n(a,l))):i.push(n(a,o))});i.length&&i[i.length-1]===null;)i.pop();return i}encodeEventLog(e,t){typeof e=="string"&&(e=this.getEvent(e));let i=[],n=[],o=[];return e.anonymous||i.push(this.getEventTopic(e)),t.length!==e.inputs.length&&Ht.throwArgumentError("event arguments/values mismatch","values",t),e.inputs.forEach((s,a)=>{let l=t[a];if(s.indexed)if(s.type==="string")i.push(ai(l));else if(s.type==="bytes")i.push(we(l));else{if(s.baseType==="tuple"||s.baseType==="array")throw new Error("not implemented");i.push(this._abiCoder.encode([s.type],[l]))}else n.push(s),o.push(l)}),{data:this._abiCoder.encode(n,o),topics:i}}decodeEventLog(e,t,i){if(typeof e=="string"&&(e=this.getEvent(e)),i!=null&&!e.anonymous){let d=this.getEventTopic(e);(!pe(i[0],32)||i[0].toLowerCase()!==d)&&Ht.throwError("fragment/topic mismatch",O.errors.INVALID_ARGUMENT,{argument:"topics[0]",expected:d,value:i[0]}),i=i.slice(1)}let n=[],o=[],s=[];e.inputs.forEach((d,p)=>{d.indexed?d.type==="string"||d.type==="bytes"||d.baseType==="tuple"||d.baseType==="array"?(n.push(Pt.fromObject({type:"bytes32",name:d.name})),s.push(!0)):(n.push(d),s.push(!1)):(o.push(d),s.push(!1))});let a=i!=null?this._abiCoder.decode(n,ve(i)):null,l=this._abiCoder.decode(o,t,!0),f=[],c=0,u=0;e.inputs.forEach((d,p)=>{if(d.indexed)if(a==null)f[p]=new Wn({_isIndexed:!0,hash:null});else if(s[p])f[p]=new Wn({_isIndexed:!0,hash:a[u++]});else try{f[p]=a[u++]}catch(g){f[p]=g}else try{f[p]=l[c++]}catch(g){f[p]=g}if(d.name&&f[d.name]==null){let g=f[p];g instanceof Error?Object.defineProperty(f,d.name,{enumerable:!0,get:()=>{throw T3(`property ${JSON.stringify(d.name)}`,g)}}):f[d.name]=g}});for(let d=0;d<f.length;d++){let p=f[d];p instanceof Error&&Object.defineProperty(f,d,{enumerable:!0,get:()=>{throw T3(`index ${d}`,p)}})}return Object.freeze(f)}parseTransaction(e){let t=this.getFunction(e.data.substring(0,10).toLowerCase());return t?new Ka({args:this._abiCoder.decode(t.inputs,"0x"+e.data.substring(10)),functionFragment:t,name:t.name,signature:t.format(),sighash:this.getSighash(t),value:H.from(e.value||"0")}):null}parseLog(e){let t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new Ga({eventFragment:t,name:t.name,signature:t.format(),topic:this.getEventTopic(t),args:this.decodeEventLog(t,e.data,e.topics)})}parseError(e){let t=Q(e),i=this.getError(t.substring(0,10).toLowerCase());return i?new mg({args:this._abiCoder.decode(i.inputs,"0x"+t.substring(10)),errorFragment:i,name:i.name,signature:i.format(),sighash:this.getSighash(i)}):null}static isInterface(e){return!!(e&&e._isInterface)}};var M3="abstract-provider/5.7.0";var AC=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(c){try{f(i.next(c))}catch(u){s(u)}}function l(c){try{f(i.throw(c))}catch(u){s(u)}}function f(c){c.done?o(c.value):n(c.value).then(a,l)}f((i=i.apply(r,e||[])).next())})},EC=new O(M3),Lh=class extends oi{static isForkEvent(e){return!!(e&&e._isForkEvent)}};var Hr=class{constructor(){EC.checkAbstract(new.target,Hr),L(this,"_isProvider",!0)}getFeeData(){return AC(this,void 0,void 0,function*(){let{block:e,gasPrice:t}=yield je({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch(s=>null)}),i=null,n=null,o=null;return e&&e.baseFeePerGas&&(i=e.baseFeePerGas,o=H.from("1500000000"),n=e.baseFeePerGas.mul(2).add(o)),{lastBaseFeePerGas:i,maxFeePerGas:n,maxPriorityFeePerGas:o,gasPrice:t}})}addListener(e,t){return this.on(e,t)}removeListener(e,t){return this.off(e,t)}static isProvider(e){return!!(e&&e._isProvider)}};var O3="abstract-signer/5.7.0";var Vi=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(c){try{f(i.next(c))}catch(u){s(u)}}function l(c){try{f(i.throw(c))}catch(u){s(u)}}function f(c){c.done?o(c.value):n(c.value).then(a,l)}f((i=i.apply(r,e||[])).next())})},Si=new O(O3),kC=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],SC=[O.errors.INSUFFICIENT_FUNDS,O.errors.NONCE_EXPIRED,O.errors.REPLACEMENT_UNDERPRICED],Wr=class{constructor(){Si.checkAbstract(new.target,Wr),L(this,"_isSigner",!0)}getBalance(e){return Vi(this,void 0,void 0,function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),e)})}getTransactionCount(e){return Vi(this,void 0,void 0,function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),e)})}estimateGas(e){return Vi(this,void 0,void 0,function*(){this._checkProvider("estimateGas");let t=yield je(this.checkTransaction(e));return yield this.provider.estimateGas(t)})}call(e,t){return Vi(this,void 0,void 0,function*(){this._checkProvider("call");let i=yield je(this.checkTransaction(e));return yield this.provider.call(i,t)})}sendTransaction(e){return Vi(this,void 0,void 0,function*(){this._checkProvider("sendTransaction");let t=yield this.populateTransaction(e),i=yield this.signTransaction(t);return yield this.provider.sendTransaction(i)})}getChainId(){return Vi(this,void 0,void 0,function*(){return this._checkProvider("getChainId"),(yield this.provider.getNetwork()).chainId})}getGasPrice(){return Vi(this,void 0,void 0,function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()})}getFeeData(){return Vi(this,void 0,void 0,function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()})}resolveName(e){return Vi(this,void 0,void 0,function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(e)})}checkTransaction(e){for(let i in e)kC.indexOf(i)===-1&&Si.throwArgumentError("invalid transaction key: "+i,"transaction",e);let t=Be(e);return t.from==null?t.from=this.getAddress():t.from=Promise.all([Promise.resolve(t.from),this.getAddress()]).then(i=>(i[0].toLowerCase()!==i[1].toLowerCase()&&Si.throwArgumentError("from address mismatch","transaction",e),i[0])),t}populateTransaction(e){return Vi(this,void 0,void 0,function*(){let t=yield je(this.checkTransaction(e));t.to!=null&&(t.to=Promise.resolve(t.to).then(n=>Vi(this,void 0,void 0,function*(){if(n==null)return null;let o=yield this.resolveName(n);return o==null&&Si.throwArgumentError("provided ENS name resolves to null","tx.to",n),o})),t.to.catch(n=>{}));let i=t.maxFeePerGas!=null||t.maxPriorityFeePerGas!=null;if(t.gasPrice!=null&&(t.type===2||i)?Si.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",e):(t.type===0||t.type===1)&&i&&Si.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",e),(t.type===2||t.type==null)&&t.maxFeePerGas!=null&&t.maxPriorityFeePerGas!=null)t.type=2;else if(t.type===0||t.type===1)t.gasPrice==null&&(t.gasPrice=this.getGasPrice());else{let n=yield this.getFeeData();if(t.type==null)if(n.maxFeePerGas!=null&&n.maxPriorityFeePerGas!=null)if(t.type=2,t.gasPrice!=null){let o=t.gasPrice;delete t.gasPrice,t.maxFeePerGas=o,t.maxPriorityFeePerGas=o}else t.maxFeePerGas==null&&(t.maxFeePerGas=n.maxFeePerGas),t.maxPriorityFeePerGas==null&&(t.maxPriorityFeePerGas=n.maxPriorityFeePerGas);else n.gasPrice!=null?(i&&Si.throwError("network does not support EIP-1559",O.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),t.gasPrice==null&&(t.gasPrice=n.gasPrice),t.type=0):Si.throwError("failed to get consistent fee data",O.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else t.type===2&&(t.maxFeePerGas==null&&(t.maxFeePerGas=n.maxFeePerGas),t.maxPriorityFeePerGas==null&&(t.maxPriorityFeePerGas=n.maxPriorityFeePerGas))}return t.nonce==null&&(t.nonce=this.getTransactionCount("pending")),t.gasLimit==null&&(t.gasLimit=this.estimateGas(t).catch(n=>{if(SC.indexOf(n.code)>=0)throw n;return Si.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",O.errors.UNPREDICTABLE_GAS_LIMIT,{error:n,tx:t})})),t.chainId==null?t.chainId=this.getChainId():t.chainId=Promise.all([Promise.resolve(t.chainId),this.getChainId()]).then(n=>(n[1]!==0&&n[0]!==n[1]&&Si.throwArgumentError("chainId address mismatch","transaction",e),n[0])),yield je(t)})}_checkProvider(e){this.provider||Si.throwError("missing provider",O.errors.UNSUPPORTED_OPERATION,{operation:e||"_checkProvider"})}static isSigner(e){return!!(e&&e._isSigner)}},Io=class extends Wr{constructor(e,t){super(),L(this,"address",e),L(this,"provider",t||null)}getAddress(){return Promise.resolve(this.address)}_fail(e,t){return Promise.resolve().then(()=>{Si.throwError(e,O.errors.UNSUPPORTED_OPERATION,{operation:t})})}signMessage(e){return this._fail("VoidSigner cannot sign messages","signMessage")}signTransaction(e){return this._fail("VoidSigner cannot sign transactions","signTransaction")}_signTypedData(e,t,i){return this._fail("VoidSigner cannot sign typed data","signTypedData")}connect(e){return new Io(this.address,e)}};var ye=Ri(jm()),wn=Ri(Sg());function tl(r,e,t){return t={path:e,exports:{},require:function(i,n){return QT(i,n??t.path)}},r(t,t.exports),t.exports}function QT(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var Mg=pA;function pA(r,e){if(!r)throw new Error(e||"Assertion failed")}pA.equal=function(e,t,i){if(e!=t)throw new Error(i||"Assertion failed: "+e+" != "+t)};var Hi=tl(function(r,e){"use strict";var t=e;function i(s,a){if(Array.isArray(s))return s.slice();if(!s)return[];var l=[];if(typeof s!="string"){for(var f=0;f<s.length;f++)l[f]=s[f]|0;return l}if(a==="hex"){s=s.replace(/[^a-z0-9]+/ig,""),s.length%2!==0&&(s="0"+s);for(var f=0;f<s.length;f+=2)l.push(parseInt(s[f]+s[f+1],16))}else for(var f=0;f<s.length;f++){var c=s.charCodeAt(f),u=c>>8,d=c&255;u?l.push(u,d):l.push(d)}return l}t.toArray=i;function n(s){return s.length===1?"0"+s:s}t.zero2=n;function o(s){for(var a="",l=0;l<s.length;l++)a+=n(s[l].toString(16));return a}t.toHex=o,t.encode=function(a,l){return l==="hex"?o(a):a}}),li=tl(function(r,e){"use strict";var t=e;t.assert=Mg,t.toArray=Hi.toArray,t.zero2=Hi.zero2,t.toHex=Hi.toHex,t.encode=Hi.encode;function i(l,f,c){var u=new Array(Math.max(l.bitLength(),c)+1);u.fill(0);for(var d=1<<f+1,p=l.clone(),g=0;g<u.length;g++){var b,k=p.andln(d-1);p.isOdd()?(k>(d>>1)-1?b=(d>>1)-k:b=k,p.isubn(b)):b=0,u[g]=b,p.iushrn(1)}return u}t.getNAF=i;function n(l,f){var c=[[],[]];l=l.clone(),f=f.clone();for(var u=0,d=0,p;l.cmpn(-u)>0||f.cmpn(-d)>0;){var g=l.andln(3)+u&3,b=f.andln(3)+d&3;g===3&&(g=-1),b===3&&(b=-1);var k;(g&1)===0?k=0:(p=l.andln(7)+u&7,(p===3||p===5)&&b===2?k=-g:k=g),c[0].push(k);var _;(b&1)===0?_=0:(p=f.andln(7)+d&7,(p===3||p===5)&&g===2?_=-b:_=b),c[1].push(_),2*u===k+1&&(u=1-u),2*d===_+1&&(d=1-d),l.iushrn(1),f.iushrn(1)}return c}t.getJSF=n;function o(l,f,c){var u="_"+f;l.prototype[f]=function(){return this[u]!==void 0?this[u]:this[u]=c.call(this)}}t.cachedProperty=o;function s(l){return typeof l=="string"?t.toArray(l,"hex"):l}t.parseBytes=s;function a(l){return new ye.default(l,"hex","le")}t.intFromLE=a}),zh=li.getNAF,JT=li.getJSF,Hh=li.assert;function Bo(r,e){this.type=r,this.p=new ye.default(e.p,16),this.red=e.prime?ye.default.red(e.prime):ye.default.mont(this.p),this.zero=new ye.default(0).toRed(this.red),this.one=new ye.default(1).toRed(this.red),this.two=new ye.default(2).toRed(this.red),this.n=e.n&&new ye.default(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var t=this.n&&this.p.div(this.n);!t||t.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var Ds=Bo;Bo.prototype.point=function(){throw new Error("Not implemented")};Bo.prototype.validate=function(){throw new Error("Not implemented")};Bo.prototype._fixedNafMul=function(e,t){Hh(e.precomputed);var i=e._getDoubles(),n=zh(t,1,this._bitLength),o=(1<<i.step+1)-(i.step%2===0?2:1);o/=3;var s=[],a,l;for(a=0;a<n.length;a+=i.step){l=0;for(var f=a+i.step-1;f>=a;f--)l=(l<<1)+n[f];s.push(l)}for(var c=this.jpoint(null,null,null),u=this.jpoint(null,null,null),d=o;d>0;d--){for(a=0;a<s.length;a++)l=s[a],l===d?u=u.mixedAdd(i.points[a]):l===-d&&(u=u.mixedAdd(i.points[a].neg()));c=c.add(u)}return c.toP()};Bo.prototype._wnafMul=function(e,t){var i=4,n=e._getNAFPoints(i);i=n.wnd;for(var o=n.points,s=zh(t,i,this._bitLength),a=this.jpoint(null,null,null),l=s.length-1;l>=0;l--){for(var f=0;l>=0&&s[l]===0;l--)f++;if(l>=0&&f++,a=a.dblp(f),l<0)break;var c=s[l];Hh(c!==0),e.type==="affine"?c>0?a=a.mixedAdd(o[c-1>>1]):a=a.mixedAdd(o[-c-1>>1].neg()):c>0?a=a.add(o[c-1>>1]):a=a.add(o[-c-1>>1].neg())}return e.type==="affine"?a.toP():a};Bo.prototype._wnafMulAdd=function(e,t,i,n,o){var s=this._wnafT1,a=this._wnafT2,l=this._wnafT3,f=0,c,u,d;for(c=0;c<n;c++){d=t[c];var p=d._getNAFPoints(e);s[c]=p.wnd,a[c]=p.points}for(c=n-1;c>=1;c-=2){var g=c-1,b=c;if(s[g]!==1||s[b]!==1){l[g]=zh(i[g],s[g],this._bitLength),l[b]=zh(i[b],s[b],this._bitLength),f=Math.max(l[g].length,f),f=Math.max(l[b].length,f);continue}var k=[t[g],null,null,t[b]];t[g].y.cmp(t[b].y)===0?(k[1]=t[g].add(t[b]),k[2]=t[g].toJ().mixedAdd(t[b].neg())):t[g].y.cmp(t[b].y.redNeg())===0?(k[1]=t[g].toJ().mixedAdd(t[b]),k[2]=t[g].add(t[b].neg())):(k[1]=t[g].toJ().mixedAdd(t[b]),k[2]=t[g].toJ().mixedAdd(t[b].neg()));var _=[-3,-1,-5,-7,0,7,5,1,3],P=JT(i[g],i[b]);for(f=Math.max(P[0].length,f),l[g]=new Array(f),l[b]=new Array(f),u=0;u<f;u++){var N=P[0][u]|0,I=P[1][u]|0;l[g][u]=_[(N+1)*3+(I+1)],l[b][u]=0,a[g]=k}}var D=this.jpoint(null,null,null),B=this._wnafT4;for(c=f;c>=0;c--){for(var V=0;c>=0;){var W=!0;for(u=0;u<n;u++)B[u]=l[u][c]|0,B[u]!==0&&(W=!1);if(!W)break;V++,c--}if(c>=0&&V++,D=D.dblp(V),c<0)break;for(u=0;u<n;u++){var Y=B[u];Y!==0&&(Y>0?d=a[u][Y-1>>1]:Y<0&&(d=a[u][-Y-1>>1].neg()),d.type==="affine"?D=D.mixedAdd(d):D=D.add(d))}}for(c=0;c<n;c++)a[c]=null;return o?D:D.toP()};function Ci(r,e){this.curve=r,this.type=e,this.precomputed=null}Bo.BasePoint=Ci;Ci.prototype.eq=function(){throw new Error("Not implemented")};Ci.prototype.validate=function(){return this.curve.validate(this)};Bo.prototype.decodePoint=function(e,t){e=li.toArray(e,t);var i=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*i){e[0]===6?Hh(e[e.length-1]%2===0):e[0]===7&&Hh(e[e.length-1]%2===1);var n=this.point(e.slice(1,1+i),e.slice(1+i,1+2*i));return n}else if((e[0]===2||e[0]===3)&&e.length-1===i)return this.pointFromX(e.slice(1,1+i),e[0]===3);throw new Error("Unknown point format")};Ci.prototype.encodeCompressed=function(e){return this.encode(e,!0)};Ci.prototype._encode=function(e){var t=this.curve.p.byteLength(),i=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(i):[4].concat(i,this.getY().toArray("be",t))};Ci.prototype.encode=function(e,t){return li.encode(this._encode(t),e)};Ci.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this};Ci.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return t?t.points.length>=Math.ceil((e.bitLength()+1)/t.step):!1};Ci.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var i=[this],n=this,o=0;o<t;o+=e){for(var s=0;s<e;s++)n=n.dbl();i.push(n)}return{step:e,points:i}};Ci.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],i=(1<<e)-1,n=i===1?null:this.dbl(),o=1;o<i;o++)t[o]=t[o-1].add(n);return{wnd:e,points:t}};Ci.prototype._getBeta=function(){return null};Ci.prototype.dblp=function(e){for(var t=this,i=0;i<e;i++)t=t.dbl();return t};var Og=tl(function(r){typeof Object.create=="function"?r.exports=function(t,i){i&&(t.super_=i,t.prototype=Object.create(i.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:r.exports=function(t,i){if(i){t.super_=i;var n=function(){};n.prototype=i.prototype,t.prototype=new n,t.prototype.constructor=t}}}),YT=li.assert;function Ti(r){Ds.call(this,"short",r),this.a=new ye.default(r.a,16).toRed(this.red),this.b=new ye.default(r.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(r),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}Og(Ti,Ds);var XT=Ti;Ti.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var t,i;if(e.beta)t=new ye.default(e.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);t=n[0].cmp(n[1])<0?n[0]:n[1],t=t.toRed(this.red)}if(e.lambda)i=new ye.default(e.lambda,16);else{var o=this._getEndoRoots(this.n);this.g.mul(o[0]).x.cmp(this.g.x.redMul(t))===0?i=o[0]:(i=o[1],YT(this.g.mul(i).x.cmp(this.g.x.redMul(t))===0))}var s;return e.basis?s=e.basis.map(function(a){return{a:new ye.default(a.a,16),b:new ye.default(a.b,16)}}):s=this._getEndoBasis(i),{beta:t,lambda:i,basis:s}}};Ti.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:ye.default.mont(e),i=new ye.default(2).toRed(t).redInvm(),n=i.redNeg(),o=new ye.default(3).toRed(t).redNeg().redSqrt().redMul(i),s=n.redAdd(o).fromRed(),a=n.redSub(o).fromRed();return[s,a]};Ti.prototype._getEndoBasis=function(e){for(var t=this.n.ushrn(Math.floor(this.n.bitLength()/2)),i=e,n=this.n.clone(),o=new ye.default(1),s=new ye.default(0),a=new ye.default(0),l=new ye.default(1),f,c,u,d,p,g,b,k=0,_,P;i.cmpn(0)!==0;){var N=n.div(i);_=n.sub(N.mul(i)),P=a.sub(N.mul(o));var I=l.sub(N.mul(s));if(!u&&_.cmp(t)<0)f=b.neg(),c=o,u=_.neg(),d=P;else if(u&&++k===2)break;b=_,n=i,i=_,a=o,o=P,l=s,s=I}p=_.neg(),g=P;var D=u.sqr().add(d.sqr()),B=p.sqr().add(g.sqr());return B.cmp(D)>=0&&(p=f,g=c),u.negative&&(u=u.neg(),d=d.neg()),p.negative&&(p=p.neg(),g=g.neg()),[{a:u,b:d},{a:p,b:g}]};Ti.prototype._endoSplit=function(e){var t=this.endo.basis,i=t[0],n=t[1],o=n.b.mul(e).divRound(this.n),s=i.b.neg().mul(e).divRound(this.n),a=o.mul(i.a),l=s.mul(n.a),f=o.mul(i.b),c=s.mul(n.b),u=e.sub(a).sub(l),d=f.add(c).neg();return{k1:u,k2:d}};Ti.prototype.pointFromX=function(e,t){e=new ye.default(e,16),e.red||(e=e.toRed(this.red));var i=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),n=i.redSqrt();if(n.redSqr().redSub(i).cmp(this.zero)!==0)throw new Error("invalid point");var o=n.fromRed().isOdd();return(t&&!o||!t&&o)&&(n=n.redNeg()),this.point(e,n)};Ti.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,i=e.y,n=this.a.redMul(t),o=t.redSqr().redMul(t).redIAdd(n).redIAdd(this.b);return i.redSqr().redISub(o).cmpn(0)===0};Ti.prototype._endoWnafMulAdd=function(e,t,i){for(var n=this._endoWnafT1,o=this._endoWnafT2,s=0;s<e.length;s++){var a=this._endoSplit(t[s]),l=e[s],f=l._getBeta();a.k1.negative&&(a.k1.ineg(),l=l.neg(!0)),a.k2.negative&&(a.k2.ineg(),f=f.neg(!0)),n[s*2]=l,n[s*2+1]=f,o[s*2]=a.k1,o[s*2+1]=a.k2}for(var c=this._wnafMulAdd(1,n,o,s*2,i),u=0;u<s*2;u++)n[u]=null,o[u]=null;return c};function lr(r,e,t,i){Ds.BasePoint.call(this,r,"affine"),e===null&&t===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new ye.default(e,16),this.y=new ye.default(t,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}Og(lr,Ds.BasePoint);Ti.prototype.point=function(e,t,i){return new lr(this,e,t,i)};Ti.prototype.pointFromJSON=function(e,t){return lr.fromJSON(this,e,t)};lr.prototype._getBeta=function(){if(!!this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var i=this.curve,n=function(o){return i.point(o.x.redMul(i.endo.beta),o.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(n)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(n)}}}return t}};lr.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};lr.fromJSON=function(e,t,i){typeof t=="string"&&(t=JSON.parse(t));var n=e.point(t[0],t[1],i);if(!t[2])return n;function o(a){return e.point(a[0],a[1],i)}var s=t[2];return n.precomputed={beta:null,doubles:s.doubles&&{step:s.doubles.step,points:[n].concat(s.doubles.points.map(o))},naf:s.naf&&{wnd:s.naf.wnd,points:[n].concat(s.naf.points.map(o))}},n};lr.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};lr.prototype.isInfinity=function(){return this.inf};lr.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var t=this.y.redSub(e.y);t.cmpn(0)!==0&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var i=t.redSqr().redISub(this.x).redISub(e.x),n=t.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,n)};lr.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var t=this.curve.a,i=this.x.redSqr(),n=e.redInvm(),o=i.redAdd(i).redIAdd(i).redIAdd(t).redMul(n),s=o.redSqr().redISub(this.x.redAdd(this.x)),a=o.redMul(this.x.redSub(s)).redISub(this.y);return this.curve.point(s,a)};lr.prototype.getX=function(){return this.x.fromRed()};lr.prototype.getY=function(){return this.y.fromRed()};lr.prototype.mul=function(e){return e=new ye.default(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};lr.prototype.mulAdd=function(e,t,i){var n=[this,t],o=[e,i];return this.curve.endo?this.curve._endoWnafMulAdd(n,o):this.curve._wnafMulAdd(1,n,o,2)};lr.prototype.jmulAdd=function(e,t,i){var n=[this,t],o=[e,i];return this.curve.endo?this.curve._endoWnafMulAdd(n,o,!0):this.curve._wnafMulAdd(1,n,o,2,!0)};lr.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};lr.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var i=this.precomputed,n=function(o){return o.neg()};t.precomputed={naf:i.naf&&{wnd:i.naf.wnd,points:i.naf.points.map(n)},doubles:i.doubles&&{step:i.doubles.step,points:i.doubles.points.map(n)}}}return t};lr.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function br(r,e,t,i){Ds.BasePoint.call(this,r,"jacobian"),e===null&&t===null&&i===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new ye.default(0)):(this.x=new ye.default(e,16),this.y=new ye.default(t,16),this.z=new ye.default(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}Og(br,Ds.BasePoint);Ti.prototype.jpoint=function(e,t,i){return new br(this,e,t,i)};br.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),i=this.x.redMul(t),n=this.y.redMul(t).redMul(e);return this.curve.point(i,n)};br.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};br.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),i=this.z.redSqr(),n=this.x.redMul(t),o=e.x.redMul(i),s=this.y.redMul(t.redMul(e.z)),a=e.y.redMul(i.redMul(this.z)),l=n.redSub(o),f=s.redSub(a);if(l.cmpn(0)===0)return f.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var c=l.redSqr(),u=c.redMul(l),d=n.redMul(c),p=f.redSqr().redIAdd(u).redISub(d).redISub(d),g=f.redMul(d.redISub(p)).redISub(s.redMul(u)),b=this.z.redMul(e.z).redMul(l);return this.curve.jpoint(p,g,b)};br.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),i=this.x,n=e.x.redMul(t),o=this.y,s=e.y.redMul(t).redMul(this.z),a=i.redSub(n),l=o.redSub(s);if(a.cmpn(0)===0)return l.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var f=a.redSqr(),c=f.redMul(a),u=i.redMul(f),d=l.redSqr().redIAdd(c).redISub(u).redISub(u),p=l.redMul(u.redISub(d)).redISub(o.redMul(c)),g=this.z.redMul(a);return this.curve.jpoint(d,p,g)};br.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var i=this;for(t=0;t<e;t++)i=i.dbl();return i}var n=this.curve.a,o=this.curve.tinv,s=this.x,a=this.y,l=this.z,f=l.redSqr().redSqr(),c=a.redAdd(a);for(t=0;t<e;t++){var u=s.redSqr(),d=c.redSqr(),p=d.redSqr(),g=u.redAdd(u).redIAdd(u).redIAdd(n.redMul(f)),b=s.redMul(d),k=g.redSqr().redISub(b.redAdd(b)),_=b.redISub(k),P=g.redMul(_);P=P.redIAdd(P).redISub(p);var N=c.redMul(l);t+1<e&&(f=f.redMul(p)),s=k,l=N,c=P}return this.curve.jpoint(s,c.redMul(o),l)};br.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};br.prototype._zeroDbl=function(){var e,t,i;if(this.zOne){var n=this.x.redSqr(),o=this.y.redSqr(),s=o.redSqr(),a=this.x.redAdd(o).redSqr().redISub(n).redISub(s);a=a.redIAdd(a);var l=n.redAdd(n).redIAdd(n),f=l.redSqr().redISub(a).redISub(a),c=s.redIAdd(s);c=c.redIAdd(c),c=c.redIAdd(c),e=f,t=l.redMul(a.redISub(f)).redISub(c),i=this.y.redAdd(this.y)}else{var u=this.x.redSqr(),d=this.y.redSqr(),p=d.redSqr(),g=this.x.redAdd(d).redSqr().redISub(u).redISub(p);g=g.redIAdd(g);var b=u.redAdd(u).redIAdd(u),k=b.redSqr(),_=p.redIAdd(p);_=_.redIAdd(_),_=_.redIAdd(_),e=k.redISub(g).redISub(g),t=b.redMul(g.redISub(e)).redISub(_),i=this.y.redMul(this.z),i=i.redIAdd(i)}return this.curve.jpoint(e,t,i)};br.prototype._threeDbl=function(){var e,t,i;if(this.zOne){var n=this.x.redSqr(),o=this.y.redSqr(),s=o.redSqr(),a=this.x.redAdd(o).redSqr().redISub(n).redISub(s);a=a.redIAdd(a);var l=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),f=l.redSqr().redISub(a).redISub(a);e=f;var c=s.redIAdd(s);c=c.redIAdd(c),c=c.redIAdd(c),t=l.redMul(a.redISub(f)).redISub(c),i=this.y.redAdd(this.y)}else{var u=this.z.redSqr(),d=this.y.redSqr(),p=this.x.redMul(d),g=this.x.redSub(u).redMul(this.x.redAdd(u));g=g.redAdd(g).redIAdd(g);var b=p.redIAdd(p);b=b.redIAdd(b);var k=b.redAdd(b);e=g.redSqr().redISub(k),i=this.y.redAdd(this.z).redSqr().redISub(d).redISub(u);var _=d.redSqr();_=_.redIAdd(_),_=_.redIAdd(_),_=_.redIAdd(_),t=g.redMul(b.redISub(e)).redISub(_)}return this.curve.jpoint(e,t,i)};br.prototype._dbl=function(){var e=this.curve.a,t=this.x,i=this.y,n=this.z,o=n.redSqr().redSqr(),s=t.redSqr(),a=i.redSqr(),l=s.redAdd(s).redIAdd(s).redIAdd(e.redMul(o)),f=t.redAdd(t);f=f.redIAdd(f);var c=f.redMul(a),u=l.redSqr().redISub(c.redAdd(c)),d=c.redISub(u),p=a.redSqr();p=p.redIAdd(p),p=p.redIAdd(p),p=p.redIAdd(p);var g=l.redMul(d).redISub(p),b=i.redAdd(i).redMul(n);return this.curve.jpoint(u,g,b)};br.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),i=this.z.redSqr(),n=t.redSqr(),o=e.redAdd(e).redIAdd(e),s=o.redSqr(),a=this.x.redAdd(t).redSqr().redISub(e).redISub(n);a=a.redIAdd(a),a=a.redAdd(a).redIAdd(a),a=a.redISub(s);var l=a.redSqr(),f=n.redIAdd(n);f=f.redIAdd(f),f=f.redIAdd(f),f=f.redIAdd(f);var c=o.redIAdd(a).redSqr().redISub(s).redISub(l).redISub(f),u=t.redMul(c);u=u.redIAdd(u),u=u.redIAdd(u);var d=this.x.redMul(l).redISub(u);d=d.redIAdd(d),d=d.redIAdd(d);var p=this.y.redMul(c.redMul(f.redISub(c)).redISub(a.redMul(l)));p=p.redIAdd(p),p=p.redIAdd(p),p=p.redIAdd(p);var g=this.z.redAdd(a).redSqr().redISub(i).redISub(l);return this.curve.jpoint(d,p,g)};br.prototype.mul=function(e,t){return e=new ye.default(e,t),this.curve._wnafMul(this,e)};br.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),i=e.z.redSqr();if(this.x.redMul(i).redISub(e.x.redMul(t)).cmpn(0)!==0)return!1;var n=t.redMul(this.z),o=i.redMul(e.z);return this.y.redMul(o).redISub(e.y.redMul(n)).cmpn(0)===0};br.prototype.eqXToP=function(e){var t=this.z.redSqr(),i=e.toRed(this.curve.red).redMul(t);if(this.x.cmp(i)===0)return!0;for(var n=e.clone(),o=this.curve.redN.redMul(t);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(i.redIAdd(o),this.x.cmp(i)===0)return!0}};br.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};br.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var qh=tl(function(r,e){"use strict";var t=e;t.base=Ds,t.short=XT,t.mont=null,t.edwards=null}),jh=tl(function(r,e){"use strict";var t=e,i=li.assert;function n(a){a.type==="short"?this.curve=new qh.short(a):a.type==="edwards"?this.curve=new qh.edwards(a):this.curve=new qh.mont(a),this.g=this.curve.g,this.n=this.curve.n,this.hash=a.hash,i(this.g.validate(),"Invalid curve"),i(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}t.PresetCurve=n;function o(a,l){Object.defineProperty(t,a,{configurable:!0,enumerable:!0,get:function(){var f=new n(l);return Object.defineProperty(t,a,{configurable:!0,enumerable:!0,value:f}),f}})}o("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:wn.default.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),o("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:wn.default.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),o("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:wn.default.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),o("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:wn.default.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),o("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:wn.default.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),o("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:wn.default.sha256,gRed:!1,g:["9"]}),o("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:wn.default.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var s;try{s=null.crash()}catch{s=void 0}o("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:wn.default.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",s]})});function Do(r){if(!(this instanceof Do))return new Do(r);this.hash=r.hash,this.predResist=!!r.predResist,this.outLen=this.hash.outSize,this.minEntropy=r.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=Hi.toArray(r.entropy,r.entropyEnc||"hex"),t=Hi.toArray(r.nonce,r.nonceEnc||"hex"),i=Hi.toArray(r.pers,r.persEnc||"hex");Mg(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,t,i)}var mA=Do;Do.prototype._init=function(e,t,i){var n=e.concat(t).concat(i);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var o=0;o<this.V.length;o++)this.K[o]=0,this.V[o]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656};Do.prototype._hmac=function(){return new wn.default.hmac(this.hash,this.K)};Do.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};Do.prototype.reseed=function(e,t,i,n){typeof t!="string"&&(n=i,i=t,t=null),e=Hi.toArray(e,t),i=Hi.toArray(i,n),Mg(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(i||[])),this._reseed=1};Do.prototype.generate=function(e,t,i,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof t!="string"&&(n=i,i=t,t=null),i&&(i=Hi.toArray(i,n||"hex"),this._update(i));for(var o=[];o.length<e;)this.V=this._hmac().update(this.V).digest(),o=o.concat(this.V);var s=o.slice(0,e);return this._update(i),this._reseed++,Hi.encode(s,t)};var Tg=li.assert;function Pr(r,e){this.ec=r,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var Ng=Pr;Pr.fromPublic=function(e,t,i){return t instanceof Pr?t:new Pr(e,{pub:t,pubEnc:i})};Pr.fromPrivate=function(e,t,i){return t instanceof Pr?t:new Pr(e,{priv:t,privEnc:i})};Pr.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};Pr.prototype.getPublic=function(e,t){return typeof e=="string"&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub};Pr.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};Pr.prototype._importPrivate=function(e,t){this.priv=new ye.default(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)};Pr.prototype._importPublic=function(e,t){if(e.x||e.y){this.ec.curve.type==="mont"?Tg(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&Tg(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,t)};Pr.prototype.derive=function(e){return e.validate()||Tg(e.validate(),"public point not validated"),e.mul(this.priv).getX()};Pr.prototype.sign=function(e,t,i){return this.ec.sign(e,this,t,i)};Pr.prototype.verify=function(e,t){return this.ec.verify(e,t,this)};Pr.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var $T=li.assert;function Wh(r,e){if(r instanceof Wh)return r;this._importDER(r,e)||($T(r.r&&r.s,"Signature without r or s"),this.r=new ye.default(r.r,16),this.s=new ye.default(r.s,16),r.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=r.recoveryParam)}var Gh=Wh;function ZT(){this.place=0}function _g(r,e){var t=r[e.place++];if(!(t&128))return t;var i=t&15;if(i===0||i>4)return!1;for(var n=0,o=0,s=e.place;o<i;o++,s++)n<<=8,n|=r[s],n>>>=0;return n<=127?!1:(e.place=s,n)}function dA(r){for(var e=0,t=r.length-1;!r[e]&&!(r[e+1]&128)&&e<t;)e++;return e===0?r:r.slice(e)}Wh.prototype._importDER=function(e,t){e=li.toArray(e,t);var i=new ZT;if(e[i.place++]!==48)return!1;var n=_g(e,i);if(n===!1||n+i.place!==e.length||e[i.place++]!==2)return!1;var o=_g(e,i);if(o===!1)return!1;var s=e.slice(i.place,o+i.place);if(i.place+=o,e[i.place++]!==2)return!1;var a=_g(e,i);if(a===!1||e.length!==a+i.place)return!1;var l=e.slice(i.place,a+i.place);if(s[0]===0)if(s[1]&128)s=s.slice(1);else return!1;if(l[0]===0)if(l[1]&128)l=l.slice(1);else return!1;return this.r=new ye.default(s),this.s=new ye.default(l),this.recoveryParam=null,!0};function Cg(r,e){if(e<128){r.push(e);return}var t=1+(Math.log(e)/Math.LN2>>>3);for(r.push(t|128);--t;)r.push(e>>>(t<<3)&255);r.push(e)}Wh.prototype.toDER=function(e){var t=this.r.toArray(),i=this.s.toArray();for(t[0]&128&&(t=[0].concat(t)),i[0]&128&&(i=[0].concat(i)),t=dA(t),i=dA(i);!i[0]&&!(i[1]&128);)i=i.slice(1);var n=[2];Cg(n,t.length),n=n.concat(t),n.push(2),Cg(n,i.length);var o=n.concat(i),s=[48];return Cg(s,o.length),s=s.concat(o),li.encode(s,e)};var eM=function(){throw new Error("unsupported")},gA=li.assert;function _i(r){if(!(this instanceof _i))return new _i(r);typeof r=="string"&&(gA(Object.prototype.hasOwnProperty.call(jh,r),"Unknown curve "+r),r=jh[r]),r instanceof jh.PresetCurve&&(r={curve:r}),this.curve=r.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=r.curve.g,this.g.precompute(r.curve.n.bitLength()+1),this.hash=r.hash||r.curve.hash}var tM=_i;_i.prototype.keyPair=function(e){return new Ng(this,e)};_i.prototype.keyFromPrivate=function(e,t){return Ng.fromPrivate(this,e,t)};_i.prototype.keyFromPublic=function(e,t){return Ng.fromPublic(this,e,t)};_i.prototype.genKeyPair=function(e){e||(e={});for(var t=new mA({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||eM(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),i=this.n.byteLength(),n=this.n.sub(new ye.default(2));;){var o=new ye.default(t.generate(i));if(!(o.cmp(n)>0))return o.iaddn(1),this.keyFromPrivate(o)}};_i.prototype._truncateToN=function(e,t){var i=e.byteLength()*8-this.n.bitLength();return i>0&&(e=e.ushrn(i)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e};_i.prototype.sign=function(e,t,i,n){typeof i=="object"&&(n=i,i=null),n||(n={}),t=this.keyFromPrivate(t,i),e=this._truncateToN(new ye.default(e,16));for(var o=this.n.byteLength(),s=t.getPrivate().toArray("be",o),a=e.toArray("be",o),l=new mA({hash:this.hash,entropy:s,nonce:a,pers:n.pers,persEnc:n.persEnc||"utf8"}),f=this.n.sub(new ye.default(1)),c=0;;c++){var u=n.k?n.k(c):new ye.default(l.generate(this.n.byteLength()));if(u=this._truncateToN(u,!0),!(u.cmpn(1)<=0||u.cmp(f)>=0)){var d=this.g.mul(u);if(!d.isInfinity()){var p=d.getX(),g=p.umod(this.n);if(g.cmpn(0)!==0){var b=u.invm(this.n).mul(g.mul(t.getPrivate()).iadd(e));if(b=b.umod(this.n),b.cmpn(0)!==0){var k=(d.getY().isOdd()?1:0)|(p.cmp(g)!==0?2:0);return n.canonical&&b.cmp(this.nh)>0&&(b=this.n.sub(b),k^=1),new Gh({r:g,s:b,recoveryParam:k})}}}}}};_i.prototype.verify=function(e,t,i,n){e=this._truncateToN(new ye.default(e,16)),i=this.keyFromPublic(i,n),t=new Gh(t,"hex");var o=t.r,s=t.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0||s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;var a=s.invm(this.n),l=a.mul(e).umod(this.n),f=a.mul(o).umod(this.n),c;return this.curve._maxwellTrick?(c=this.g.jmulAdd(l,i.getPublic(),f),c.isInfinity()?!1:c.eqXToP(o)):(c=this.g.mulAdd(l,i.getPublic(),f),c.isInfinity()?!1:c.getX().umod(this.n).cmp(o)===0)};_i.prototype.recoverPubKey=function(r,e,t,i){gA((3&t)===t,"The recovery param is more than two bits"),e=new Gh(e,i);var n=this.n,o=new ye.default(r),s=e.r,a=e.s,l=t&1,f=t>>1;if(s.cmp(this.curve.p.umod(this.curve.n))>=0&&f)throw new Error("Unable to find sencond key candinate");f?s=this.curve.pointFromX(s.add(this.curve.n),l):s=this.curve.pointFromX(s,l);var c=e.r.invm(n),u=n.sub(o).mul(c).umod(n),d=a.mul(c).umod(n);return this.g.mulAdd(u,s,d)};_i.prototype.getKeyRecoveryParam=function(r,e,t,i){if(e=new Gh(e,i),e.recoveryParam!==null)return e.recoveryParam;for(var n=0;n<4;n++){var o;try{o=this.recoverPubKey(r,e,n)}catch{continue}if(o.eq(t))return n}throw new Error("Unable to find valid recovery factor")};var rM=tl(function(r,e){"use strict";var t=e;t.version="6.5.4",t.utils=li,t.rand=function(){throw new Error("unsupported")},t.curve=qh,t.curves=jh,t.ec=tM,t.eddsa=null}),xA=rM.ec;var bA="signing-key/5.7.0";var Ig=new O(bA),Pg=null;function An(){return Pg||(Pg=new xA("secp256k1")),Pg}var Mi=class{constructor(e){L(this,"curve","secp256k1"),L(this,"privateKey",Q(e)),Tr(this.privateKey)!==32&&Ig.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");let t=An().keyFromPrivate(j(this.privateKey));L(this,"publicKey","0x"+t.getPublic(!1,"hex")),L(this,"compressedPublicKey","0x"+t.getPublic(!0,"hex")),L(this,"_isSigningKey",!0)}_addPoint(e){let t=An().keyFromPublic(j(this.publicKey)),i=An().keyFromPublic(j(e));return"0x"+t.pub.add(i.pub).encodeCompressed("hex")}signDigest(e){let t=An().keyFromPrivate(j(this.privateKey)),i=j(e);i.length!==32&&Ig.throwArgumentError("bad digest length","digest",e);let n=t.sign(i,{canonical:!0});return hn({recoveryParam:n.recoveryParam,r:Se("0x"+n.r.toString(16),32),s:Se("0x"+n.s.toString(16),32)})}computeSharedSecret(e){let t=An().keyFromPrivate(j(this.privateKey)),i=An().keyFromPublic(j(zf(e)));return Se("0x"+t.derive(i.getPublic()).toString(16),32)}static isSigningKey(e){return!!(e&&e._isSigningKey)}};function Kh(r,e){let t=hn(e),i={r:j(t.r),s:j(t.s)};return"0x"+An().recoverPubKey(j(r),i,t.recoveryParam).encode("hex",!1)}function zf(r,e){let t=j(r);if(t.length===32){let i=new Mi(t);return e?"0x"+An().keyFromPrivate(t).getPublic(!0,"hex"):i.publicKey}else{if(t.length===33)return e?Q(t):"0x"+An().keyFromPublic(t).getPublic(!1,"hex");if(t.length===65)return e?"0x"+An().keyFromPublic(t).getPublic(!0,"hex"):Q(t)}return Ig.throwArgumentError("invalid public or private key","key","[REDACTED]")}var yA="transactions/5.7.0";var Rr=new O(yA),Qh;(function(r){r[r.legacy=0]="legacy",r[r.eip2930=1]="eip2930",r[r.eip1559=2]="eip1559"})(Qh||(Qh={}));function Dg(r){return r==="0x"?null:Ae(r)}function Ir(r){return r==="0x"?Va:H.from(r)}var iM=[{name:"nonce",maxLength:32,numeric:!0},{name:"gasPrice",maxLength:32,numeric:!0},{name:"gasLimit",maxLength:32,numeric:!0},{name:"to",length:20},{name:"value",maxLength:32,numeric:!0},{name:"data"}],nM={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,type:!0,value:!0};function Oi(r){let e=zf(r);return Ae(qe(we(qe(e,1)),12))}function Bs(r,e){return Oi(Kh(j(r),e))}function fi(r,e){let t=ni(H.from(r).toHexString());return t.length>32&&Rr.throwArgumentError("invalid length for "+e,"transaction:"+e,r),t}function Rg(r,e){return{address:Ae(r),storageKeys:(e||[]).map((t,i)=>(Tr(t)!==32&&Rr.throwArgumentError("invalid access list storageKey",`accessList[${r}:${i}]`,t),t.toLowerCase()))}}function ci(r){if(Array.isArray(r))return r.map((t,i)=>Array.isArray(t)?(t.length>2&&Rr.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${i}]`,t),Rg(t[0],t[1])):Rg(t.address,t.storageKeys));let e=Object.keys(r).map(t=>{let i=r[t].reduce((n,o)=>(n[o]=!0,n),{});return Rg(t,Object.keys(i).sort())});return e.sort((t,i)=>t.address.localeCompare(i.address)),e}function vA(r){return ci(r).map(e=>[e.address,e.storageKeys])}function wA(r,e){if(r.gasPrice!=null){let i=H.from(r.gasPrice),n=H.from(r.maxFeePerGas||0);i.eq(n)||Rr.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:i,maxFeePerGas:n})}let t=[fi(r.chainId||0,"chainId"),fi(r.nonce||0,"nonce"),fi(r.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),fi(r.maxFeePerGas||0,"maxFeePerGas"),fi(r.gasLimit||0,"gasLimit"),r.to!=null?Ae(r.to):"0x",fi(r.value||0,"value"),r.data||"0x",vA(r.accessList||[])];if(e){let i=hn(e);t.push(fi(i.recoveryParam,"recoveryParam")),t.push(ni(i.r)),t.push(ni(i.s))}return Xt(["0x02",Hn(t)])}function AA(r,e){let t=[fi(r.chainId||0,"chainId"),fi(r.nonce||0,"nonce"),fi(r.gasPrice||0,"gasPrice"),fi(r.gasLimit||0,"gasLimit"),r.to!=null?Ae(r.to):"0x",fi(r.value||0,"value"),r.data||"0x",vA(r.accessList||[])];if(e){let i=hn(e);t.push(fi(i.recoveryParam,"recoveryParam")),t.push(ni(i.r)),t.push(ni(i.s))}return Xt(["0x01",Hn(t)])}function oM(r,e){Ba(r,nM);let t=[];iM.forEach(function(s){let a=r[s.name]||[],l={};s.numeric&&(l.hexPad="left"),a=j(Q(a,l)),s.length&&a.length!==s.length&&a.length>0&&Rr.throwArgumentError("invalid length for "+s.name,"transaction:"+s.name,a),s.maxLength&&(a=ni(a),a.length>s.maxLength&&Rr.throwArgumentError("invalid length for "+s.name,"transaction:"+s.name,a)),t.push(Q(a))});let i=0;if(r.chainId!=null?(i=r.chainId,typeof i!="number"&&Rr.throwArgumentError("invalid transaction.chainId","transaction",r)):e&&!qn(e)&&e.v>28&&(i=Math.floor((e.v-35)/2)),i!==0&&(t.push(Q(i)),t.push("0x"),t.push("0x")),!e)return Hn(t);let n=hn(e),o=27+n.recoveryParam;return i!==0?(t.pop(),t.pop(),t.pop(),o+=i*2+8,n.v>28&&n.v!==o&&Rr.throwArgumentError("transaction.chainId/signature.v mismatch","signature",e)):n.v!==o&&Rr.throwArgumentError("transaction.chainId/signature.v mismatch","signature",e),t.push(Q(o)),t.push(ni(j(n.r))),t.push(ni(j(n.s))),Hn(t)}function Hf(r,e){if(r.type==null||r.type===0)return r.accessList!=null&&Rr.throwArgumentError("untyped transactions do not support accessList; include type: 1","transaction",r),oM(r,e);switch(r.type){case 1:return AA(r,e);case 2:return wA(r,e);default:break}return Rr.throwError(`unsupported transaction type: ${r.type}`,O.errors.UNSUPPORTED_OPERATION,{operation:"serializeTransaction",transactionType:r.type})}function EA(r,e,t){try{let i=Ir(e[0]).toNumber();if(i!==0&&i!==1)throw new Error("bad recid");r.v=i}catch{Rr.throwArgumentError("invalid v for transaction type: 1","v",e[0])}r.r=Se(e[1],32),r.s=Se(e[2],32);try{let i=we(t(r));r.from=Bs(i,{r:r.r,s:r.s,recoveryParam:r.v})}catch{}}function sM(r){let e=Bf(r.slice(1));e.length!==9&&e.length!==12&&Rr.throwArgumentError("invalid component count for transaction type: 2","payload",Q(r));let t=Ir(e[2]),i=Ir(e[3]),n={type:2,chainId:Ir(e[0]).toNumber(),nonce:Ir(e[1]).toNumber(),maxPriorityFeePerGas:t,maxFeePerGas:i,gasPrice:null,gasLimit:Ir(e[4]),to:Dg(e[5]),value:Ir(e[6]),data:e[7],accessList:ci(e[8])};return e.length===9||(n.hash=we(r),EA(n,e.slice(9),wA)),n}function aM(r){let e=Bf(r.slice(1));e.length!==8&&e.length!==11&&Rr.throwArgumentError("invalid component count for transaction type: 1","payload",Q(r));let t={type:1,chainId:Ir(e[0]).toNumber(),nonce:Ir(e[1]).toNumber(),gasPrice:Ir(e[2]),gasLimit:Ir(e[3]),to:Dg(e[4]),value:Ir(e[5]),data:e[6],accessList:ci(e[7])};return e.length===8||(t.hash=we(r),EA(t,e.slice(8),AA)),t}function lM(r){let e=Bf(r);e.length!==9&&e.length!==6&&Rr.throwArgumentError("invalid raw transaction","rawTransaction",r);let t={nonce:Ir(e[0]).toNumber(),gasPrice:Ir(e[1]),gasLimit:Ir(e[2]),to:Dg(e[3]),value:Ir(e[4]),data:e[5],chainId:0};if(e.length===6)return t;try{t.v=H.from(e[6]).toNumber()}catch{return t}if(t.r=Se(e[7],32),t.s=Se(e[8],32),H.from(t.r).isZero()&&H.from(t.s).isZero())t.chainId=t.v,t.v=0;else{t.chainId=Math.floor((t.v-35)/2),t.chainId<0&&(t.chainId=0);let i=t.v-27,n=e.slice(0,6);t.chainId!==0&&(n.push(Q(t.chainId)),n.push("0x"),n.push("0x"),i-=t.chainId*2+8);let o=we(Hn(n));try{t.from=Bs(o,{r:Q(t.r),s:Q(t.s),recoveryParam:i})}catch{}t.hash=we(r)}return t.type=null,t}function Jh(r){let e=j(r);if(e[0]>127)return lM(e);switch(e[0]){case 1:return aM(e);case 2:return sM(e);default:break}return Rr.throwError(`unsupported transaction type: ${e[0]}`,O.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:e[0]})}var kA="contracts/5.7.0";var Fo=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(c){try{f(i.next(c))}catch(u){s(u)}}function l(c){try{f(i.throw(c))}catch(u){s(u)}}function f(c){c.done?o(c.value):n(c.value).then(a,l)}f((i=i.apply(r,e||[])).next())})},He=new O(kA),fM={chainId:!0,data:!0,from:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0,customData:!0,ccipReadEnabled:!0};function Yh(r,e){return Fo(this,void 0,void 0,function*(){let t=yield e;typeof t!="string"&&He.throwArgumentError("invalid address or ENS name","name",t);try{return Ae(t)}catch{}r||He.throwError("a provider or signer is needed to resolve ENS names",O.errors.UNSUPPORTED_OPERATION,{operation:"resolveName"});let i=yield r.resolveName(t);return i==null&&He.throwArgumentError("resolver or addr is not configured for ENS name","name",t),i})}function Wf(r,e,t){return Fo(this,void 0,void 0,function*(){return Array.isArray(t)?yield Promise.all(t.map((i,n)=>Wf(r,Array.isArray(e)?e[n]:e[i.name],i))):t.type==="address"?yield Yh(r,e):t.type==="tuple"?yield Wf(r,e,t.components):t.baseType==="array"?Array.isArray(e)?yield Promise.all(e.map(i=>Wf(r,i,t.arrayChildren))):Promise.reject(He.makeError("invalid value for array",O.errors.INVALID_ARGUMENT,{argument:"value",value:e})):e})}function ed(r,e,t){return Fo(this,void 0,void 0,function*(){let i={};t.length===e.inputs.length+1&&typeof t[t.length-1]=="object"&&(i=Be(t.pop())),He.checkArgumentCount(t.length,e.inputs.length,"passed to contract"),r.signer?i.from?i.from=je({override:Yh(r.signer,i.from),signer:r.signer.getAddress()}).then(f=>Fo(this,void 0,void 0,function*(){return Ae(f.signer)!==f.override&&He.throwError("Contract with a Signer cannot override from",O.errors.UNSUPPORTED_OPERATION,{operation:"overrides.from"}),f.override})):i.from=r.signer.getAddress():i.from&&(i.from=Yh(r.provider,i.from));let n=yield je({args:Wf(r.signer||r.provider,t,e.inputs),address:r.resolvedAddress,overrides:je(i)||{}}),o=r.interface.encodeFunctionData(e,n.args),s={data:o,to:n.address},a=n.overrides;if(a.nonce!=null&&(s.nonce=H.from(a.nonce).toNumber()),a.gasLimit!=null&&(s.gasLimit=H.from(a.gasLimit)),a.gasPrice!=null&&(s.gasPrice=H.from(a.gasPrice)),a.maxFeePerGas!=null&&(s.maxFeePerGas=H.from(a.maxFeePerGas)),a.maxPriorityFeePerGas!=null&&(s.maxPriorityFeePerGas=H.from(a.maxPriorityFeePerGas)),a.from!=null&&(s.from=a.from),a.type!=null&&(s.type=a.type),a.accessList!=null&&(s.accessList=ci(a.accessList)),s.gasLimit==null&&e.gas!=null){let f=21e3,c=j(o);for(let u=0;u<c.length;u++)f+=4,c[u]&&(f+=64);s.gasLimit=H.from(e.gas).add(f)}if(a.value){let f=H.from(a.value);!f.isZero()&&!e.payable&&He.throwError("non-payable method cannot override value",O.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:i.value}),s.value=f}a.customData&&(s.customData=Be(a.customData)),a.ccipReadEnabled&&(s.ccipReadEnabled=!!a.ccipReadEnabled),delete i.nonce,delete i.gasLimit,delete i.gasPrice,delete i.from,delete i.value,delete i.type,delete i.accessList,delete i.maxFeePerGas,delete i.maxPriorityFeePerGas,delete i.customData,delete i.ccipReadEnabled;let l=Object.keys(i).filter(f=>i[f]!=null);return l.length&&He.throwError(`cannot override ${l.map(f=>JSON.stringify(f)).join(",")}`,O.errors.UNSUPPORTED_OPERATION,{operation:"overrides",overrides:l}),s})}function cM(r,e){return function(...t){return ed(r,e,t)}}function uM(r,e){let t=r.signer||r.provider;return function(...i){return Fo(this,void 0,void 0,function*(){t||He.throwError("estimate require a provider or signer",O.errors.UNSUPPORTED_OPERATION,{operation:"estimateGas"});let n=yield ed(r,e,i);return yield t.estimateGas(n)})}}function _A(r,e){let t=e.wait.bind(e);e.wait=i=>t(i).then(n=>(n.events=n.logs.map(o=>{let s=Vt(o),a=null;try{a=r.interface.parseLog(o)}catch{}return a&&(s.args=a.args,s.decode=(l,f)=>r.interface.decodeEventLog(a.eventFragment,l,f),s.event=a.name,s.eventSignature=a.signature),s.removeListener=()=>r.provider,s.getBlock=()=>r.provider.getBlock(n.blockHash),s.getTransaction=()=>r.provider.getTransaction(n.transactionHash),s.getTransactionReceipt=()=>Promise.resolve(n),s}),n))}function CA(r,e,t){let i=r.signer||r.provider;return function(...n){return Fo(this,void 0,void 0,function*(){let o;if(n.length===e.inputs.length+1&&typeof n[n.length-1]=="object"){let l=Be(n.pop());l.blockTag!=null&&(o=yield l.blockTag),delete l.blockTag,n.push(l)}r.deployTransaction!=null&&(yield r._deployed(o));let s=yield ed(r,e,n),a=yield i.call(s,o);try{let l=r.interface.decodeFunctionResult(e,a);return t&&e.outputs.length===1&&(l=l[0]),l}catch(l){throw l.code===O.errors.CALL_EXCEPTION&&(l.address=r.address,l.args=n,l.transaction=s),l}})}}function hM(r,e){return function(...t){return Fo(this,void 0,void 0,function*(){r.signer||He.throwError("sending a transaction requires a signer",O.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction"}),r.deployTransaction!=null&&(yield r._deployed());let i=yield ed(r,e,t),n=yield r.signer.sendTransaction(i);return _A(r,n),n})}}function SA(r,e,t){return e.constant?CA(r,e,t):hM(r,e)}function TA(r){return r.address&&(r.topics==null||r.topics.length===0)?"*":(r.address||"*")+"@"+(r.topics?r.topics.map(e=>Array.isArray(e)?e.join("|"):e).join(":"):"")}var Fs=class{constructor(e,t){L(this,"tag",e),L(this,"filter",t),this._listeners=[]}addListener(e,t){this._listeners.push({listener:e,once:t})}removeListener(e){let t=!1;this._listeners=this._listeners.filter(i=>t||i.listener!==e?!0:(t=!0,!1))}removeAllListeners(){this._listeners=[]}listeners(){return this._listeners.map(e=>e.listener)}listenerCount(){return this._listeners.length}run(e){let t=this.listenerCount();return this._listeners=this._listeners.filter(i=>{let n=e.slice();return setTimeout(()=>{i.listener.apply(this,n)},0),!i.once}),t}prepareEvent(e){}getEmit(e){return[e]}},Bg=class extends Fs{constructor(){super("error",null)}},Xh=class extends Fs{constructor(e,t,i,n){let o={address:e},s=t.getEventTopic(i);n?(s!==n[0]&&He.throwArgumentError("topic mismatch","topics",n),o.topics=n.slice()):o.topics=[s],super(TA(o),o),L(this,"address",e),L(this,"interface",t),L(this,"fragment",i)}prepareEvent(e){super.prepareEvent(e),e.event=this.fragment.name,e.eventSignature=this.fragment.format(),e.decode=(t,i)=>this.interface.decodeEventLog(this.fragment,t,i);try{e.args=this.interface.decodeEventLog(this.fragment,e.data,e.topics)}catch(t){e.args=null,e.decodeError=t}}getEmit(e){let t=La(e.args);if(t.length)throw t[0].error;let i=(e.args||[]).slice();return i.push(e),i}},$h=class extends Fs{constructor(e,t){super("*",{address:e}),L(this,"address",e),L(this,"interface",t)}prepareEvent(e){super.prepareEvent(e);try{let t=this.interface.parseLog(e);e.event=t.name,e.eventSignature=t.signature,e.decode=(i,n)=>this.interface.decodeEventLog(t.eventFragment,i,n),e.args=t.args}catch{}}},Gf=class{constructor(e,t,i){L(this,"interface",qt(new.target,"getInterface")(t)),i==null?(L(this,"provider",null),L(this,"signer",null)):Wr.isSigner(i)?(L(this,"provider",i.provider||null),L(this,"signer",i)):Hr.isProvider(i)?(L(this,"provider",i),L(this,"signer",null)):He.throwArgumentError("invalid signer or provider","signerOrProvider",i),L(this,"callStatic",{}),L(this,"estimateGas",{}),L(this,"functions",{}),L(this,"populateTransaction",{}),L(this,"filters",{});{let s={};Object.keys(this.interface.events).forEach(a=>{let l=this.interface.events[a];L(this.filters,a,(...f)=>({address:this.address,topics:this.interface.encodeFilterTopics(l,f)})),s[l.name]||(s[l.name]=[]),s[l.name].push(a)}),Object.keys(s).forEach(a=>{let l=s[a];l.length===1?L(this.filters,a,this.filters[l[0]]):He.warn(`Duplicate definition of ${a} (${l.join(", ")})`)})}if(L(this,"_runningEvents",{}),L(this,"_wrappedEmits",{}),e==null&&He.throwArgumentError("invalid contract address or ENS name","addressOrName",e),L(this,"address",e),this.provider)L(this,"resolvedAddress",Yh(this.provider,e));else try{L(this,"resolvedAddress",Promise.resolve(Ae(e)))}catch{He.throwError("provider is required to use ENS name as contract address",O.errors.UNSUPPORTED_OPERATION,{operation:"new Contract"})}this.resolvedAddress.catch(s=>{});let n={},o={};Object.keys(this.interface.functions).forEach(s=>{let a=this.interface.functions[s];if(o[s]){He.warn(`Duplicate ABI entry for ${JSON.stringify(s)}`);return}o[s]=!0;{let l=a.name;n[`%${l}`]||(n[`%${l}`]=[]),n[`%${l}`].push(s)}this[s]==null&&L(this,s,SA(this,a,!0)),this.functions[s]==null&&L(this.functions,s,SA(this,a,!1)),this.callStatic[s]==null&&L(this.callStatic,s,CA(this,a,!0)),this.populateTransaction[s]==null&&L(this.populateTransaction,s,cM(this,a)),this.estimateGas[s]==null&&L(this.estimateGas,s,uM(this,a))}),Object.keys(n).forEach(s=>{let a=n[s];if(a.length>1)return;s=s.substring(1);let l=a[0];try{this[s]==null&&L(this,s,this[l])}catch{}this.functions[s]==null&&L(this.functions,s,this.functions[l]),this.callStatic[s]==null&&L(this.callStatic,s,this.callStatic[l]),this.populateTransaction[s]==null&&L(this.populateTransaction,s,this.populateTransaction[l]),this.estimateGas[s]==null&&L(this.estimateGas,s,this.estimateGas[l])})}static getContractAddress(e){return Ps(e)}static getInterface(e){return Po.isInterface(e)?e:new Po(e)}deployed(){return this._deployed()}_deployed(e){return this._deployedPromise||(this.deployTransaction?this._deployedPromise=this.deployTransaction.wait().then(()=>this):this._deployedPromise=this.provider.getCode(this.address,e).then(t=>(t==="0x"&&He.throwError("contract not deployed",O.errors.UNSUPPORTED_OPERATION,{contractAddress:this.address,operation:"getDeployed"}),this))),this._deployedPromise}fallback(e){this.signer||He.throwError("sending a transactions require a signer",O.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction(fallback)"});let t=Be(e||{});return["from","to"].forEach(function(i){t[i]!=null&&He.throwError("cannot override "+i,O.errors.UNSUPPORTED_OPERATION,{operation:i})}),t.to=this.resolvedAddress,this.deployed().then(()=>this.signer.sendTransaction(t))}connect(e){typeof e=="string"&&(e=new Io(e,this.provider));let t=new this.constructor(this.address,this.interface,e);return this.deployTransaction&&L(t,"deployTransaction",this.deployTransaction),t}attach(e){return new this.constructor(e,this.interface,this.signer||this.provider)}static isIndexed(e){return Wn.isIndexed(e)}_normalizeRunningEvent(e){return this._runningEvents[e.tag]?this._runningEvents[e.tag]:e}_getRunningEvent(e){if(typeof e=="string"){if(e==="error")return this._normalizeRunningEvent(new Bg);if(e==="event")return this._normalizeRunningEvent(new Fs("event",null));if(e==="*")return this._normalizeRunningEvent(new $h(this.address,this.interface));let t=this.interface.getEvent(e);return this._normalizeRunningEvent(new Xh(this.address,this.interface,t))}if(e.topics&&e.topics.length>0){try{let i=e.topics[0];if(typeof i!="string")throw new Error("invalid topic");let n=this.interface.getEvent(i);return this._normalizeRunningEvent(new Xh(this.address,this.interface,n,e.topics))}catch{}let t={address:this.address,topics:e.topics};return this._normalizeRunningEvent(new Fs(TA(t),t))}return this._normalizeRunningEvent(new $h(this.address,this.interface))}_checkRunningEvents(e){if(e.listenerCount()===0){delete this._runningEvents[e.tag];let t=this._wrappedEmits[e.tag];t&&e.filter&&(this.provider.off(e.filter,t),delete this._wrappedEmits[e.tag])}}_wrapEvent(e,t,i){let n=Vt(t);return n.removeListener=()=>{!i||(e.removeListener(i),this._checkRunningEvents(e))},n.getBlock=()=>this.provider.getBlock(t.blockHash),n.getTransaction=()=>this.provider.getTransaction(t.transactionHash),n.getTransactionReceipt=()=>this.provider.getTransactionReceipt(t.transactionHash),e.prepareEvent(n),n}_addEventListener(e,t,i){if(this.provider||He.throwError("events require a provider or a signer with a provider",O.errors.UNSUPPORTED_OPERATION,{operation:"once"}),e.addListener(t,i),this._runningEvents[e.tag]=e,!this._wrappedEmits[e.tag]){let n=o=>{let s=this._wrapEvent(e,o,t);if(s.decodeError==null)try{let a=e.getEmit(s);this.emit(e.filter,...a)}catch(a){s.decodeError=a.error}e.filter!=null&&this.emit("event",s),s.decodeError!=null&&this.emit("error",s.decodeError,s)};this._wrappedEmits[e.tag]=n,e.filter!=null&&this.provider.on(e.filter,n)}}queryFilter(e,t,i){let n=this._getRunningEvent(e),o=Be(n.filter);return typeof t=="string"&&pe(t,32)?(i!=null&&He.throwArgumentError("cannot specify toBlock with blockhash","toBlock",i),o.blockHash=t):(o.fromBlock=t??0,o.toBlock=i??"latest"),this.provider.getLogs(o).then(s=>s.map(a=>this._wrapEvent(n,a,null)))}on(e,t){return this._addEventListener(this._getRunningEvent(e),t,!1),this}once(e,t){return this._addEventListener(this._getRunningEvent(e),t,!0),this}emit(e,...t){if(!this.provider)return!1;let i=this._getRunningEvent(e),n=i.run(t)>0;return this._checkRunningEvents(i),n}listenerCount(e){return this.provider?e==null?Object.keys(this._runningEvents).reduce((t,i)=>t+this._runningEvents[i].listenerCount(),0):this._getRunningEvent(e).listenerCount():0}listeners(e){if(!this.provider)return[];if(e==null){let t=[];for(let i in this._runningEvents)this._runningEvents[i].listeners().forEach(n=>{t.push(n)});return t}return this._getRunningEvent(e).listeners()}removeAllListeners(e){if(!this.provider)return this;if(e==null){for(let i in this._runningEvents){let n=this._runningEvents[i];n.removeAllListeners(),this._checkRunningEvents(n)}return this}let t=this._getRunningEvent(e);return t.removeAllListeners(),this._checkRunningEvents(t),this}off(e,t){if(!this.provider)return this;let i=this._getRunningEvent(e);return i.removeListener(t),this._checkRunningEvents(i),this}removeListener(e,t){return this.off(e,t)}},rl=class extends Gf{},Zh=class{constructor(e,t,i){let n=null;typeof t=="string"?n=t:Ai(t)?n=Q(t):t&&typeof t.object=="string"?n=t.object:n="!",n.substring(0,2)!=="0x"&&(n="0x"+n),(!pe(n)||n.length%2)&&He.throwArgumentError("invalid bytecode","bytecode",t),i&&!Wr.isSigner(i)&&He.throwArgumentError("invalid signer","signer",i),L(this,"bytecode",n),L(this,"interface",qt(new.target,"getInterface")(e)),L(this,"signer",i||null)}getDeployTransaction(...e){let t={};if(e.length===this.interface.deploy.inputs.length+1&&typeof e[e.length-1]=="object"){t=Be(e.pop());for(let i in t)if(!fM[i])throw new Error("unknown transaction override "+i)}return["data","from","to"].forEach(i=>{t[i]!=null&&He.throwError("cannot override "+i,O.errors.UNSUPPORTED_OPERATION,{operation:i})}),t.value&&!H.from(t.value).isZero()&&!this.interface.deploy.payable&&He.throwError("non-payable constructor cannot override value",O.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:t.value}),He.checkArgumentCount(e.length,this.interface.deploy.inputs.length," in Contract constructor"),t.data=Q(ve([this.bytecode,this.interface.encodeDeploy(e)])),t}deploy(...e){return Fo(this,void 0,void 0,function*(){let t={};e.length===this.interface.deploy.inputs.length+1&&(t=e.pop()),He.checkArgumentCount(e.length,this.interface.deploy.inputs.length," in Contract constructor");let i=yield Wf(this.signer,e,this.interface.deploy.inputs);i.push(t);let n=this.getDeployTransaction(...i),o=yield this.signer.sendTransaction(n),s=qt(this.constructor,"getContractAddress")(o),a=qt(this.constructor,"getContract")(s,this.interface,this.signer);return _A(a,o),L(a,"deployTransaction",o),a})}attach(e){return this.constructor.getContract(e,this.interface,this.signer)}connect(e){return new this.constructor(this.interface,this.bytecode,e)}static fromSolidity(e,t){e==null&&He.throwError("missing compiler output",O.errors.MISSING_ARGUMENT,{argument:"compilerOutput"}),typeof e=="string"&&(e=JSON.parse(e));let i=e.abi,n=null;return e.bytecode?n=e.bytecode:e.evm&&e.evm.bytecode&&(n=e.evm.bytecode),new this(i,n,t)}static getInterface(e){return rl.getInterface(e)}static getContractAddress(e){return Ps(e)}static getContract(e,t,i){return new rl(e,t,i)}};var td=class{constructor(e){L(this,"alphabet",e),L(this,"base",e.length),L(this,"_alphabetMap",{}),L(this,"_leader",e.charAt(0));for(let t=0;t<e.length;t++)this._alphabetMap[e.charAt(t)]=t}encode(e){let t=j(e);if(t.length===0)return"";let i=[0];for(let o=0;o<t.length;++o){let s=t[o];for(let a=0;a<i.length;++a)s+=i[a]<<8,i[a]=s%this.base,s=s/this.base|0;for(;s>0;)i.push(s%this.base),s=s/this.base|0}let n="";for(let o=0;t[o]===0&&o<t.length-1;++o)n+=this._leader;for(let o=i.length-1;o>=0;--o)n+=this.alphabet[i[o]];return n}decode(e){if(typeof e!="string")throw new TypeError("Expected String");let t=[];if(e.length===0)return new Uint8Array(t);t.push(0);for(let i=0;i<e.length;i++){let n=this._alphabetMap[e[i]];if(n===void 0)throw new Error("Non-base"+this.base+" character");let o=n;for(let s=0;s<t.length;++s)o+=t[s]*this.base,t[s]=o&255,o>>=8;for(;o>0;)t.push(o&255),o>>=8}for(let i=0;e[i]===this._leader&&i<e.length-1;++i)t.push(0);return j(new Uint8Array(t.reverse()))}},sL=new td("abcdefghijklmnopqrstuvwxyz234567"),Jn=new td("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");var il=Ri(Sg());var En;(function(r){r.sha256="sha256",r.sha512="sha512"})(En||(En={}));var MA="sha2/5.7.0";var dM=new O(MA);function Kf(r){return"0x"+il.default.ripemd160().update(j(r)).digest("hex")}function Kr(r){return"0x"+il.default.sha256().update(j(r)).digest("hex")}function Fg(r){return"0x"+il.default.sha512().update(j(r)).digest("hex")}function Yn(r,e,t){return En[r]||dM.throwError("unsupported algorithm "+r,O.errors.UNSUPPORTED_OPERATION,{operation:"hmac",algorithm:r}),"0x"+il.default.hmac(il.default[r],j(e)).update(j(t)).digest("hex")}function Ls(r,e,t,i,n){r=j(r),e=j(e);let o,s=1,a=new Uint8Array(i),l=new Uint8Array(e.length+4);l.set(e);let f,c;for(let u=1;u<=s;u++){l[e.length]=u>>24&255,l[e.length+1]=u>>16&255,l[e.length+2]=u>>8&255,l[e.length+3]=u&255;let d=j(Yn(n,r,l));o||(o=d.length,c=new Uint8Array(o),s=Math.ceil(i/o),f=i-(s-1)*o),c.set(d);for(let b=1;b<t;b++){d=j(Yn(n,r,d));for(let k=0;k<o;k++)c[k]^=d[k]}let p=(u-1)*o,g=u===s?f:o;a.set(j(c).slice(0,g),p)}return Q(a)}var OA="wordlists/5.7.0";var pM=!1,NA=new O(OA),Wi=class{constructor(e){NA.checkAbstract(new.target,Wi),L(this,"locale",e)}split(e){return e.toLowerCase().split(/ +/g)}join(e){return e.join(" ")}static check(e){let t=[];for(let i=0;i<2048;i++){let n=e.getWord(i);if(i!==e.getWordIndex(n))return"0x";t.push(n)}return ai(t.join(`
`)+`
`)}static register(e,t){if(t||(t=e.locale),pM)try{let i=window;i._ethers&&i._ethers.wordlists&&(i._ethers.wordlists[t]||L(i._ethers.wordlists,t,e))}catch{}}};var mM="AbandonAbilityAbleAboutAboveAbsentAbsorbAbstractAbsurdAbuseAccessAccidentAccountAccuseAchieveAcidAcousticAcquireAcrossActActionActorActressActualAdaptAddAddictAddressAdjustAdmitAdultAdvanceAdviceAerobicAffairAffordAfraidAgainAgeAgentAgreeAheadAimAirAirportAisleAlarmAlbumAlcoholAlertAlienAllAlleyAllowAlmostAloneAlphaAlreadyAlsoAlterAlwaysAmateurAmazingAmongAmountAmusedAnalystAnchorAncientAngerAngleAngryAnimalAnkleAnnounceAnnualAnotherAnswerAntennaAntiqueAnxietyAnyApartApologyAppearAppleApproveAprilArchArcticAreaArenaArgueArmArmedArmorArmyAroundArrangeArrestArriveArrowArtArtefactArtistArtworkAskAspectAssaultAssetAssistAssumeAsthmaAthleteAtomAttackAttendAttitudeAttractAuctionAuditAugustAuntAuthorAutoAutumnAverageAvocadoAvoidAwakeAwareAwayAwesomeAwfulAwkwardAxisBabyBachelorBaconBadgeBagBalanceBalconyBallBambooBananaBannerBarBarelyBargainBarrelBaseBasicBasketBattleBeachBeanBeautyBecauseBecomeBeefBeforeBeginBehaveBehindBelieveBelowBeltBenchBenefitBestBetrayBetterBetweenBeyondBicycleBidBikeBindBiologyBirdBirthBitterBlackBladeBlameBlanketBlastBleakBlessBlindBloodBlossomBlouseBlueBlurBlushBoardBoatBodyBoilBombBoneBonusBookBoostBorderBoringBorrowBossBottomBounceBoxBoyBracketBrainBrandBrassBraveBreadBreezeBrickBridgeBriefBrightBringBriskBroccoliBrokenBronzeBroomBrotherBrownBrushBubbleBuddyBudgetBuffaloBuildBulbBulkBulletBundleBunkerBurdenBurgerBurstBusBusinessBusyButterBuyerBuzzCabbageCabinCableCactusCageCakeCallCalmCameraCampCanCanalCancelCandyCannonCanoeCanvasCanyonCapableCapitalCaptainCarCarbonCardCargoCarpetCarryCartCaseCashCasinoCastleCasualCatCatalogCatchCategoryCattleCaughtCauseCautionCaveCeilingCeleryCementCensusCenturyCerealCertainChairChalkChampionChangeChaosChapterChargeChaseChatCheapCheckCheeseChefCherryChestChickenChiefChildChimneyChoiceChooseChronicChuckleChunkChurnCigarCinnamonCircleCitizenCityCivilClaimClapClarifyClawClayCleanClerkCleverClickClientCliffClimbClinicClipClockClogCloseClothCloudClownClubClumpClusterClutchCoachCoastCoconutCodeCoffeeCoilCoinCollectColorColumnCombineComeComfortComicCommonCompanyConcertConductConfirmCongressConnectConsiderControlConvinceCookCoolCopperCopyCoralCoreCornCorrectCostCottonCouchCountryCoupleCourseCousinCoverCoyoteCrackCradleCraftCramCraneCrashCraterCrawlCrazyCreamCreditCreekCrewCricketCrimeCrispCriticCropCrossCrouchCrowdCrucialCruelCruiseCrumbleCrunchCrushCryCrystalCubeCultureCupCupboardCuriousCurrentCurtainCurveCushionCustomCuteCycleDadDamageDampDanceDangerDaringDashDaughterDawnDayDealDebateDebrisDecadeDecemberDecideDeclineDecorateDecreaseDeerDefenseDefineDefyDegreeDelayDeliverDemandDemiseDenialDentistDenyDepartDependDepositDepthDeputyDeriveDescribeDesertDesignDeskDespairDestroyDetailDetectDevelopDeviceDevoteDiagramDialDiamondDiaryDiceDieselDietDifferDigitalDignityDilemmaDinnerDinosaurDirectDirtDisagreeDiscoverDiseaseDishDismissDisorderDisplayDistanceDivertDivideDivorceDizzyDoctorDocumentDogDollDolphinDomainDonateDonkeyDonorDoorDoseDoubleDoveDraftDragonDramaDrasticDrawDreamDressDriftDrillDrinkDripDriveDropDrumDryDuckDumbDuneDuringDustDutchDutyDwarfDynamicEagerEagleEarlyEarnEarthEasilyEastEasyEchoEcologyEconomyEdgeEditEducateEffortEggEightEitherElbowElderElectricElegantElementElephantElevatorEliteElseEmbarkEmbodyEmbraceEmergeEmotionEmployEmpowerEmptyEnableEnactEndEndlessEndorseEnemyEnergyEnforceEngageEngineEnhanceEnjoyEnlistEnoughEnrichEnrollEnsureEnterEntireEntryEnvelopeEpisodeEqualEquipEraEraseErodeErosionErrorEruptEscapeEssayEssenceEstateEternalEthicsEvidenceEvilEvokeEvolveExactExampleExcessExchangeExciteExcludeExcuseExecuteExerciseExhaustExhibitExileExistExitExoticExpandExpectExpireExplainExposeExpressExtendExtraEyeEyebrowFabricFaceFacultyFadeFaintFaithFallFalseFameFamilyFamousFanFancyFantasyFarmFashionFatFatalFatherFatigueFaultFavoriteFeatureFebruaryFederalFeeFeedFeelFemaleFenceFestivalFetchFeverFewFiberFictionFieldFigureFileFilmFilterFinalFindFineFingerFinishFireFirmFirstFiscalFishFitFitnessFixFlagFlameFlashFlatFlavorFleeFlightFlipFloatFlockFloorFlowerFluidFlushFlyFoamFocusFogFoilFoldFollowFoodFootForceForestForgetForkFortuneForumForwardFossilFosterFoundFoxFragileFrameFrequentFreshFriendFringeFrogFrontFrostFrownFrozenFruitFuelFunFunnyFurnaceFuryFutureGadgetGainGalaxyGalleryGameGapGarageGarbageGardenGarlicGarmentGasGaspGateGatherGaugeGazeGeneralGeniusGenreGentleGenuineGestureGhostGiantGiftGiggleGingerGiraffeGirlGiveGladGlanceGlareGlassGlideGlimpseGlobeGloomGloryGloveGlowGlueGoatGoddessGoldGoodGooseGorillaGospelGossipGovernGownGrabGraceGrainGrantGrapeGrassGravityGreatGreenGridGriefGritGroceryGroupGrowGruntGuardGuessGuideGuiltGuitarGunGymHabitHairHalfHammerHamsterHandHappyHarborHardHarshHarvestHatHaveHawkHazardHeadHealthHeartHeavyHedgehogHeightHelloHelmetHelpHenHeroHiddenHighHillHintHipHireHistoryHobbyHockeyHoldHoleHolidayHollowHomeHoneyHoodHopeHornHorrorHorseHospitalHostHotelHourHoverHubHugeHumanHumbleHumorHundredHungryHuntHurdleHurryHurtHusbandHybridIceIconIdeaIdentifyIdleIgnoreIllIllegalIllnessImageImitateImmenseImmuneImpactImposeImproveImpulseInchIncludeIncomeIncreaseIndexIndicateIndoorIndustryInfantInflictInformInhaleInheritInitialInjectInjuryInmateInnerInnocentInputInquiryInsaneInsectInsideInspireInstallIntactInterestIntoInvestInviteInvolveIronIslandIsolateIssueItemIvoryJacketJaguarJarJazzJealousJeansJellyJewelJobJoinJokeJourneyJoyJudgeJuiceJumpJungleJuniorJunkJustKangarooKeenKeepKetchupKeyKickKidKidneyKindKingdomKissKitKitchenKiteKittenKiwiKneeKnifeKnockKnowLabLabelLaborLadderLadyLakeLampLanguageLaptopLargeLaterLatinLaughLaundryLavaLawLawnLawsuitLayerLazyLeaderLeafLearnLeaveLectureLeftLegLegalLegendLeisureLemonLendLengthLensLeopardLessonLetterLevelLiarLibertyLibraryLicenseLifeLiftLightLikeLimbLimitLinkLionLiquidListLittleLiveLizardLoadLoanLobsterLocalLockLogicLonelyLongLoopLotteryLoudLoungeLoveLoyalLuckyLuggageLumberLunarLunchLuxuryLyricsMachineMadMagicMagnetMaidMailMainMajorMakeMammalManManageMandateMangoMansionManualMapleMarbleMarchMarginMarineMarketMarriageMaskMassMasterMatchMaterialMathMatrixMatterMaximumMazeMeadowMeanMeasureMeatMechanicMedalMediaMelodyMeltMemberMemoryMentionMenuMercyMergeMeritMerryMeshMessageMetalMethodMiddleMidnightMilkMillionMimicMindMinimumMinorMinuteMiracleMirrorMiseryMissMistakeMixMixedMixtureMobileModelModifyMomMomentMonitorMonkeyMonsterMonthMoonMoralMoreMorningMosquitoMotherMotionMotorMountainMouseMoveMovieMuchMuffinMuleMultiplyMuscleMuseumMushroomMusicMustMutualMyselfMysteryMythNaiveNameNapkinNarrowNastyNationNatureNearNeckNeedNegativeNeglectNeitherNephewNerveNestNetNetworkNeutralNeverNewsNextNiceNightNobleNoiseNomineeNoodleNormalNorthNoseNotableNoteNothingNoticeNovelNowNuclearNumberNurseNutOakObeyObjectObligeObscureObserveObtainObviousOccurOceanOctoberOdorOffOfferOfficeOftenOilOkayOldOliveOlympicOmitOnceOneOnionOnlineOnlyOpenOperaOpinionOpposeOptionOrangeOrbitOrchardOrderOrdinaryOrganOrientOriginalOrphanOstrichOtherOutdoorOuterOutputOutsideOvalOvenOverOwnOwnerOxygenOysterOzonePactPaddlePagePairPalacePalmPandaPanelPanicPantherPaperParadeParentParkParrotPartyPassPatchPathPatientPatrolPatternPausePavePaymentPeacePeanutPearPeasantPelicanPenPenaltyPencilPeoplePepperPerfectPermitPersonPetPhonePhotoPhrasePhysicalPianoPicnicPicturePiecePigPigeonPillPilotPinkPioneerPipePistolPitchPizzaPlacePlanetPlasticPlatePlayPleasePledgePluckPlugPlungePoemPoetPointPolarPolePolicePondPonyPoolPopularPortionPositionPossiblePostPotatoPotteryPovertyPowderPowerPracticePraisePredictPreferPreparePresentPrettyPreventPricePridePrimaryPrintPriorityPrisonPrivatePrizeProblemProcessProduceProfitProgramProjectPromoteProofPropertyProsperProtectProudProvidePublicPuddingPullPulpPulsePumpkinPunchPupilPuppyPurchasePurityPurposePursePushPutPuzzlePyramidQualityQuantumQuarterQuestionQuickQuitQuizQuoteRabbitRaccoonRaceRackRadarRadioRailRainRaiseRallyRampRanchRandomRangeRapidRareRateRatherRavenRawRazorReadyRealReasonRebelRebuildRecallReceiveRecipeRecordRecycleReduceReflectReformRefuseRegionRegretRegularRejectRelaxReleaseReliefRelyRemainRememberRemindRemoveRenderRenewRentReopenRepairRepeatReplaceReportRequireRescueResembleResistResourceResponseResultRetireRetreatReturnReunionRevealReviewRewardRhythmRibRibbonRiceRichRideRidgeRifleRightRigidRingRiotRippleRiskRitualRivalRiverRoadRoastRobotRobustRocketRomanceRoofRookieRoomRoseRotateRoughRoundRouteRoyalRubberRudeRugRuleRunRunwayRuralSadSaddleSadnessSafeSailSaladSalmonSalonSaltSaluteSameSampleSandSatisfySatoshiSauceSausageSaveSayScaleScanScareScatterSceneSchemeSchoolScienceScissorsScorpionScoutScrapScreenScriptScrubSeaSearchSeasonSeatSecondSecretSectionSecuritySeedSeekSegmentSelectSellSeminarSeniorSenseSentenceSeriesServiceSessionSettleSetupSevenShadowShaftShallowShareShedShellSheriffShieldShiftShineShipShiverShockShoeShootShopShortShoulderShoveShrimpShrugShuffleShySiblingSickSideSiegeSightSignSilentSilkSillySilverSimilarSimpleSinceSingSirenSisterSituateSixSizeSkateSketchSkiSkillSkinSkirtSkullSlabSlamSleepSlenderSliceSlideSlightSlimSloganSlotSlowSlushSmallSmartSmileSmokeSmoothSnackSnakeSnapSniffSnowSoapSoccerSocialSockSodaSoftSolarSoldierSolidSolutionSolveSomeoneSongSoonSorrySortSoulSoundSoupSourceSouthSpaceSpareSpatialSpawnSpeakSpecialSpeedSpellSpendSphereSpiceSpiderSpikeSpinSpiritSplitSpoilSponsorSpoonSportSpotSpraySpreadSpringSpySquareSqueezeSquirrelStableStadiumStaffStageStairsStampStandStartStateStaySteakSteelStemStepStereoStickStillStingStockStomachStoneStoolStoryStoveStrategyStreetStrikeStrongStruggleStudentStuffStumbleStyleSubjectSubmitSubwaySuccessSuchSuddenSufferSugarSuggestSuitSummerSunSunnySunsetSuperSupplySupremeSureSurfaceSurgeSurpriseSurroundSurveySuspectSustainSwallowSwampSwapSwarmSwearSweetSwiftSwimSwingSwitchSwordSymbolSymptomSyrupSystemTableTackleTagTailTalentTalkTankTapeTargetTaskTasteTattooTaxiTeachTeamTellTenTenantTennisTentTermTestTextThankThatThemeThenTheoryThereTheyThingThisThoughtThreeThriveThrowThumbThunderTicketTideTigerTiltTimberTimeTinyTipTiredTissueTitleToastTobaccoTodayToddlerToeTogetherToiletTokenTomatoTomorrowToneTongueTonightToolToothTopTopicToppleTorchTornadoTortoiseTossTotalTouristTowardTowerTownToyTrackTradeTrafficTragicTrainTransferTrapTrashTravelTrayTreatTreeTrendTrialTribeTrickTriggerTrimTripTrophyTroubleTruckTrueTrulyTrumpetTrustTruthTryTubeTuitionTumbleTunaTunnelTurkeyTurnTurtleTwelveTwentyTwiceTwinTwistTwoTypeTypicalUglyUmbrellaUnableUnawareUncleUncoverUnderUndoUnfairUnfoldUnhappyUniformUniqueUnitUniverseUnknownUnlockUntilUnusualUnveilUpdateUpgradeUpholdUponUpperUpsetUrbanUrgeUsageUseUsedUsefulUselessUsualUtilityVacantVacuumVagueValidValleyValveVanVanishVaporVariousVastVaultVehicleVelvetVendorVentureVenueVerbVerifyVersionVeryVesselVeteranViableVibrantViciousVictoryVideoViewVillageVintageViolinVirtualVirusVisaVisitVisualVitalVividVocalVoiceVoidVolcanoVolumeVoteVoyageWageWagonWaitWalkWallWalnutWantWarfareWarmWarriorWashWaspWasteWaterWaveWayWealthWeaponWearWeaselWeatherWebWeddingWeekendWeirdWelcomeWestWetWhaleWhatWheatWheelWhenWhereWhipWhisperWideWidthWifeWildWillWinWindowWineWingWinkWinnerWinterWireWisdomWiseWishWitnessWolfWomanWonderWoodWoolWordWorkWorldWorryWorthWrapWreckWrestleWristWriteWrongYardYearYellowYouYoungYouthZebraZeroZoneZoo",Qf=null;function PA(r){if(Qf==null&&(Qf=mM.replace(/([A-Z])/g," $1").toLowerCase().substring(1).split(" "),Wi.check(r)!=="0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60"))throw Qf=null,new Error("BIP39 Wordlist for en (English) FAILED")}var Lg=class extends Wi{constructor(){super("en")}getWord(e){return PA(this),Qf[e]}getWordIndex(e){return PA(this),Qf.indexOf(e)}},Ug=new Lg;Wi.register(Ug);var nl={en:Ug};var IA="hdnode/5.7.0";var Jf=new O(IA),gM=H.from("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),xM=Re("Bitcoin seed"),sl=2147483648;function DA(r){return(1<<r)-1<<8-r}function bM(r){return(1<<r)-1}function rd(r){return Se(Q(r),32)}function RA(r){return Jn.encode(ve([r,qe(Kr(Kr(r)),0,4)]))}function Vg(r){if(r==null)return nl.en;if(typeof r=="string"){let e=nl[r];return e==null&&Jf.throwArgumentError("unknown locale","wordlist",r),e}return r}var ol={},Xn="m/44'/60'/0'/0/0",fr=class{constructor(e,t,i,n,o,s,a,l){if(e!==ol)throw new Error("HDNode constructor cannot be called directly");if(t){let f=new Mi(t);L(this,"privateKey",f.privateKey),L(this,"publicKey",f.compressedPublicKey)}else L(this,"privateKey",null),L(this,"publicKey",Q(i));L(this,"parentFingerprint",n),L(this,"fingerprint",qe(Kf(Kr(this.publicKey)),0,4)),L(this,"address",Oi(this.publicKey)),L(this,"chainCode",o),L(this,"index",s),L(this,"depth",a),l==null?(L(this,"mnemonic",null),L(this,"path",null)):typeof l=="string"?(L(this,"mnemonic",null),L(this,"path",l)):(L(this,"mnemonic",l),L(this,"path",l.path))}get extendedKey(){if(this.depth>=256)throw new Error("Depth too large!");return RA(ve([this.privateKey!=null?"0x0488ADE4":"0x0488B21E",Q(this.depth),this.parentFingerprint,Se(Q(this.index),4),this.chainCode,this.privateKey!=null?ve(["0x00",this.privateKey]):this.publicKey]))}neuter(){return new fr(ol,null,this.publicKey,this.parentFingerprint,this.chainCode,this.index,this.depth,this.path)}_derive(e){if(e>4294967295)throw new Error("invalid index - "+String(e));let t=this.path;t&&(t+="/"+(e&~sl));let i=new Uint8Array(37);if(e&sl){if(!this.privateKey)throw new Error("cannot derive child of neutered node");i.set(j(this.privateKey),1),t&&(t+="'")}else i.set(j(this.publicKey));for(let u=24;u>=0;u-=8)i[33+(u>>3)]=e>>24-u&255;let n=j(Yn(En.sha512,this.chainCode,i)),o=n.slice(0,32),s=n.slice(32),a=null,l=null;this.privateKey?a=rd(H.from(o).add(this.privateKey).mod(gM)):l=new Mi(Q(o))._addPoint(this.publicKey);let f=t,c=this.mnemonic;return c&&(f=Object.freeze({phrase:c.phrase,path:t,locale:c.locale||"en"})),new fr(ol,a,l,this.fingerprint,rd(s),e,this.depth+1,f)}derivePath(e){let t=e.split("/");if(t.length===0||t[0]==="m"&&this.depth!==0)throw new Error("invalid path - "+e);t[0]==="m"&&t.shift();let i=this;for(let n=0;n<t.length;n++){let o=t[n];if(o.match(/^[0-9]+'$/)){let s=parseInt(o.substring(0,o.length-1));if(s>=sl)throw new Error("invalid path index - "+o);i=i._derive(sl+s)}else if(o.match(/^[0-9]+$/)){let s=parseInt(o);if(s>=sl)throw new Error("invalid path index - "+o);i=i._derive(s)}else throw new Error("invalid path component - "+o)}return i}static _fromSeed(e,t){let i=j(e);if(i.length<16||i.length>64)throw new Error("invalid seed");let n=j(Yn(En.sha512,xM,i));return new fr(ol,rd(n.slice(0,32)),null,"0x00000000",rd(n.slice(32)),0,0,t)}static fromMnemonic(e,t,i){return i=Vg(i),e=Us(al(e,i),i),fr._fromSeed(qg(e,t),{phrase:e,path:"m",locale:i.locale})}static fromSeed(e){return fr._fromSeed(e,null)}static fromExtendedKey(e){let t=Jn.decode(e);(t.length!==82||RA(t.slice(0,78))!==e)&&Jf.throwArgumentError("invalid extended key","extendedKey","[REDACTED]");let i=t[4],n=Q(t.slice(5,9)),o=parseInt(Q(t.slice(9,13)).substring(2),16),s=Q(t.slice(13,45)),a=t.slice(45,78);switch(Q(t.slice(0,4))){case"0x0488b21e":case"0x043587cf":return new fr(ol,null,Q(a),n,s,o,i,null);case"0x0488ade4":case"0x04358394 ":if(a[0]!==0)break;return new fr(ol,Q(a.slice(1)),null,n,s,o,i,null)}return Jf.throwArgumentError("invalid extended key","extendedKey","[REDACTED]")}};function qg(r,e){e||(e="");let t=Re("mnemonic"+e,Vr.NFKD);return Ls(Re(r,Vr.NFKD),t,2048,64,"sha512")}function al(r,e){e=Vg(e),Jf.checkNormalize();let t=e.split(r);if(t.length%3!==0)throw new Error("invalid mnemonic");let i=j(new Uint8Array(Math.ceil(11*t.length/8))),n=0;for(let f=0;f<t.length;f++){let c=e.getWordIndex(t[f].normalize("NFKD"));if(c===-1)throw new Error("invalid mnemonic");for(let u=0;u<11;u++)c&1<<10-u&&(i[n>>3]|=1<<7-n%8),n++}let o=32*t.length/3,s=t.length/3,a=DA(s);if((j(Kr(i.slice(0,o/8)))[0]&a)!==(i[i.length-1]&a))throw new Error("invalid checksum");return Q(i.slice(0,o/8))}function Us(r,e){if(e=Vg(e),r=j(r),r.length%4!==0||r.length<16||r.length>32)throw new Error("invalid entropy");let t=[0],i=11;for(let s=0;s<r.length;s++)i>8?(t[t.length-1]<<=8,t[t.length-1]|=r[s],i-=8):(t[t.length-1]<<=i,t[t.length-1]|=r[s]>>8-i,t.push(r[s]&bM(8-i)),i+=3);let n=r.length/4,o=j(Kr(r))[0]&DA(n);return t[t.length-1]<<=n,t[t.length-1]|=o>>8-n,e.join(t.map(s=>e.getWord(s)))}function BA(r,e){try{return al(r,e),!0}catch{}return!1}function FA(r){return(typeof r!="number"||r<0||r>=sl||r%1)&&Jf.throwArgumentError("invalid account index","index",r),`m/44'/60'/${r}'/0/0`}var LA="random/5.7.0";var jg=new O(LA);function yM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}var UA=yM(),id=UA.crypto||UA.msCrypto;(!id||!id.getRandomValues)&&(jg.warn("WARNING: Missing strong random number source"),id={getRandomValues:function(r){return jg.throwError("no secure random source avaialble",O.errors.UNSUPPORTED_OPERATION,{operation:"crypto.getRandomValues"})}});function kn(r){(r<=0||r>1024||r%1||r!=r)&&jg.throwArgumentError("invalid length","length",r);let e=new Uint8Array(r);return id.getRandomValues(e),j(e)}function Yf(r){r=r.slice();for(let e=r.length-1;e>0;e--){let t=Math.floor(Math.random()*(e+1)),i=r[e];r[e]=r[t],r[t]=i}return r}var Wg=Ri(Hg());var nd="json-wallets/5.7.0";function $n(r){return typeof r=="string"&&r.substring(0,2)!=="0x"&&(r="0x"+r),j(r)}function ll(r,e){for(r=String(r);r.length<e;)r="0"+r;return r}function Xf(r){return typeof r=="string"?Re(r,Vr.NFKC):j(r)}function Wt(r,e){let t=r,i=e.toLowerCase().split("/");for(let n=0;n<i.length;n++){let o=null;for(let s in t)if(s.toLowerCase()===i[n]){o=t[s];break}if(o===null)return null;t=o}return t}function qA(r){let e=j(r);e[6]=e[6]&15|64,e[8]=e[8]&63|128;let t=Q(e);return[t.substring(2,10),t.substring(10,14),t.substring(14,18),t.substring(18,22),t.substring(22,34)].join("-")}var vM=new O(nd),Gg=class extends oi{isCrowdsaleAccount(e){return!!(e&&e._isCrowdsaleAccount)}};function Kg(r,e){let t=JSON.parse(r);e=Xf(e);let i=Ae(Wt(t,"ethaddr")),n=$n(Wt(t,"encseed"));(!n||n.length%16!==0)&&vM.throwArgumentError("invalid encseed","json",r);let o=j(Ls(e,e,2e3,32,"sha256")).slice(0,16),s=n.slice(0,16),a=n.slice(16),l=new Wg.default.ModeOfOperation.cbc(o,s),f=Wg.default.padding.pkcs7.strip(j(l.decrypt(a))),c="";for(let p=0;p<f.length;p++)c+=String.fromCharCode(f[p]);let u=Re(c),d=we(u);return new Gg({_isCrowdsaleAccount:!0,address:i,privateKey:d})}function od(r){let e=null;try{e=JSON.parse(r)}catch{return!1}return e.encseed&&e.ethaddr}function sd(r){let e=null;try{e=JSON.parse(r)}catch{return!1}return!(!e.version||parseInt(e.version)!==e.version||parseInt(e.version)!==3)}function Qg(r){if(od(r))try{return Ae(JSON.parse(r).ethaddr)}catch{return null}if(sd(r))try{return Ae(JSON.parse(r).address)}catch{return null}return null}var Zn=Ri(Hg()),ad=Ri(zA());var wM=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(c){try{f(i.next(c))}catch(u){s(u)}}function l(c){try{f(i.throw(c))}catch(u){s(u)}}function f(c){c.done?o(c.value):n(c.value).then(a,l)}f((i=i.apply(r,e||[])).next())})},Yg=new O(nd);function HA(r){return r!=null&&r.mnemonic&&r.mnemonic.phrase}var Xg=class extends oi{isKeystoreAccount(e){return!!(e&&e._isKeystoreAccount)}};function AM(r,e,t){if(Wt(r,"crypto/cipher")==="aes-128-ctr"){let n=$n(Wt(r,"crypto/cipherparams/iv")),o=new Zn.default.Counter(n),s=new Zn.default.ModeOfOperation.ctr(e,o);return j(s.decrypt(t))}return null}function WA(r,e){let t=$n(Wt(r,"crypto/ciphertext"));if(Q(we(ve([e.slice(16,32),t]))).substring(2)!==Wt(r,"crypto/mac").toLowerCase())throw new Error("invalid password");let n=AM(r,e.slice(0,16),t);n||Yg.throwError("unsupported cipher",O.errors.UNSUPPORTED_OPERATION,{operation:"decrypt"});let o=e.slice(32,64),s=Oi(n);if(r.address){let l=r.address.toLowerCase();if(l.substring(0,2)!=="0x"&&(l="0x"+l),Ae(l)!==s)throw new Error("address mismatch")}let a={_isKeystoreAccount:!0,address:s,privateKey:Q(n)};if(Wt(r,"x-ethers/version")==="0.1"){let l=$n(Wt(r,"x-ethers/mnemonicCiphertext")),f=$n(Wt(r,"x-ethers/mnemonicCounter")),c=new Zn.default.Counter(f),u=new Zn.default.ModeOfOperation.ctr(o,c),d=Wt(r,"x-ethers/path")||Xn,p=Wt(r,"x-ethers/locale")||"en",g=j(u.decrypt(l));try{let b=Us(g,p),k=fr.fromMnemonic(b,null,p).derivePath(d);if(k.privateKey!=a.privateKey)throw new Error("mnemonic mismatch");a.mnemonic=k.mnemonic}catch(b){if(b.code!==O.errors.INVALID_ARGUMENT||b.argument!=="wordlist")throw b}}return new Xg(a)}function GA(r,e,t,i,n){return j(Ls(r,e,t,i,n))}function EM(r,e,t,i,n){return Promise.resolve(GA(r,e,t,i,n))}function KA(r,e,t,i,n){let o=Xf(e),s=Wt(r,"crypto/kdf");if(s&&typeof s=="string"){let a=function(l,f){return Yg.throwArgumentError("invalid key-derivation function parameters",l,f)};if(s.toLowerCase()==="scrypt"){let l=$n(Wt(r,"crypto/kdfparams/salt")),f=parseInt(Wt(r,"crypto/kdfparams/n")),c=parseInt(Wt(r,"crypto/kdfparams/r")),u=parseInt(Wt(r,"crypto/kdfparams/p"));(!f||!c||!u)&&a("kdf",s),(f&f-1)!==0&&a("N",f);let d=parseInt(Wt(r,"crypto/kdfparams/dklen"));return d!==32&&a("dklen",d),i(o,l,f,c,u,64,n)}else if(s.toLowerCase()==="pbkdf2"){let l=$n(Wt(r,"crypto/kdfparams/salt")),f=null,c=Wt(r,"crypto/kdfparams/prf");c==="hmac-sha256"?f="sha256":c==="hmac-sha512"?f="sha512":a("prf",c);let u=parseInt(Wt(r,"crypto/kdfparams/c")),d=parseInt(Wt(r,"crypto/kdfparams/dklen"));return d!==32&&a("dklen",d),t(o,l,u,d,f)}}return Yg.throwArgumentError("unsupported key-derivation function","kdf",s)}function QA(r,e){let t=JSON.parse(r),i=KA(t,e,GA,ad.default.syncScrypt);return WA(t,i)}function JA(r,e,t){return wM(this,void 0,void 0,function*(){let i=JSON.parse(r),n=yield KA(i,e,EM,ad.default.scrypt,t);return WA(i,n)})}function $g(r,e,t,i){try{if(Ae(r.address)!==Oi(r.privateKey))throw new Error("address/privateKey mismatch");if(HA(r)){let k=r.mnemonic;if(fr.fromMnemonic(k.phrase,null,k.locale).derivePath(k.path||Xn).privateKey!=r.privateKey)throw new Error("mnemonic mismatch")}}catch(k){return Promise.reject(k)}typeof t=="function"&&!i&&(i=t,t={}),t||(t={});let n=j(r.privateKey),o=Xf(e),s=null,a=null,l=null;if(HA(r)){let k=r.mnemonic;s=j(al(k.phrase,k.locale||"en")),a=k.path||Xn,l=k.locale||"en"}let f=t.client;f||(f="ethers.js");let c=null;t.salt?c=j(t.salt):c=kn(32);let u=null;if(t.iv){if(u=j(t.iv),u.length!==16)throw new Error("invalid iv")}else u=kn(16);let d=null;if(t.uuid){if(d=j(t.uuid),d.length!==16)throw new Error("invalid uuid")}else d=kn(16);let p=1<<17,g=8,b=1;return t.scrypt&&(t.scrypt.N&&(p=t.scrypt.N),t.scrypt.r&&(g=t.scrypt.r),t.scrypt.p&&(b=t.scrypt.p)),ad.default.scrypt(o,c,p,g,b,64,i).then(k=>{k=j(k);let _=k.slice(0,16),P=k.slice(16,32),N=k.slice(32,64),I=new Zn.default.Counter(u),D=new Zn.default.ModeOfOperation.ctr(_,I),B=j(D.encrypt(n)),V=we(ve([P,B])),W={address:r.address.substring(2).toLowerCase(),id:qA(d),version:3,crypto:{cipher:"aes-128-ctr",cipherparams:{iv:Q(u).substring(2)},ciphertext:Q(B).substring(2),kdf:"scrypt",kdfparams:{salt:Q(c).substring(2),n:p,dklen:32,p:b,r:g},mac:V.substring(2)}};if(s){let Y=kn(16),$=new Zn.default.Counter(Y),Z=new Zn.default.ModeOfOperation.ctr(N,$),ce=j(Z.encrypt(s)),M=new Date,h=M.getUTCFullYear()+"-"+ll(M.getUTCMonth()+1,2)+"-"+ll(M.getUTCDate(),2)+"T"+ll(M.getUTCHours(),2)+"-"+ll(M.getUTCMinutes(),2)+"-"+ll(M.getUTCSeconds(),2)+".0Z";W["x-ethers"]={client:f,gethFilename:"UTC--"+h+"--"+W.address,mnemonicCounter:Q(Y).substring(2),mnemonicCiphertext:Q(ce).substring(2),path:a,locale:l,version:"0.1"}}return JSON.stringify(W)})}function YA(r,e,t){if(od(r)){t&&t(0);let i=Kg(r,e);return t&&t(1),Promise.resolve(i)}return sd(r)?JA(r,e,t):Promise.reject(new Error("invalid JSON wallet"))}function XA(r,e){if(od(r))return Kg(r,e);if(sd(r))return QA(r,e);throw new Error("invalid JSON wallet")}var $A="wallet/5.7.0";var ZA=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(c){try{f(i.next(c))}catch(u){s(u)}}function l(c){try{f(i.throw(c))}catch(u){s(u)}}function f(c){c.done?o(c.value):n(c.value).then(a,l)}f((i=i.apply(r,e||[])).next())})},fl=new O($A);function kM(r){return r!=null&&pe(r.privateKey,32)&&r.address!=null}function SM(r){let e=r.mnemonic;return e&&e.phrase}var Sn=class extends Wr{constructor(e,t){if(super(),kM(e)){let i=new Mi(e.privateKey);if(L(this,"_signingKey",()=>i),L(this,"address",Oi(this.publicKey)),this.address!==Ae(e.address)&&fl.throwArgumentError("privateKey/address mismatch","privateKey","[REDACTED]"),SM(e)){let n=e.mnemonic;L(this,"_mnemonic",()=>({phrase:n.phrase,path:n.path||Xn,locale:n.locale||"en"}));let o=this.mnemonic,s=fr.fromMnemonic(o.phrase,null,o.locale).derivePath(o.path);Oi(s.privateKey)!==this.address&&fl.throwArgumentError("mnemonic/address mismatch","privateKey","[REDACTED]")}else L(this,"_mnemonic",()=>null)}else{if(Mi.isSigningKey(e))e.curve!=="secp256k1"&&fl.throwArgumentError("unsupported curve; must be secp256k1","privateKey","[REDACTED]"),L(this,"_signingKey",()=>e);else{typeof e=="string"&&e.match(/^[0-9a-f]*$/i)&&e.length===64&&(e="0x"+e);let i=new Mi(e);L(this,"_signingKey",()=>i)}L(this,"_mnemonic",()=>null),L(this,"address",Oi(this.publicKey))}t&&!Hr.isProvider(t)&&fl.throwArgumentError("invalid provider","provider",t),L(this,"provider",t||null)}get mnemonic(){return this._mnemonic()}get privateKey(){return this._signingKey().privateKey}get publicKey(){return this._signingKey().publicKey}getAddress(){return Promise.resolve(this.address)}connect(e){return new Sn(this,e)}signTransaction(e){return je(e).then(t=>{t.from!=null&&(Ae(t.from)!==this.address&&fl.throwArgumentError("transaction from address mismatch","transaction.from",e.from),delete t.from);let i=this._signingKey().signDigest(we(Hf(t)));return Hf(t,i)})}signMessage(e){return ZA(this,void 0,void 0,function*(){return Tf(this._signingKey().signDigest(Wa(e)))})}_signTypedData(e,t,i){return ZA(this,void 0,void 0,function*(){let n=yield zt.resolveNames(e,t,i,o=>(this.provider==null&&fl.throwError("cannot resolve ENS names without a provider",O.errors.UNSUPPORTED_OPERATION,{operation:"resolveName",value:o}),this.provider.resolveName(o)));return Tf(this._signingKey().signDigest(zt.hash(n.domain,t,n.value)))})}encrypt(e,t,i){if(typeof t=="function"&&!i&&(i=t,t={}),i&&typeof i!="function")throw new Error("invalid callback");return t||(t={}),$g(this,e,t,i)}static createRandom(e){let t=kn(16);e||(e={}),e.extraEntropy&&(t=j(qe(we(ve([t,e.extraEntropy])),0,16)));let i=Us(t,e.locale);return Sn.fromMnemonic(i,e.path,e.locale)}static fromEncryptedJson(e,t,i){return YA(e,t,i).then(n=>new Sn(n))}static fromEncryptedJsonSync(e,t){return new Sn(XA(e,t))}static fromMnemonic(e,t,i){return t||(t=Xn),new Sn(fr.fromMnemonic(e,null,i).derivePath(t))}};function e6(r,e){return Bs(Wa(r),e)}function t6(r,e,t,i){return Bs(zt.hash(r,e,t),i)}var px={};ta(px,{AlchemyProvider:()=>ml,AlchemyWebSocketProvider:()=>lc,AnkrProvider:()=>fc,BaseProvider:()=>Cn,CloudflareProvider:()=>cc,EtherscanProvider:()=>uc,FallbackProvider:()=>dc,Formatter:()=>ne,InfuraProvider:()=>xl,InfuraWebSocketProvider:()=>mc,IpcProvider:()=>ux,JsonRpcBatchProvider:()=>Ad,JsonRpcProvider:()=>Qr,JsonRpcSigner:()=>dl,NodesmithProvider:()=>gc,PocketProvider:()=>xc,Provider:()=>Hr,Resolver:()=>hl,StaticJsonRpcProvider:()=>ac,UrlJsonRpcProvider:()=>cr,Web3Provider:()=>bc,WebSocketProvider:()=>ro,getDefaultProvider:()=>dx,getNetwork:()=>$f,isCommunityResourcable:()=>tx,isCommunityResource:()=>tc,showThrottleMessage:()=>_n});var r6="networks/5.7.1";var i6=new O(r6);function _M(r){return r&&typeof r.renetwork=="function"}function eo(r){let e=function(t,i){i==null&&(i={});let n=[];if(t.InfuraProvider&&i.infura!=="-")try{n.push(new t.InfuraProvider(r,i.infura))}catch{}if(t.EtherscanProvider&&i.etherscan!=="-")try{n.push(new t.EtherscanProvider(r,i.etherscan))}catch{}if(t.AlchemyProvider&&i.alchemy!=="-")try{n.push(new t.AlchemyProvider(r,i.alchemy))}catch{}if(t.PocketProvider&&i.pocket!=="-"){let o=["goerli","ropsten","rinkeby","sepolia"];try{let s=new t.PocketProvider(r,i.pocket);s.network&&o.indexOf(s.network.name)===-1&&n.push(s)}catch{}}if(t.CloudflareProvider&&i.cloudflare!=="-")try{n.push(new t.CloudflareProvider(r))}catch{}if(t.AnkrProvider&&i.ankr!=="-")try{let o=["ropsten"],s=new t.AnkrProvider(r,i.ankr);s.network&&o.indexOf(s.network.name)===-1&&n.push(s)}catch{}if(n.length===0)return null;if(t.FallbackProvider){let o=1;return i.quorum!=null?o=i.quorum:r==="homestead"&&(o=2),new t.FallbackProvider(n,o)}return n[0]};return e.renetwork=function(t){return eo(t)},e}function fd(r,e){let t=function(i,n){return i.JsonRpcProvider?new i.JsonRpcProvider(r,e):null};return t.renetwork=function(i){return fd(r,i)},t}var n6={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:eo("homestead")},o6={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:eo("ropsten")},s6={chainId:63,name:"classicMordor",_defaultProvider:fd("https://www.ethercluster.com/mordor","classicMordor")},ld={unspecified:{chainId:0,name:"unspecified"},homestead:n6,mainnet:n6,morden:{chainId:2,name:"morden"},ropsten:o6,testnet:o6,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:eo("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:eo("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:eo("goerli")},kintsugi:{chainId:1337702,name:"kintsugi"},sepolia:{chainId:11155111,name:"sepolia",_defaultProvider:eo("sepolia")},classic:{chainId:61,name:"classic",_defaultProvider:fd("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor:s6,classicTestnet:s6,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:fd("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic",_defaultProvider:eo("matic")},maticmum:{chainId:80001,name:"maticmum"},optimism:{chainId:10,name:"optimism",_defaultProvider:eo("optimism")},"optimism-kovan":{chainId:69,name:"optimism-kovan"},"optimism-goerli":{chainId:420,name:"optimism-goerli"},arbitrum:{chainId:42161,name:"arbitrum"},"arbitrum-rinkeby":{chainId:421611,name:"arbitrum-rinkeby"},"arbitrum-goerli":{chainId:421613,name:"arbitrum-goerli"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};function $f(r){if(r==null)return null;if(typeof r=="number"){for(let i in ld){let n=ld[i];if(n.chainId===r)return{name:n.name,chainId:n.chainId,ensAddress:n.ensAddress||null,_defaultProvider:n._defaultProvider||null}}return{chainId:r,name:"unknown"}}if(typeof r=="string"){let i=ld[r];return i==null?null:{name:i.name,chainId:i.chainId,ensAddress:i.ensAddress,_defaultProvider:i._defaultProvider||null}}let e=ld[r.name];if(!e)return typeof r.chainId!="number"&&i6.throwArgumentError("invalid network chainId","network",r),r;r.chainId!==0&&r.chainId!==e.chainId&&i6.throwArgumentError("network chainId mismatch","network",r);let t=r._defaultProvider||null;return t==null&&e._defaultProvider&&(_M(e._defaultProvider)?t=e._defaultProvider.renetwork(r):t=e._defaultProvider),{name:r.name,chainId:e.chainId,ensAddress:r.ensAddress||e.ensAddress||null,_defaultProvider:t}}var a6="web/5.7.1";var CM=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(c){try{f(i.next(c))}catch(u){s(u)}}function l(c){try{f(i.throw(c))}catch(u){s(u)}}function f(c){c.done?o(c.value):n(c.value).then(a,l)}f((i=i.apply(r,e||[])).next())})};function l6(r,e){return CM(this,void 0,void 0,function*(){e==null&&(e={});let t={method:e.method||"GET",headers:e.headers||{},body:e.body||void 0};if(e.skipFetchSetup!==!0&&(t.mode="cors",t.cache="no-cache",t.credentials="same-origin",t.redirect="follow",t.referrer="client"),e.fetchOptions!=null){let s=e.fetchOptions;s.mode&&(t.mode=s.mode),s.cache&&(t.cache=s.cache),s.credentials&&(t.credentials=s.credentials),s.redirect&&(t.redirect=s.redirect),s.referrer&&(t.referrer=s.referrer)}let i=yield fetch(r,t),n=yield i.arrayBuffer(),o={};return i.headers.forEach?i.headers.forEach((s,a)=>{o[a.toLowerCase()]=s}):i.headers.keys().forEach(s=>{o[s.toLowerCase()]=i.headers.get(s)}),{headers:o,statusCode:i.status,statusMessage:i.statusText,body:j(new Uint8Array(n))}})}var TM=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(c){try{f(i.next(c))}catch(u){s(u)}}function l(c){try{f(i.throw(c))}catch(u){s(u)}}function f(c){c.done?o(c.value):n(c.value).then(a,l)}f((i=i.apply(r,e||[])).next())})},Gi=new O(a6);function f6(r){return new Promise(e=>{setTimeout(e,r)})}function Lo(r,e){if(r==null)return null;if(typeof r=="string")return r;if(qn(r)){if(e&&(e.split("/")[0]==="text"||e.split(";")[0].trim()==="application/json"))try{return zr(r)}catch{}return Q(r)}return r}function MM(r){return Re(r.replace(/%([0-9a-f][0-9a-f])/gi,(e,t)=>String.fromCharCode(parseInt(t,16))))}function Zg(r,e,t){let i=typeof r=="object"&&r.throttleLimit!=null?r.throttleLimit:12;Gi.assertArgument(i>0&&i%1===0,"invalid connection throttle limit","connection.throttleLimit",i);let n=typeof r=="object"?r.throttleCallback:null,o=typeof r=="object"&&typeof r.throttleSlotInterval=="number"?r.throttleSlotInterval:100;Gi.assertArgument(o>0&&o%1===0,"invalid connection throttle slot interval","connection.throttleSlotInterval",o);let s=typeof r=="object"?!!r.errorPassThrough:!1,a={},l=null,f={method:"GET"},c=!1,u=2*60*1e3;if(typeof r=="string")l=r;else if(typeof r=="object"){if((r==null||r.url==null)&&Gi.throwArgumentError("missing URL","connection.url",r),l=r.url,typeof r.timeout=="number"&&r.timeout>0&&(u=r.timeout),r.headers)for(let _ in r.headers)a[_.toLowerCase()]={key:_,value:String(r.headers[_])},["if-none-match","if-modified-since"].indexOf(_.toLowerCase())>=0&&(c=!0);if(f.allowGzip=!!r.allowGzip,r.user!=null&&r.password!=null){l.substring(0,6)!=="https:"&&r.allowInsecureAuthentication!==!0&&Gi.throwError("basic authentication requires a secure https url",O.errors.INVALID_ARGUMENT,{argument:"url",url:l,user:r.user,password:"[REDACTED]"});let _=r.user+":"+r.password;a.authorization={key:"Authorization",value:"Basic "+Ha(Re(_))}}r.skipFetchSetup!=null&&(f.skipFetchSetup=!!r.skipFetchSetup),r.fetchOptions!=null&&(f.fetchOptions=Be(r.fetchOptions))}let d=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),p=l?l.match(d):null;if(p)try{let _={statusCode:200,statusMessage:"OK",headers:{"content-type":p[1]||"text/plain"},body:p[2]?za(p[3]):MM(p[3])},P=_.body;return t&&(P=t(_.body,_)),Promise.resolve(P)}catch(_){Gi.throwError("processing response error",O.errors.SERVER_ERROR,{body:Lo(p[1],p[2]),error:_,requestBody:null,requestMethod:"GET",url:l})}e&&(f.method="POST",f.body=e,a["content-type"]==null&&(a["content-type"]={key:"Content-Type",value:"application/octet-stream"}),a["content-length"]==null&&(a["content-length"]={key:"Content-Length",value:String(e.length)}));let g={};Object.keys(a).forEach(_=>{let P=a[_];g[P.key]=P.value}),f.headers=g;let b=function(){let _=null;return{promise:new Promise(function(I,D){u&&(_=setTimeout(()=>{_!=null&&(_=null,D(Gi.makeError("timeout",O.errors.TIMEOUT,{requestBody:Lo(f.body,g["content-type"]),requestMethod:f.method,timeout:u,url:l})))},u))}),cancel:function(){_!=null&&(clearTimeout(_),_=null)}}}(),k=function(){return TM(this,void 0,void 0,function*(){for(let _=0;_<i;_++){let P=null;try{if(P=yield l6(l,f),_<i){if(P.statusCode===301||P.statusCode===302){let I=P.headers.location||"";if(f.method==="GET"&&I.match(/^https:/)){l=P.headers.location;continue}}else if(P.statusCode===429){let I=!0;if(n&&(I=yield n(_,l)),I){let D=0,B=P.headers["retry-after"];typeof B=="string"&&B.match(/^[1-9][0-9]*$/)?D=parseInt(B)*1e3:D=o*parseInt(String(Math.random()*Math.pow(2,_))),yield f6(D);continue}}}}catch(I){P=I.response,P==null&&(b.cancel(),Gi.throwError("missing response",O.errors.SERVER_ERROR,{requestBody:Lo(f.body,g["content-type"]),requestMethod:f.method,serverError:I,url:l}))}let N=P.body;if(c&&P.statusCode===304?N=null:!s&&(P.statusCode<200||P.statusCode>=300)&&(b.cancel(),Gi.throwError("bad response",O.errors.SERVER_ERROR,{status:P.statusCode,headers:P.headers,body:Lo(N,P.headers?P.headers["content-type"]:null),requestBody:Lo(f.body,g["content-type"]),requestMethod:f.method,url:l})),t)try{let I=yield t(N,P);return b.cancel(),I}catch(I){if(I.throttleRetry&&_<i){let D=!0;if(n&&(D=yield n(_,l)),D){let B=o*parseInt(String(Math.random()*Math.pow(2,_)));yield f6(B);continue}}b.cancel(),Gi.throwError("processing response error",O.errors.SERVER_ERROR,{body:Lo(N,P.headers?P.headers["content-type"]:null),error:I,requestBody:Lo(f.body,g["content-type"]),requestMethod:f.method,url:l})}return b.cancel(),N}return Gi.throwError("failed response",O.errors.SERVER_ERROR,{requestBody:Lo(f.body,g["content-type"]),requestMethod:f.method,url:l})})}();return Promise.race([b.promise,k])}function Ki(r,e,t){let i=(o,s)=>{let a=null;if(o!=null)try{a=JSON.parse(zr(o))}catch(l){Gi.throwError("invalid JSON",O.errors.SERVER_ERROR,{body:o,error:l})}return t&&(a=t(a,s)),a},n=null;if(e!=null){n=Re(e);let o=typeof r=="string"?{url:r}:Be(r);o.headers?Object.keys(o.headers).filter(a=>a.toLowerCase()==="content-type").length!==0||(o.headers=Be(o.headers),o.headers["content-type"]="application/json"):o.headers={"content-type":"application/json"},r=o}return Zg(r,n,i)}function Qi(r,e){return e||(e={}),e=Be(e),e.floor==null&&(e.floor=0),e.ceiling==null&&(e.ceiling=1e4),e.interval==null&&(e.interval=250),new Promise(function(t,i){let n=null,o=!1,s=()=>o?!1:(o=!0,n&&clearTimeout(n),!0);e.timeout&&(n=setTimeout(()=>{s()&&i(new Error("timeout"))},e.timeout));let a=e.retryLimit,l=0;function f(){return r().then(function(c){if(c!==void 0)s()&&t(c);else if(e.oncePoll)e.oncePoll.once("poll",f);else if(e.onceBlock)e.onceBlock.once("block",f);else if(!o){if(l++,l>a){s()&&i(new Error("retry limit reached"));return}let u=e.interval*parseInt(String(Math.random()*Math.pow(2,l)));u<e.floor&&(u=e.floor),u>e.ceiling&&(u=e.ceiling),setTimeout(f,u)}return null},function(c){s()&&i(c)})}f()})}var ox=Ri(d6());var Fe="providers/5.7.2";var ec=new O(Fe),ne=class{constructor(){this.formats=this.getDefaultFormats()}getDefaultFormats(){let e={},t=this.address.bind(this),i=this.bigNumber.bind(this),n=this.blockTag.bind(this),o=this.data.bind(this),s=this.hash.bind(this),a=this.hex.bind(this),l=this.number.bind(this),f=this.type.bind(this),c=u=>this.data(u,!0);return e.transaction={hash:s,type:f,accessList:ne.allowNull(this.accessList.bind(this),null),blockHash:ne.allowNull(s,null),blockNumber:ne.allowNull(l,null),transactionIndex:ne.allowNull(l,null),confirmations:ne.allowNull(l,null),from:t,gasPrice:ne.allowNull(i),maxPriorityFeePerGas:ne.allowNull(i),maxFeePerGas:ne.allowNull(i),gasLimit:i,to:ne.allowNull(t,null),value:i,nonce:l,data:o,r:ne.allowNull(this.uint256),s:ne.allowNull(this.uint256),v:ne.allowNull(l),creates:ne.allowNull(t,null),raw:ne.allowNull(o)},e.transactionRequest={from:ne.allowNull(t),nonce:ne.allowNull(l),gasLimit:ne.allowNull(i),gasPrice:ne.allowNull(i),maxPriorityFeePerGas:ne.allowNull(i),maxFeePerGas:ne.allowNull(i),to:ne.allowNull(t),value:ne.allowNull(i),data:ne.allowNull(c),type:ne.allowNull(l),accessList:ne.allowNull(this.accessList.bind(this),null)},e.receiptLog={transactionIndex:l,blockNumber:l,transactionHash:s,address:t,topics:ne.arrayOf(s),data:o,logIndex:l,blockHash:s},e.receipt={to:ne.allowNull(this.address,null),from:ne.allowNull(this.address,null),contractAddress:ne.allowNull(t,null),transactionIndex:l,root:ne.allowNull(a),gasUsed:i,logsBloom:ne.allowNull(o),blockHash:s,transactionHash:s,logs:ne.arrayOf(this.receiptLog.bind(this)),blockNumber:l,confirmations:ne.allowNull(l,null),cumulativeGasUsed:i,effectiveGasPrice:ne.allowNull(i),status:ne.allowNull(l),type:f},e.block={hash:ne.allowNull(s),parentHash:s,number:l,timestamp:l,nonce:ne.allowNull(a),difficulty:this.difficulty.bind(this),gasLimit:i,gasUsed:i,miner:ne.allowNull(t),extraData:o,transactions:ne.allowNull(ne.arrayOf(s)),baseFeePerGas:ne.allowNull(i)},e.blockWithTransactions=Be(e.block),e.blockWithTransactions.transactions=ne.allowNull(ne.arrayOf(this.transactionResponse.bind(this))),e.filter={fromBlock:ne.allowNull(n,void 0),toBlock:ne.allowNull(n,void 0),blockHash:ne.allowNull(s,void 0),address:ne.allowNull(t,void 0),topics:ne.allowNull(this.topics.bind(this),void 0)},e.filterLog={blockNumber:ne.allowNull(l),blockHash:ne.allowNull(s),transactionIndex:l,removed:ne.allowNull(this.boolean.bind(this)),address:t,data:ne.allowFalsish(o,"0x"),topics:ne.arrayOf(s),transactionHash:s,logIndex:l},e}accessList(e){return ci(e||[])}number(e){return e==="0x"?0:H.from(e).toNumber()}type(e){return e==="0x"||e==null?0:H.from(e).toNumber()}bigNumber(e){return H.from(e)}boolean(e){if(typeof e=="boolean")return e;if(typeof e=="string"){if(e=e.toLowerCase(),e==="true")return!0;if(e==="false")return!1}throw new Error("invalid boolean - "+e)}hex(e,t){return typeof e=="string"&&(!t&&e.substring(0,2)!=="0x"&&(e="0x"+e),pe(e))?e.toLowerCase():ec.throwArgumentError("invalid hash","value",e)}data(e,t){let i=this.hex(e,t);if(i.length%2!==0)throw new Error("invalid data; odd-length - "+e);return i}address(e){return Ae(e)}callAddress(e){if(!pe(e,32))return null;let t=Ae(qe(e,12));return t===Ch?null:t}contractAddress(e){return Ps(e)}blockTag(e){if(e==null)return"latest";if(e==="earliest")return"0x0";switch(e){case"earliest":return"0x0";case"latest":case"pending":case"safe":case"finalized":return e}if(typeof e=="number"||pe(e))return un(e);throw new Error("invalid blockTag")}hash(e,t){let i=this.hex(e,t);return Tr(i)!==32?ec.throwArgumentError("invalid hash","value",e):i}difficulty(e){if(e==null)return null;let t=H.from(e);try{return t.toNumber()}catch{}return null}uint256(e){if(!pe(e))throw new Error("invalid uint256");return Se(e,32)}_block(e,t){e.author!=null&&e.miner==null&&(e.miner=e.author);let i=e._difficulty!=null?e._difficulty:e.difficulty,n=ne.check(t,e);return n._difficulty=i==null?null:H.from(i),n}block(e){return this._block(e,this.formats.block)}blockWithTransactions(e){return this._block(e,this.formats.blockWithTransactions)}transactionRequest(e){return ne.check(this.formats.transactionRequest,e)}transactionResponse(e){e.gas!=null&&e.gasLimit==null&&(e.gasLimit=e.gas),e.to&&H.from(e.to).isZero()&&(e.to="0x0000000000000000000000000000000000000000"),e.input!=null&&e.data==null&&(e.data=e.input),e.to==null&&e.creates==null&&(e.creates=this.contractAddress(e)),(e.type===1||e.type===2)&&e.accessList==null&&(e.accessList=[]);let t=ne.check(this.formats.transaction,e);if(e.chainId!=null){let i=e.chainId;pe(i)&&(i=H.from(i).toNumber()),t.chainId=i}else{let i=e.networkId;i==null&&t.v==null&&(i=e.chainId),pe(i)&&(i=H.from(i).toNumber()),typeof i!="number"&&t.v!=null&&(i=(t.v-35)/2,i<0&&(i=0),i=parseInt(i)),typeof i!="number"&&(i=0),t.chainId=i}return t.blockHash&&t.blockHash.replace(/0/g,"")==="x"&&(t.blockHash=null),t}transaction(e){return Jh(e)}receiptLog(e){return ne.check(this.formats.receiptLog,e)}receipt(e){let t=ne.check(this.formats.receipt,e);if(t.root!=null)if(t.root.length<=4){let i=H.from(t.root).toNumber();i===0||i===1?(t.status!=null&&t.status!==i&&ec.throwArgumentError("alt-root-status/status mismatch","value",{root:t.root,status:t.status}),t.status=i,delete t.root):ec.throwArgumentError("invalid alt-root-status","value.root",t.root)}else t.root.length!==66&&ec.throwArgumentError("invalid root hash","value.root",t.root);return t.status!=null&&(t.byzantium=!0),t}topics(e){return Array.isArray(e)?e.map(t=>this.topics(t)):e!=null?this.hash(e,!0):null}filter(e){return ne.check(this.formats.filter,e)}filterLog(e){return ne.check(this.formats.filterLog,e)}static check(e,t){let i={};for(let n in e)try{let o=e[n](t[n]);o!==void 0&&(i[n]=o)}catch(o){throw o.checkKey=n,o.checkValue=t[n],o}return i}static allowNull(e,t){return function(i){return i==null?t:e(i)}}static allowFalsish(e,t){return function(i){return i?e(i):t}}static arrayOf(e){return function(t){if(!Array.isArray(t))throw new Error("not an array");let i=[];return t.forEach(function(n){i.push(e(n))}),i}}};function tx(r){return r&&typeof r.isCommunityResource=="function"}function tc(r){return tx(r)&&r.isCommunityResource()}var p6=!1;function _n(){p6||(p6=!0,console.log("========= NOTICE ========="),console.log("Request-Rate Exceeded  (this message will not be repeated)"),console.log(""),console.log("The default API keys for each service are provided as a highly-throttled,"),console.log("community resource for low-traffic projects and early prototyping."),console.log(""),console.log("While your application will continue to function, we highly recommended"),console.log("signing up for your own API keys to improve performance, increase your"),console.log("request rate/limit and enable other perks, such as metrics and advanced APIs."),console.log(""),console.log("For more details: https://docs.ethers.io/api-keys/"),console.log("=========================="))}var ge=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(c){try{f(i.next(c))}catch(u){s(u)}}function l(c){try{f(i.throw(c))}catch(u){s(u)}}function f(c){c.done?o(c.value):n(c.value).then(a,l)}f((i=i.apply(r,e||[])).next())})},_e=new O(Fe),FM=10;function m6(r){return r==null?"null":(Tr(r)!==32&&_e.throwArgumentError("invalid topic","topic",r),r.toLowerCase())}function g6(r){for(r=r.slice();r.length>0&&r[r.length-1]==null;)r.pop();return r.map(e=>{if(Array.isArray(e)){let t={};e.forEach(n=>{t[m6(n)]=!0});let i=Object.keys(t);return i.sort(),i.join("|")}else return m6(e)}).join("&")}function LM(r){return r===""?[]:r.split(/&/g).map(e=>{if(e==="")return[];let t=e.split("|").map(i=>i==="null"?null:i);return t.length===1?t[0]:t})}function ul(r){if(typeof r=="string"){if(r=r.toLowerCase(),Tr(r)===32)return"tx:"+r;if(r.indexOf(":")===-1)return r}else{if(Array.isArray(r))return"filter:*:"+g6(r);if(Lh.isForkEvent(r))throw _e.warn("not implemented"),new Error("not implemented");if(r&&typeof r=="object")return"filter:"+(r.address||"*")+":"+g6(r.topics||[])}throw new Error("invalid event - "+r)}function rc(){return new Date().getTime()}function x6(r){return new Promise(e=>{setTimeout(e,r)})}var UM=["block","network","pending","poll"],sx=class{constructor(e,t,i){L(this,"tag",e),L(this,"listener",t),L(this,"once",i),this._lastBlockNumber=-2,this._inflight=!1}get event(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}get type(){return this.tag.split(":")[0]}get hash(){let e=this.tag.split(":");return e[0]!=="tx"?null:e[1]}get filter(){let e=this.tag.split(":");if(e[0]!=="filter")return null;let t=e[1],i=LM(e[2]),n={};return i.length>0&&(n.topics=i),t&&t!=="*"&&(n.address=t),n}pollable(){return this.tag.indexOf(":")>=0||UM.indexOf(this.tag)>=0}},VM={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function rx(r){return Se(H.from(r).toHexString(),32)}function b6(r){return Jn.encode(ve([r,qe(Kr(Kr(r)),0,4)]))}var w6=new RegExp("^(ipfs)://(.*)$","i"),y6=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),w6,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function dd(r,e){try{return zr(ic(r,e))}catch{}return null}function ic(r,e){if(r==="0x")return null;let t=H.from(qe(r,e,e+32)).toNumber(),i=H.from(qe(r,t,t+32)).toNumber();return qe(r,t+32,t+32+i)}function ix(r){return r.match(/^ipfs:\/\/ipfs\//i)?r=r.substring(12):r.match(/^ipfs:\/\//i)?r=r.substring(7):_e.throwArgumentError("unsupported IPFS format","link",r),`https://gateway.ipfs.io/ipfs/${r}`}function v6(r){let e=j(r);if(e.length>32)throw new Error("internal; should not happen");let t=new Uint8Array(32);return t.set(e,32-e.length),t}function qM(r){if(r.length%32===0)return r;let e=new Uint8Array(Math.ceil(r.length/32)*32);return e.set(r),e}function A6(r){let e=[],t=0;for(let i=0;i<r.length;i++)e.push(null),t+=32;for(let i=0;i<r.length;i++){let n=j(r[i]);e[i]=v6(t),e.push(v6(n.length)),e.push(qM(n)),t+=32+Math.ceil(n.length/32)*32}return Xt(e)}var hl=class{constructor(e,t,i,n){L(this,"provider",e),L(this,"name",i),L(this,"address",e.formatter.address(t)),L(this,"_resolvedAddress",n)}supportsWildcard(){return this._supportsEip2544||(this._supportsEip2544=this.provider.call({to:this.address,data:"0x01ffc9a79061b92300000000000000000000000000000000000000000000000000000000"}).then(e=>H.from(e).eq(1)).catch(e=>{if(e.code===O.errors.CALL_EXCEPTION)return!1;throw this._supportsEip2544=null,e})),this._supportsEip2544}_fetch(e,t){return ge(this,void 0,void 0,function*(){let i={to:this.address,ccipReadEnabled:!0,data:Xt([e,No(this.name),t||"0x"])},n=!1;(yield this.supportsWildcard())&&(n=!0,i.data=Xt(["0x9061b923",A6([Vf(this.name),i.data])]));try{let o=yield this.provider.call(i);return j(o).length%32===4&&_e.throwError("resolver threw error",O.errors.CALL_EXCEPTION,{transaction:i,data:o}),n&&(o=ic(o,0)),o}catch(o){if(o.code===O.errors.CALL_EXCEPTION)return null;throw o}})}_fetchBytes(e,t){return ge(this,void 0,void 0,function*(){let i=yield this._fetch(e,t);return i!=null?ic(i,0):null})}_getAddress(e,t){let i=VM[String(e)];if(i==null&&_e.throwError(`unsupported coin type: ${e}`,O.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`}),i.ilk==="eth")return this.provider.formatter.address(t);let n=j(t);if(i.p2pkh!=null){let o=t.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(o){let s=parseInt(o[1],16);if(o[2].length===s*2&&s>=1&&s<=75)return b6(ve([[i.p2pkh],"0x"+o[2]]))}}if(i.p2sh!=null){let o=t.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(o){let s=parseInt(o[1],16);if(o[2].length===s*2&&s>=1&&s<=75)return b6(ve([[i.p2sh],"0x"+o[2]]))}}if(i.prefix!=null){let o=n[1],s=n[0];if(s===0?o!==20&&o!==32&&(s=-1):s=-1,s>=0&&n.length===2+o&&o>=1&&o<=75){let a=ox.default.toWords(n.slice(2));return a.unshift(s),ox.default.encode(i.prefix,a)}}return null}getAddress(e){return ge(this,void 0,void 0,function*(){if(e==null&&(e=60),e===60)try{let n=yield this._fetch("0x3b3b57de");return n==="0x"||n===qa?null:this.provider.formatter.callAddress(n)}catch(n){if(n.code===O.errors.CALL_EXCEPTION)return null;throw n}let t=yield this._fetchBytes("0xf1cb7e06",rx(e));if(t==null||t==="0x")return null;let i=this._getAddress(e,t);return i==null&&_e.throwError("invalid or unsupported coin data",O.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`,coinType:e,data:t}),i})}getAvatar(){return ge(this,void 0,void 0,function*(){let e=[{type:"name",content:this.name}];try{let t=yield this.getText("avatar");if(t==null)return null;for(let i=0;i<y6.length;i++){let n=t.match(y6[i]);if(n==null)continue;let o=n[1].toLowerCase();switch(o){case"https":return e.push({type:"url",content:t}),{linkage:e,url:t};case"data":return e.push({type:"data",content:t}),{linkage:e,url:t};case"ipfs":return e.push({type:"ipfs",content:t}),{linkage:e,url:ix(t)};case"erc721":case"erc1155":{let s=o==="erc721"?"0xc87b56dd":"0x0e89341c";e.push({type:o,content:t});let a=this._resolvedAddress||(yield this.getAddress()),l=(n[2]||"").split("/");if(l.length!==2)return null;let f=yield this.provider.formatter.address(l[0]),c=Se(H.from(l[1]).toHexString(),32);if(o==="erc721"){let b=this.provider.formatter.callAddress(yield this.provider.call({to:f,data:Xt(["0x6352211e",c])}));if(a!==b)return null;e.push({type:"owner",content:b})}else if(o==="erc1155"){let b=H.from(yield this.provider.call({to:f,data:Xt(["0x00fdd58e",Se(a,32),c])}));if(b.isZero())return null;e.push({type:"balance",content:b.toString()})}let u={to:this.provider.formatter.address(l[0]),data:Xt([s,c])},d=dd(yield this.provider.call(u),0);if(d==null)return null;e.push({type:"metadata-url-base",content:d}),o==="erc1155"&&(d=d.replace("{id}",c.substring(2)),e.push({type:"metadata-url-expanded",content:d})),d.match(/^ipfs:/i)&&(d=ix(d)),e.push({type:"metadata-url",content:d});let p=yield Ki(d);if(!p)return null;e.push({type:"metadata",content:JSON.stringify(p)});let g=p.image;if(typeof g!="string")return null;if(!g.match(/^(https:\/\/|data:)/i)){if(g.match(w6)==null)return null;e.push({type:"url-ipfs",content:g}),g=ix(g)}return e.push({type:"url",content:g}),{linkage:e,url:g}}}}}catch{}return null})}getContentHash(){return ge(this,void 0,void 0,function*(){let e=yield this._fetchBytes("0xbc1c58d1");if(e==null||e==="0x")return null;let t=e.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){let s=parseInt(t[3],16);if(t[4].length===s*2)return"ipfs://"+Jn.encode("0x"+t[1])}let i=e.match(/^0xe5010172(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(i){let s=parseInt(i[3],16);if(i[4].length===s*2)return"ipns://"+Jn.encode("0x"+i[1])}let n=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(n&&n[1].length===32*2)return"bzz://"+n[1];let o=e.match(/^0x90b2c605([0-9a-f]*)$/);if(o&&o[1].length===34*2){let s={"=":"","+":"-","/":"_"};return"sia://"+Ha("0x"+o[1]).replace(/[=+\/]/g,l=>s[l])}return _e.throwError("invalid or unsupported content hash data",O.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:e})})}getText(e){return ge(this,void 0,void 0,function*(){let t=Re(e);t=ve([rx(64),rx(t.length),t]),t.length%32!==0&&(t=ve([t,Se("0x",32-e.length%32)]));let i=yield this._fetchBytes("0x59d1d43c",Q(t));return i==null||i==="0x"?null:zr(i)})}},nx=null,jM=1,Cn=class extends Hr{constructor(e){if(super(),this._events=[],this._emitted={block:-2},this.disableCcipRead=!1,this.formatter=new.target.getFormatter(),L(this,"anyNetwork",e==="any"),this.anyNetwork&&(e=this.detectNetwork()),e instanceof Promise)this._networkPromise=e,e.catch(t=>{}),this._ready().catch(t=>{});else{let t=qt(new.target,"getNetwork")(e);t?(L(this,"_network",t),this.emit("network",t,null)):_e.throwArgumentError("invalid network","network",e)}this._maxInternalBlockNumber=-1024,this._lastBlockNumber=-2,this._maxFilterBlockRange=10,this._pollingInterval=4e3,this._fastQueryDate=0}_ready(){return ge(this,void 0,void 0,function*(){if(this._network==null){let e=null;if(this._networkPromise)try{e=yield this._networkPromise}catch{}e==null&&(e=yield this.detectNetwork()),e||_e.throwError("no network detected",O.errors.UNKNOWN_ERROR,{}),this._network==null&&(this.anyNetwork?this._network=e:L(this,"_network",e),this.emit("network",e,null))}return this._network})}get ready(){return Qi(()=>this._ready().then(e=>e,e=>{if(!(e.code===O.errors.NETWORK_ERROR&&e.event==="noNetwork"))throw e}))}static getFormatter(){return nx==null&&(nx=new ne),nx}static getNetwork(e){return $f(e??"homestead")}ccipReadFetch(e,t,i){return ge(this,void 0,void 0,function*(){if(this.disableCcipRead||i.length===0)return null;let n=e.to.toLowerCase(),o=t.toLowerCase(),s=[];for(let a=0;a<i.length;a++){let l=i[a],f=l.replace("{sender}",n).replace("{data}",o),c=l.indexOf("{data}")>=0?null:JSON.stringify({data:o,sender:n}),u=yield Ki({url:f,errorPassThrough:!0},c,(p,g)=>(p.status=g.statusCode,p));if(u.data)return u.data;let d=u.message||"unknown error";if(u.status>=400&&u.status<500)return _e.throwError(`response not found during CCIP fetch: ${d}`,O.errors.SERVER_ERROR,{url:l,errorMessage:d});s.push(d)}return _e.throwError(`error encountered during CCIP fetch: ${s.map(a=>JSON.stringify(a)).join(", ")}`,O.errors.SERVER_ERROR,{urls:i,errorMessages:s})})}_getInternalBlockNumber(e){return ge(this,void 0,void 0,function*(){if(yield this._ready(),e>0)for(;this._internalBlockNumber;){let n=this._internalBlockNumber;try{let o=yield n;if(rc()-o.respTime<=e)return o.blockNumber;break}catch{if(this._internalBlockNumber===n)break}}let t=rc(),i=je({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then(n=>null,n=>n)}).then(({blockNumber:n,networkError:o})=>{if(o)throw this._internalBlockNumber===i&&(this._internalBlockNumber=null),o;let s=rc();return n=H.from(n).toNumber(),n<this._maxInternalBlockNumber&&(n=this._maxInternalBlockNumber),this._maxInternalBlockNumber=n,this._setFastBlockNumber(n),{blockNumber:n,reqTime:t,respTime:s}});return this._internalBlockNumber=i,i.catch(n=>{this._internalBlockNumber===i&&(this._internalBlockNumber=null)}),(yield i).blockNumber})}poll(){return ge(this,void 0,void 0,function*(){let e=jM++,t=[],i=null;try{i=yield this._getInternalBlockNumber(100+this.pollingInterval/2)}catch(n){this.emit("error",n);return}if(this._setFastBlockNumber(i),this.emit("poll",e,i),i===this._lastBlockNumber){this.emit("didPoll",e);return}if(this._emitted.block===-2&&(this._emitted.block=i-1),Math.abs(this._emitted.block-i)>1e3)_e.warn(`network block skew detected; skipping block events (emitted=${this._emitted.block} blockNumber${i})`),this.emit("error",_e.makeError("network block skew detected",O.errors.NETWORK_ERROR,{blockNumber:i,event:"blockSkew",previousBlockNumber:this._emitted.block})),this.emit("block",i);else for(let n=this._emitted.block+1;n<=i;n++)this.emit("block",n);this._emitted.block!==i&&(this._emitted.block=i,Object.keys(this._emitted).forEach(n=>{if(n==="block")return;let o=this._emitted[n];o!=="pending"&&i-o>12&&delete this._emitted[n]})),this._lastBlockNumber===-2&&(this._lastBlockNumber=i-1),this._events.forEach(n=>{switch(n.type){case"tx":{let o=n.hash,s=this.getTransactionReceipt(o).then(a=>(!a||a.blockNumber==null||(this._emitted["t:"+o]=a.blockNumber,this.emit(o,a)),null)).catch(a=>{this.emit("error",a)});t.push(s);break}case"filter":{if(!n._inflight){n._inflight=!0,n._lastBlockNumber===-2&&(n._lastBlockNumber=i-1);let o=n.filter;o.fromBlock=n._lastBlockNumber+1,o.toBlock=i;let s=o.toBlock-this._maxFilterBlockRange;s>o.fromBlock&&(o.fromBlock=s),o.fromBlock<0&&(o.fromBlock=0);let a=this.getLogs(o).then(l=>{n._inflight=!1,l.length!==0&&l.forEach(f=>{f.blockNumber>n._lastBlockNumber&&(n._lastBlockNumber=f.blockNumber),this._emitted["b:"+f.blockHash]=f.blockNumber,this._emitted["t:"+f.transactionHash]=f.blockNumber,this.emit(o,f)})}).catch(l=>{this.emit("error",l),n._inflight=!1});t.push(a)}break}}}),this._lastBlockNumber=i,Promise.all(t).then(()=>{this.emit("didPoll",e)}).catch(n=>{this.emit("error",n)})})}resetEventsBlock(e){this._lastBlockNumber=e-1,this.polling&&this.poll()}get network(){return this._network}detectNetwork(){return ge(this,void 0,void 0,function*(){return _e.throwError("provider does not support network detection",O.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"})})}getNetwork(){return ge(this,void 0,void 0,function*(){let e=yield this._ready(),t=yield this.detectNetwork();if(e.chainId!==t.chainId){if(this.anyNetwork)return this._network=t,this._lastBlockNumber=-2,this._fastBlockNumber=null,this._fastBlockNumberPromise=null,this._fastQueryDate=0,this._emitted.block=-2,this._maxInternalBlockNumber=-1024,this._internalBlockNumber=null,this.emit("network",t,e),yield x6(0),this._network;let i=_e.makeError("underlying network changed",O.errors.NETWORK_ERROR,{event:"changed",network:e,detectedNetwork:t});throw this.emit("error",i),i}return e})}get blockNumber(){return this._getInternalBlockNumber(100+this.pollingInterval/2).then(e=>{this._setFastBlockNumber(e)},e=>{}),this._fastBlockNumber!=null?this._fastBlockNumber:-1}get polling(){return this._poller!=null}set polling(e){e&&!this._poller?(this._poller=setInterval(()=>{this.poll()},this.pollingInterval),this._bootstrapPoll||(this._bootstrapPoll=setTimeout(()=>{this.poll(),this._bootstrapPoll=setTimeout(()=>{this._poller||this.poll(),this._bootstrapPoll=null},this.pollingInterval)},0))):!e&&this._poller&&(clearInterval(this._poller),this._poller=null)}get pollingInterval(){return this._pollingInterval}set pollingInterval(e){if(typeof e!="number"||e<=0||parseInt(String(e))!=e)throw new Error("invalid polling interval");this._pollingInterval=e,this._poller&&(clearInterval(this._poller),this._poller=setInterval(()=>{this.poll()},this._pollingInterval))}_getFastBlockNumber(){let e=rc();return e-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=e,this._fastBlockNumberPromise=this.getBlockNumber().then(t=>((this._fastBlockNumber==null||t>this._fastBlockNumber)&&(this._fastBlockNumber=t),this._fastBlockNumber))),this._fastBlockNumberPromise}_setFastBlockNumber(e){this._fastBlockNumber!=null&&e<this._fastBlockNumber||(this._fastQueryDate=rc(),(this._fastBlockNumber==null||e>this._fastBlockNumber)&&(this._fastBlockNumber=e,this._fastBlockNumberPromise=Promise.resolve(e)))}waitForTransaction(e,t,i){return ge(this,void 0,void 0,function*(){return this._waitForTransaction(e,t??1,i||0,null)})}_waitForTransaction(e,t,i,n){return ge(this,void 0,void 0,function*(){let o=yield this.getTransactionReceipt(e);return(o?o.confirmations:0)>=t?o:new Promise((s,a)=>{let l=[],f=!1,c=function(){return f?!0:(f=!0,l.forEach(d=>{d()}),!1)},u=d=>{d.confirmations<t||c()||s(d)};if(this.on(e,u),l.push(()=>{this.removeListener(e,u)}),n){let d=n.startBlock,p=null,g=b=>ge(this,void 0,void 0,function*(){f||(yield x6(1e3),this.getTransactionCount(n.from).then(k=>ge(this,void 0,void 0,function*(){if(!f){if(k<=n.nonce)d=b;else{{let _=yield this.getTransaction(e);if(_&&_.blockNumber!=null)return}for(p==null&&(p=d-3,p<n.startBlock&&(p=n.startBlock));p<=b;){if(f)return;let _=yield this.getBlockWithTransactions(p);for(let P=0;P<_.transactions.length;P++){let N=_.transactions[P];if(N.hash===e)return;if(N.from===n.from&&N.nonce===n.nonce){if(f)return;let I=yield this.waitForTransaction(N.hash,t);if(c())return;let D="replaced";N.data===n.data&&N.to===n.to&&N.value.eq(n.value)?D="repriced":N.data==="0x"&&N.from===N.to&&N.value.isZero()&&(D="cancelled"),a(_e.makeError("transaction was replaced",O.errors.TRANSACTION_REPLACED,{cancelled:D==="replaced"||D==="cancelled",reason:D,replacement:this._wrapTransaction(N),hash:e,receipt:I}));return}}p++}}f||this.once("block",g)}}),k=>{f||this.once("block",g)}))});if(f)return;this.once("block",g),l.push(()=>{this.removeListener("block",g)})}if(typeof i=="number"&&i>0){let d=setTimeout(()=>{c()||a(_e.makeError("timeout exceeded",O.errors.TIMEOUT,{timeout:i}))},i);d.unref&&d.unref(),l.push(()=>{clearTimeout(d)})}})})}getBlockNumber(){return ge(this,void 0,void 0,function*(){return this._getInternalBlockNumber(0)})}getGasPrice(){return ge(this,void 0,void 0,function*(){yield this.getNetwork();let e=yield this.perform("getGasPrice",{});try{return H.from(e)}catch(t){return _e.throwError("bad result from backend",O.errors.SERVER_ERROR,{method:"getGasPrice",result:e,error:t})}})}getBalance(e,t){return ge(this,void 0,void 0,function*(){yield this.getNetwork();let i=yield je({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),n=yield this.perform("getBalance",i);try{return H.from(n)}catch(o){return _e.throwError("bad result from backend",O.errors.SERVER_ERROR,{method:"getBalance",params:i,result:n,error:o})}})}getTransactionCount(e,t){return ge(this,void 0,void 0,function*(){yield this.getNetwork();let i=yield je({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),n=yield this.perform("getTransactionCount",i);try{return H.from(n).toNumber()}catch(o){return _e.throwError("bad result from backend",O.errors.SERVER_ERROR,{method:"getTransactionCount",params:i,result:n,error:o})}})}getCode(e,t){return ge(this,void 0,void 0,function*(){yield this.getNetwork();let i=yield je({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),n=yield this.perform("getCode",i);try{return Q(n)}catch(o){return _e.throwError("bad result from backend",O.errors.SERVER_ERROR,{method:"getCode",params:i,result:n,error:o})}})}getStorageAt(e,t,i){return ge(this,void 0,void 0,function*(){yield this.getNetwork();let n=yield je({address:this._getAddress(e),blockTag:this._getBlockTag(i),position:Promise.resolve(t).then(s=>un(s))}),o=yield this.perform("getStorageAt",n);try{return Q(o)}catch(s){return _e.throwError("bad result from backend",O.errors.SERVER_ERROR,{method:"getStorageAt",params:n,result:o,error:s})}})}_wrapTransaction(e,t,i){if(t!=null&&Tr(t)!==32)throw new Error("invalid response - sendTransaction");let n=e;return t!=null&&e.hash!==t&&_e.throwError("Transaction hash mismatch from Provider.sendTransaction.",O.errors.UNKNOWN_ERROR,{expectedHash:e.hash,returnedHash:t}),n.wait=(o,s)=>ge(this,void 0,void 0,function*(){o==null&&(o=1),s==null&&(s=0);let a;o!==0&&i!=null&&(a={data:e.data,from:e.from,nonce:e.nonce,to:e.to,value:e.value,startBlock:i});let l=yield this._waitForTransaction(e.hash,o,s,a);return l==null&&o===0?null:(this._emitted["t:"+e.hash]=l.blockNumber,l.status===0&&_e.throwError("transaction failed",O.errors.CALL_EXCEPTION,{transactionHash:e.hash,transaction:e,receipt:l}),l)}),n}sendTransaction(e){return ge(this,void 0,void 0,function*(){yield this.getNetwork();let t=yield Promise.resolve(e).then(o=>Q(o)),i=this.formatter.transaction(e);i.confirmations==null&&(i.confirmations=0);let n=yield this._getInternalBlockNumber(100+2*this.pollingInterval);try{let o=yield this.perform("sendTransaction",{signedTransaction:t});return this._wrapTransaction(i,o,n)}catch(o){throw o.transaction=i,o.transactionHash=i.hash,o}})}_getTransactionRequest(e){return ge(this,void 0,void 0,function*(){let t=yield e,i={};return["from","to"].forEach(n=>{t[n]!=null&&(i[n]=Promise.resolve(t[n]).then(o=>o?this._getAddress(o):null))}),["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach(n=>{t[n]!=null&&(i[n]=Promise.resolve(t[n]).then(o=>o?H.from(o):null))}),["type"].forEach(n=>{t[n]!=null&&(i[n]=Promise.resolve(t[n]).then(o=>o??null))}),t.accessList&&(i.accessList=this.formatter.accessList(t.accessList)),["data"].forEach(n=>{t[n]!=null&&(i[n]=Promise.resolve(t[n]).then(o=>o?Q(o):null))}),this.formatter.transactionRequest(yield je(i))})}_getFilter(e){return ge(this,void 0,void 0,function*(){e=yield e;let t={};return e.address!=null&&(t.address=this._getAddress(e.address)),["blockHash","topics"].forEach(i=>{e[i]!=null&&(t[i]=e[i])}),["fromBlock","toBlock"].forEach(i=>{e[i]!=null&&(t[i]=this._getBlockTag(e[i]))}),this.formatter.filter(yield je(t))})}_call(e,t,i){return ge(this,void 0,void 0,function*(){i>=FM&&_e.throwError("CCIP read exceeded maximum redirections",O.errors.SERVER_ERROR,{redirects:i,transaction:e});let n=e.to,o=yield this.perform("call",{transaction:e,blockTag:t});if(i>=0&&t==="latest"&&n!=null&&o.substring(0,10)==="0x556f1830"&&Tr(o)%32===4)try{let s=qe(o,4),a=qe(s,0,32);H.from(a).eq(n)||_e.throwError("CCIP Read sender did not match",O.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:o});let l=[],f=H.from(qe(s,32,64)).toNumber(),c=H.from(qe(s,f,f+32)).toNumber(),u=qe(s,f+32);for(let _=0;_<c;_++){let P=dd(u,_*32);P==null&&_e.throwError("CCIP Read contained corrupt URL string",O.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:o}),l.push(P)}let d=ic(s,64);H.from(qe(s,100,128)).isZero()||_e.throwError("CCIP Read callback selector included junk",O.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:o});let p=qe(s,96,100),g=ic(s,128),b=yield this.ccipReadFetch(e,d,l);b==null&&_e.throwError("CCIP Read disabled or provided no URLs",O.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:o});let k={to:n,data:Xt([p,A6([b,g])])};return this._call(k,t,i+1)}catch(s){if(s.code===O.errors.SERVER_ERROR)throw s}try{return Q(o)}catch(s){return _e.throwError("bad result from backend",O.errors.SERVER_ERROR,{method:"call",params:{transaction:e,blockTag:t},result:o,error:s})}})}call(e,t){return ge(this,void 0,void 0,function*(){yield this.getNetwork();let i=yield je({transaction:this._getTransactionRequest(e),blockTag:this._getBlockTag(t),ccipReadEnabled:Promise.resolve(e.ccipReadEnabled)});return this._call(i.transaction,i.blockTag,i.ccipReadEnabled?0:-1)})}estimateGas(e){return ge(this,void 0,void 0,function*(){yield this.getNetwork();let t=yield je({transaction:this._getTransactionRequest(e)}),i=yield this.perform("estimateGas",t);try{return H.from(i)}catch(n){return _e.throwError("bad result from backend",O.errors.SERVER_ERROR,{method:"estimateGas",params:t,result:i,error:n})}})}_getAddress(e){return ge(this,void 0,void 0,function*(){e=yield e,typeof e!="string"&&_e.throwArgumentError("invalid address or ENS name","name",e);let t=yield this.resolveName(e);return t==null&&_e.throwError("ENS name not configured",O.errors.UNSUPPORTED_OPERATION,{operation:`resolveName(${JSON.stringify(e)})`}),t})}_getBlock(e,t){return ge(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;let i=-128,n={includeTransactions:!!t};if(pe(e,32))n.blockHash=e;else try{n.blockTag=yield this._getBlockTag(e),pe(n.blockTag)&&(i=parseInt(n.blockTag.substring(2),16))}catch{_e.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",e)}return Qi(()=>ge(this,void 0,void 0,function*(){let o=yield this.perform("getBlock",n);if(o==null)return n.blockHash!=null&&this._emitted["b:"+n.blockHash]==null||n.blockTag!=null&&i>this._emitted.block?null:void 0;if(t){let s=null;for(let l=0;l<o.transactions.length;l++){let f=o.transactions[l];if(f.blockNumber==null)f.confirmations=0;else if(f.confirmations==null){s==null&&(s=yield this._getInternalBlockNumber(100+2*this.pollingInterval));let c=s-f.blockNumber+1;c<=0&&(c=1),f.confirmations=c}}let a=this.formatter.blockWithTransactions(o);return a.transactions=a.transactions.map(l=>this._wrapTransaction(l)),a}return this.formatter.block(o)}),{oncePoll:this})})}getBlock(e){return this._getBlock(e,!1)}getBlockWithTransactions(e){return this._getBlock(e,!0)}getTransaction(e){return ge(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;let t={transactionHash:this.formatter.hash(e,!0)};return Qi(()=>ge(this,void 0,void 0,function*(){let i=yield this.perform("getTransaction",t);if(i==null)return this._emitted["t:"+e]==null?null:void 0;let n=this.formatter.transactionResponse(i);if(n.blockNumber==null)n.confirmations=0;else if(n.confirmations==null){let s=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-n.blockNumber+1;s<=0&&(s=1),n.confirmations=s}return this._wrapTransaction(n)}),{oncePoll:this})})}getTransactionReceipt(e){return ge(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;let t={transactionHash:this.formatter.hash(e,!0)};return Qi(()=>ge(this,void 0,void 0,function*(){let i=yield this.perform("getTransactionReceipt",t);if(i==null)return this._emitted["t:"+e]==null?null:void 0;if(i.blockHash==null)return;let n=this.formatter.receipt(i);if(n.blockNumber==null)n.confirmations=0;else if(n.confirmations==null){let s=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-n.blockNumber+1;s<=0&&(s=1),n.confirmations=s}return n}),{oncePoll:this})})}getLogs(e){return ge(this,void 0,void 0,function*(){yield this.getNetwork();let t=yield je({filter:this._getFilter(e)}),i=yield this.perform("getLogs",t);return i.forEach(n=>{n.removed==null&&(n.removed=!1)}),ne.arrayOf(this.formatter.filterLog.bind(this.formatter))(i)})}getEtherPrice(){return ge(this,void 0,void 0,function*(){return yield this.getNetwork(),this.perform("getEtherPrice",{})})}_getBlockTag(e){return ge(this,void 0,void 0,function*(){if(e=yield e,typeof e=="number"&&e<0){e%1&&_e.throwArgumentError("invalid BlockTag","blockTag",e);let t=yield this._getInternalBlockNumber(100+2*this.pollingInterval);return t+=e,t<0&&(t=0),this.formatter.blockTag(t)}return this.formatter.blockTag(e)})}getResolver(e){return ge(this,void 0,void 0,function*(){let t=e;for(;;){if(t===""||t==="."||e!=="eth"&&t==="eth")return null;let i=yield this._getResolver(t,"getResolver");if(i!=null){let n=new hl(this,i,e);return t!==e&&!(yield n.supportsWildcard())?null:n}t=t.split(".").slice(1).join(".")}})}_getResolver(e,t){return ge(this,void 0,void 0,function*(){t==null&&(t="ENS");let i=yield this.getNetwork();i.ensAddress||_e.throwError("network does not support ENS",O.errors.UNSUPPORTED_OPERATION,{operation:t,network:i.name});try{let n=yield this.call({to:i.ensAddress,data:"0x0178b8bf"+No(e).substring(2)});return this.formatter.callAddress(n)}catch{}return null})}resolveName(e){return ge(this,void 0,void 0,function*(){e=yield e;try{return Promise.resolve(this.formatter.address(e))}catch(i){if(pe(e))throw i}typeof e!="string"&&_e.throwArgumentError("invalid ENS name","name",e);let t=yield this.getResolver(e);return t?yield t.getAddress():null})}lookupAddress(e){return ge(this,void 0,void 0,function*(){e=yield e,e=this.formatter.address(e);let t=e.substring(2).toLowerCase()+".addr.reverse",i=yield this._getResolver(t,"lookupAddress");if(i==null)return null;let n=dd(yield this.call({to:i,data:"0x691f3431"+No(t).substring(2)}),0);return(yield this.resolveName(n))!=e?null:n})}getAvatar(e){return ge(this,void 0,void 0,function*(){let t=null;if(pe(e)){let o=this.formatter.address(e).substring(2).toLowerCase()+".addr.reverse",s=yield this._getResolver(o,"getAvatar");if(!s)return null;t=new hl(this,s,o);try{let a=yield t.getAvatar();if(a)return a.url}catch(a){if(a.code!==O.errors.CALL_EXCEPTION)throw a}try{let a=dd(yield this.call({to:s,data:"0x691f3431"+No(o).substring(2)}),0);t=yield this.getResolver(a)}catch(a){if(a.code!==O.errors.CALL_EXCEPTION)throw a;return null}}else if(t=yield this.getResolver(e),!t)return null;let i=yield t.getAvatar();return i==null?null:i.url})}perform(e,t){return _e.throwError(e+" not implemented",O.errors.NOT_IMPLEMENTED,{operation:e})}_startEvent(e){this.polling=this._events.filter(t=>t.pollable()).length>0}_stopEvent(e){this.polling=this._events.filter(t=>t.pollable()).length>0}_addEventListener(e,t,i){let n=new sx(ul(e),t,i);return this._events.push(n),this._startEvent(n),this}on(e,t){return this._addEventListener(e,t,!1)}once(e,t){return this._addEventListener(e,t,!0)}emit(e,...t){let i=!1,n=[],o=ul(e);return this._events=this._events.filter(s=>s.tag!==o?!0:(setTimeout(()=>{s.listener.apply(this,t)},0),i=!0,s.once?(n.push(s),!1):!0)),n.forEach(s=>{this._stopEvent(s)}),i}listenerCount(e){if(!e)return this._events.length;let t=ul(e);return this._events.filter(i=>i.tag===t).length}listeners(e){if(e==null)return this._events.map(i=>i.listener);let t=ul(e);return this._events.filter(i=>i.tag===t).map(i=>i.listener)}off(e,t){if(t==null)return this.removeAllListeners(e);let i=[],n=!1,o=ul(e);return this._events=this._events.filter(s=>s.tag!==o||s.listener!=t||n?!0:(n=!0,i.push(s),!1)),i.forEach(s=>{this._stopEvent(s)}),this}removeAllListeners(e){let t=[];if(e==null)t=this._events,this._events=[];else{let i=ul(e);this._events=this._events.filter(n=>n.tag!==i?!0:(t.push(n),!1))}return t.forEach(i=>{this._stopEvent(i)}),this}};var to=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(c){try{f(i.next(c))}catch(u){s(u)}}function l(c){try{f(i.throw(c))}catch(u){s(u)}}function f(c){c.done?o(c.value):n(c.value).then(a,l)}f((i=i.apply(r,e||[])).next())})},Zt=new O(Fe),zM=["call","estimateGas"];function oc(r,e){if(r==null)return null;if(typeof r.message=="string"&&r.message.match("reverted")){let t=pe(r.data)?r.data:null;if(!e||t)return{message:r.message,data:t}}if(typeof r=="object"){for(let t in r){let i=oc(r[t],e);if(i)return i}return null}if(typeof r=="string")try{return oc(JSON.parse(r),e)}catch{}return null}function k6(r,e,t){let i=t.transaction||t.signedTransaction;if(r==="call"){let o=oc(e,!0);if(o)return o.data;Zt.throwError("missing revert data in call exception; Transaction reverted without a reason string",O.errors.CALL_EXCEPTION,{data:"0x",transaction:i,error:e})}if(r==="estimateGas"){let o=oc(e.body,!1);o==null&&(o=oc(e,!1)),o&&Zt.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",O.errors.UNPREDICTABLE_GAS_LIMIT,{reason:o.message,method:r,transaction:i,error:e})}let n=e.message;throw e.code===O.errors.SERVER_ERROR&&e.error&&typeof e.error.message=="string"?n=e.error.message:typeof e.body=="string"?n=e.body:typeof e.responseText=="string"&&(n=e.responseText),n=(n||"").toLowerCase(),n.match(/insufficient funds|base fee exceeds gas limit|InsufficientFunds/i)&&Zt.throwError("insufficient funds for intrinsic transaction cost",O.errors.INSUFFICIENT_FUNDS,{error:e,method:r,transaction:i}),n.match(/nonce (is )?too low/i)&&Zt.throwError("nonce has already been used",O.errors.NONCE_EXPIRED,{error:e,method:r,transaction:i}),n.match(/replacement transaction underpriced|transaction gas price.*too low/i)&&Zt.throwError("replacement fee too low",O.errors.REPLACEMENT_UNDERPRICED,{error:e,method:r,transaction:i}),n.match(/only replay-protected/i)&&Zt.throwError("legacy pre-eip-155 transactions not supported",O.errors.UNSUPPORTED_OPERATION,{error:e,method:r,transaction:i}),zM.indexOf(r)>=0&&n.match(/gas required exceeds allowance|always failing transaction|execution reverted|revert/)&&Zt.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",O.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:r,transaction:i}),e}function E6(r){return new Promise(function(e){setTimeout(e,r)})}function HM(r){if(r.error){let e=new Error(r.error.message);throw e.code=r.error.code,e.data=r.error.data,e}return r.result}function nc(r){return r&&r.toLowerCase()}var ax={},dl=class extends Wr{constructor(e,t,i){if(super(),e!==ax)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");L(this,"provider",t),i==null&&(i=0),typeof i=="string"?(L(this,"_address",this.provider.formatter.address(i)),L(this,"_index",null)):typeof i=="number"?(L(this,"_index",i),L(this,"_address",null)):Zt.throwArgumentError("invalid address or index","addressOrIndex",i)}connect(e){return Zt.throwError("cannot alter JSON-RPC Signer connection",O.errors.UNSUPPORTED_OPERATION,{operation:"connect"})}connectUnchecked(){return new lx(ax,this.provider,this._address||this._index)}getAddress(){return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then(e=>(e.length<=this._index&&Zt.throwError("unknown account #"+this._index,O.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"}),this.provider.formatter.address(e[this._index])))}sendUncheckedTransaction(e){e=Be(e);let t=this.getAddress().then(i=>(i&&(i=i.toLowerCase()),i));if(e.gasLimit==null){let i=Be(e);i.from=t,e.gasLimit=this.provider.estimateGas(i)}return e.to!=null&&(e.to=Promise.resolve(e.to).then(i=>to(this,void 0,void 0,function*(){if(i==null)return null;let n=yield this.provider.resolveName(i);return n==null&&Zt.throwArgumentError("provided ENS name resolves to null","tx.to",i),n}))),je({tx:je(e),sender:t}).then(({tx:i,sender:n})=>{i.from!=null?i.from.toLowerCase()!==n&&Zt.throwArgumentError("from address mismatch","transaction",e):i.from=n;let o=this.provider.constructor.hexlifyTransaction(i,{from:!0});return this.provider.send("eth_sendTransaction",[o]).then(s=>s,s=>(typeof s.message=="string"&&s.message.match(/user denied/i)&&Zt.throwError("user rejected transaction",O.errors.ACTION_REJECTED,{action:"sendTransaction",transaction:i}),k6("sendTransaction",s,o)))})}signTransaction(e){return Zt.throwError("signing transactions is unsupported",O.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})}sendTransaction(e){return to(this,void 0,void 0,function*(){let t=yield this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval),i=yield this.sendUncheckedTransaction(e);try{return yield Qi(()=>to(this,void 0,void 0,function*(){let n=yield this.provider.getTransaction(i);if(n!==null)return this.provider._wrapTransaction(n,i,t)}),{oncePoll:this.provider})}catch(n){throw n.transactionHash=i,n}})}signMessage(e){return to(this,void 0,void 0,function*(){let t=typeof e=="string"?Re(e):e,i=yield this.getAddress();try{return yield this.provider.send("personal_sign",[Q(t),i.toLowerCase()])}catch(n){throw typeof n.message=="string"&&n.message.match(/user denied/i)&&Zt.throwError("user rejected signing",O.errors.ACTION_REJECTED,{action:"signMessage",from:i,messageData:e}),n}})}_legacySignMessage(e){return to(this,void 0,void 0,function*(){let t=typeof e=="string"?Re(e):e,i=yield this.getAddress();try{return yield this.provider.send("eth_sign",[i.toLowerCase(),Q(t)])}catch(n){throw typeof n.message=="string"&&n.message.match(/user denied/i)&&Zt.throwError("user rejected signing",O.errors.ACTION_REJECTED,{action:"_legacySignMessage",from:i,messageData:e}),n}})}_signTypedData(e,t,i){return to(this,void 0,void 0,function*(){let n=yield zt.resolveNames(e,t,i,s=>this.provider.resolveName(s)),o=yield this.getAddress();try{return yield this.provider.send("eth_signTypedData_v4",[o.toLowerCase(),JSON.stringify(zt.getPayload(n.domain,t,n.value))])}catch(s){throw typeof s.message=="string"&&s.message.match(/user denied/i)&&Zt.throwError("user rejected signing",O.errors.ACTION_REJECTED,{action:"_signTypedData",from:o,messageData:{domain:n.domain,types:t,value:n.value}}),s}})}unlock(e){return to(this,void 0,void 0,function*(){let t=this.provider,i=yield this.getAddress();return t.send("personal_unlockAccount",[i.toLowerCase(),e,null])})}},lx=class extends dl{sendTransaction(e){return this.sendUncheckedTransaction(e).then(t=>({hash:t,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:i=>this.provider.waitForTransaction(t,i)}))}},WM={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0},Qr=class extends Cn{constructor(e,t){let i=t;i==null&&(i=new Promise((n,o)=>{setTimeout(()=>{this.detectNetwork().then(s=>{n(s)},s=>{o(s)})},0)})),super(i),e||(e=qt(this.constructor,"defaultUrl")()),typeof e=="string"?L(this,"connection",Object.freeze({url:e})):L(this,"connection",Object.freeze(Be(e))),this._nextId=42}get _cache(){return this._eventLoopCache==null&&(this._eventLoopCache={}),this._eventLoopCache}static defaultUrl(){return"http://localhost:8545"}detectNetwork(){return this._cache.detectNetwork||(this._cache.detectNetwork=this._uncachedDetectNetwork(),setTimeout(()=>{this._cache.detectNetwork=null},0)),this._cache.detectNetwork}_uncachedDetectNetwork(){return to(this,void 0,void 0,function*(){yield E6(0);let e=null;try{e=yield this.send("eth_chainId",[])}catch{try{e=yield this.send("net_version",[])}catch{}}if(e!=null){let t=qt(this.constructor,"getNetwork");try{return t(H.from(e).toNumber())}catch(i){return Zt.throwError("could not detect network",O.errors.NETWORK_ERROR,{chainId:e,event:"invalidNetwork",serverError:i})}}return Zt.throwError("could not detect network",O.errors.NETWORK_ERROR,{event:"noNetwork"})})}getSigner(e){return new dl(ax,this,e)}getUncheckedSigner(e){return this.getSigner(e).connectUnchecked()}listAccounts(){return this.send("eth_accounts",[]).then(e=>e.map(t=>this.formatter.address(t)))}send(e,t){let i={method:e,params:t,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:Vt(i),provider:this});let n=["eth_chainId","eth_blockNumber"].indexOf(e)>=0;if(n&&this._cache[e])return this._cache[e];let o=Ki(this.connection,JSON.stringify(i),HM).then(s=>(this.emit("debug",{action:"response",request:i,response:s,provider:this}),s),s=>{throw this.emit("debug",{action:"response",error:s,request:i,provider:this}),s});return n&&(this._cache[e]=o,setTimeout(()=>{this._cache[e]=null},0)),o}prepareRequest(e,t){switch(e){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[nc(t.address),t.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[nc(t.address),t.blockTag]];case"getCode":return["eth_getCode",[nc(t.address),t.blockTag]];case"getStorageAt":return["eth_getStorageAt",[nc(t.address),Se(t.position,32),t.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[t.signedTransaction]];case"getBlock":return t.blockTag?["eth_getBlockByNumber",[t.blockTag,!!t.includeTransactions]]:t.blockHash?["eth_getBlockByHash",[t.blockHash,!!t.includeTransactions]]:null;case"getTransaction":return["eth_getTransactionByHash",[t.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[t.transactionHash]];case"call":return["eth_call",[qt(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0}),t.blockTag]];case"estimateGas":return["eth_estimateGas",[qt(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0})]];case"getLogs":return t.filter&&t.filter.address!=null&&(t.filter.address=nc(t.filter.address)),["eth_getLogs",[t.filter]];default:break}return null}perform(e,t){return to(this,void 0,void 0,function*(){if(e==="call"||e==="estimateGas"){let n=t.transaction;if(n&&n.type!=null&&H.from(n.type).isZero()&&n.maxFeePerGas==null&&n.maxPriorityFeePerGas==null){let o=yield this.getFeeData();o.maxFeePerGas==null&&o.maxPriorityFeePerGas==null&&(t=Be(t),t.transaction=Be(n),delete t.transaction.type)}}let i=this.prepareRequest(e,t);i==null&&Zt.throwError(e+" not implemented",O.errors.NOT_IMPLEMENTED,{operation:e});try{return yield this.send(i[0],i[1])}catch(n){return k6(e,n,t)}})}_startEvent(e){e.tag==="pending"&&this._startPending(),super._startEvent(e)}_startPending(){if(this._pendingFilter!=null)return;let e=this,t=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=t,t.then(function(i){function n(){e.send("eth_getFilterChanges",[i]).then(function(o){if(e._pendingFilter!=t)return null;let s=Promise.resolve();return o.forEach(function(a){e._emitted["t:"+a.toLowerCase()]="pending",s=s.then(function(){return e.getTransaction(a).then(function(l){return e.emit("pending",l),null})})}),s.then(function(){return E6(1e3)})}).then(function(){if(e._pendingFilter!=t){e.send("eth_uninstallFilter",[i]);return}return setTimeout(function(){n()},0),null}).catch(o=>{})}return n(),i}).catch(i=>{})}_stopEvent(e){e.tag==="pending"&&this.listenerCount("pending")===0&&(this._pendingFilter=null),super._stopEvent(e)}static hexlifyTransaction(e,t){let i=Be(WM);if(t)for(let o in t)t[o]&&(i[o]=!0);Ba(e,i);let n={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(function(o){if(e[o]==null)return;let s=un(H.from(e[o]));o==="gasLimit"&&(o="gas"),n[o]=s}),["from","to","data"].forEach(function(o){e[o]!=null&&(n[o]=Q(e[o]))}),e.accessList&&(n.accessList=ci(e.accessList)),n}};var pl=null;try{if(pl=WebSocket,pl==null)throw new Error("inject please")}catch{let e=new O(Fe);pl=function(){e.throwError("WebSockets not supported in this environment",O.errors.UNSUPPORTED_OPERATION,{operation:"new WebSocket()"})}}var fx=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(c){try{f(i.next(c))}catch(u){s(u)}}function l(c){try{f(i.throw(c))}catch(u){s(u)}}function f(c){c.done?o(c.value):n(c.value).then(a,l)}f((i=i.apply(r,e||[])).next())})},pd=new O(Fe),GM=1,ro=class extends Qr{constructor(e,t){t==="any"&&pd.throwError("WebSocketProvider does not support 'any' network yet",O.errors.UNSUPPORTED_OPERATION,{operation:"network:any"}),typeof e=="string"?super(e,t):super("_websocket",t),this._pollingInterval=-1,this._wsReady=!1,typeof e=="string"?L(this,"_websocket",new pl(this.connection.url)):L(this,"_websocket",e),L(this,"_requests",{}),L(this,"_subs",{}),L(this,"_subIds",{}),L(this,"_detectNetwork",super.detectNetwork()),this.websocket.onopen=()=>{this._wsReady=!0,Object.keys(this._requests).forEach(n=>{this.websocket.send(this._requests[n].payload)})},this.websocket.onmessage=n=>{let o=n.data,s=JSON.parse(o);if(s.id!=null){let a=String(s.id),l=this._requests[a];if(delete this._requests[a],s.result!==void 0)l.callback(null,s.result),this.emit("debug",{action:"response",request:JSON.parse(l.payload),response:s.result,provider:this});else{let f=null;s.error?(f=new Error(s.error.message||"unknown error"),L(f,"code",s.error.code||null),L(f,"response",o)):f=new Error("unknown error"),l.callback(f,void 0),this.emit("debug",{action:"response",error:f,request:JSON.parse(l.payload),provider:this})}}else if(s.method==="eth_subscription"){let a=this._subs[s.params.subscription];a&&a.processFunc(s.params.result)}else console.warn("this should not happen")};let i=setInterval(()=>{this.emit("poll")},1e3);i.unref&&i.unref()}get websocket(){return this._websocket}detectNetwork(){return this._detectNetwork}get pollingInterval(){return 0}resetEventsBlock(e){pd.throwError("cannot reset events block on WebSocketProvider",O.errors.UNSUPPORTED_OPERATION,{operation:"resetEventBlock"})}set pollingInterval(e){pd.throwError("cannot set polling interval on WebSocketProvider",O.errors.UNSUPPORTED_OPERATION,{operation:"setPollingInterval"})}poll(){return fx(this,void 0,void 0,function*(){return null})}set polling(e){!e||pd.throwError("cannot set polling on WebSocketProvider",O.errors.UNSUPPORTED_OPERATION,{operation:"setPolling"})}send(e,t){let i=GM++;return new Promise((n,o)=>{function s(l,f){return l?o(l):n(f)}let a=JSON.stringify({method:e,params:t,id:i,jsonrpc:"2.0"});this.emit("debug",{action:"request",request:JSON.parse(a),provider:this}),this._requests[String(i)]={callback:s,payload:a},this._wsReady&&this.websocket.send(a)})}static defaultUrl(){return"ws://localhost:8546"}_subscribe(e,t,i){return fx(this,void 0,void 0,function*(){let n=this._subIds[e];n==null&&(n=Promise.all(t).then(s=>this.send("eth_subscribe",s)),this._subIds[e]=n);let o=yield n;this._subs[o]={tag:e,processFunc:i}})}_startEvent(e){switch(e.type){case"block":this._subscribe("block",["newHeads"],t=>{let i=H.from(t.number).toNumber();this._emitted.block=i,this.emit("block",i)});break;case"pending":this._subscribe("pending",["newPendingTransactions"],t=>{this.emit("pending",t)});break;case"filter":this._subscribe(e.tag,["logs",this._getFilter(e.filter)],t=>{t.removed==null&&(t.removed=!1),this.emit(e.filter,this.formatter.filterLog(t))});break;case"tx":{let t=i=>{let n=i.hash;this.getTransactionReceipt(n).then(o=>{!o||this.emit(n,o)})};t(e),this._subscribe("tx",["newHeads"],i=>{this._events.filter(n=>n.type==="tx").forEach(t)});break}case"debug":case"poll":case"willPoll":case"didPoll":case"error":break;default:console.log("unhandled:",e);break}}_stopEvent(e){let t=e.tag;if(e.type==="tx"){if(this._events.filter(n=>n.type==="tx").length)return;t="tx"}else if(this.listenerCount(e.event))return;let i=this._subIds[t];!i||(delete this._subIds[t],i.then(n=>{!this._subs[n]||(delete this._subs[n],this.send("eth_unsubscribe",[n]))}))}destroy(){return fx(this,void 0,void 0,function*(){this.websocket.readyState===pl.CONNECTING&&(yield new Promise(e=>{this.websocket.onopen=function(){e(!0)},this.websocket.onerror=function(){e(!1)}})),this.websocket.close(1e3)})}};var KM=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(c){try{f(i.next(c))}catch(u){s(u)}}function l(c){try{f(i.throw(c))}catch(u){s(u)}}function f(c){c.done?o(c.value):n(c.value).then(a,l)}f((i=i.apply(r,e||[])).next())})},sc=new O(Fe),ac=class extends Qr{detectNetwork(){let e=Object.create(null,{detectNetwork:{get:()=>super.detectNetwork}});return KM(this,void 0,void 0,function*(){let t=this.network;return t==null&&(t=yield e.detectNetwork.call(this),t||sc.throwError("no network detected",O.errors.UNKNOWN_ERROR,{}),this._network==null&&(L(this,"_network",t),this.emit("network",t,null))),t})}},cr=class extends ac{constructor(e,t){sc.checkAbstract(new.target,cr),e=qt(new.target,"getNetwork")(e),t=qt(new.target,"getApiKey")(t);let i=qt(new.target,"getUrl")(e,t);super(i,e),typeof t=="string"?L(this,"apiKey",t):t!=null&&Object.keys(t).forEach(n=>{L(this,n,t[n])})}_startPending(){sc.warn("WARNING: API provider does not support pending filters")}isCommunityResource(){return!1}getSigner(e){return sc.throwError("API provider does not support signing",O.errors.UNSUPPORTED_OPERATION,{operation:"getSigner"})}listAccounts(){return Promise.resolve([])}static getApiKey(e){return e}static getUrl(e,t){return sc.throwError("not implemented; sub-classes must override getUrl",O.errors.NOT_IMPLEMENTED,{operation:"getUrl"})}};var S6=new O(Fe),md="_gg7wSSi0KMBsdKnGVfHDueq6xMB9EkC",lc=class extends ro{constructor(e,t){let i=new ml(e,t),n=i.connection.url.replace(/^http/i,"ws").replace(".alchemyapi.",".ws.alchemyapi.");super(n,i.network),L(this,"apiKey",i.apiKey)}isCommunityResource(){return this.apiKey===md}},ml=class extends cr{static getWebSocketProvider(e,t){return new lc(e,t)}static getApiKey(e){return e==null?md:(e&&typeof e!="string"&&S6.throwArgumentError("invalid apiKey","apiKey",e),e)}static getUrl(e,t){let i=null;switch(e.name){case"homestead":i="eth-mainnet.alchemyapi.io/v2/";break;case"goerli":i="eth-goerli.g.alchemy.com/v2/";break;case"matic":i="polygon-mainnet.g.alchemy.com/v2/";break;case"maticmum":i="polygon-mumbai.g.alchemy.com/v2/";break;case"arbitrum":i="arb-mainnet.g.alchemy.com/v2/";break;case"arbitrum-goerli":i="arb-goerli.g.alchemy.com/v2/";break;case"optimism":i="opt-mainnet.g.alchemy.com/v2/";break;case"optimism-goerli":i="opt-goerli.g.alchemy.com/v2/";break;default:S6.throwArgumentError("unsupported network","network",arguments[0])}return{allowGzip:!0,url:"https://"+i+t,throttleCallback:(n,o)=>(t===md&&_n(),Promise.resolve(!0))}}isCommunityResource(){return this.apiKey===md}};var QM=new O(Fe),gd="9f7d929b018cdffb338517efa06f58359e86ff1ffd350bc889738523659e7972";function JM(r){switch(r){case"homestead":return"rpc.ankr.com/eth/";case"ropsten":return"rpc.ankr.com/eth_ropsten/";case"rinkeby":return"rpc.ankr.com/eth_rinkeby/";case"goerli":return"rpc.ankr.com/eth_goerli/";case"matic":return"rpc.ankr.com/polygon/";case"arbitrum":return"rpc.ankr.com/arbitrum/"}return QM.throwArgumentError("unsupported network","name",r)}var fc=class extends cr{isCommunityResource(){return this.apiKey===gd}static getApiKey(e){return e??gd}static getUrl(e,t){t==null&&(t=gd);let i={allowGzip:!0,url:"https://"+JM(e.name)+t,throttleCallback:(n,o)=>(t.apiKey===gd&&_n(),Promise.resolve(!0))};return t.projectSecret!=null&&(i.user="",i.password=t.projectSecret),i}};var YM=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(c){try{f(i.next(c))}catch(u){s(u)}}function l(c){try{f(i.throw(c))}catch(u){s(u)}}function f(c){c.done?o(c.value):n(c.value).then(a,l)}f((i=i.apply(r,e||[])).next())})},_6=new O(Fe),cc=class extends cr{static getApiKey(e){return e!=null&&_6.throwArgumentError("apiKey not supported for cloudflare","apiKey",e),null}static getUrl(e,t){let i=null;switch(e.name){case"homestead":i="https://cloudflare-eth.com/";break;default:_6.throwArgumentError("unsupported network","network",arguments[0])}return i}perform(e,t){let i=Object.create(null,{perform:{get:()=>super.perform}});return YM(this,void 0,void 0,function*(){return e==="getBlockNumber"?(yield i.perform.call(this,"getBlock",{blockTag:"latest"})).number:i.perform.call(this,e,t)})}};var xd=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(c){try{f(i.next(c))}catch(u){s(u)}}function l(c){try{f(i.throw(c))}catch(u){s(u)}}function f(c){c.done?o(c.value):n(c.value).then(a,l)}f((i=i.apply(r,e||[])).next())})},Uo=new O(Fe);function C6(r){let e={};for(let t in r){if(r[t]==null)continue;let i=r[t];t==="type"&&i===0||({type:!0,gasLimit:!0,gasPrice:!0,maxFeePerGs:!0,maxPriorityFeePerGas:!0,nonce:!0,value:!0}[t]?i=un(Q(i)):t==="accessList"?i="["+ci(i).map(n=>`{address:"${n.address}",storageKeys:["${n.storageKeys.join('","')}"]}`).join(",")+"]":i=Q(i),e[t]=i)}return e}function XM(r){if(r.status==0&&(r.message==="No records found"||r.message==="No transactions found"))return r.result;if(r.status!=1||typeof r.message!="string"||!r.message.match(/^OK/)){let e=new Error("invalid response");throw e.result=JSON.stringify(r),(r.result||"").toLowerCase().indexOf("rate limit")>=0&&(e.throttleRetry=!0),e}return r.result}function T6(r){if(r&&r.status==0&&r.message=="NOTOK"&&(r.result||"").toLowerCase().indexOf("rate limit")>=0){let e=new Error("throttled response");throw e.result=JSON.stringify(r),e.throttleRetry=!0,e}if(r.jsonrpc!="2.0"){let e=new Error("invalid response");throw e.result=JSON.stringify(r),e}if(r.error){let e=new Error(r.error.message||"unknown error");throw r.error.code&&(e.code=r.error.code),r.error.data&&(e.data=r.error.data),e}return r.result}function M6(r){if(r==="pending")throw new Error("pending not supported");return r==="latest"?r:parseInt(r.substring(2),16)}function cx(r,e,t){if(r==="call"&&e.code===O.errors.SERVER_ERROR){let n=e.error;if(n&&(n.message.match(/reverted/i)||n.message.match(/VM execution error/i))){let o=n.data;if(o&&(o="0x"+o.replace(/^.*0x/i,"")),pe(o))return o;Uo.throwError("missing revert data in call exception",O.errors.CALL_EXCEPTION,{error:e,data:"0x"})}}let i=e.message;throw e.code===O.errors.SERVER_ERROR&&(e.error&&typeof e.error.message=="string"?i=e.error.message:typeof e.body=="string"?i=e.body:typeof e.responseText=="string"&&(i=e.responseText)),i=(i||"").toLowerCase(),i.match(/insufficient funds/)&&Uo.throwError("insufficient funds for intrinsic transaction cost",O.errors.INSUFFICIENT_FUNDS,{error:e,method:r,transaction:t}),i.match(/same hash was already imported|transaction nonce is too low|nonce too low/)&&Uo.throwError("nonce has already been used",O.errors.NONCE_EXPIRED,{error:e,method:r,transaction:t}),i.match(/another transaction with same nonce/)&&Uo.throwError("replacement fee too low",O.errors.REPLACEMENT_UNDERPRICED,{error:e,method:r,transaction:t}),i.match(/execution failed due to an exception|execution reverted/)&&Uo.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",O.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:r,transaction:t}),e}var uc=class extends Cn{constructor(e,t){super(e),L(this,"baseUrl",this.getBaseUrl()),L(this,"apiKey",t||null)}getBaseUrl(){switch(this.network?this.network.name:"invalid"){case"homestead":return"https://api.etherscan.io";case"goerli":return"https://api-goerli.etherscan.io";case"sepolia":return"https://api-sepolia.etherscan.io";case"matic":return"https://api.polygonscan.com";case"maticmum":return"https://api-testnet.polygonscan.com";case"arbitrum":return"https://api.arbiscan.io";case"arbitrum-goerli":return"https://api-goerli.arbiscan.io";case"optimism":return"https://api-optimistic.etherscan.io";case"optimism-goerli":return"https://api-goerli-optimistic.etherscan.io";default:}return Uo.throwArgumentError("unsupported network","network",this.network.name)}getUrl(e,t){let i=Object.keys(t).reduce((o,s)=>{let a=t[s];return a!=null&&(o+=`&${s}=${a}`),o},""),n=this.apiKey?`&apikey=${this.apiKey}`:"";return`${this.baseUrl}/api?module=${e}${i}${n}`}getPostUrl(){return`${this.baseUrl}/api`}getPostData(e,t){return t.module=e,t.apikey=this.apiKey,t}fetch(e,t,i){return xd(this,void 0,void 0,function*(){let n=i?this.getPostUrl():this.getUrl(e,t),o=i?this.getPostData(e,t):null,s=e==="proxy"?T6:XM;this.emit("debug",{action:"request",request:n,provider:this});let a={url:n,throttleSlotInterval:1e3,throttleCallback:(c,u)=>(this.isCommunityResource()&&_n(),Promise.resolve(!0))},l=null;o&&(a.headers={"content-type":"application/x-www-form-urlencoded; charset=UTF-8"},l=Object.keys(o).map(c=>`${c}=${o[c]}`).join("&"));let f=yield Ki(a,l,s||T6);return this.emit("debug",{action:"response",request:n,response:Vt(f),provider:this}),f})}detectNetwork(){return xd(this,void 0,void 0,function*(){return this.network})}perform(e,t){let i=Object.create(null,{perform:{get:()=>super.perform}});return xd(this,void 0,void 0,function*(){switch(e){case"getBlockNumber":return this.fetch("proxy",{action:"eth_blockNumber"});case"getGasPrice":return this.fetch("proxy",{action:"eth_gasPrice"});case"getBalance":return this.fetch("account",{action:"balance",address:t.address,tag:t.blockTag});case"getTransactionCount":return this.fetch("proxy",{action:"eth_getTransactionCount",address:t.address,tag:t.blockTag});case"getCode":return this.fetch("proxy",{action:"eth_getCode",address:t.address,tag:t.blockTag});case"getStorageAt":return this.fetch("proxy",{action:"eth_getStorageAt",address:t.address,position:t.position,tag:t.blockTag});case"sendTransaction":return this.fetch("proxy",{action:"eth_sendRawTransaction",hex:t.signedTransaction},!0).catch(n=>cx("sendTransaction",n,t.signedTransaction));case"getBlock":if(t.blockTag)return this.fetch("proxy",{action:"eth_getBlockByNumber",tag:t.blockTag,boolean:t.includeTransactions?"true":"false"});throw new Error("getBlock by blockHash not implemented");case"getTransaction":return this.fetch("proxy",{action:"eth_getTransactionByHash",txhash:t.transactionHash});case"getTransactionReceipt":return this.fetch("proxy",{action:"eth_getTransactionReceipt",txhash:t.transactionHash});case"call":{if(t.blockTag!=="latest")throw new Error("EtherscanProvider does not support blockTag for call");let n=C6(t.transaction);n.module="proxy",n.action="eth_call";try{return yield this.fetch("proxy",n,!0)}catch(o){return cx("call",o,t.transaction)}}case"estimateGas":{let n=C6(t.transaction);n.module="proxy",n.action="eth_estimateGas";try{return yield this.fetch("proxy",n,!0)}catch(o){return cx("estimateGas",o,t.transaction)}}case"getLogs":{let n={action:"getLogs"};if(t.filter.fromBlock&&(n.fromBlock=M6(t.filter.fromBlock)),t.filter.toBlock&&(n.toBlock=M6(t.filter.toBlock)),t.filter.address&&(n.address=t.filter.address),t.filter.topics&&t.filter.topics.length>0&&(t.filter.topics.length>1&&Uo.throwError("unsupported topic count",O.errors.UNSUPPORTED_OPERATION,{topics:t.filter.topics}),t.filter.topics.length===1)){let a=t.filter.topics[0];(typeof a!="string"||a.length!==66)&&Uo.throwError("unsupported topic format",O.errors.UNSUPPORTED_OPERATION,{topic0:a}),n.topic0=a}let o=yield this.fetch("logs",n),s={};for(let a=0;a<o.length;a++){let l=o[a];if(l.blockHash==null){if(s[l.blockNumber]==null){let f=yield this.getBlock(l.blockNumber);f&&(s[l.blockNumber]=f.hash)}l.blockHash=s[l.blockNumber]}}return o}case"getEtherPrice":return this.network.name!=="homestead"?0:parseFloat((yield this.fetch("stats",{action:"ethprice"})).ethusd);default:break}return i.perform.call(this,e,t)})}getHistory(e,t,i){return xd(this,void 0,void 0,function*(){let n={action:"txlist",address:yield this.resolveName(e),startblock:t??0,endblock:i??99999999,sort:"asc"};return(yield this.fetch("account",n)).map(s=>{["contractAddress","to"].forEach(function(l){s[l]==""&&delete s[l]}),s.creates==null&&s.contractAddress!=null&&(s.creates=s.contractAddress);let a=this.formatter.transactionResponse(s);return s.timeStamp&&(a.timestamp=parseInt(s.timeStamp)),a})})}isCommunityResource(){return this.apiKey==null}};var vd=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(c){try{f(i.next(c))}catch(u){s(u)}}function l(c){try{f(i.throw(c))}catch(u){s(u)}}function f(c){c.done?o(c.value):n(c.value).then(a,l)}f((i=i.apply(r,e||[])).next())})},Vs=new O(Fe);function bd(){return new Date().getTime()}function O6(r){let e=null;for(let t=0;t<r.length;t++){let i=r[t];if(i==null)return null;e?e.name===i.name&&e.chainId===i.chainId&&(e.ensAddress===i.ensAddress||e.ensAddress==null&&i.ensAddress==null)||Vs.throwArgumentError("provider mismatch","networks",r):e=i}return e}function N6(r,e){r=r.slice().sort();let t=Math.floor(r.length/2);if(r.length%2)return r[t];let i=r[t-1],n=r[t];return e!=null&&Math.abs(i-n)>e?null:(i+n)/2}function gl(r){if(r===null)return"null";if(typeof r=="number"||typeof r=="boolean")return JSON.stringify(r);if(typeof r=="string")return r;if(H.isBigNumber(r))return r.toString();if(Array.isArray(r))return JSON.stringify(r.map(e=>gl(e)));if(typeof r=="object"){let e=Object.keys(r);return e.sort(),"{"+e.map(t=>{let i=r[t];return typeof i=="function"?i="[function]":i=gl(i),JSON.stringify(t)+":"+i}).join(",")+"}"}throw new Error("unknown value type: "+typeof r)}var $M=1;function P6(r){let e=null,t=null,i=new Promise(s=>{e=function(){t&&(clearTimeout(t),t=null),s()},t=setTimeout(e,r)}),n=s=>(i=i.then(s),i);function o(){return i}return{cancel:e,getPromise:o,wait:n}}var ZM=[O.errors.CALL_EXCEPTION,O.errors.INSUFFICIENT_FUNDS,O.errors.NONCE_EXPIRED,O.errors.REPLACEMENT_UNDERPRICED,O.errors.UNPREDICTABLE_GAS_LIMIT],eO=["address","args","errorArgs","errorSignature","method","transaction"];function yd(r,e){let t={weight:r.weight};return Object.defineProperty(t,"provider",{get:()=>r.provider}),r.start&&(t.start=r.start),e&&(t.duration=e-r.start),r.done&&(r.error?t.error=r.error:t.result=r.result||null),t}function tO(r,e){return function(t){let i={};t.forEach(o=>{let s=r(o.result);i[s]||(i[s]={count:0,result:o.result}),i[s].count++});let n=Object.keys(i);for(let o=0;o<n.length;o++){let s=i[n[o]];if(s.count>=e)return s.result}}}function rO(r,e,t){let i=gl;switch(e){case"getBlockNumber":return function(n){let o=n.map(a=>a.result),s=N6(n.map(a=>a.result),2);if(s!=null)return s=Math.ceil(s),o.indexOf(s+1)>=0&&s++,s>=r._highestBlockNumber&&(r._highestBlockNumber=s),r._highestBlockNumber};case"getGasPrice":return function(n){let o=n.map(s=>s.result);return o.sort(),o[Math.floor(o.length/2)]};case"getEtherPrice":return function(n){return N6(n.map(o=>o.result))};case"getBalance":case"getTransactionCount":case"getCode":case"getStorageAt":case"call":case"estimateGas":case"getLogs":break;case"getTransaction":case"getTransactionReceipt":i=function(n){return n==null?null:(n=Be(n),n.confirmations=-1,gl(n))};break;case"getBlock":t.includeTransactions?i=function(n){return n==null?null:(n=Be(n),n.transactions=n.transactions.map(o=>(o=Be(o),o.confirmations=-1,o)),gl(n))}:i=function(n){return n==null?null:gl(n)};break;default:throw new Error("unknown method: "+e)}return tO(i,r.quorum)}function hc(r,e){return vd(this,void 0,void 0,function*(){let t=r.provider;return t.blockNumber!=null&&t.blockNumber>=e||e===-1?t:Qi(()=>new Promise((i,n)=>{setTimeout(function(){return t.blockNumber>=e?i(t):r.cancelled?i(null):i(void 0)},0)}),{oncePoll:t})})}function iO(r,e,t,i){return vd(this,void 0,void 0,function*(){let n=r.provider;switch(t){case"getBlockNumber":case"getGasPrice":return n[t]();case"getEtherPrice":if(n.getEtherPrice)return n.getEtherPrice();break;case"getBalance":case"getTransactionCount":case"getCode":return i.blockTag&&pe(i.blockTag)&&(n=yield hc(r,e)),n[t](i.address,i.blockTag||"latest");case"getStorageAt":return i.blockTag&&pe(i.blockTag)&&(n=yield hc(r,e)),n.getStorageAt(i.address,i.position,i.blockTag||"latest");case"getBlock":return i.blockTag&&pe(i.blockTag)&&(n=yield hc(r,e)),n[i.includeTransactions?"getBlockWithTransactions":"getBlock"](i.blockTag||i.blockHash);case"call":case"estimateGas":return i.blockTag&&pe(i.blockTag)&&(n=yield hc(r,e)),t==="call"&&i.blockTag?n[t](i.transaction,i.blockTag):n[t](i.transaction);case"getTransaction":case"getTransactionReceipt":return n[t](i.transactionHash);case"getLogs":{let o=i.filter;return(o.fromBlock&&pe(o.fromBlock)||o.toBlock&&pe(o.toBlock))&&(n=yield hc(r,e)),n.getLogs(o)}}return Vs.throwError("unknown method error",O.errors.UNKNOWN_ERROR,{method:t,params:i})})}var dc=class extends Cn{constructor(e,t){e.length===0&&Vs.throwArgumentError("missing providers","providers",e);let i=e.map((s,a)=>{if(Hr.isProvider(s)){let c=tc(s)?2e3:750;return Object.freeze({provider:s,weight:1,stallTimeout:c,priority:1})}let l=Be(s);l.priority==null&&(l.priority=1),l.stallTimeout==null&&(l.stallTimeout=tc(s)?2e3:750),l.weight==null&&(l.weight=1);let f=l.weight;return(f%1||f>512||f<1)&&Vs.throwArgumentError("invalid weight; must be integer in [1, 512]",`providers[${a}].weight`,f),Object.freeze(l)}),n=i.reduce((s,a)=>s+a.weight,0);t==null?t=n/2:t>n&&Vs.throwArgumentError("quorum will always fail; larger than total weight","quorum",t);let o=O6(i.map(s=>s.provider.network));o==null&&(o=new Promise((s,a)=>{setTimeout(()=>{this.detectNetwork().then(s,a)},0)})),super(o),L(this,"providerConfigs",Object.freeze(i)),L(this,"quorum",t),this._highestBlockNumber=-1}detectNetwork(){return vd(this,void 0,void 0,function*(){let e=yield Promise.all(this.providerConfigs.map(t=>t.provider.getNetwork()));return O6(e)})}perform(e,t){return vd(this,void 0,void 0,function*(){if(e==="sendTransaction"){let l=yield Promise.all(this.providerConfigs.map(f=>f.provider.sendTransaction(t.signedTransaction).then(c=>c.hash,c=>c)));for(let f=0;f<l.length;f++){let c=l[f];if(typeof c=="string")return c}throw l[0]}this._highestBlockNumber===-1&&e!=="getBlockNumber"&&(yield this.getBlockNumber());let i=rO(this,e,t),n=Yf(this.providerConfigs.map(Be));n.sort((l,f)=>l.priority-f.priority);let o=this._highestBlockNumber,s=0,a=!0;for(;;){let l=bd(),f=n.filter(p=>p.runner&&l-p.start<p.stallTimeout).reduce((p,g)=>p+g.weight,0);for(;f<this.quorum&&s<n.length;){let p=n[s++],g=$M++;p.start=bd(),p.staller=P6(p.stallTimeout),p.staller.wait(()=>{p.staller=null}),p.runner=iO(p,o,e,t).then(b=>{p.done=!0,p.result=b,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:g,backend:yd(p,bd()),request:{method:e,params:Vt(t)},provider:this})},b=>{p.done=!0,p.error=b,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:g,backend:yd(p,bd()),request:{method:e,params:Vt(t)},provider:this})}),this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:g,backend:yd(p,null),request:{method:e,params:Vt(t)},provider:this}),f+=p.weight}let c=[];n.forEach(p=>{p.done||!p.runner||(c.push(p.runner),p.staller&&c.push(p.staller.getPromise()))}),c.length&&(yield Promise.race(c));let u=n.filter(p=>p.done&&p.error==null);if(u.length>=this.quorum){let p=i(u);if(p!==void 0)return n.forEach(g=>{g.staller&&g.staller.cancel(),g.cancelled=!0}),p;a||(yield P6(100).getPromise()),a=!1}let d=n.reduce((p,g)=>{if(!g.done||g.error==null)return p;let b=g.error.code;return ZM.indexOf(b)>=0&&(p[b]||(p[b]={error:g.error,weight:0}),p[b].weight+=g.weight),p},{});if(Object.keys(d).forEach(p=>{let g=d[p];if(g.weight<this.quorum)return;n.forEach(_=>{_.staller&&_.staller.cancel(),_.cancelled=!0});let b=g.error,k={};eO.forEach(_=>{b[_]!=null&&(k[_]=b[_])}),Vs.throwError(b.reason||b.message,p,k)}),n.filter(p=>!p.done).length===0)break}return n.forEach(l=>{l.staller&&l.staller.cancel(),l.cancelled=!0}),Vs.throwError("failed to meet quorum",O.errors.SERVER_ERROR,{method:e,params:t,results:n.map(l=>yd(l)),provider:this})})}};var ux=null;var wd=new O(Fe),pc="84842078b09946638c03157f83405213",mc=class extends ro{constructor(e,t){let i=new xl(e,t),n=i.connection;n.password&&wd.throwError("INFURA WebSocket project secrets unsupported",O.errors.UNSUPPORTED_OPERATION,{operation:"InfuraProvider.getWebSocketProvider()"});let o=n.url.replace(/^http/i,"ws").replace("/v3/","/ws/v3/");super(o,e),L(this,"apiKey",i.projectId),L(this,"projectId",i.projectId),L(this,"projectSecret",i.projectSecret)}isCommunityResource(){return this.projectId===pc}},xl=class extends cr{static getWebSocketProvider(e,t){return new mc(e,t)}static getApiKey(e){let t={apiKey:pc,projectId:pc,projectSecret:null};return e==null||(typeof e=="string"?t.projectId=e:e.projectSecret!=null?(wd.assertArgument(typeof e.projectId=="string","projectSecret requires a projectId","projectId",e.projectId),wd.assertArgument(typeof e.projectSecret=="string","invalid projectSecret","projectSecret","[REDACTED]"),t.projectId=e.projectId,t.projectSecret=e.projectSecret):e.projectId&&(t.projectId=e.projectId),t.apiKey=t.projectId),t}static getUrl(e,t){let i=null;switch(e?e.name:"unknown"){case"homestead":i="mainnet.infura.io";break;case"goerli":i="goerli.infura.io";break;case"sepolia":i="sepolia.infura.io";break;case"matic":i="polygon-mainnet.infura.io";break;case"maticmum":i="polygon-mumbai.infura.io";break;case"optimism":i="optimism-mainnet.infura.io";break;case"optimism-goerli":i="optimism-goerli.infura.io";break;case"arbitrum":i="arbitrum-mainnet.infura.io";break;case"arbitrum-goerli":i="arbitrum-goerli.infura.io";break;default:wd.throwError("unsupported network",O.errors.INVALID_ARGUMENT,{argument:"network",value:e})}let n={allowGzip:!0,url:"https://"+i+"/v3/"+t.projectId,throttleCallback:(o,s)=>(t.projectId===pc&&_n(),Promise.resolve(!0))};return t.projectSecret!=null&&(n.user="",n.password=t.projectSecret),n}isCommunityResource(){return this.projectId===pc}};var Ad=class extends Qr{send(e,t){let i={method:e,params:t,id:this._nextId++,jsonrpc:"2.0"};this._pendingBatch==null&&(this._pendingBatch=[]);let n={request:i,resolve:null,reject:null},o=new Promise((s,a)=>{n.resolve=s,n.reject=a});return this._pendingBatch.push(n),this._pendingBatchAggregator||(this._pendingBatchAggregator=setTimeout(()=>{let s=this._pendingBatch;this._pendingBatch=null,this._pendingBatchAggregator=null;let a=s.map(l=>l.request);return this.emit("debug",{action:"requestBatch",request:Vt(a),provider:this}),Ki(this.connection,JSON.stringify(a)).then(l=>{this.emit("debug",{action:"response",request:a,response:l,provider:this}),s.forEach((f,c)=>{let u=l[c];if(u.error){let d=new Error(u.error.message);d.code=u.error.code,d.data=u.error.data,f.reject(d)}else f.resolve(u.result)})},l=>{this.emit("debug",{action:"response",error:l,request:a,provider:this}),s.forEach(f=>{f.reject(l)})})},10)),o}};var hx=new O(Fe),nO="ETHERS_JS_SHARED",gc=class extends cr{static getApiKey(e){return e&&typeof e!="string"&&hx.throwArgumentError("invalid apiKey","apiKey",e),e||nO}static getUrl(e,t){hx.warn("NodeSmith will be discontinued on 2019-12-20; please migrate to another platform.");let i=null;switch(e.name){case"homestead":i="https://ethereum.api.nodesmith.io/v1/mainnet/jsonrpc";break;case"ropsten":i="https://ethereum.api.nodesmith.io/v1/ropsten/jsonrpc";break;case"rinkeby":i="https://ethereum.api.nodesmith.io/v1/rinkeby/jsonrpc";break;case"goerli":i="https://ethereum.api.nodesmith.io/v1/goerli/jsonrpc";break;case"kovan":i="https://ethereum.api.nodesmith.io/v1/kovan/jsonrpc";break;default:hx.throwArgumentError("unsupported network","network",arguments[0])}return i+"?apiKey="+t}};var I6=new O(Fe),R6="62e1ad51b37b8e00394bda3b",xc=class extends cr{static getApiKey(e){let t={applicationId:null,loadBalancer:!0,applicationSecretKey:null};return e==null?t.applicationId=R6:typeof e=="string"?t.applicationId=e:e.applicationSecretKey!=null?(t.applicationId=e.applicationId,t.applicationSecretKey=e.applicationSecretKey):e.applicationId?t.applicationId=e.applicationId:I6.throwArgumentError("unsupported PocketProvider apiKey","apiKey",e),t}static getUrl(e,t){let i=null;switch(e?e.name:"unknown"){case"goerli":i="eth-goerli.gateway.pokt.network";break;case"homestead":i="eth-mainnet.gateway.pokt.network";break;case"kovan":i="poa-kovan.gateway.pokt.network";break;case"matic":i="poly-mainnet.gateway.pokt.network";break;case"maticmum":i="polygon-mumbai-rpc.gateway.pokt.network";break;case"rinkeby":i="eth-rinkeby.gateway.pokt.network";break;case"ropsten":i="eth-ropsten.gateway.pokt.network";break;default:I6.throwError("unsupported network",O.errors.INVALID_ARGUMENT,{argument:"network",value:e})}let n=`https://${i}/v1/lb/${t.applicationId}`,o={headers:{},url:n};return t.applicationSecretKey!=null&&(o.user="",o.password=t.applicationSecretKey),o}isCommunityResource(){return this.applicationId===R6}};var D6=new O(Fe),oO=1;function B6(r,e){let t="Web3LegacyFetcher";return function(i,n){let o={method:i,params:n,id:oO++,jsonrpc:"2.0"};return new Promise((s,a)=>{this.emit("debug",{action:"request",fetcher:t,request:Vt(o),provider:this}),e(o,(l,f)=>{if(l)return this.emit("debug",{action:"response",fetcher:t,error:l,request:o,provider:this}),a(l);if(this.emit("debug",{action:"response",fetcher:t,request:o,response:f,provider:this}),f.error){let c=new Error(f.error.message);return c.code=f.error.code,c.data=f.error.data,a(c)}s(f.result)})})}}function sO(r){return function(e,t){t==null&&(t=[]);let i={method:e,params:t};return this.emit("debug",{action:"request",fetcher:"Eip1193Fetcher",request:Vt(i),provider:this}),r.request(i).then(n=>(this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:i,response:n,provider:this}),n),n=>{throw this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:i,error:n,provider:this}),n})}}var bc=class extends Qr{constructor(e,t){e==null&&D6.throwArgumentError("missing provider","provider",e);let i=null,n=null,o=null;typeof e=="function"?(i="unknown:",n=e):(i=e.host||e.path||"",!i&&e.isMetaMask&&(i="metamask"),o=e,e.request?(i===""&&(i="eip-1193:"),n=sO(e)):e.sendAsync?n=B6(e,e.sendAsync.bind(e)):e.send?n=B6(e,e.send.bind(e)):D6.throwArgumentError("unsupported provider","provider",e),i||(i="unknown:")),super(i,t),L(this,"jsonRpcFetchFunc",n),L(this,"provider",o)}send(e,t){return this.jsonRpcFetchFunc(e,t)}};var F6=new O(Fe);function dx(r,e){if(r==null&&(r="homestead"),typeof r=="string"){let i=r.match(/^(ws|http)s?:/i);if(i)switch(i[1].toLowerCase()){case"http":case"https":return new Qr(r);case"ws":case"wss":return new ro(r);default:F6.throwArgumentError("unsupported URL scheme","network",r)}}let t=$f(r);return(!t||!t._defaultProvider)&&F6.throwError("unsupported getDefaultProvider network",O.errors.NETWORK_ERROR,{operation:"getDefaultProvider",network:r}),t._defaultProvider({FallbackProvider:dc,AlchemyProvider:ml,AnkrProvider:fc,CloudflareProvider:cc,EtherscanProvider:uc,InfuraProvider:xl,JsonRpcProvider:Qr,NodesmithProvider:gc,PocketProvider:xc,Web3Provider:bc,IpcProvider:null},e)}var xx={};ta(xx,{AbiCoder:()=>ja,ConstructorFragment:()=>Mr,ErrorFragment:()=>si,EventFragment:()=>Lr,FormatTypes:()=>Me,Fragment:()=>Ur,FunctionFragment:()=>Or,HDNode:()=>fr,Indexed:()=>Wn,Interface:()=>Po,LogDescription:()=>Ga,Logger:()=>O,ParamType:()=>Pt,RLP:()=>yh,SigningKey:()=>Mi,SupportedAlgorithm:()=>En,TransactionDescription:()=>Ka,TransactionTypes:()=>Qh,UnicodeNormalizationForm:()=>Vr,Utf8ErrorFuncs:()=>Ph,Utf8ErrorReason:()=>Nr,_TypedDataEncoder:()=>zt,_fetchData:()=>Zg,_toEscapedUtf8String:()=>ng,accessListify:()=>ci,arrayify:()=>j,base58:()=>Jn,base64:()=>cg,checkProperties:()=>Ba,checkResultErrors:()=>La,commify:()=>W6,computeAddress:()=>Oi,computeHmac:()=>Yn,computePublicKey:()=>zf,concat:()=>ve,deepCopy:()=>Vt,defaultAbiCoder:()=>Lf,defaultPath:()=>Xn,defineReadOnly:()=>L,dnsEncode:()=>Vf,entropyToMnemonic:()=>Us,fetchJson:()=>Ki,formatBytes32String:()=>og,formatEther:()=>G6,formatUnits:()=>mx,getAccountPath:()=>FA,getAddress:()=>Ae,getContractAddress:()=>Ps,getCreate2Address:()=>X2,getIcapAddress:()=>Y2,getJsonWalletAddress:()=>Qg,getStatic:()=>qt,hashMessage:()=>Wa,hexConcat:()=>Xt,hexDataLength:()=>Tr,hexDataSlice:()=>qe,hexStripZeros:()=>Gm,hexValue:()=>un,hexZeroPad:()=>Se,hexlify:()=>Q,id:()=>ai,isAddress:()=>J2,isBytes:()=>Ai,isBytesLike:()=>qn,isHexString:()=>pe,isValidMnemonic:()=>BA,isValidName:()=>hg,joinSignature:()=>Tf,keccak256:()=>we,mnemonicToEntropy:()=>al,mnemonicToSeed:()=>qg,namehash:()=>No,nameprep:()=>fg,parseBytes32String:()=>sg,parseEther:()=>K6,parseTransaction:()=>Jh,parseUnits:()=>gx,poll:()=>Qi,randomBytes:()=>kn,recoverAddress:()=>Bs,recoverPublicKey:()=>Kh,resolveProperties:()=>je,ripemd160:()=>Kf,serializeTransaction:()=>Hf,sha256:()=>Kr,sha512:()=>Fg,shallowCopy:()=>Be,shuffled:()=>Yf,solidityKeccak256:()=>V6,solidityPack:()=>Ed,soliditySha256:()=>q6,splitSignature:()=>hn,stripZeros:()=>ni,toUtf8Bytes:()=>Re,toUtf8CodePoints:()=>Oo,toUtf8String:()=>zr,verifyMessage:()=>e6,verifyTypedData:()=>t6,zeroPad:()=>Ts});var L6="solidity/5.7.0";var aO=new RegExp("^bytes([0-9]+)$"),lO=new RegExp("^(u?int)([0-9]*)$"),fO=new RegExp("^(.*)\\[([0-9]*)\\]$"),cO="0000000000000000000000000000000000000000000000000000000000000000",bl=new O(L6);function U6(r,e,t){switch(r){case"address":return t?Ts(e,32):j(e);case"string":return Re(e);case"bytes":return j(e);case"bool":return e=e?"0x01":"0x00",t?Ts(e,32):j(e)}let i=r.match(lO);if(i){let n=parseInt(i[2]||"256");return(i[2]&&String(n)!==i[2]||n%8!==0||n===0||n>256)&&bl.throwArgumentError("invalid number type","type",r),t&&(n=256),e=H.from(e).toTwos(n),Ts(e,n/8)}if(i=r.match(aO),i){let n=parseInt(i[1]);return(String(n)!==i[1]||n===0||n>32)&&bl.throwArgumentError("invalid bytes type","type",r),j(e).byteLength!==n&&bl.throwArgumentError(`invalid value for ${r}`,"value",e),t?j((e+cO).substring(0,66)):e}if(i=r.match(fO),i&&Array.isArray(e)){let n=i[1];parseInt(i[2]||String(e.length))!=e.length&&bl.throwArgumentError(`invalid array length for ${r}`,"value",e);let s=[];return e.forEach(function(a){s.push(U6(n,a,!0))}),ve(s)}return bl.throwArgumentError("invalid type","type",r)}function Ed(r,e){r.length!=e.length&&bl.throwArgumentError("wrong number of values; expected ${ types.length }","values",e);let t=[];return r.forEach(function(i,n){t.push(U6(i,e[n]))}),Q(ve(t))}function V6(r,e){return we(Ed(r,e))}function q6(r,e){return Kr(Ed(r,e))}var j6="units/5.7.0";var z6=new O(j6),H6=["wei","kwei","mwei","gwei","szabo","finney","ether"];function W6(r){let e=String(r).split(".");(e.length>2||!e[0].match(/^-?[0-9]*$/)||e[1]&&!e[1].match(/^[0-9]*$/)||r==="."||r==="-.")&&z6.throwArgumentError("invalid value","value",r);let t=e[0],i="";for(t.substring(0,1)==="-"&&(i="-",t=t.substring(1));t.substring(0,1)==="0";)t=t.substring(1);t===""&&(t="0");let n="";for(e.length===2&&(n="."+(e[1]||"0"));n.length>2&&n[n.length-1]==="0";)n=n.substring(0,n.length-1);let o=[];for(;t.length;)if(t.length<=3){o.unshift(t);break}else{let s=t.length-3;o.unshift(t.substring(s)),t=t.substring(0,s)}return i+o.join(",")+n}function mx(r,e){if(typeof e=="string"){let t=H6.indexOf(e);t!==-1&&(e=3*t)}return Da(r,e??18)}function gx(r,e){if(typeof r!="string"&&z6.throwArgumentError("value must be a string","value",r),typeof e=="string"){let t=H6.indexOf(e);t!==-1&&(e=3*t)}return ki(r,e??18)}function G6(r){return mx(r,18)}function K6(r){return gx(r,18)}var bx="ethers/5.7.2";var uO=new O(bx);try{let r=window;r._ethers==null&&(r._ethers=qs)}catch{}var Q6=[{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"challenges",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getChallengesCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"register",outputs:[],stateMutability:"nonpayable",type:"function"}];var Bk=Ri(eE());var EE=Ri(AE(),1),{__extends:er,__assign:U,__rest:Mn,__decorate:Fz,__param:Lz,__metadata:Uz,__awaiter:Ji,__generator:Yi,__exportStar:Vz,__createBinding:qz,__values:jz,__read:zz,__spread:Hz,__spreadArrays:Wz,__spreadArray:Vo,__await:Gz,__asyncGenerator:Kz,__asyncDelegator:Qz,__asyncValues:Jz,__makeTemplateObject:Yz,__importStar:Xz,__importDefault:$z,__classPrivateFieldGet:Zz,__classPrivateFieldSet:eH,__classPrivateFieldIn:tH}=EE.default;var vx="Invariant Violation",kE=Object.setPrototypeOf,bO=kE===void 0?function(r,e){return r.__proto__=e,r}:kE,xe=function(r){er(e,r);function e(t){t===void 0&&(t=vx);var i=r.call(this,typeof t=="number"?vx+": "+t+" (see https://github.com/apollographql/invariant-packages)":t)||this;return i.framesToPop=1,i.name=vx,bO(i,e.prototype),i}return e}(Error);function X(r,e){if(!r)throw new xe(e)}var Od=["debug","log","warn","error","silent"],wx=Od.indexOf("log");function Md(r){return function(){if(Od.indexOf(r)>=wx){var e=console[r]||console.log;return e.apply(console,arguments)}}}(function(r){r.debug=Md("debug"),r.log=Md("log"),r.warn=Md("warn"),r.error=Md("error")})(X||(X={}));function SE(r){var e=Od[wx];return wx=Math.max(0,Od.indexOf(r)),e}function ur(r){try{return r()}catch{}}var Nd=ur(function(){return globalThis})||ur(function(){return window})||ur(function(){return self})||ur(function(){return global})||ur(function(){return ur.constructor("return this")()});var _E="__",CE=[_E,_E].join("DEV");function yO(){try{return Boolean(__DEV__)}catch{return Object.defineProperty(Nd,CE,{value:ur(function(){return"production"})!=="production",enumerable:!1,configurable:!0,writable:!0}),Nd[CE]}}var js=yO();function qo(r){try{return r()}catch{}}var Ax=qo(function(){return globalThis})||qo(function(){return window})||qo(function(){return self})||qo(function(){return global})||qo(function(){return qo.constructor("return this")()}),Ex=!1;function vO(){Ax&&!qo(function(){return"production"})&&!qo(function(){return process})&&(Object.defineProperty(Ax,"process",{value:{env:{NODE_ENV:"production"}},configurable:!0,enumerable:!1,writable:!0}),Ex=!0)}vO();function kx(){Ex&&(delete Ax.process,Ex=!1)}function Al(r,e){if(!Boolean(r))throw new Error(e)}function TE(r){return typeof r=="object"&&r!==null}function ME(r,e){if(!Boolean(r))throw new Error(e??"Unexpected invariant triggered.")}var wO=/\r\n|[\n\r]/g;function El(r,e){let t=0,i=1;for(let n of r.body.matchAll(wO)){if(typeof n.index=="number"||ME(!1),n.index>=e)break;t=n.index+n[0].length,i+=1}return{line:i,column:e+1-t}}function Sx(r){return Pd(r.source,El(r.source,r.start))}function Pd(r,e){let t=r.locationOffset.column-1,i="".padStart(t)+r.body,n=e.line-1,o=r.locationOffset.line-1,s=e.line+o,a=e.line===1?t:0,l=e.column+a,f=`${r.name}:${s}:${l}
`,c=i.split(/\r\n|[\n\r]/g),u=c[n];if(u.length>120){let d=Math.floor(l/80),p=l%80,g=[];for(let b=0;b<u.length;b+=80)g.push(u.slice(b,b+80));return f+OE([[`${s} |`,g[0]],...g.slice(1,d+1).map(b=>["|",b]),["|","^".padStart(p)],["|",g[d+1]]])}return f+OE([[`${s-1} |`,c[n-1]],[`${s} |`,u],["|","^".padStart(l)],[`${s+1} |`,c[n+1]]])}function OE(r){let e=r.filter(([i,n])=>n!==void 0),t=Math.max(...e.map(([i])=>i.length));return e.map(([i,n])=>i.padStart(t)+(n?" "+n:"")).join(`
`)}function AO(r){let e=r[0];return e==null||"kind"in e||"length"in e?{nodes:e,source:r[1],positions:r[2],path:r[3],originalError:r[4],extensions:r[5]}:e}var kl=class extends Error{constructor(e,...t){var i,n,o;let{nodes:s,source:a,positions:l,path:f,originalError:c,extensions:u}=AO(t);super(e),this.name="GraphQLError",this.path=f??void 0,this.originalError=c??void 0,this.nodes=NE(Array.isArray(s)?s:s?[s]:void 0);let d=NE((i=this.nodes)===null||i===void 0?void 0:i.map(g=>g.loc).filter(g=>g!=null));this.source=a??(d==null||(n=d[0])===null||n===void 0?void 0:n.source),this.positions=l??d?.map(g=>g.start),this.locations=l&&a?l.map(g=>El(a,g)):d?.map(g=>El(g.source,g.start));let p=TE(c?.extensions)?c?.extensions:void 0;this.extensions=(o=u??p)!==null&&o!==void 0?o:Object.create(null),Object.defineProperties(this,{message:{writable:!0,enumerable:!0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),c!=null&&c.stack?Object.defineProperty(this,"stack",{value:c.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,kl):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}get[Symbol.toStringTag](){return"GraphQLError"}toString(){let e=this.message;if(this.nodes)for(let t of this.nodes)t.loc&&(e+=`

`+Sx(t.loc));else if(this.source&&this.locations)for(let t of this.locations)e+=`

`+Pd(this.source,t);return e}toJSON(){let e={message:this.message};return this.locations!=null&&(e.locations=this.locations),this.path!=null&&(e.path=this.path),this.extensions!=null&&Object.keys(this.extensions).length>0&&(e.extensions=this.extensions),e}};function NE(r){return r===void 0||r.length===0?void 0:r}function tr(r,e,t){return new kl(`Syntax Error: ${t}`,{source:r,positions:[e]})}var yc=class{constructor(e,t,i){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=i}get[Symbol.toStringTag](){return"Location"}toJSON(){return{start:this.start,end:this.end}}},Sl=class{constructor(e,t,i,n,o,s){this.kind=e,this.start=t,this.end=i,this.line=n,this.column=o,this.value=s,this.prev=null,this.next=null}get[Symbol.toStringTag](){return"Token"}toJSON(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}}},_x={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},EO=new Set(Object.keys(_x));function Cx(r){let e=r?.kind;return typeof e=="string"&&EO.has(e)}var jo;(function(r){r.QUERY="query",r.MUTATION="mutation",r.SUBSCRIPTION="subscription"})(jo||(jo={}));var vc;(function(r){r.QUERY="QUERY",r.MUTATION="MUTATION",r.SUBSCRIPTION="SUBSCRIPTION",r.FIELD="FIELD",r.FRAGMENT_DEFINITION="FRAGMENT_DEFINITION",r.FRAGMENT_SPREAD="FRAGMENT_SPREAD",r.INLINE_FRAGMENT="INLINE_FRAGMENT",r.VARIABLE_DEFINITION="VARIABLE_DEFINITION",r.SCHEMA="SCHEMA",r.SCALAR="SCALAR",r.OBJECT="OBJECT",r.FIELD_DEFINITION="FIELD_DEFINITION",r.ARGUMENT_DEFINITION="ARGUMENT_DEFINITION",r.INTERFACE="INTERFACE",r.UNION="UNION",r.ENUM="ENUM",r.ENUM_VALUE="ENUM_VALUE",r.INPUT_OBJECT="INPUT_OBJECT",r.INPUT_FIELD_DEFINITION="INPUT_FIELD_DEFINITION"})(vc||(vc={}));var de;(function(r){r.NAME="Name",r.DOCUMENT="Document",r.OPERATION_DEFINITION="OperationDefinition",r.VARIABLE_DEFINITION="VariableDefinition",r.SELECTION_SET="SelectionSet",r.FIELD="Field",r.ARGUMENT="Argument",r.FRAGMENT_SPREAD="FragmentSpread",r.INLINE_FRAGMENT="InlineFragment",r.FRAGMENT_DEFINITION="FragmentDefinition",r.VARIABLE="Variable",r.INT="IntValue",r.FLOAT="FloatValue",r.STRING="StringValue",r.BOOLEAN="BooleanValue",r.NULL="NullValue",r.ENUM="EnumValue",r.LIST="ListValue",r.OBJECT="ObjectValue",r.OBJECT_FIELD="ObjectField",r.DIRECTIVE="Directive",r.NAMED_TYPE="NamedType",r.LIST_TYPE="ListType",r.NON_NULL_TYPE="NonNullType",r.SCHEMA_DEFINITION="SchemaDefinition",r.OPERATION_TYPE_DEFINITION="OperationTypeDefinition",r.SCALAR_TYPE_DEFINITION="ScalarTypeDefinition",r.OBJECT_TYPE_DEFINITION="ObjectTypeDefinition",r.FIELD_DEFINITION="FieldDefinition",r.INPUT_VALUE_DEFINITION="InputValueDefinition",r.INTERFACE_TYPE_DEFINITION="InterfaceTypeDefinition",r.UNION_TYPE_DEFINITION="UnionTypeDefinition",r.ENUM_TYPE_DEFINITION="EnumTypeDefinition",r.ENUM_VALUE_DEFINITION="EnumValueDefinition",r.INPUT_OBJECT_TYPE_DEFINITION="InputObjectTypeDefinition",r.DIRECTIVE_DEFINITION="DirectiveDefinition",r.SCHEMA_EXTENSION="SchemaExtension",r.SCALAR_TYPE_EXTENSION="ScalarTypeExtension",r.OBJECT_TYPE_EXTENSION="ObjectTypeExtension",r.INTERFACE_TYPE_EXTENSION="InterfaceTypeExtension",r.UNION_TYPE_EXTENSION="UnionTypeExtension",r.ENUM_TYPE_EXTENSION="EnumTypeExtension",r.INPUT_OBJECT_TYPE_EXTENSION="InputObjectTypeExtension"})(de||(de={}));function Id(r){return r===9||r===32}function _l(r){return r>=48&&r<=57}function PE(r){return r>=97&&r<=122||r>=65&&r<=90}function Tx(r){return PE(r)||r===95}function IE(r){return PE(r)||_l(r)||r===95}function RE(r){var e;let t=Number.MAX_SAFE_INTEGER,i=null,n=-1;for(let s=0;s<r.length;++s){var o;let a=r[s],l=kO(a);l!==a.length&&(i=(o=i)!==null&&o!==void 0?o:s,n=s,s!==0&&l<t&&(t=l))}return r.map((s,a)=>a===0?s:s.slice(t)).slice((e=i)!==null&&e!==void 0?e:0,n+1)}function kO(r){let e=0;for(;e<r.length&&Id(r.charCodeAt(e));)++e;return e}function DE(r,e){let t=r.replace(/"""/g,'\\"""'),i=t.split(/\r\n|[\n\r]/g),n=i.length===1,o=i.length>1&&i.slice(1).every(p=>p.length===0||Id(p.charCodeAt(0))),s=t.endsWith('\\"""'),a=r.endsWith('"')&&!s,l=r.endsWith("\\"),f=a||l,c=!(e!=null&&e.minimize)&&(!n||r.length>70||f||o||s),u="",d=n&&Id(r.charCodeAt(0));return(c&&!d||o)&&(u+=`
`),u+=t,(c||f)&&(u+=`
`),'"""'+u+'"""'}var G;(function(r){r.SOF="<SOF>",r.EOF="<EOF>",r.BANG="!",r.DOLLAR="$",r.AMP="&",r.PAREN_L="(",r.PAREN_R=")",r.SPREAD="...",r.COLON=":",r.EQUALS="=",r.AT="@",r.BRACKET_L="[",r.BRACKET_R="]",r.BRACE_L="{",r.PIPE="|",r.BRACE_R="}",r.NAME="Name",r.INT="Int",r.FLOAT="Float",r.STRING="String",r.BLOCK_STRING="BlockString",r.COMMENT="Comment"})(G||(G={}));var Ac=class{constructor(e){let t=new Sl(G.SOF,0,0,0,0);this.source=e,this.lastToken=t,this.token=t,this.line=1,this.lineStart=0}get[Symbol.toStringTag](){return"Lexer"}advance(){return this.lastToken=this.token,this.token=this.lookahead()}lookahead(){let e=this.token;if(e.kind!==G.EOF)do if(e.next)e=e.next;else{let t=SO(this,e.end);e.next=t,t.prev=e,e=t}while(e.kind===G.COMMENT);return e}};function FE(r){return r===G.BANG||r===G.DOLLAR||r===G.AMP||r===G.PAREN_L||r===G.PAREN_R||r===G.SPREAD||r===G.COLON||r===G.EQUALS||r===G.AT||r===G.BRACKET_L||r===G.BRACKET_R||r===G.BRACE_L||r===G.PIPE||r===G.BRACE_R}function Cl(r){return r>=0&&r<=55295||r>=57344&&r<=1114111}function Rd(r,e){return LE(r.charCodeAt(e))&&UE(r.charCodeAt(e+1))}function LE(r){return r>=55296&&r<=56319}function UE(r){return r>=56320&&r<=57343}function zs(r,e){let t=r.source.body.codePointAt(e);if(t===void 0)return G.EOF;if(t>=32&&t<=126){let i=String.fromCodePoint(t);return i==='"'?`'"'`:`"${i}"`}return"U+"+t.toString(16).toUpperCase().padStart(4,"0")}function rr(r,e,t,i,n){let o=r.line,s=1+t-r.lineStart;return new Sl(e,t,i,o,s,n)}function SO(r,e){let t=r.source.body,i=t.length,n=e;for(;n<i;){let o=t.charCodeAt(n);switch(o){case 65279:case 9:case 32:case 44:++n;continue;case 10:++n,++r.line,r.lineStart=n;continue;case 13:t.charCodeAt(n+1)===10?n+=2:++n,++r.line,r.lineStart=n;continue;case 35:return _O(r,n);case 33:return rr(r,G.BANG,n,n+1);case 36:return rr(r,G.DOLLAR,n,n+1);case 38:return rr(r,G.AMP,n,n+1);case 40:return rr(r,G.PAREN_L,n,n+1);case 41:return rr(r,G.PAREN_R,n,n+1);case 46:if(t.charCodeAt(n+1)===46&&t.charCodeAt(n+2)===46)return rr(r,G.SPREAD,n,n+3);break;case 58:return rr(r,G.COLON,n,n+1);case 61:return rr(r,G.EQUALS,n,n+1);case 64:return rr(r,G.AT,n,n+1);case 91:return rr(r,G.BRACKET_L,n,n+1);case 93:return rr(r,G.BRACKET_R,n,n+1);case 123:return rr(r,G.BRACE_L,n,n+1);case 124:return rr(r,G.PIPE,n,n+1);case 125:return rr(r,G.BRACE_R,n,n+1);case 34:return t.charCodeAt(n+1)===34&&t.charCodeAt(n+2)===34?PO(r,n):TO(r,n)}if(_l(o)||o===45)return CO(r,n,o);if(Tx(o))return IO(r,n);throw tr(r.source,n,o===39?`Unexpected single quote character ('), did you mean to use a double quote (")?`:Cl(o)||Rd(t,n)?`Unexpected character: ${zs(r,n)}.`:`Invalid character: ${zs(r,n)}.`)}return rr(r,G.EOF,i,i)}function _O(r,e){let t=r.source.body,i=t.length,n=e+1;for(;n<i;){let o=t.charCodeAt(n);if(o===10||o===13)break;if(Cl(o))++n;else if(Rd(t,n))n+=2;else break}return rr(r,G.COMMENT,e,n,t.slice(e+1,n))}function CO(r,e,t){let i=r.source.body,n=e,o=t,s=!1;if(o===45&&(o=i.charCodeAt(++n)),o===48){if(o=i.charCodeAt(++n),_l(o))throw tr(r.source,n,`Invalid number, unexpected digit after 0: ${zs(r,n)}.`)}else n=Mx(r,n,o),o=i.charCodeAt(n);if(o===46&&(s=!0,o=i.charCodeAt(++n),n=Mx(r,n,o),o=i.charCodeAt(n)),(o===69||o===101)&&(s=!0,o=i.charCodeAt(++n),(o===43||o===45)&&(o=i.charCodeAt(++n)),n=Mx(r,n,o),o=i.charCodeAt(n)),o===46||Tx(o))throw tr(r.source,n,`Invalid number, expected digit but got: ${zs(r,n)}.`);return rr(r,s?G.FLOAT:G.INT,e,n,i.slice(e,n))}function Mx(r,e,t){if(!_l(t))throw tr(r.source,e,`Invalid number, expected digit but got: ${zs(r,e)}.`);let i=r.source.body,n=e+1;for(;_l(i.charCodeAt(n));)++n;return n}function TO(r,e){let t=r.source.body,i=t.length,n=e+1,o=n,s="";for(;n<i;){let a=t.charCodeAt(n);if(a===34)return s+=t.slice(o,n),rr(r,G.STRING,e,n+1,s);if(a===92){s+=t.slice(o,n);let l=t.charCodeAt(n+1)===117?t.charCodeAt(n+2)===123?MO(r,n):OO(r,n):NO(r,n);s+=l.value,n+=l.size,o=n;continue}if(a===10||a===13)break;if(Cl(a))++n;else if(Rd(t,n))n+=2;else throw tr(r.source,n,`Invalid character within String: ${zs(r,n)}.`)}throw tr(r.source,n,"Unterminated string.")}function MO(r,e){let t=r.source.body,i=0,n=3;for(;n<12;){let o=t.charCodeAt(e+n++);if(o===125){if(n<5||!Cl(i))break;return{value:String.fromCodePoint(i),size:n}}if(i=i<<4|wc(o),i<0)break}throw tr(r.source,e,`Invalid Unicode escape sequence: "${t.slice(e,e+n)}".`)}function OO(r,e){let t=r.source.body,i=BE(t,e+2);if(Cl(i))return{value:String.fromCodePoint(i),size:6};if(LE(i)&&t.charCodeAt(e+6)===92&&t.charCodeAt(e+7)===117){let n=BE(t,e+8);if(UE(n))return{value:String.fromCodePoint(i,n),size:12}}throw tr(r.source,e,`Invalid Unicode escape sequence: "${t.slice(e,e+6)}".`)}function BE(r,e){return wc(r.charCodeAt(e))<<12|wc(r.charCodeAt(e+1))<<8|wc(r.charCodeAt(e+2))<<4|wc(r.charCodeAt(e+3))}function wc(r){return r>=48&&r<=57?r-48:r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:-1}function NO(r,e){let t=r.source.body;switch(t.charCodeAt(e+1)){case 34:return{value:'"',size:2};case 92:return{value:"\\",size:2};case 47:return{value:"/",size:2};case 98:return{value:"\b",size:2};case 102:return{value:"\f",size:2};case 110:return{value:`
`,size:2};case 114:return{value:"\r",size:2};case 116:return{value:"	",size:2}}throw tr(r.source,e,`Invalid character escape sequence: "${t.slice(e,e+2)}".`)}function PO(r,e){let t=r.source.body,i=t.length,n=r.lineStart,o=e+3,s=o,a="",l=[];for(;o<i;){let f=t.charCodeAt(o);if(f===34&&t.charCodeAt(o+1)===34&&t.charCodeAt(o+2)===34){a+=t.slice(s,o),l.push(a);let c=rr(r,G.BLOCK_STRING,e,o+3,RE(l).join(`
`));return r.line+=l.length-1,r.lineStart=n,c}if(f===92&&t.charCodeAt(o+1)===34&&t.charCodeAt(o+2)===34&&t.charCodeAt(o+3)===34){a+=t.slice(s,o),s=o+1,o+=4;continue}if(f===10||f===13){a+=t.slice(s,o),l.push(a),f===13&&t.charCodeAt(o+1)===10?o+=2:++o,a="",s=o,n=o;continue}if(Cl(f))++o;else if(Rd(t,o))o+=2;else throw tr(r.source,o,`Invalid character within String: ${zs(r,o)}.`)}throw tr(r.source,o,"Unterminated string.")}function IO(r,e){let t=r.source.body,i=t.length,n=e+1;for(;n<i;){let o=t.charCodeAt(n);if(IE(o))++n;else break}return rr(r,G.NAME,e,n,t.slice(e,n))}function Dd(r){return Bd(r,[])}function Bd(r,e){switch(typeof r){case"string":return JSON.stringify(r);case"function":return r.name?`[function ${r.name}]`:"[function]";case"object":return RO(r,e);default:return String(r)}}function RO(r,e){if(r===null)return"null";if(e.includes(r))return"[Circular]";let t=[...e,r];if(DO(r)){let i=r.toJSON();if(i!==r)return typeof i=="string"?i:Bd(i,t)}else if(Array.isArray(r))return FO(r,t);return BO(r,t)}function DO(r){return typeof r.toJSON=="function"}function BO(r,e){let t=Object.entries(r);return t.length===0?"{}":e.length>2?"["+LO(r)+"]":"{ "+t.map(([n,o])=>n+": "+Bd(o,e)).join(", ")+" }"}function FO(r,e){if(r.length===0)return"[]";if(e.length>2)return"[Array]";let t=Math.min(10,r.length),i=r.length-t,n=[];for(let o=0;o<t;++o)n.push(Bd(r[o],e));return i===1?n.push("... 1 more item"):i>1&&n.push(`... ${i} more items`),"["+n.join(", ")+"]"}function LO(r){let e=Object.prototype.toString.call(r).replace(/^\[object /,"").replace(/]$/,"");if(e==="Object"&&typeof r.constructor=="function"){let t=r.constructor.name;if(typeof t=="string"&&t!=="")return t}return e}var VE=function(e,t){return e instanceof t};var io=class{constructor(e,t="GraphQL request",i={line:1,column:1}){typeof e=="string"||Al(!1,`Body must be a string. Received: ${Dd(e)}.`),this.body=e,this.name=t,this.locationOffset=i,this.locationOffset.line>0||Al(!1,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||Al(!1,"column in locationOffset is 1-indexed and must be positive.")}get[Symbol.toStringTag](){return"Source"}};function qE(r){return VE(r,io)}function Ld(r,e){return new Ox(r,e).parseDocument()}var Ox=class{constructor(e,t={}){let i=qE(e)?e:new io(e);this._lexer=new Ac(i),this._options=t,this._tokenCounter=0}parseName(){let e=this.expectToken(G.NAME);return this.node(e,{kind:de.NAME,value:e.value})}parseDocument(){return this.node(this._lexer.token,{kind:de.DOCUMENT,definitions:this.many(G.SOF,this.parseDefinition,G.EOF)})}parseDefinition(){if(this.peek(G.BRACE_L))return this.parseOperationDefinition();let e=this.peekDescription(),t=e?this._lexer.lookahead():this._lexer.token;if(t.kind===G.NAME){switch(t.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}if(e)throw tr(this._lexer.source,this._lexer.token.start,"Unexpected description, descriptions are supported only on type definitions.");switch(t.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"extend":return this.parseTypeSystemExtension()}}throw this.unexpected(t)}parseOperationDefinition(){let e=this._lexer.token;if(this.peek(G.BRACE_L))return this.node(e,{kind:de.OPERATION_DEFINITION,operation:jo.QUERY,name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet()});let t=this.parseOperationType(),i;return this.peek(G.NAME)&&(i=this.parseName()),this.node(e,{kind:de.OPERATION_DEFINITION,operation:t,name:i,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseOperationType(){let e=this.expectToken(G.NAME);switch(e.value){case"query":return jo.QUERY;case"mutation":return jo.MUTATION;case"subscription":return jo.SUBSCRIPTION}throw this.unexpected(e)}parseVariableDefinitions(){return this.optionalMany(G.PAREN_L,this.parseVariableDefinition,G.PAREN_R)}parseVariableDefinition(){return this.node(this._lexer.token,{kind:de.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(G.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(G.EQUALS)?this.parseConstValueLiteral():void 0,directives:this.parseConstDirectives()})}parseVariable(){let e=this._lexer.token;return this.expectToken(G.DOLLAR),this.node(e,{kind:de.VARIABLE,name:this.parseName()})}parseSelectionSet(){return this.node(this._lexer.token,{kind:de.SELECTION_SET,selections:this.many(G.BRACE_L,this.parseSelection,G.BRACE_R)})}parseSelection(){return this.peek(G.SPREAD)?this.parseFragment():this.parseField()}parseField(){let e=this._lexer.token,t=this.parseName(),i,n;return this.expectOptionalToken(G.COLON)?(i=t,n=this.parseName()):n=t,this.node(e,{kind:de.FIELD,alias:i,name:n,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(G.BRACE_L)?this.parseSelectionSet():void 0})}parseArguments(e){let t=e?this.parseConstArgument:this.parseArgument;return this.optionalMany(G.PAREN_L,t,G.PAREN_R)}parseArgument(e=!1){let t=this._lexer.token,i=this.parseName();return this.expectToken(G.COLON),this.node(t,{kind:de.ARGUMENT,name:i,value:this.parseValueLiteral(e)})}parseConstArgument(){return this.parseArgument(!0)}parseFragment(){let e=this._lexer.token;this.expectToken(G.SPREAD);let t=this.expectOptionalKeyword("on");return!t&&this.peek(G.NAME)?this.node(e,{kind:de.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1)}):this.node(e,{kind:de.INLINE_FRAGMENT,typeCondition:t?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentDefinition(){let e=this._lexer.token;return this.expectKeyword("fragment"),this._options.allowLegacyFragmentVariables===!0?this.node(e,{kind:de.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()}):this.node(e,{kind:de.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentName(){if(this._lexer.token.value==="on")throw this.unexpected();return this.parseName()}parseValueLiteral(e){let t=this._lexer.token;switch(t.kind){case G.BRACKET_L:return this.parseList(e);case G.BRACE_L:return this.parseObject(e);case G.INT:return this.advanceLexer(),this.node(t,{kind:de.INT,value:t.value});case G.FLOAT:return this.advanceLexer(),this.node(t,{kind:de.FLOAT,value:t.value});case G.STRING:case G.BLOCK_STRING:return this.parseStringLiteral();case G.NAME:switch(this.advanceLexer(),t.value){case"true":return this.node(t,{kind:de.BOOLEAN,value:!0});case"false":return this.node(t,{kind:de.BOOLEAN,value:!1});case"null":return this.node(t,{kind:de.NULL});default:return this.node(t,{kind:de.ENUM,value:t.value})}case G.DOLLAR:if(e)if(this.expectToken(G.DOLLAR),this._lexer.token.kind===G.NAME){let i=this._lexer.token.value;throw tr(this._lexer.source,t.start,`Unexpected variable "$${i}" in constant value.`)}else throw this.unexpected(t);return this.parseVariable();default:throw this.unexpected()}}parseConstValueLiteral(){return this.parseValueLiteral(!0)}parseStringLiteral(){let e=this._lexer.token;return this.advanceLexer(),this.node(e,{kind:de.STRING,value:e.value,block:e.kind===G.BLOCK_STRING})}parseList(e){let t=()=>this.parseValueLiteral(e);return this.node(this._lexer.token,{kind:de.LIST,values:this.any(G.BRACKET_L,t,G.BRACKET_R)})}parseObject(e){let t=()=>this.parseObjectField(e);return this.node(this._lexer.token,{kind:de.OBJECT,fields:this.any(G.BRACE_L,t,G.BRACE_R)})}parseObjectField(e){let t=this._lexer.token,i=this.parseName();return this.expectToken(G.COLON),this.node(t,{kind:de.OBJECT_FIELD,name:i,value:this.parseValueLiteral(e)})}parseDirectives(e){let t=[];for(;this.peek(G.AT);)t.push(this.parseDirective(e));return t}parseConstDirectives(){return this.parseDirectives(!0)}parseDirective(e){let t=this._lexer.token;return this.expectToken(G.AT),this.node(t,{kind:de.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(e)})}parseTypeReference(){let e=this._lexer.token,t;if(this.expectOptionalToken(G.BRACKET_L)){let i=this.parseTypeReference();this.expectToken(G.BRACKET_R),t=this.node(e,{kind:de.LIST_TYPE,type:i})}else t=this.parseNamedType();return this.expectOptionalToken(G.BANG)?this.node(e,{kind:de.NON_NULL_TYPE,type:t}):t}parseNamedType(){return this.node(this._lexer.token,{kind:de.NAMED_TYPE,name:this.parseName()})}peekDescription(){return this.peek(G.STRING)||this.peek(G.BLOCK_STRING)}parseDescription(){if(this.peekDescription())return this.parseStringLiteral()}parseSchemaDefinition(){let e=this._lexer.token,t=this.parseDescription();this.expectKeyword("schema");let i=this.parseConstDirectives(),n=this.many(G.BRACE_L,this.parseOperationTypeDefinition,G.BRACE_R);return this.node(e,{kind:de.SCHEMA_DEFINITION,description:t,directives:i,operationTypes:n})}parseOperationTypeDefinition(){let e=this._lexer.token,t=this.parseOperationType();this.expectToken(G.COLON);let i=this.parseNamedType();return this.node(e,{kind:de.OPERATION_TYPE_DEFINITION,operation:t,type:i})}parseScalarTypeDefinition(){let e=this._lexer.token,t=this.parseDescription();this.expectKeyword("scalar");let i=this.parseName(),n=this.parseConstDirectives();return this.node(e,{kind:de.SCALAR_TYPE_DEFINITION,description:t,name:i,directives:n})}parseObjectTypeDefinition(){let e=this._lexer.token,t=this.parseDescription();this.expectKeyword("type");let i=this.parseName(),n=this.parseImplementsInterfaces(),o=this.parseConstDirectives(),s=this.parseFieldsDefinition();return this.node(e,{kind:de.OBJECT_TYPE_DEFINITION,description:t,name:i,interfaces:n,directives:o,fields:s})}parseImplementsInterfaces(){return this.expectOptionalKeyword("implements")?this.delimitedMany(G.AMP,this.parseNamedType):[]}parseFieldsDefinition(){return this.optionalMany(G.BRACE_L,this.parseFieldDefinition,G.BRACE_R)}parseFieldDefinition(){let e=this._lexer.token,t=this.parseDescription(),i=this.parseName(),n=this.parseArgumentDefs();this.expectToken(G.COLON);let o=this.parseTypeReference(),s=this.parseConstDirectives();return this.node(e,{kind:de.FIELD_DEFINITION,description:t,name:i,arguments:n,type:o,directives:s})}parseArgumentDefs(){return this.optionalMany(G.PAREN_L,this.parseInputValueDef,G.PAREN_R)}parseInputValueDef(){let e=this._lexer.token,t=this.parseDescription(),i=this.parseName();this.expectToken(G.COLON);let n=this.parseTypeReference(),o;this.expectOptionalToken(G.EQUALS)&&(o=this.parseConstValueLiteral());let s=this.parseConstDirectives();return this.node(e,{kind:de.INPUT_VALUE_DEFINITION,description:t,name:i,type:n,defaultValue:o,directives:s})}parseInterfaceTypeDefinition(){let e=this._lexer.token,t=this.parseDescription();this.expectKeyword("interface");let i=this.parseName(),n=this.parseImplementsInterfaces(),o=this.parseConstDirectives(),s=this.parseFieldsDefinition();return this.node(e,{kind:de.INTERFACE_TYPE_DEFINITION,description:t,name:i,interfaces:n,directives:o,fields:s})}parseUnionTypeDefinition(){let e=this._lexer.token,t=this.parseDescription();this.expectKeyword("union");let i=this.parseName(),n=this.parseConstDirectives(),o=this.parseUnionMemberTypes();return this.node(e,{kind:de.UNION_TYPE_DEFINITION,description:t,name:i,directives:n,types:o})}parseUnionMemberTypes(){return this.expectOptionalToken(G.EQUALS)?this.delimitedMany(G.PIPE,this.parseNamedType):[]}parseEnumTypeDefinition(){let e=this._lexer.token,t=this.parseDescription();this.expectKeyword("enum");let i=this.parseName(),n=this.parseConstDirectives(),o=this.parseEnumValuesDefinition();return this.node(e,{kind:de.ENUM_TYPE_DEFINITION,description:t,name:i,directives:n,values:o})}parseEnumValuesDefinition(){return this.optionalMany(G.BRACE_L,this.parseEnumValueDefinition,G.BRACE_R)}parseEnumValueDefinition(){let e=this._lexer.token,t=this.parseDescription(),i=this.parseEnumValueName(),n=this.parseConstDirectives();return this.node(e,{kind:de.ENUM_VALUE_DEFINITION,description:t,name:i,directives:n})}parseEnumValueName(){if(this._lexer.token.value==="true"||this._lexer.token.value==="false"||this._lexer.token.value==="null")throw tr(this._lexer.source,this._lexer.token.start,`${Fd(this._lexer.token)} is reserved and cannot be used for an enum value.`);return this.parseName()}parseInputObjectTypeDefinition(){let e=this._lexer.token,t=this.parseDescription();this.expectKeyword("input");let i=this.parseName(),n=this.parseConstDirectives(),o=this.parseInputFieldsDefinition();return this.node(e,{kind:de.INPUT_OBJECT_TYPE_DEFINITION,description:t,name:i,directives:n,fields:o})}parseInputFieldsDefinition(){return this.optionalMany(G.BRACE_L,this.parseInputValueDef,G.BRACE_R)}parseTypeSystemExtension(){let e=this._lexer.lookahead();if(e.kind===G.NAME)switch(e.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(e)}parseSchemaExtension(){let e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");let t=this.parseConstDirectives(),i=this.optionalMany(G.BRACE_L,this.parseOperationTypeDefinition,G.BRACE_R);if(t.length===0&&i.length===0)throw this.unexpected();return this.node(e,{kind:de.SCHEMA_EXTENSION,directives:t,operationTypes:i})}parseScalarTypeExtension(){let e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");let t=this.parseName(),i=this.parseConstDirectives();if(i.length===0)throw this.unexpected();return this.node(e,{kind:de.SCALAR_TYPE_EXTENSION,name:t,directives:i})}parseObjectTypeExtension(){let e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");let t=this.parseName(),i=this.parseImplementsInterfaces(),n=this.parseConstDirectives(),o=this.parseFieldsDefinition();if(i.length===0&&n.length===0&&o.length===0)throw this.unexpected();return this.node(e,{kind:de.OBJECT_TYPE_EXTENSION,name:t,interfaces:i,directives:n,fields:o})}parseInterfaceTypeExtension(){let e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");let t=this.parseName(),i=this.parseImplementsInterfaces(),n=this.parseConstDirectives(),o=this.parseFieldsDefinition();if(i.length===0&&n.length===0&&o.length===0)throw this.unexpected();return this.node(e,{kind:de.INTERFACE_TYPE_EXTENSION,name:t,interfaces:i,directives:n,fields:o})}parseUnionTypeExtension(){let e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");let t=this.parseName(),i=this.parseConstDirectives(),n=this.parseUnionMemberTypes();if(i.length===0&&n.length===0)throw this.unexpected();return this.node(e,{kind:de.UNION_TYPE_EXTENSION,name:t,directives:i,types:n})}parseEnumTypeExtension(){let e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");let t=this.parseName(),i=this.parseConstDirectives(),n=this.parseEnumValuesDefinition();if(i.length===0&&n.length===0)throw this.unexpected();return this.node(e,{kind:de.ENUM_TYPE_EXTENSION,name:t,directives:i,values:n})}parseInputObjectTypeExtension(){let e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");let t=this.parseName(),i=this.parseConstDirectives(),n=this.parseInputFieldsDefinition();if(i.length===0&&n.length===0)throw this.unexpected();return this.node(e,{kind:de.INPUT_OBJECT_TYPE_EXTENSION,name:t,directives:i,fields:n})}parseDirectiveDefinition(){let e=this._lexer.token,t=this.parseDescription();this.expectKeyword("directive"),this.expectToken(G.AT);let i=this.parseName(),n=this.parseArgumentDefs(),o=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");let s=this.parseDirectiveLocations();return this.node(e,{kind:de.DIRECTIVE_DEFINITION,description:t,name:i,arguments:n,repeatable:o,locations:s})}parseDirectiveLocations(){return this.delimitedMany(G.PIPE,this.parseDirectiveLocation)}parseDirectiveLocation(){let e=this._lexer.token,t=this.parseName();if(Object.prototype.hasOwnProperty.call(vc,t.value))return t;throw this.unexpected(e)}node(e,t){return this._options.noLocation!==!0&&(t.loc=new yc(e,this._lexer.lastToken,this._lexer.source)),t}peek(e){return this._lexer.token.kind===e}expectToken(e){let t=this._lexer.token;if(t.kind===e)return this.advanceLexer(),t;throw tr(this._lexer.source,t.start,`Expected ${jE(e)}, found ${Fd(t)}.`)}expectOptionalToken(e){return this._lexer.token.kind===e?(this.advanceLexer(),!0):!1}expectKeyword(e){let t=this._lexer.token;if(t.kind===G.NAME&&t.value===e)this.advanceLexer();else throw tr(this._lexer.source,t.start,`Expected "${e}", found ${Fd(t)}.`)}expectOptionalKeyword(e){let t=this._lexer.token;return t.kind===G.NAME&&t.value===e?(this.advanceLexer(),!0):!1}unexpected(e){let t=e??this._lexer.token;return tr(this._lexer.source,t.start,`Unexpected ${Fd(t)}.`)}any(e,t,i){this.expectToken(e);let n=[];for(;!this.expectOptionalToken(i);)n.push(t.call(this));return n}optionalMany(e,t,i){if(this.expectOptionalToken(e)){let n=[];do n.push(t.call(this));while(!this.expectOptionalToken(i));return n}return[]}many(e,t,i){this.expectToken(e);let n=[];do n.push(t.call(this));while(!this.expectOptionalToken(i));return n}delimitedMany(e,t){this.expectOptionalToken(e);let i=[];do i.push(t.call(this));while(this.expectOptionalToken(e));return i}advanceLexer(){let{maxTokens:e}=this._options,t=this._lexer.advance();if(e!==void 0&&t.kind!==G.EOF&&(++this._tokenCounter,this._tokenCounter>e))throw tr(this._lexer.source,t.start,`Document contains more that ${e} tokens. Parsing aborted.`)}};function Fd(r){let e=r.value;return jE(r.kind)+(e!=null?` "${e}"`:"")}function jE(r){return FE(r)?`"${r}"`:r}function zE(r){return`"${r.replace(UO,VO)}"`}var UO=/[\x00-\x1f\x22\x5c\x7f-\x9f]/g;function VO(r){return qO[r.charCodeAt(0)]}var qO=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000B","\\f","\\r","\\u000E","\\u000F","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001A","\\u001B","\\u001C","\\u001D","\\u001E","\\u001F","","",'\\"',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\u007F","\\u0080","\\u0081","\\u0082","\\u0083","\\u0084","\\u0085","\\u0086","\\u0087","\\u0088","\\u0089","\\u008A","\\u008B","\\u008C","\\u008D","\\u008E","\\u008F","\\u0090","\\u0091","\\u0092","\\u0093","\\u0094","\\u0095","\\u0096","\\u0097","\\u0098","\\u0099","\\u009A","\\u009B","\\u009C","\\u009D","\\u009E","\\u009F"];var Hs=Object.freeze({});function yr(r,e,t=_x){let i=new Map;for(let _ of Object.values(de))i.set(_,Nx(e,_));let n,o=Array.isArray(r),s=[r],a=-1,l=[],f=r,c,u,d=[],p=[];do{a++;let _=a===s.length,P=_&&l.length!==0;if(_){if(c=p.length===0?void 0:d[d.length-1],f=u,u=p.pop(),P)if(o){f=f.slice();let I=0;for(let[D,B]of l){let V=D-I;B===null?(f.splice(V,1),I++):f[V]=B}}else{f=Object.defineProperties({},Object.getOwnPropertyDescriptors(f));for(let[I,D]of l)f[I]=D}a=n.index,s=n.keys,l=n.edits,o=n.inArray,n=n.prev}else if(u){if(c=o?a:s[a],f=u[c],f==null)continue;d.push(c)}let N;if(!Array.isArray(f)){var g,b;Cx(f)||Al(!1,`Invalid AST Node: ${Dd(f)}.`);let I=_?(g=i.get(f.kind))===null||g===void 0?void 0:g.leave:(b=i.get(f.kind))===null||b===void 0?void 0:b.enter;if(N=I?.call(e,f,c,u,d,p),N===Hs)break;if(N===!1){if(!_){d.pop();continue}}else if(N!==void 0&&(l.push([c,N]),!_))if(Cx(N))f=N;else{d.pop();continue}}if(N===void 0&&P&&l.push([c,f]),_)d.pop();else{var k;n={inArray:o,index:a,keys:s,edits:l,prev:n},o=Array.isArray(f),s=o?f:(k=t[f.kind])!==null&&k!==void 0?k:[],a=-1,l=[],u&&p.push(u),u=f}}while(n!==void 0);return l.length!==0?l[l.length-1][1]:r}function Nx(r,e){let t=r[e];return typeof t=="object"?t:typeof t=="function"?{enter:t,leave:void 0}:{enter:r.enter,leave:r.leave}}function Vd(r){return yr(r,zO)}var jO=80,zO={Name:{leave:r=>r.value},Variable:{leave:r=>"$"+r.name},Document:{leave:r=>fe(r.definitions,`

`)},OperationDefinition:{leave(r){let e=Oe("(",fe(r.variableDefinitions,", "),")"),t=fe([r.operation,fe([r.name,e]),fe(r.directives," ")]," ");return(t==="query"?"":t+" ")+r.selectionSet}},VariableDefinition:{leave:({variable:r,type:e,defaultValue:t,directives:i})=>r+": "+e+Oe(" = ",t)+Oe(" ",fe(i," "))},SelectionSet:{leave:({selections:r})=>Xi(r)},Field:{leave({alias:r,name:e,arguments:t,directives:i,selectionSet:n}){let o=Oe("",r,": ")+e,s=o+Oe("(",fe(t,", "),")");return s.length>jO&&(s=o+Oe(`(
`,Ud(fe(t,`
`)),`
)`)),fe([s,fe(i," "),n]," ")}},Argument:{leave:({name:r,value:e})=>r+": "+e},FragmentSpread:{leave:({name:r,directives:e})=>"..."+r+Oe(" ",fe(e," "))},InlineFragment:{leave:({typeCondition:r,directives:e,selectionSet:t})=>fe(["...",Oe("on ",r),fe(e," "),t]," ")},FragmentDefinition:{leave:({name:r,typeCondition:e,variableDefinitions:t,directives:i,selectionSet:n})=>`fragment ${r}${Oe("(",fe(t,", "),")")} on ${e} ${Oe("",fe(i," ")," ")}`+n},IntValue:{leave:({value:r})=>r},FloatValue:{leave:({value:r})=>r},StringValue:{leave:({value:r,block:e})=>e?DE(r):zE(r)},BooleanValue:{leave:({value:r})=>r?"true":"false"},NullValue:{leave:()=>"null"},EnumValue:{leave:({value:r})=>r},ListValue:{leave:({values:r})=>"["+fe(r,", ")+"]"},ObjectValue:{leave:({fields:r})=>"{"+fe(r,", ")+"}"},ObjectField:{leave:({name:r,value:e})=>r+": "+e},Directive:{leave:({name:r,arguments:e})=>"@"+r+Oe("(",fe(e,", "),")")},NamedType:{leave:({name:r})=>r},ListType:{leave:({type:r})=>"["+r+"]"},NonNullType:{leave:({type:r})=>r+"!"},SchemaDefinition:{leave:({description:r,directives:e,operationTypes:t})=>Oe("",r,`
`)+fe(["schema",fe(e," "),Xi(t)]," ")},OperationTypeDefinition:{leave:({operation:r,type:e})=>r+": "+e},ScalarTypeDefinition:{leave:({description:r,name:e,directives:t})=>Oe("",r,`
`)+fe(["scalar",e,fe(t," ")]," ")},ObjectTypeDefinition:{leave:({description:r,name:e,interfaces:t,directives:i,fields:n})=>Oe("",r,`
`)+fe(["type",e,Oe("implements ",fe(t," & ")),fe(i," "),Xi(n)]," ")},FieldDefinition:{leave:({description:r,name:e,arguments:t,type:i,directives:n})=>Oe("",r,`
`)+e+(HE(t)?Oe(`(
`,Ud(fe(t,`
`)),`
)`):Oe("(",fe(t,", "),")"))+": "+i+Oe(" ",fe(n," "))},InputValueDefinition:{leave:({description:r,name:e,type:t,defaultValue:i,directives:n})=>Oe("",r,`
`)+fe([e+": "+t,Oe("= ",i),fe(n," ")]," ")},InterfaceTypeDefinition:{leave:({description:r,name:e,interfaces:t,directives:i,fields:n})=>Oe("",r,`
`)+fe(["interface",e,Oe("implements ",fe(t," & ")),fe(i," "),Xi(n)]," ")},UnionTypeDefinition:{leave:({description:r,name:e,directives:t,types:i})=>Oe("",r,`
`)+fe(["union",e,fe(t," "),Oe("= ",fe(i," | "))]," ")},EnumTypeDefinition:{leave:({description:r,name:e,directives:t,values:i})=>Oe("",r,`
`)+fe(["enum",e,fe(t," "),Xi(i)]," ")},EnumValueDefinition:{leave:({description:r,name:e,directives:t})=>Oe("",r,`
`)+fe([e,fe(t," ")]," ")},InputObjectTypeDefinition:{leave:({description:r,name:e,directives:t,fields:i})=>Oe("",r,`
`)+fe(["input",e,fe(t," "),Xi(i)]," ")},DirectiveDefinition:{leave:({description:r,name:e,arguments:t,repeatable:i,locations:n})=>Oe("",r,`
`)+"directive @"+e+(HE(t)?Oe(`(
`,Ud(fe(t,`
`)),`
)`):Oe("(",fe(t,", "),")"))+(i?" repeatable":"")+" on "+fe(n," | ")},SchemaExtension:{leave:({directives:r,operationTypes:e})=>fe(["extend schema",fe(r," "),Xi(e)]," ")},ScalarTypeExtension:{leave:({name:r,directives:e})=>fe(["extend scalar",r,fe(e," ")]," ")},ObjectTypeExtension:{leave:({name:r,interfaces:e,directives:t,fields:i})=>fe(["extend type",r,Oe("implements ",fe(e," & ")),fe(t," "),Xi(i)]," ")},InterfaceTypeExtension:{leave:({name:r,interfaces:e,directives:t,fields:i})=>fe(["extend interface",r,Oe("implements ",fe(e," & ")),fe(t," "),Xi(i)]," ")},UnionTypeExtension:{leave:({name:r,directives:e,types:t})=>fe(["extend union",r,fe(e," "),Oe("= ",fe(t," | "))]," ")},EnumTypeExtension:{leave:({name:r,directives:e,values:t})=>fe(["extend enum",r,fe(e," "),Xi(t)]," ")},InputObjectTypeExtension:{leave:({name:r,directives:e,fields:t})=>fe(["extend input",r,fe(e," "),Xi(t)]," ")}};function fe(r,e=""){var t;return(t=r?.filter(i=>i).join(e))!==null&&t!==void 0?t:""}function Xi(r){return Oe(`{
`,Ud(fe(r,`
`)),`
}`)}function Oe(r,e,t=""){return e!=null&&e!==""?r+e+t:""}function Ud(r){return Oe("  ",r.replace(/\n/g,`
  `))}function HE(r){var e;return(e=r?.some(t=>t.includes(`
`)))!==null&&e!==void 0?e:!1}function WE(){return typeof io=="function"?kx():kx()}function JO(){__DEV__?X(typeof js=="boolean",js):X(typeof js=="boolean",38)}WE();JO();function no(r,e){var t=r.directives;return!t||!t.length?!0:GE(t).every(function(i){var n=i.directive,o=i.ifArgument,s=!1;return o.value.kind==="Variable"?(s=e&&e[o.value.name.value],__DEV__?X(s!==void 0,"Invalid variable referenced in @".concat(n.name.value," directive.")):X(s!==void 0,39)):s=o.value.value,n.name.value==="skip"?!s:s})}function Tl(r,e,t){var i=new Set(r),n=i.size;return yr(e,{Directive:function(o){if(i.delete(o.name.value)&&(!t||!i.size))return Hs}}),t?!i.size:i.size<n}function Px(r){return r&&Tl(["client","export"],r,!0)}function YO(r){var e=r.name.value;return e==="skip"||e==="include"}function GE(r){var e=[];return r&&r.length&&r.forEach(function(t){if(!!YO(t)){var i=t.arguments,n=t.name.value;__DEV__?X(i&&i.length===1,"Incorrect number of arguments for the @".concat(n," directive.")):X(i&&i.length===1,40);var o=i[0];__DEV__?X(o.name&&o.name.value==="if","Invalid argument for the @".concat(n," directive.")):X(o.name&&o.name.value==="if",41);var s=o.value;__DEV__?X(s&&(s.kind==="Variable"||s.kind==="BooleanValue"),"Argument for the @".concat(n," directive must be a variable or a boolean value.")):X(s&&(s.kind==="Variable"||s.kind==="BooleanValue"),42),e.push({directive:t,ifArgument:o})}}),e}function Ix(r,e){var t=e,i=[];r.definitions.forEach(function(o){if(o.kind==="OperationDefinition")throw __DEV__?new xe("Found a ".concat(o.operation," operation").concat(o.name?" named '".concat(o.name.value,"'"):"",". ")+"No operations are allowed when using a fragment as a query. Only fragments are allowed."):new xe(43);o.kind==="FragmentDefinition"&&i.push(o)}),typeof t>"u"&&(__DEV__?X(i.length===1,"Found ".concat(i.length," fragments. `fragmentName` must be provided when there is not exactly 1 fragment.")):X(i.length===1,44),t=i[0].name.value);var n=U(U({},r),{definitions:Vo([{kind:"OperationDefinition",operation:"query",selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:t}}]}}],r.definitions,!0)});return n}function Ws(r){r===void 0&&(r=[]);var e={};return r.forEach(function(t){e[t.name.value]=t}),e}function Gs(r,e){switch(r.kind){case"InlineFragment":return r;case"FragmentSpread":{var t=r.name.value;if(typeof e=="function")return e(t);var i=e&&e[t];return __DEV__?X(i,"No fragment named ".concat(t)):X(i,45),i||null}default:return null}}function Le(r){return r!==null&&typeof r=="object"}function On(r){return{__ref:String(r)}}function Ne(r){return Boolean(r&&typeof r=="object"&&typeof r.__ref=="string")}function Rx(r){return Le(r)&&r.kind==="Document"&&Array.isArray(r.definitions)}function XO(r){return r.kind==="StringValue"}function $O(r){return r.kind==="BooleanValue"}function ZO(r){return r.kind==="IntValue"}function eN(r){return r.kind==="FloatValue"}function tN(r){return r.kind==="Variable"}function rN(r){return r.kind==="ObjectValue"}function iN(r){return r.kind==="ListValue"}function nN(r){return r.kind==="EnumValue"}function oN(r){return r.kind==="NullValue"}function zo(r,e,t,i){if(ZO(t)||eN(t))r[e.value]=Number(t.value);else if($O(t)||XO(t))r[e.value]=t.value;else if(rN(t)){var n={};t.fields.map(function(s){return zo(n,s.name,s.value,i)}),r[e.value]=n}else if(tN(t)){var o=(i||{})[t.name.value];r[e.value]=o}else if(iN(t))r[e.value]=t.values.map(function(s){var a={};return zo(a,e,s,i),a[e.value]});else if(nN(t))r[e.value]=t.value;else if(oN(t))r[e.value]=null;else throw __DEV__?new xe('The inline argument "'.concat(e.value,'" of kind "').concat(t.kind,'"')+"is not supported. Use variables instead of inline arguments to overcome this limitation."):new xe(54)}function Dx(r,e){var t=null;r.directives&&(t={},r.directives.forEach(function(n){t[n.name.value]={},n.arguments&&n.arguments.forEach(function(o){var s=o.name,a=o.value;return zo(t[n.name.value],s,a,e)})}));var i=null;return r.arguments&&r.arguments.length&&(i={},r.arguments.forEach(function(n){var o=n.name,s=n.value;return zo(i,o,s,e)})),kc(r.name.value,i,t)}var sN=["connection","include","skip","client","rest","export"],kc=Object.assign(function(r,e,t){if(e&&t&&t.connection&&t.connection.key)if(t.connection.filter&&t.connection.filter.length>0){var i=t.connection.filter?t.connection.filter:[];i.sort();var n={};return i.forEach(function(a){n[a]=e[a]}),"".concat(t.connection.key,"(").concat(Ec(n),")")}else return t.connection.key;var o=r;if(e){var s=Ec(e);o+="(".concat(s,")")}return t&&Object.keys(t).forEach(function(a){sN.indexOf(a)===-1&&(t[a]&&Object.keys(t[a]).length?o+="@".concat(a,"(").concat(Ec(t[a]),")"):o+="@".concat(a))}),o},{setStringify:function(r){var e=Ec;return Ec=r,e}}),Ec=function(e){return JSON.stringify(e,aN)};function aN(r,e){return Le(e)&&!Array.isArray(e)&&(e=Object.keys(e).sort().reduce(function(t,i){return t[i]=e[i],t},{})),e}function oo(r,e){if(r.arguments&&r.arguments.length){var t={};return r.arguments.forEach(function(i){var n=i.name,o=i.value;return zo(t,n,o,e)}),t}return null}function Ni(r){return r.alias?r.alias.value:r.name.value}function Sc(r,e,t){if(typeof r.__typename=="string")return r.__typename;for(var i=0,n=e.selections;i<n.length;i++){var o=n[i];if(qr(o)){if(o.name.value==="__typename")return r[Ni(o)]}else{var s=Sc(r,Gs(o,t).selectionSet,t);if(typeof s=="string")return s}}}function qr(r){return r.kind==="Field"}function _c(r){return r.kind==="InlineFragment"}function Ml(r){__DEV__?X(r&&r.kind==="Document",'Expecting a parsed GraphQL document. Perhaps you need to wrap the query string in a "gql" tag? http://docs.apollostack.com/apollo-client/core.html#gql'):X(r&&r.kind==="Document",46);var e=r.definitions.filter(function(t){return t.kind!=="FragmentDefinition"}).map(function(t){if(t.kind!=="OperationDefinition")throw __DEV__?new xe('Schema type definitions not allowed in queries. Found: "'.concat(t.kind,'"')):new xe(47);return t});return __DEV__?X(e.length<=1,"Ambiguous GraphQL document: contains ".concat(e.length," operations")):X(e.length<=1,48),r}function Nn(r){return Ml(r),r.definitions.filter(function(e){return e.kind==="OperationDefinition"})[0]}function Ol(r){return r.definitions.filter(function(e){return e.kind==="OperationDefinition"&&e.name}).map(function(e){return e.name.value})[0]||null}function Ks(r){return r.definitions.filter(function(e){return e.kind==="FragmentDefinition"})}function Cc(r){var e=Nn(r);return __DEV__?X(e&&e.operation==="query","Must contain a query definition."):X(e&&e.operation==="query",49),e}function Bx(r){__DEV__?X(r.kind==="Document",'Expecting a parsed GraphQL document. Perhaps you need to wrap the query string in a "gql" tag? http://docs.apollostack.com/apollo-client/core.html#gql'):X(r.kind==="Document",50),__DEV__?X(r.definitions.length<=1,"Fragment must have exactly one definition."):X(r.definitions.length<=1,51);var e=r.definitions[0];return __DEV__?X(e.kind==="FragmentDefinition","Must be a fragment definition."):X(e.kind==="FragmentDefinition",52),e}function Qs(r){Ml(r);for(var e,t=0,i=r.definitions;t<i.length;t++){var n=i[t];if(n.kind==="OperationDefinition"){var o=n.operation;if(o==="query"||o==="mutation"||o==="subscription")return n}n.kind==="FragmentDefinition"&&!e&&(e=n)}if(e)return e;throw __DEV__?new xe("Expected a parsed GraphQL query with a query, mutation, subscription, or a fragment."):new xe(53)}function Js(r){var e=Object.create(null),t=r&&r.variableDefinitions;return t&&t.length&&t.forEach(function(i){i.defaultValue&&zo(e,i.variable.name,i.defaultValue)}),e}function Fx(r,e,t){var i=0;return r.forEach(function(n,o){e.call(this,n,o,r)&&(r[i++]=n)},t),r.length=i,r}var KE={kind:"Field",name:{kind:"Name",value:"__typename"}};function JE(r,e){return!r||r.selectionSet.selections.every(function(t){return t.kind==="FragmentSpread"&&JE(e[t.name.value],e)})}function Lx(r){return JE(Nn(r)||Bx(r),Ws(Ks(r)))?null:r}function QE(r){return function(t){return r.some(function(i){return i.name&&i.name===t.name.value||i.test&&i.test(t)})}}function Ux(r,e){var t=Object.create(null),i=[],n=Object.create(null),o=[],s=Lx(yr(e,{Variable:{enter:function(a,l,f){f.kind!=="VariableDefinition"&&(t[a.name.value]=!0)}},Field:{enter:function(a){if(r&&a.directives){var l=r.some(function(f){return f.remove});if(l&&a.directives&&a.directives.some(QE(r)))return a.arguments&&a.arguments.forEach(function(f){f.value.kind==="Variable"&&i.push({name:f.value.name.value})}),a.selectionSet&&$E(a.selectionSet).forEach(function(f){o.push({name:f.name.value})}),null}}},FragmentSpread:{enter:function(a){n[a.name.value]=!0}},Directive:{enter:function(a){if(QE(r)(a))return null}}}));return s&&Fx(i,function(a){return!!a.name&&!t[a.name]}).length&&(s=YE(i,s)),s&&Fx(o,function(a){return!!a.name&&!n[a.name]}).length&&(s=XE(o,s)),s}var Ys=Object.assign(function(r){return yr(r,{SelectionSet:{enter:function(e,t,i){if(!(i&&i.kind==="OperationDefinition")){var n=e.selections;if(!!n){var o=n.some(function(a){return qr(a)&&(a.name.value==="__typename"||a.name.value.lastIndexOf("__",0)===0)});if(!o){var s=i;if(!(qr(s)&&s.directives&&s.directives.some(function(a){return a.name.value==="export"})))return U(U({},e),{selections:Vo(Vo([],n,!0),[KE],!1)})}}}}}})},{added:function(r){return r===KE}}),lN={test:function(r){var e=r.name.value==="connection";return e&&(!r.arguments||!r.arguments.some(function(t){return t.name.value==="key"}))&&__DEV__&&X.warn("Removing an @connection directive even though it does not have a key. You may want to use the key parameter to specify a store key."),e}};function Vx(r){return Ux([lN],Ml(r))}function fN(r){return function(t){return r.some(function(i){return t.value&&t.value.kind==="Variable"&&t.value.name&&(i.name===t.value.name.value||i.test&&i.test(t))})}}function YE(r,e){var t=fN(r);return Lx(yr(e,{OperationDefinition:{enter:function(i){return U(U({},i),{variableDefinitions:i.variableDefinitions?i.variableDefinitions.filter(function(n){return!r.some(function(o){return o.name===n.variable.name.value})}):[]})}},Field:{enter:function(i){var n=r.some(function(s){return s.remove});if(n){var o=0;if(i.arguments&&i.arguments.forEach(function(s){t(s)&&(o+=1)}),o===1)return null}}},Argument:{enter:function(i){if(t(i))return null}}}))}function XE(r,e){function t(i){if(r.some(function(n){return n.name===i.name.value}))return null}return Lx(yr(e,{FragmentSpread:{enter:t},FragmentDefinition:{enter:t}}))}function $E(r){var e=[];return r.selections.forEach(function(t){(qr(t)||_c(t))&&t.selectionSet?$E(t.selectionSet).forEach(function(i){return e.push(i)}):t.kind==="FragmentSpread"&&e.push(t)}),e}function qx(r){var e=Qs(r),t=e.operation;if(t==="query")return r;var i=yr(r,{OperationDefinition:{enter:function(n){return U(U({},n),{operation:"query"})}}});return i}function jx(r){Ml(r);var e=Ux([{test:function(t){return t.name.value==="client"},remove:!0}],r);return e&&(e=yr(e,{FragmentDefinition:{enter:function(t){if(t.selectionSet){var i=t.selectionSet.selections.every(function(n){return qr(n)&&n.name.value==="__typename"});if(i)return null}}}})),e}var cN=Object.prototype.hasOwnProperty;function zx(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return Tc(r)}function Tc(r){var e=r[0]||{},t=r.length;if(t>1)for(var i=new Pi,n=1;n<t;++n)e=i.merge(e,r[n]);return e}var uN=function(r,e,t){return this.merge(r[t],e[t])},Pi=function(){function r(e){e===void 0&&(e=uN),this.reconciler=e,this.isObject=Le,this.pastCopies=new Set}return r.prototype.merge=function(e,t){for(var i=this,n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];return Le(t)&&Le(e)?(Object.keys(t).forEach(function(s){if(cN.call(e,s)){var a=e[s];if(t[s]!==a){var l=i.reconciler.apply(i,Vo([e,t,s],n,!1));l!==a&&(e=i.shallowCopyForMerge(e),e[s]=l)}}else e=i.shallowCopyForMerge(e),e[s]=t[s]}),e):t},r.prototype.shallowCopyForMerge=function(e){return Le(e)&&(this.pastCopies.has(e)||(Array.isArray(e)?e=e.slice(0):e=U({__proto__:Object.getPrototypeOf(e)},e),this.pastCopies.add(e))),e},r}();function hN(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t)return(t=t.call(r)).next.bind(t);if(Array.isArray(r)||(t=dN(r))||e&&r&&typeof r.length=="number"){t&&(r=t);var i=0;return function(){return i>=r.length?{done:!0}:{done:!1,value:r[i++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dN(r,e){if(!!r){if(typeof r=="string")return ZE(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ZE(r,e)}}function ZE(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=r[t];return i}function e4(r,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,i.key,i)}}function Kx(r,e,t){return e&&e4(r.prototype,e),t&&e4(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}var Qx=function(){return typeof Symbol=="function"},Jx=function(r){return Qx()&&Boolean(Symbol[r])},Yx=function(r){return Jx(r)?Symbol[r]:"@@"+r};Qx()&&!Jx("observable")&&(Symbol.observable=Symbol("observable"));var pN=Yx("iterator"),Wx=Yx("observable"),t4=Yx("species");function jd(r,e){var t=r[e];if(t!=null){if(typeof t!="function")throw new TypeError(t+" is not a function");return t}}function Mc(r){var e=r.constructor;return e!==void 0&&(e=e[t4],e===null&&(e=void 0)),e!==void 0?e:De}function mN(r){return r instanceof De}function Nl(r){Nl.log?Nl.log(r):setTimeout(function(){throw r})}function qd(r){Promise.resolve().then(function(){try{r()}catch(e){Nl(e)}})}function r4(r){var e=r._cleanup;if(e!==void 0&&(r._cleanup=void 0,!!e))try{if(typeof e=="function")e();else{var t=jd(e,"unsubscribe");t&&t.call(e)}}catch(i){Nl(i)}}function Gx(r){r._observer=void 0,r._queue=void 0,r._state="closed"}function gN(r){var e=r._queue;if(!!e){r._queue=void 0,r._state="ready";for(var t=0;t<e.length&&(i4(r,e[t].type,e[t].value),r._state!=="closed");++t);}}function i4(r,e,t){r._state="running";var i=r._observer;try{var n=jd(i,e);switch(e){case"next":n&&n.call(i,t);break;case"error":if(Gx(r),n)n.call(i,t);else throw t;break;case"complete":Gx(r),n&&n.call(i);break}}catch(o){Nl(o)}r._state==="closed"?r4(r):r._state==="running"&&(r._state="ready")}function Hx(r,e,t){if(r._state!=="closed"){if(r._state==="buffering"){r._queue.push({type:e,value:t});return}if(r._state!=="ready"){r._state="buffering",r._queue=[{type:e,value:t}],qd(function(){return gN(r)});return}i4(r,e,t)}}var xN=function(){function r(t,i){this._cleanup=void 0,this._observer=t,this._queue=void 0,this._state="initializing";var n=new bN(this);try{this._cleanup=i.call(void 0,n)}catch(o){n.error(o)}this._state==="initializing"&&(this._state="ready")}var e=r.prototype;return e.unsubscribe=function(){this._state!=="closed"&&(Gx(this),r4(this))},Kx(r,[{key:"closed",get:function(){return this._state==="closed"}}]),r}(),bN=function(){function r(t){this._subscription=t}var e=r.prototype;return e.next=function(i){Hx(this._subscription,"next",i)},e.error=function(i){Hx(this._subscription,"error",i)},e.complete=function(){Hx(this._subscription,"complete")},Kx(r,[{key:"closed",get:function(){return this._subscription._state==="closed"}}]),r}(),De=function(){function r(t){if(!(this instanceof r))throw new TypeError("Observable cannot be called as a function");if(typeof t!="function")throw new TypeError("Observable initializer must be a function");this._subscriber=t}var e=r.prototype;return e.subscribe=function(i){return(typeof i!="object"||i===null)&&(i={next:i,error:arguments[1],complete:arguments[2]}),new xN(i,this._subscriber)},e.forEach=function(i){var n=this;return new Promise(function(o,s){if(typeof i!="function"){s(new TypeError(i+" is not a function"));return}function a(){l.unsubscribe(),o()}var l=n.subscribe({next:function(f){try{i(f,a)}catch(c){s(c),l.unsubscribe()}},error:s,complete:o})})},e.map=function(i){var n=this;if(typeof i!="function")throw new TypeError(i+" is not a function");var o=Mc(this);return new o(function(s){return n.subscribe({next:function(a){try{a=i(a)}catch(l){return s.error(l)}s.next(a)},error:function(a){s.error(a)},complete:function(){s.complete()}})})},e.filter=function(i){var n=this;if(typeof i!="function")throw new TypeError(i+" is not a function");var o=Mc(this);return new o(function(s){return n.subscribe({next:function(a){try{if(!i(a))return}catch(l){return s.error(l)}s.next(a)},error:function(a){s.error(a)},complete:function(){s.complete()}})})},e.reduce=function(i){var n=this;if(typeof i!="function")throw new TypeError(i+" is not a function");var o=Mc(this),s=arguments.length>1,a=!1,l=arguments[1],f=l;return new o(function(c){return n.subscribe({next:function(u){var d=!a;if(a=!0,!d||s)try{f=i(f,u)}catch(p){return c.error(p)}else f=u},error:function(u){c.error(u)},complete:function(){if(!a&&!s)return c.error(new TypeError("Cannot reduce an empty sequence"));c.next(f),c.complete()}})})},e.concat=function(){for(var i=this,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];var a=Mc(this);return new a(function(l){var f,c=0;function u(d){f=d.subscribe({next:function(p){l.next(p)},error:function(p){l.error(p)},complete:function(){c===o.length?(f=void 0,l.complete()):u(a.from(o[c++]))}})}return u(i),function(){f&&(f.unsubscribe(),f=void 0)}})},e.flatMap=function(i){var n=this;if(typeof i!="function")throw new TypeError(i+" is not a function");var o=Mc(this);return new o(function(s){var a=[],l=n.subscribe({next:function(c){if(i)try{c=i(c)}catch(d){return s.error(d)}var u=o.from(c).subscribe({next:function(d){s.next(d)},error:function(d){s.error(d)},complete:function(){var d=a.indexOf(u);d>=0&&a.splice(d,1),f()}});a.push(u)},error:function(c){s.error(c)},complete:function(){f()}});function f(){l.closed&&a.length===0&&s.complete()}return function(){a.forEach(function(c){return c.unsubscribe()}),l.unsubscribe()}})},e[Wx]=function(){return this},r.from=function(i){var n=typeof this=="function"?this:r;if(i==null)throw new TypeError(i+" is not an object");var o=jd(i,Wx);if(o){var s=o.call(i);if(Object(s)!==s)throw new TypeError(s+" is not an object");return mN(s)&&s.constructor===n?s:new n(function(a){return s.subscribe(a)})}if(Jx("iterator")&&(o=jd(i,pN),o))return new n(function(a){qd(function(){if(!a.closed){for(var l=hN(o.call(i)),f;!(f=l()).done;){var c=f.value;if(a.next(c),a.closed)return}a.complete()}})});if(Array.isArray(i))return new n(function(a){qd(function(){if(!a.closed){for(var l=0;l<i.length;++l)if(a.next(i[l]),a.closed)return;a.complete()}})});throw new TypeError(i+" is not observable")},r.of=function(){for(var i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];var s=typeof this=="function"?this:r;return new s(function(a){qd(function(){if(!a.closed){for(var l=0;l<n.length;++l)if(a.next(n[l]),a.closed)return;a.complete()}})})},Kx(r,null,[{key:t4,get:function(){return this}}]),r}();Qx()&&Object.defineProperty(De,Symbol("extensions"),{value:{symbol:Wx,hostReportError:Nl},configurable:!0});function Xx(r){var e,t=r.Symbol;if(typeof t=="function")if(t.observable)e=t.observable;else{typeof t.for=="function"?e=t.for("https://github.com/benlesh/symbol-observable"):e=t("https://github.com/benlesh/symbol-observable");try{t.observable=e}catch{}}else e="@@observable";return e}var Pl;typeof self<"u"?Pl=self:typeof window<"u"?Pl=window:typeof global<"u"?Pl=global:typeof module<"u"?Pl=module:Pl=Function("return this")();var cG=Xx(Pl);var n4=De.prototype,o4="@@observable";n4[o4]||(n4[o4]=function(){return this});var yN=Object.prototype.toString;function Il(r){return $x(r)}function $x(r,e){switch(yN.call(r)){case"[object Array]":{if(e=e||new Map,e.has(r))return e.get(r);var t=r.slice(0);return e.set(r,t),t.forEach(function(n,o){t[o]=$x(n,e)}),t}case"[object Object]":{if(e=e||new Map,e.has(r))return e.get(r);var i=Object.create(Object.getPrototypeOf(r));return e.set(r,i),Object.keys(r).forEach(function(n){i[n]=$x(r[n],e)}),i}default:return r}}function vN(r){var e=new Set([r]);return e.forEach(function(t){Le(t)&&wN(t)===t&&Object.getOwnPropertyNames(t).forEach(function(i){Le(t[i])&&e.add(t[i])})}),r}function wN(r){if(__DEV__&&!Object.isFrozen(r))try{Object.freeze(r)}catch(e){if(e instanceof TypeError)return null;throw e}return r}function Oc(r){return __DEV__&&vN(r),r}function Xs(r,e,t){var i=[];r.forEach(function(n){return n[e]&&i.push(n)}),i.forEach(function(n){return n[e](t)})}function zd(r,e,t){return new De(function(i){var n=i.next,o=i.error,s=i.complete,a=0,l=!1,f={then:function(p){return new Promise(function(g){return g(p())})}};function c(p,g){return p?function(b){++a;var k=function(){return p(b)};f=f.then(k,k).then(function(_){--a,n&&n.call(i,_),l&&u.complete()},function(_){throw--a,_}).catch(function(_){o&&o.call(i,_)})}:function(b){return g&&g.call(i,b)}}var u={next:c(e,n),error:c(t,o),complete:function(){l=!0,a||s&&s.call(i)}},d=r.subscribe(u);return function(){return d.unsubscribe()}})}var Ii=typeof WeakMap=="function"&&ur(function(){return navigator.product})!=="ReactNative",s4=typeof WeakSet=="function",Zx=typeof Symbol=="function"&&typeof Symbol.for=="function",Ho=Zx&&Symbol.asyncIterator,EG=typeof ur(function(){return window.document.createElement})=="function",kG=ur(function(){return navigator.userAgent.indexOf("jsdom")>=0})||!1;function Hd(r){function e(t){Object.defineProperty(r,t,{value:De})}return Zx&&Symbol.species&&e(Symbol.species),e("@@species"),r}function a4(r){return r&&typeof r.then=="function"}var Rl=function(r){er(e,r);function e(t){var i=r.call(this,function(n){return i.addObserver(n),function(){return i.removeObserver(n)}})||this;return i.observers=new Set,i.promise=new Promise(function(n,o){i.resolve=n,i.reject=o}),i.handlers={next:function(n){i.sub!==null&&(i.latest=["next",n],i.notify("next",n),Xs(i.observers,"next",n))},error:function(n){var o=i.sub;o!==null&&(o&&setTimeout(function(){return o.unsubscribe()}),i.sub=null,i.latest=["error",n],i.reject(n),i.notify("error",n),Xs(i.observers,"error",n))},complete:function(){var n=i.sub;if(n!==null){var o=i.sources.shift();o?a4(o)?o.then(function(s){return i.sub=s.subscribe(i.handlers)}):i.sub=o.subscribe(i.handlers):(n&&setTimeout(function(){return n.unsubscribe()}),i.sub=null,i.latest&&i.latest[0]==="next"?i.resolve(i.latest[1]):i.resolve(),i.notify("complete"),Xs(i.observers,"complete"))}}},i.nextResultListeners=new Set,i.cancel=function(n){i.reject(n),i.sources=[],i.handlers.complete()},i.promise.catch(function(n){}),typeof t=="function"&&(t=[new De(t)]),a4(t)?t.then(function(n){return i.start(n)},i.handlers.error):i.start(t),i}return e.prototype.start=function(t){this.sub===void 0&&(this.sources=Array.from(t),this.handlers.complete())},e.prototype.deliverLastMessage=function(t){if(this.latest){var i=this.latest[0],n=t[i];n&&n.call(t,this.latest[1]),this.sub===null&&i==="next"&&t.complete&&t.complete()}},e.prototype.addObserver=function(t){this.observers.has(t)||(this.deliverLastMessage(t),this.observers.add(t))},e.prototype.removeObserver=function(t){this.observers.delete(t)&&this.observers.size<1&&this.handlers.complete()},e.prototype.notify=function(t,i){var n=this.nextResultListeners;n.size&&(this.nextResultListeners=new Set,n.forEach(function(o){return o(t,i)}))},e.prototype.beforeNext=function(t){var i=!1;this.nextResultListeners.add(function(n,o){i||(i=!0,t(n,o))})},e}(De);Hd(Rl);function Dr(r){return Array.isArray(r)&&r.length>0}function Dl(r){return r.errors&&r.errors.length>0||!1}function Wo(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=Object.create(null);return r.forEach(function(i){!i||Object.keys(i).forEach(function(n){var o=i[n];o!==void 0&&(t[n]=o)})}),t}var l4=new Map;function Nc(r){var e=l4.get(r)||1;return l4.set(r,e+1),"".concat(r,":").concat(e,":").concat(Math.random().toString(36).slice(2))}function f4(r){var e=Nc("stringifyForDisplay");return JSON.stringify(r,function(t,i){return i===void 0?e:i}).split(JSON.stringify(e)).join("<undefined>")}function Pc(r,e){return Wo(r,e,e.variables&&{variables:U(U({},r&&r.variables),e.variables)})}function Wd(r){return new De(function(e){e.error(r)})}var Ic=function(r,e,t){var i=new Error(t);throw i.name="ServerError",i.response=r,i.statusCode=r.status,i.result=e,i};function eb(r){for(var e=["query","operationName","variables","extensions","context"],t=0,i=Object.keys(r);t<i.length;t++){var n=i[t];if(e.indexOf(n)<0)throw __DEV__?new xe("illegal argument: ".concat(n)):new xe(26)}return r}function tb(r,e){var t=U({},r),i=function(o){typeof o=="function"?t=U(U({},t),o(t)):t=U(U({},t),o)},n=function(){return U({},t)};return Object.defineProperty(e,"setContext",{enumerable:!1,value:i}),Object.defineProperty(e,"getContext",{enumerable:!1,value:n}),e}function rb(r){var e={variables:r.variables||{},extensions:r.extensions||{},operationName:r.operationName,query:r.query};return e.operationName||(e.operationName=typeof e.query!="string"?Ol(e.query)||void 0:""),e}function c4(r,e){return e?e(r):De.of()}function Rc(r){return typeof r=="function"?new Pn(r):r}function Gd(r){return r.request.length<=1}var AN=function(r){er(e,r);function e(t,i){var n=r.call(this,t)||this;return n.link=i,n}return e}(Error),Pn=function(){function r(e){e&&(this.request=e)}return r.empty=function(){return new r(function(){return De.of()})},r.from=function(e){return e.length===0?r.empty():e.map(Rc).reduce(function(t,i){return t.concat(i)})},r.split=function(e,t,i){var n=Rc(t),o=Rc(i||new r(c4));return Gd(n)&&Gd(o)?new r(function(s){return e(s)?n.request(s)||De.of():o.request(s)||De.of()}):new r(function(s,a){return e(s)?n.request(s,a)||De.of():o.request(s,a)||De.of()})},r.execute=function(e,t){return e.request(tb(t.context,rb(eb(t))))||De.of()},r.concat=function(e,t){var i=Rc(e);if(Gd(i))return __DEV__&&X.warn(new AN("You are calling concat on a terminating link, which will have no effect",i)),i;var n=Rc(t);return Gd(n)?new r(function(o){return i.request(o,function(s){return n.request(s)||De.of()})||De.of()}):new r(function(o,s){return i.request(o,function(a){return n.request(a,s)||De.of()})||De.of()})},r.prototype.split=function(e,t,i){return this.concat(r.split(e,t,i||new r(c4)))},r.prototype.concat=function(e){return r.concat(this,e)},r.prototype.request=function(e,t){throw __DEV__?new xe("request is not implemented"):new xe(21)},r.prototype.onError=function(e,t){if(t&&t.error)return t.error(e),!1;throw e},r.prototype.setOnError=function(e){return this.onError=e,this},r}();var Bl=Pn.execute;var u4="3.7.1";function h4(r){return!!r.body}function d4(r){return!!r.getReader}function p4(r){return!!(Ho&&r[Symbol.asyncIterator])}function m4(r){return!!r.stream}function g4(r){return!!r.arrayBuffer}function x4(r){return!!r.pipe}function ib(r){var e,t=r[Symbol.asyncIterator]();return e={next:function(){return t.next()}},e[Symbol.asyncIterator]=function(){return this},e}function nb(r){var e=null,t=null,i=!1,n=[],o=[];function s(u){if(!t){if(o.length){var d=o.shift();if(Array.isArray(d)&&d[0])return d[0]({value:u,done:!1})}n.push(u)}}function a(u){t=u;var d=o.slice();d.forEach(function(p){p[1](u)}),!e||e()}function l(){i=!0;var u=o.slice();u.forEach(function(d){d[0]({value:void 0,done:!0})}),!e||e()}e=function(){e=null,r.removeListener("data",s),r.removeListener("error",a),r.removeListener("end",l),r.removeListener("finish",l),r.removeListener("close",l)},r.on("data",s),r.on("error",a),r.on("end",l),r.on("finish",l),r.on("close",l);function f(){return new Promise(function(u,d){if(t)return d(t);if(n.length)return u({value:n.shift(),done:!1});if(i)return u({value:void 0,done:!0});o.push([u,d])})}var c={next:function(){return f()}};return Ho&&(c[Symbol.asyncIterator]=function(){return this}),c}function ob(r){var e=!1,t={next:function(){return e?Promise.resolve({value:void 0,done:!0}):(e=!0,new Promise(function(i,n){r.then(function(o){i({value:o,done:!1})}).catch(n)}))}};return Ho&&(t[Symbol.asyncIterator]=function(){return this}),t}function Kd(r){var e={next:function(){return r.read()}};return Ho&&(e[Symbol.asyncIterator]=function(){return this}),e}function b4(r){var e=r;if(h4(r)&&(e=r.body),p4(e))return ib(e);if(d4(e))return Kd(e.getReader());if(m4(e))return Kd(e.stream().getReader());if(g4(e))return ob(e.arrayBuffer());if(x4(e))return nb(e);throw new Error("Unknown body type for responseIterator. Please pass a streamable response.")}var y4=Object.prototype.hasOwnProperty;function v4(r,e){var t,i,n;return Ji(this,void 0,void 0,function(){var o,s,a,l,f,c,u,d,p,g,b,k,_,P,N,I,D,B,V,W;return Yi(this,function(Y){switch(Y.label){case 0:if(TextDecoder===void 0)throw new Error("TextDecoder must be defined in the environment: please import a polyfill.");o=new TextDecoder("utf-8"),s=(t=r.headers)===null||t===void 0?void 0:t.get("content-type"),a="boundary=",l=s?.includes(a)?s?.substring(s?.indexOf(a)+a.length).replace(/['"]/g,"").replace(/\;(.*)/gm,"").trim():"-",f="--".concat(l),c="",u=b4(r),d=!0,Y.label=1;case 1:return d?[4,u.next()]:[3,3];case 2:for(p=Y.sent(),g=p.value,b=p.done,k=typeof g=="string"?g:o.decode(g),d=!b,c+=k,_=c.indexOf(f);_>-1;){if(P=void 0,W=[c.slice(0,_),c.slice(_+f.length)],P=W[0],c=W[1],P.trim()){if(N=P.indexOf(`\r
\r
`),I=EN(P.slice(0,N)),D=I["content-type"],D&&D.toLowerCase().indexOf("application/json")===-1)throw new Error("Unsupported patch content type: application/json is required.");B=P.slice(N);try{V=w4(r,B.replace(`\r
`,"")),(Object.keys(V).length>1||"data"in V||"incremental"in V||"errors"in V)&&((i=e.next)===null||i===void 0||i.call(e,V))}catch($){Qd($,e)}}_=c.indexOf(f)}return[3,1];case 3:return(n=e.complete)===null||n===void 0||n.call(e),[2]}})})}function EN(r){var e={};return r.split(`
`).forEach(function(t){var i=t.indexOf(":");if(i>-1){var n=t.slice(0,i).trim().toLowerCase(),o=t.slice(i+1).trim();e[n]=o}}),e}function w4(r,e){if(r.status>=300){var t=function(){try{return JSON.parse(e)}catch{return e}};Ic(r,t(),"Response not successful: Received status code ".concat(r.status))}try{return JSON.parse(e)}catch(n){var i=n;throw i.name="ServerParseError",i.response=r,i.statusCode=r.status,i.bodyText=e,i}}function Qd(r,e){var t,i;r.name!=="AbortError"&&(r.result&&r.result.errors&&r.result.data&&((t=e.next)===null||t===void 0||t.call(e,r.result)),(i=e.error)===null||i===void 0||i.call(e,r))}function A4(r,e,t){kN(e)(r).then(function(i){var n,o;(n=t.next)===null||n===void 0||n.call(t,i),(o=t.complete)===null||o===void 0||o.call(t)}).catch(function(i){return Qd(i,t)})}function kN(r){return function(e){return e.text().then(function(t){return w4(e,t)}).then(function(t){return e.status>=300&&Ic(e,t,"Response not successful: Received status code ".concat(e.status)),!Array.isArray(t)&&!y4.call(t,"data")&&!y4.call(t,"errors")&&Ic(e,t,"Server response was missing for query '".concat(Array.isArray(r)?r.map(function(i){return i.operationName}):r.operationName,"'.")),t})}}var Dc=function(r,e){var t;try{t=JSON.stringify(r)}catch(n){var i=__DEV__?new xe("Network request failed. ".concat(e," is not serializable: ").concat(n.message)):new xe(23);throw i.parseError=n,i}return t};var SN={includeQuery:!0,includeExtensions:!1,preserveHeaderCase:!1},_N={accept:"*/*","content-type":"application/json"},CN={method:"POST"},E4={http:SN,headers:_N,options:CN},k4=function(r,e){return e(r)};function S4(r,e){for(var t=[],i=2;i<arguments.length;i++)t[i-2]=arguments[i];var n={},o={};t.forEach(function(u){n=U(U(U({},n),u.options),{headers:U(U({},n.headers),u.headers)}),u.credentials&&(n.credentials=u.credentials),o=U(U({},o),u.http)}),n.headers=TN(n.headers,o.preserveHeaderCase);var s=r.operationName,a=r.extensions,l=r.variables,f=r.query,c={operationName:s,variables:l};return o.includeExtensions&&(c.extensions=a),o.includeQuery&&(c.query=e(f,Vd)),{options:n,body:c}}function TN(r,e){if(!e){var t=Object.create(null);return Object.keys(Object(r)).forEach(function(o){t[o.toLowerCase()]=r[o]}),t}var i=Object.create(null);Object.keys(Object(r)).forEach(function(o){i[o.toLowerCase()]={originalName:o,value:r[o]}});var n=Object.create(null);return Object.keys(i).forEach(function(o){n[i[o].originalName]=i[o].value}),n}var _4=function(r){if(!r&&typeof fetch>"u")throw __DEV__?new xe(`
"fetch" has not been found globally and no fetcher has been configured. To fix this, install a fetch package (like https://www.npmjs.com/package/cross-fetch), instantiate the fetcher, and pass it into your HttpLink constructor. For example:

import fetch from 'cross-fetch';
import { ApolloClient, HttpLink } from '@apollo/client';
const client = new ApolloClient({
  link: new HttpLink({ uri: '/graphql', fetch })
});
    `):new xe(22)};var C4=function(){if(typeof AbortController>"u")return{controller:!1,signal:!1};var r=new AbortController,e=r.signal;return{controller:r,signal:e}};var T4=function(r,e){var t=r.getContext(),i=t.uri;return i||(typeof e=="function"?e(r):e||"/graphql")};function M4(r,e){var t=[],i=function(u,d){t.push("".concat(u,"=").concat(encodeURIComponent(d)))};if("query"in e&&i("query",e.query),e.operationName&&i("operationName",e.operationName),e.variables){var n=void 0;try{n=Dc(e.variables,"Variables map")}catch(u){return{parseError:u}}i("variables",n)}if(e.extensions){var o=void 0;try{o=Dc(e.extensions,"Extensions map")}catch(u){return{parseError:u}}i("extensions",o)}var s="",a=r,l=r.indexOf("#");l!==-1&&(s=r.substr(l),a=r.substr(0,l));var f=a.indexOf("?")===-1?"?":"&",c=a+f+t.join("&")+s;return{newURI:c}}var O4=ur(function(){return fetch}),N4=function(r){r===void 0&&(r={});var e=r.uri,t=e===void 0?"/graphql":e,i=r.fetch,n=r.print,o=n===void 0?k4:n,s=r.includeExtensions,a=r.preserveHeaderCase,l=r.useGETForQueries,f=r.includeUnusedVariables,c=f===void 0?!1:f,u=Mn(r,["uri","fetch","print","includeExtensions","preserveHeaderCase","useGETForQueries","includeUnusedVariables"]);__DEV__&&_4(i||O4);var d={http:{includeExtensions:s,preserveHeaderCase:a},options:u.fetchOptions,credentials:u.credentials,headers:u.headers};return new Pn(function(p){var g=T4(p,t),b=p.getContext(),k={};if(b.clientAwareness){var _=b.clientAwareness,P=_.name,N=_.version;P&&(k["apollographql-client-name"]=P),N&&(k["apollographql-client-version"]=N)}var I=U(U({},k),b.headers),D={http:b.http,options:b.fetchOptions,credentials:b.credentials,headers:I},B=S4(p,o,E4,d,D),V=B.options,W=B.body;if(W.variables&&!c){var Y=new Set(Object.keys(W.variables));yr(p.query,{Variable:function(C,v,T){T&&T.kind!=="VariableDefinition"&&Y.delete(C.name.value)}}),Y.size&&(W.variables=U({},W.variables),Y.forEach(function(C){delete W.variables[C]}))}var $;if(!V.signal){var Z=C4(),ce=Z.controller,M=Z.signal;$=ce,$&&(V.signal=M)}var h=function(C){return C.kind==="OperationDefinition"&&C.operation==="mutation"};if(l&&!p.query.definitions.some(h)&&(V.method="GET"),Tl(["defer"],p.query)&&(V.headers.accept="multipart/mixed; deferSpec=20220824, application/json"),V.method==="GET"){var x=M4(g,W),A=x.newURI,S=x.parseError;if(S)return Wd(S);g=A}else try{V.body=Dc(W,"Payload")}catch(C){return Wd(C)}return new De(function(C){var v=i||ur(function(){return fetch})||O4;return v(g,V).then(function(T){var E;p.setContext({response:T});var m=(E=T.headers)===null||E===void 0?void 0:E.get("content-type");return m!==null&&/^multipart\/mixed/i.test(m)?v4(T,C):A4(T,p,C)}).catch(function(T){return Qd(T,C)}),function(){$&&$.abort()}})})};var sb=function(r){er(e,r);function e(t){t===void 0&&(t={});var i=r.call(this,N4(t).request)||this;return i.options=t,i}return e}(Pn);var B4=Object.prototype,P4=B4.toString,MN=B4.hasOwnProperty,I4=Function.prototype.toString,ab=new Map;function It(r,e){try{return lb(r,e)}finally{ab.clear()}}function lb(r,e){if(r===e)return!0;var t=P4.call(r),i=P4.call(e);if(t!==i)return!1;switch(t){case"[object Array]":if(r.length!==e.length)return!1;case"[object Object]":{if(D4(r,e))return!0;var n=R4(r),o=R4(e),s=n.length;if(s!==o.length)return!1;for(var a=0;a<s;++a)if(!MN.call(e,n[a]))return!1;for(var a=0;a<s;++a){var l=n[a];if(!lb(r[l],e[l]))return!1}return!0}case"[object Error]":return r.name===e.name&&r.message===e.message;case"[object Number]":if(r!==r)return e!==e;case"[object Boolean]":case"[object Date]":return+r==+e;case"[object RegExp]":case"[object String]":return r=="".concat(e);case"[object Map]":case"[object Set]":{if(r.size!==e.size)return!1;if(D4(r,e))return!0;for(var f=r.entries(),c=t==="[object Map]";;){var u=f.next();if(u.done)break;var d=u.value,p=d[0],g=d[1];if(!e.has(p)||c&&!lb(g,e.get(p)))return!1}return!0}case"[object Uint16Array]":case"[object Uint8Array]":case"[object Uint32Array]":case"[object Int32Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object ArrayBuffer]":r=new Uint8Array(r),e=new Uint8Array(e);case"[object DataView]":{var b=r.byteLength;if(b===e.byteLength)for(;b--&&r[b]===e[b];);return b===-1}case"[object AsyncFunction]":case"[object GeneratorFunction]":case"[object AsyncGeneratorFunction]":case"[object Function]":{var k=I4.call(r);return k!==I4.call(e)?!1:!PN(k,NN)}}return!1}function R4(r){return Object.keys(r).filter(ON,r)}function ON(r){return this[r]!==void 0}var NN="{ [native code] }";function PN(r,e){var t=r.length-e.length;return t>=0&&r.indexOf(e,t)===t}function D4(r,e){var t=ab.get(r);if(t){if(t.has(e))return!0}else ab.set(r,t=new Set);return t.add(e),!1}function F4(r){return!!r.incremental}var IN=function(){return Object.create(null)},L4=Array.prototype,RN=L4.forEach,DN=L4.slice,In=function(){function r(e,t){e===void 0&&(e=!0),t===void 0&&(t=IN),this.weakness=e,this.makeData=t}return r.prototype.lookup=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.lookupArray(e)},r.prototype.lookupArray=function(e){var t=this;return RN.call(e,function(i){return t=t.getChildTrie(i)}),t.data||(t.data=this.makeData(DN.call(e)))},r.prototype.getChildTrie=function(e){var t=this.weakness&&BN(e)?this.weak||(this.weak=new WeakMap):this.strong||(this.strong=new Map),i=t.get(e);return i||t.set(e,i=new r(this.weakness,this.makeData)),i},r}();function BN(r){switch(typeof r){case"object":if(r===null)break;case"function":return!0}return!1}var vr=null,U4={},FN=1,LN=function(){return function(){function r(){this.id=["slot",FN++,Date.now(),Math.random().toString(36).slice(2)].join(":")}return r.prototype.hasValue=function(){for(var e=vr;e;e=e.parent)if(this.id in e.slots){var t=e.slots[this.id];if(t===U4)break;return e!==vr&&(vr.slots[this.id]=t),!0}return vr&&(vr.slots[this.id]=U4),!1},r.prototype.getValue=function(){if(this.hasValue())return vr.slots[this.id]},r.prototype.withValue=function(e,t,i,n){var o,s=(o={__proto__:null},o[this.id]=e,o),a=vr;vr={parent:a,slots:s};try{return t.apply(n,i)}finally{vr=a}},r.bind=function(e){var t=vr;return function(){var i=vr;try{return vr=t,e.apply(this,arguments)}finally{vr=i}}},r.noContext=function(e,t,i){if(vr){var n=vr;try{return vr=null,e.apply(i,t)}finally{vr=n}}else return e.apply(i,t)},r}()};function V4(r){try{return r()}catch{}}var fb="@wry/context:Slot",UN=V4(function(){return globalThis})||V4(function(){return global})||Object.create(null),q4=UN,Fl=q4[fb]||Array[fb]||function(r){try{Object.defineProperty(q4,fb,{value:r,enumerable:!1,writable:!1,configurable:!0})}finally{return r}}(LN()),VN=Fl.bind,qN=Fl.noContext;function jN(){}var zN=function(){function r(e,t){e===void 0&&(e=1/0),t===void 0&&(t=jN),this.max=e,this.dispose=t,this.map=new Map,this.newest=null,this.oldest=null}return r.prototype.has=function(e){return this.map.has(e)},r.prototype.get=function(e){var t=this.getNode(e);return t&&t.value},r.prototype.getNode=function(e){var t=this.map.get(e);if(t&&t!==this.newest){var i=t.older,n=t.newer;n&&(n.older=i),i&&(i.newer=n),t.older=this.newest,t.older.newer=t,t.newer=null,this.newest=t,t===this.oldest&&(this.oldest=n)}return t},r.prototype.set=function(e,t){var i=this.getNode(e);return i?i.value=t:(i={key:e,value:t,newer:null,older:this.newest},this.newest&&(this.newest.newer=i),this.newest=i,this.oldest=this.oldest||i,this.map.set(e,i),i.value)},r.prototype.clean=function(){for(;this.oldest&&this.map.size>this.max;)this.delete(this.oldest.key)},r.prototype.delete=function(e){var t=this.map.get(e);return t?(t===this.newest&&(this.newest=t.older),t===this.oldest&&(this.oldest=t.newer),t.newer&&(t.newer.older=t.older),t.older&&(t.older.newer=t.newer),this.map.delete(e),this.dispose(t.value,e),!0):!1},r}(),Yd=new Fl,cb,HN=Object.prototype.hasOwnProperty,hb=(cb=Array.from,cb===void 0?function(r){var e=[];return r.forEach(function(t){return e.push(t)}),e}:cb);function Jd(r){var e=r.unsubscribe;typeof e=="function"&&(r.unsubscribe=void 0,e())}var Bc=[],WN=100;function Ll(r,e){if(!r)throw new Error(e||"assertion failure")}function GN(r,e){var t=r.length;return t>0&&t===e.length&&r[t-1]===e[t-1]}function z4(r){switch(r.length){case 0:throw new Error("unknown value");case 1:return r[0];case 2:throw r[1]}}function KN(r){return r.slice(0)}var QN=function(){function r(e){this.fn=e,this.parents=new Set,this.childValues=new Map,this.dirtyChildren=null,this.dirty=!0,this.recomputing=!1,this.value=[],this.deps=null,++r.count}return r.prototype.peek=function(){if(this.value.length===1&&!Go(this))return j4(this),this.value[0]},r.prototype.recompute=function(e){return Ll(!this.recomputing,"already recomputing"),j4(this),Go(this)?JN(this,e):z4(this.value)},r.prototype.setDirty=function(){this.dirty||(this.dirty=!0,this.value.length=0,H4(this),Jd(this))},r.prototype.dispose=function(){var e=this;this.setDirty(),J4(this),db(this,function(t,i){t.setDirty(),Y4(t,e)})},r.prototype.forget=function(){this.dispose()},r.prototype.dependOn=function(e){e.add(this),this.deps||(this.deps=Bc.pop()||new Set),this.deps.add(e)},r.prototype.forgetDeps=function(){var e=this;this.deps&&(hb(this.deps).forEach(function(t){return t.delete(e)}),this.deps.clear(),Bc.push(this.deps),this.deps=null)},r.count=0,r}();function j4(r){var e=Yd.getValue();if(e)return r.parents.add(e),e.childValues.has(r)||e.childValues.set(r,[]),Go(r)?G4(e,r):K4(e,r),e}function JN(r,e){return J4(r),Yd.withValue(r,YN,[r,e]),$N(r,e)&&XN(r),z4(r.value)}function YN(r,e){r.recomputing=!0,r.value.length=0;try{r.value[0]=r.fn.apply(null,e)}catch(t){r.value[1]=t}r.recomputing=!1}function Go(r){return r.dirty||!!(r.dirtyChildren&&r.dirtyChildren.size)}function XN(r){r.dirty=!1,!Go(r)&&W4(r)}function H4(r){db(r,G4)}function W4(r){db(r,K4)}function db(r,e){var t=r.parents.size;if(t)for(var i=hb(r.parents),n=0;n<t;++n)e(i[n],r)}function G4(r,e){Ll(r.childValues.has(e)),Ll(Go(e));var t=!Go(r);if(!r.dirtyChildren)r.dirtyChildren=Bc.pop()||new Set;else if(r.dirtyChildren.has(e))return;r.dirtyChildren.add(e),t&&H4(r)}function K4(r,e){Ll(r.childValues.has(e)),Ll(!Go(e));var t=r.childValues.get(e);t.length===0?r.childValues.set(e,KN(e.value)):GN(t,e.value)||r.setDirty(),Q4(r,e),!Go(r)&&W4(r)}function Q4(r,e){var t=r.dirtyChildren;t&&(t.delete(e),t.size===0&&(Bc.length<WN&&Bc.push(t),r.dirtyChildren=null))}function J4(r){r.childValues.size>0&&r.childValues.forEach(function(e,t){Y4(r,t)}),r.forgetDeps(),Ll(r.dirtyChildren===null)}function Y4(r,e){e.parents.delete(r),r.childValues.delete(e),Q4(r,e)}function $N(r,e){if(typeof r.subscribe=="function")try{Jd(r),r.unsubscribe=r.subscribe.apply(null,e)}catch{return r.setDirty(),!1}return!0}var ZN={setDirty:!0,dispose:!0,forget:!0};function Xd(r){var e=new Map,t=r&&r.subscribe;function i(n){var o=Yd.getValue();if(o){var s=e.get(n);s||e.set(n,s=new Set),o.dependOn(s),typeof t=="function"&&(Jd(s),s.unsubscribe=t(n))}}return i.dirty=function(o,s){var a=e.get(o);if(a){var l=s&&HN.call(ZN,s)?s:"setDirty";hb(a).forEach(function(f){return f[l]()}),e.delete(o),Jd(a)}},i}function X4(){var r=new In(typeof WeakMap=="function");return function(){return r.lookupArray(arguments)}}var XQ=X4(),ub=new Set;function $s(r,e){e===void 0&&(e=Object.create(null));var t=new zN(e.max||Math.pow(2,16),function(f){return f.dispose()}),i=e.keyArgs,n=e.makeCacheKey||X4(),o=function(){var f=n.apply(null,i?i.apply(null,arguments):arguments);if(f===void 0)return r.apply(null,arguments);var c=t.get(f);c||(t.set(f,c=new QN(r)),c.subscribe=e.subscribe,c.forget=function(){return t.delete(f)});var u=c.recompute(Array.prototype.slice.call(arguments));return t.set(f,c),ub.add(t),Yd.hasValue()||(ub.forEach(function(d){return d.clean()}),ub.clear()),u};Object.defineProperty(o,"size",{get:function(){return t.map.size},configurable:!1,enumerable:!1});function s(f){var c=t.get(f);c&&c.setDirty()}o.dirtyKey=s,o.dirty=function(){s(n.apply(null,arguments))};function a(f){var c=t.get(f);if(c)return c.peek()}o.peekKey=a,o.peek=function(){return a(n.apply(null,arguments))};function l(f){return t.delete(f)}return o.forgetKey=l,o.forget=function(){return l(n.apply(null,arguments))},o.makeCacheKey=n,o.getKey=i?function(){return n.apply(null,i.apply(null,arguments))}:n,Object.freeze(o)}var pb=function(){function r(){this.getFragmentDoc=$s(Ix)}return r.prototype.batch=function(e){var t=this,i=typeof e.optimistic=="string"?e.optimistic:e.optimistic===!1?null:void 0,n;return this.performTransaction(function(){return n=e.update(t)},i),n},r.prototype.recordOptimisticTransaction=function(e,t){this.performTransaction(e,t)},r.prototype.transformDocument=function(e){return e},r.prototype.transformForLink=function(e){return e},r.prototype.identify=function(e){},r.prototype.gc=function(){return[]},r.prototype.modify=function(e){return!1},r.prototype.readQuery=function(e,t){return t===void 0&&(t=!!e.optimistic),this.read(U(U({},e),{rootId:e.id||"ROOT_QUERY",optimistic:t}))},r.prototype.readFragment=function(e,t){return t===void 0&&(t=!!e.optimistic),this.read(U(U({},e),{query:this.getFragmentDoc(e.fragment,e.fragmentName),rootId:e.id,optimistic:t}))},r.prototype.writeQuery=function(e){var t=e.id,i=e.data,n=Mn(e,["id","data"]);return this.write(Object.assign(n,{dataId:t||"ROOT_QUERY",result:i}))},r.prototype.writeFragment=function(e){var t=e.id,i=e.data,n=e.fragment,o=e.fragmentName,s=Mn(e,["id","data","fragment","fragmentName"]);return this.write(Object.assign(s,{query:this.getFragmentDoc(n,o),dataId:t,result:i}))},r.prototype.updateQuery=function(e,t){return this.batch({update:function(i){var n=i.readQuery(e),o=t(n);return o==null?n:(i.writeQuery(U(U({},e),{data:o})),o)}})},r.prototype.updateFragment=function(e,t){return this.batch({update:function(i){var n=i.readFragment(e),o=t(n);return o==null?n:(i.writeFragment(U(U({},e),{data:o})),o)}})},r}();var Fc=function(r){er(e,r);function e(t,i,n,o){var s,a=r.call(this,t)||this;if(a.message=t,a.path=i,a.query=n,a.variables=o,Array.isArray(a.path)){a.missing=a.message;for(var l=a.path.length-1;l>=0;--l)a.missing=(s={},s[a.path[l]]=a.missing,s)}else a.missing=a.path;return a.__proto__=e.prototype,a}return e}(Error);var Qt=Object.prototype.hasOwnProperty;function Lc(r){return r==null}var Ye=Array.isArray;function Zd(r,e){var t=r.__typename,i=r.id,n=r._id;if(typeof t=="string"&&(e&&(e.keyObject=Lc(i)?Lc(n)?void 0:{_id:n}:{id:i}),Lc(i)&&!Lc(n)&&(i=n),!Lc(i)))return"".concat(t,":").concat(typeof i=="number"||typeof i=="string"?i:JSON.stringify(i))}var $4={dataIdFromObject:Zd,addTypename:!0,resultCaching:!0,canonizeResults:!1};function Z4(r){return Wo($4,r)}function e0(r){var e=r.canonizeResults;return e===void 0?$4.canonizeResults:e}function ek(r,e){return Ne(e)?r.get(e.__ref,"__typename"):e&&e.__typename}var mb=/^[_a-z][_0-9a-z]*/i;function $i(r){var e=r.match(mb);return e?e[0]:r}function $d(r,e,t){return Le(e)?Ye(e)?e.every(function(i){return $d(r,i,t)}):r.selections.every(function(i){if(qr(i)&&no(i,t)){var n=Ni(i);return Qt.call(e,n)&&(!i.selectionSet||$d(i.selectionSet,e[n],t))}return!0}):!1}function Ko(r){return Le(r)&&!Ne(r)&&!Ye(r)}function tk(){return new Pi}function t0(r,e){var t=Ws(Ks(r));return{fragmentMap:t,lookupFragment:function(i){var n=t[i];return!n&&e&&(n=e.lookup(i)),n||null}}}var r0=Object.create(null),gb=function(){return r0},rk=Object.create(null),Ul=function(){function r(e,t){var i=this;this.policies=e,this.group=t,this.data=Object.create(null),this.rootIds=Object.create(null),this.refs=Object.create(null),this.getFieldValue=function(n,o){return Oc(Ne(n)?i.get(n.__ref,o):n&&n[o])},this.canRead=function(n){return Ne(n)?i.has(n.__ref):typeof n=="object"},this.toReference=function(n,o){if(typeof n=="string")return On(n);if(Ne(n))return n;var s=i.policies.identify(n)[0];if(s){var a=On(s);return o&&i.merge(s,n),a}}}return r.prototype.toObject=function(){return U({},this.data)},r.prototype.has=function(e){return this.lookup(e,!0)!==void 0},r.prototype.get=function(e,t){if(this.group.depend(e,t),Qt.call(this.data,e)){var i=this.data[e];if(i&&Qt.call(i,t))return i[t]}if(t==="__typename"&&Qt.call(this.policies.rootTypenamesById,e))return this.policies.rootTypenamesById[e];if(this instanceof Qo)return this.parent.get(e,t)},r.prototype.lookup=function(e,t){if(t&&this.group.depend(e,"__exists"),Qt.call(this.data,e))return this.data[e];if(this instanceof Qo)return this.parent.lookup(e,t);if(this.policies.rootTypenamesById[e])return Object.create(null)},r.prototype.merge=function(e,t){var i=this,n;Ne(e)&&(e=e.__ref),Ne(t)&&(t=t.__ref);var o=typeof e=="string"?this.lookup(n=e):e,s=typeof t=="string"?this.lookup(n=t):t;if(!!s){__DEV__?X(typeof n=="string","store.merge expects a string ID"):X(typeof n=="string",1);var a=new Pi(tP).merge(o,s);if(this.data[n]=a,a!==o&&(delete this.refs[n],this.group.caching)){var l=Object.create(null);o||(l.__exists=1),Object.keys(s).forEach(function(f){if(!o||o[f]!==a[f]){l[f]=1;var c=$i(f);c!==f&&!i.policies.hasKeyArgs(a.__typename,c)&&(l[c]=1),a[f]===void 0&&!(i instanceof Qo)&&delete a[f]}}),l.__typename&&!(o&&o.__typename)&&this.policies.rootTypenamesById[n]===a.__typename&&delete l.__typename,Object.keys(l).forEach(function(f){return i.group.dirty(n,f)})}}},r.prototype.modify=function(e,t){var i=this,n=this.lookup(e);if(n){var o=Object.create(null),s=!1,a=!0,l={DELETE:r0,INVALIDATE:rk,isReference:Ne,toReference:this.toReference,canRead:this.canRead,readField:function(f,c){return i.policies.readField(typeof f=="string"?{fieldName:f,from:c||On(e)}:f,{store:i})}};if(Object.keys(n).forEach(function(f){var c=$i(f),u=n[f];if(u!==void 0){var d=typeof t=="function"?t:t[f]||t[c];if(d){var p=d===gb?r0:d(Oc(u),U(U({},l),{fieldName:c,storeFieldName:f,storage:i.getStorage(e,f)}));p===rk?i.group.dirty(e,f):(p===r0&&(p=void 0),p!==u&&(o[f]=p,s=!0,u=p))}u!==void 0&&(a=!1)}}),s)return this.merge(e,o),a&&(this instanceof Qo?this.data[e]=void 0:delete this.data[e],this.group.dirty(e,"__exists")),!0}return!1},r.prototype.delete=function(e,t,i){var n,o=this.lookup(e);if(o){var s=this.getFieldValue(o,"__typename"),a=t&&i?this.policies.getStoreFieldName({typename:s,fieldName:t,args:i}):t;return this.modify(e,a?(n={},n[a]=gb,n):gb)}return!1},r.prototype.evict=function(e,t){var i=!1;return e.id&&(Qt.call(this.data,e.id)&&(i=this.delete(e.id,e.fieldName,e.args)),this instanceof Qo&&this!==t&&(i=this.parent.evict(e,t)||i),(e.fieldName||i)&&this.group.dirty(e.id,e.fieldName||"__exists")),i},r.prototype.clear=function(){this.replace(null)},r.prototype.extract=function(){var e=this,t=this.toObject(),i=[];return this.getRootIdSet().forEach(function(n){Qt.call(e.policies.rootTypenamesById,n)||i.push(n)}),i.length&&(t.__META={extraRootIds:i.sort()}),t},r.prototype.replace=function(e){var t=this;if(Object.keys(this.data).forEach(function(o){e&&Qt.call(e,o)||t.delete(o)}),e){var i=e.__META,n=Mn(e,["__META"]);Object.keys(n).forEach(function(o){t.merge(o,n[o])}),i&&i.extraRootIds.forEach(this.retain,this)}},r.prototype.retain=function(e){return this.rootIds[e]=(this.rootIds[e]||0)+1},r.prototype.release=function(e){if(this.rootIds[e]>0){var t=--this.rootIds[e];return t||delete this.rootIds[e],t}return 0},r.prototype.getRootIdSet=function(e){return e===void 0&&(e=new Set),Object.keys(this.rootIds).forEach(e.add,e),this instanceof Qo?this.parent.getRootIdSet(e):Object.keys(this.policies.rootTypenamesById).forEach(e.add,e),e},r.prototype.gc=function(){var e=this,t=this.getRootIdSet(),i=this.toObject();t.forEach(function(s){Qt.call(i,s)&&(Object.keys(e.findChildRefIds(s)).forEach(t.add,t),delete i[s])});var n=Object.keys(i);if(n.length){for(var o=this;o instanceof Qo;)o=o.parent;n.forEach(function(s){return o.delete(s)})}return n},r.prototype.findChildRefIds=function(e){if(!Qt.call(this.refs,e)){var t=this.refs[e]=Object.create(null),i=this.data[e];if(!i)return t;var n=new Set([i]);n.forEach(function(o){Ne(o)&&(t[o.__ref]=!0),Le(o)&&Object.keys(o).forEach(function(s){var a=o[s];Le(a)&&n.add(a)})})}return this.refs[e]},r.prototype.makeCacheKey=function(){return this.group.keyMaker.lookupArray(arguments)},r}();var ik=function(){function r(e,t){t===void 0&&(t=null),this.caching=e,this.parent=t,this.d=null,this.resetCaching()}return r.prototype.resetCaching=function(){this.d=this.caching?Xd():null,this.keyMaker=new In(Ii)},r.prototype.depend=function(e,t){if(this.d){this.d(xb(e,t));var i=$i(t);i!==t&&this.d(xb(e,i)),this.parent&&this.parent.depend(e,t)}},r.prototype.dirty=function(e,t){this.d&&this.d.dirty(xb(e,t),t==="__exists"?"forget":"setDirty")},r}();function xb(r,e){return e+"#"+r}function bb(r,e){Zs(r)&&r.group.depend(e,"__exists")}(function(r){var e=function(t){er(i,t);function i(n){var o=n.policies,s=n.resultCaching,a=s===void 0?!0:s,l=n.seed,f=t.call(this,o,new ik(a))||this;return f.stump=new eP(f),f.storageTrie=new In(Ii),l&&f.replace(l),f}return i.prototype.addLayer=function(n,o){return this.stump.addLayer(n,o)},i.prototype.removeLayer=function(){return this},i.prototype.getStorage=function(){return this.storageTrie.lookupArray(arguments)},i}(r);r.Root=e})(Ul||(Ul={}));var Qo=function(r){er(e,r);function e(t,i,n,o){var s=r.call(this,i.policies,o)||this;return s.id=t,s.parent=i,s.replay=n,s.group=o,n(s),s}return e.prototype.addLayer=function(t,i){return new e(t,this,i,this.group)},e.prototype.removeLayer=function(t){var i=this,n=this.parent.removeLayer(t);return t===this.id?(this.group.caching&&Object.keys(this.data).forEach(function(o){var s=i.data[o],a=n.lookup(o);a?s?s!==a&&Object.keys(s).forEach(function(l){It(s[l],a[l])||i.group.dirty(o,l)}):(i.group.dirty(o,"__exists"),Object.keys(a).forEach(function(l){i.group.dirty(o,l)})):i.delete(o)}),n):n===this.parent?this:n.addLayer(this.id,this.replay)},e.prototype.toObject=function(){return U(U({},this.parent.toObject()),this.data)},e.prototype.findChildRefIds=function(t){var i=this.parent.findChildRefIds(t);return Qt.call(this.data,t)?U(U({},i),r.prototype.findChildRefIds.call(this,t)):i},e.prototype.getStorage=function(){for(var t=this.parent;t.parent;)t=t.parent;return t.getStorage.apply(t,arguments)},e}(Ul),eP=function(r){er(e,r);function e(t){return r.call(this,"EntityStore.Stump",t,function(){},new ik(t.group.caching,t.group))||this}return e.prototype.removeLayer=function(){return this},e.prototype.merge=function(){return this.parent.merge.apply(this.parent,arguments)},e}(Qo);function tP(r,e,t){var i=r[t],n=e[t];return It(i,n)?i:n}function Zs(r){return!!(r instanceof Ul&&r.group.caching)}function rP(r){return Le(r)?Ye(r)?r.slice(0):U({__proto__:Object.getPrototypeOf(r)},r):r}var i0=function(){function r(){this.known=new(s4?WeakSet:Set),this.pool=new In(Ii),this.passes=new WeakMap,this.keysByJSON=new Map,this.empty=this.admit({})}return r.prototype.isKnown=function(e){return Le(e)&&this.known.has(e)},r.prototype.pass=function(e){if(Le(e)){var t=rP(e);return this.passes.set(t,e),t}return e},r.prototype.admit=function(e){var t=this;if(Le(e)){var i=this.passes.get(e);if(i)return i;var n=Object.getPrototypeOf(e);switch(n){case Array.prototype:{if(this.known.has(e))return e;var o=e.map(this.admit,this),s=this.pool.lookupArray(o);return s.array||(this.known.add(s.array=o),__DEV__&&Object.freeze(o)),s.array}case null:case Object.prototype:{if(this.known.has(e))return e;var a=Object.getPrototypeOf(e),l=[a],f=this.sortedKeys(e);l.push(f.json);var c=l.length;f.sorted.forEach(function(p){l.push(t.admit(e[p]))});var s=this.pool.lookupArray(l);if(!s.object){var u=s.object=Object.create(a);this.known.add(u),f.sorted.forEach(function(p,g){u[p]=l[c+g]}),__DEV__&&Object.freeze(u)}return s.object}}}return e},r.prototype.sortedKeys=function(e){var t=Object.keys(e),i=this.pool.lookupArray(t);if(!i.keys){t.sort();var n=JSON.stringify(t);(i.keys=this.keysByJSON.get(n))||this.keysByJSON.set(n,i.keys={sorted:t,json:n})}return i.keys},r}();var ui=Object.assign(function(r){if(Le(r)){yb===void 0&&nk();var e=yb.admit(r),t=vb.get(e);return t===void 0&&vb.set(e,t=JSON.stringify(e)),t}return JSON.stringify(r)},{reset:nk}),yb,vb;function nk(){yb=new i0,vb=new(Ii?WeakMap:Map)}function ok(r){return[r.selectionSet,r.objectOrReference,r.context,r.context.canonizeResults]}var sk=function(){function r(e){var t=this;this.knownResults=new(Ii?WeakMap:Map),this.config=Wo(e,{addTypename:e.addTypename!==!1,canonizeResults:e0(e)}),this.canon=e.canon||new i0,this.executeSelectionSet=$s(function(i){var n,o=i.context.canonizeResults,s=ok(i);s[3]=!o;var a=(n=t.executeSelectionSet).peek.apply(n,s);return a?o?U(U({},a),{result:t.canon.admit(a.result)}):a:(bb(i.context.store,i.enclosingRef.__ref),t.execSelectionSetImpl(i))},{max:this.config.resultCacheMaxSize,keyArgs:ok,makeCacheKey:function(i,n,o,s){if(Zs(o.store))return o.store.makeCacheKey(i,Ne(n)?n.__ref:n,o.varString,s)}}),this.executeSubSelectedArray=$s(function(i){return bb(i.context.store,i.enclosingRef.__ref),t.execSubSelectedArrayImpl(i)},{max:this.config.resultCacheMaxSize,makeCacheKey:function(i){var n=i.field,o=i.array,s=i.context;if(Zs(s.store))return s.store.makeCacheKey(n,o,s.varString)}})}return r.prototype.resetCanon=function(){this.canon=new i0},r.prototype.diffQueryAgainstStore=function(e){var t=e.store,i=e.query,n=e.rootId,o=n===void 0?"ROOT_QUERY":n,s=e.variables,a=e.returnPartialData,l=a===void 0?!0:a,f=e.canonizeResults,c=f===void 0?this.config.canonizeResults:f,u=this.config.cache.policies;s=U(U({},Js(Cc(i))),s);var d=On(o),p=this.executeSelectionSet({selectionSet:Qs(i).selectionSet,objectOrReference:d,enclosingRef:d,context:U({store:t,query:i,policies:u,variables:s,varString:ui(s),canonizeResults:c},t0(i,this.config.fragments))}),g;if(p.missing&&(g=[new Fc(iP(p.missing),p.missing,i,s)],!l))throw g[0];return{result:p.result,complete:!g,missing:g}},r.prototype.isFresh=function(e,t,i,n){if(Zs(n.store)&&this.knownResults.get(e)===i){var o=this.executeSelectionSet.peek(i,t,n,this.canon.isKnown(e));if(o&&e===o.result)return!0}return!1},r.prototype.execSelectionSetImpl=function(e){var t=this,i=e.selectionSet,n=e.objectOrReference,o=e.enclosingRef,s=e.context;if(Ne(n)&&!s.policies.rootTypenamesById[n.__ref]&&!s.store.has(n.__ref))return{result:this.canon.empty,missing:"Dangling reference to missing ".concat(n.__ref," object")};var a=s.variables,l=s.policies,f=s.store,c=f.getFieldValue(n,"__typename"),u=[],d,p=new Pi;this.config.addTypename&&typeof c=="string"&&!l.rootIdsByTypename[c]&&u.push({__typename:c});function g(N,I){var D;return N.missing&&(d=p.merge(d,(D={},D[I]=N.missing,D))),N.result}var b=new Set(i.selections);b.forEach(function(N){var I,D;if(!!no(N,a))if(qr(N)){var B=l.readField({fieldName:N.name.value,field:N,variables:s.variables,from:n},s),V=Ni(N);B===void 0?Ys.added(N)||(d=p.merge(d,(I={},I[V]="Can't find field '".concat(N.name.value,"' on ").concat(Ne(n)?n.__ref+" object":"object "+JSON.stringify(n,null,2)),I))):Ye(B)?B=g(t.executeSubSelectedArray({field:N,array:B,enclosingRef:o,context:s}),V):N.selectionSet?B!=null&&(B=g(t.executeSelectionSet({selectionSet:N.selectionSet,objectOrReference:B,enclosingRef:Ne(B)?B:o,context:s}),V)):s.canonizeResults&&(B=t.canon.pass(B)),B!==void 0&&u.push((D={},D[V]=B,D))}else{var W=Gs(N,s.lookupFragment);if(!W&&N.kind===de.FRAGMENT_SPREAD)throw __DEV__?new xe("No fragment named ".concat(N.name.value)):new xe(5);W&&l.fragmentMatches(W,c)&&W.selectionSet.selections.forEach(b.add,b)}});var k=Tc(u),_={result:k,missing:d},P=s.canonizeResults?this.canon.admit(_):Oc(_);return P.result&&this.knownResults.set(P.result,i),P},r.prototype.execSubSelectedArrayImpl=function(e){var t=this,i=e.field,n=e.array,o=e.enclosingRef,s=e.context,a,l=new Pi;function f(c,u){var d;return c.missing&&(a=l.merge(a,(d={},d[u]=c.missing,d))),c.result}return i.selectionSet&&(n=n.filter(s.store.canRead)),n=n.map(function(c,u){return c===null?null:Ye(c)?f(t.executeSubSelectedArray({field:i,array:c,enclosingRef:o,context:s}),u):i.selectionSet?f(t.executeSelectionSet({selectionSet:i.selectionSet,objectOrReference:c,enclosingRef:Ne(c)?c:o,context:s}),u):(__DEV__&&nP(s.store,i,c),c)}),{result:s.canonizeResults?this.canon.admit(n):n,missing:a}},r}();function iP(r){try{JSON.stringify(r,function(e,t){if(typeof t=="string")throw t;return t})}catch(e){return e}}function nP(r,e,t){if(!e.selectionSet){var i=new Set([t]);i.forEach(function(n){Le(n)&&(__DEV__?X(!Ne(n),"Missing selection set for object of type ".concat(ek(r,n)," returned for query field ").concat(e.name.value)):X(!Ne(n),6),Object.values(n).forEach(i.add,i))})}}var Vl=new Fl,ak=new WeakMap;function Uc(r){var e=ak.get(r);return e||ak.set(r,e={vars:new Set,dep:Xd()}),e}function wb(r){Uc(r).vars.forEach(function(e){return e.forgetCache(r)})}function lk(r){Uc(r).vars.forEach(function(e){return e.attachCache(r)})}function n0(r){var e=new Set,t=new Set,i=function(o){if(arguments.length>0){if(r!==o){r=o,e.forEach(function(l){Uc(l).dep.dirty(i),oP(l)});var s=Array.from(t);t.clear(),s.forEach(function(l){return l(r)})}}else{var a=Vl.getValue();a&&(n(a),Uc(a).dep(i))}return r};i.onNextChange=function(o){return t.add(o),function(){t.delete(o)}};var n=i.attachCache=function(o){return e.add(o),Uc(o).vars.add(i),i};return i.forgetCache=function(o){return e.delete(o)},i}function oP(r){r.broadcastWatches&&r.broadcastWatches()}var fk=Object.create(null);function Ab(r){var e=JSON.stringify(r);return fk[e]||(fk[e]=Object.create(null))}function Eb(r){var e=Ab(r);return e.keyFieldsFn||(e.keyFieldsFn=function(t,i){var n=function(s,a){return i.readField(a,s)},o=i.keyObject=Sb(r,function(s){var a=ql(i.storeObject,s,n);return a===void 0&&t!==i.storeObject&&Qt.call(t,s[0])&&(a=ql(t,s,uk)),__DEV__?X(a!==void 0,"Missing field '".concat(s.join("."),"' while extracting keyFields from ").concat(JSON.stringify(t))):X(a!==void 0,2),a});return"".concat(i.typename,":").concat(JSON.stringify(o))})}function kb(r){var e=Ab(r);return e.keyArgsFn||(e.keyArgsFn=function(t,i){var n=i.field,o=i.variables,s=i.fieldName,a=Sb(r,function(f){var c=f[0],u=c.charAt(0);if(u==="@"){if(n&&Dr(n.directives)){var d=c.slice(1),p=n.directives.find(function(_){return _.name.value===d}),g=p&&oo(p,o);return g&&ql(g,f.slice(1))}return}if(u==="$"){var b=c.slice(1);if(o&&Qt.call(o,b)){var k=f.slice(0);return k[0]=b,ql(o,k)}return}if(t)return ql(t,f)}),l=JSON.stringify(a);return(t||l!=="{}")&&(s+=":"+l),s})}function Sb(r,e){var t=new Pi;return ck(r).reduce(function(i,n){var o,s=e(n);if(s!==void 0){for(var a=n.length-1;a>=0;--a)s=(o={},o[n[a]]=s,o);i=t.merge(i,s)}return i},Object.create(null))}function ck(r){var e=Ab(r);if(!e.paths){var t=e.paths=[],i=[];r.forEach(function(n,o){Ye(n)?(ck(n).forEach(function(s){return t.push(i.concat(s))}),i.length=0):(i.push(n),Ye(r[o+1])||(t.push(i.slice(0)),i.length=0))})}return e.paths}function uk(r,e){return r[e]}function ql(r,e,t){return t=t||uk,hk(e.reduce(function i(n,o){return Ye(n)?n.map(function(s){return i(s,o)}):n&&t(n,o)},r))}function hk(r){return Le(r)?Ye(r)?r.map(hk):Sb(Object.keys(r).sort(),function(e){return ql(r,e)}):r}kc.setStringify(ui);function _b(r){return r.args!==void 0?r.args:r.field?oo(r.field,r.variables):null}var sP=function(){},dk=function(r,e){return e.fieldName},pk=function(r,e,t){var i=t.mergeObjects;return i(r,e)},mk=function(r,e){return e},xk=function(){function r(e){this.config=e,this.typePolicies=Object.create(null),this.toBeAdded=Object.create(null),this.supertypeMap=new Map,this.fuzzySubtypes=new Map,this.rootIdsByTypename=Object.create(null),this.rootTypenamesById=Object.create(null),this.usingPossibleTypes=!1,this.config=U({dataIdFromObject:Zd},e),this.cache=this.config.cache,this.setRootTypename("Query"),this.setRootTypename("Mutation"),this.setRootTypename("Subscription"),e.possibleTypes&&this.addPossibleTypes(e.possibleTypes),e.typePolicies&&this.addTypePolicies(e.typePolicies)}return r.prototype.identify=function(e,t){var i,n=this,o=t&&(t.typename||((i=t.storeObject)===null||i===void 0?void 0:i.__typename))||e.__typename;if(o===this.rootTypenamesById.ROOT_QUERY)return["ROOT_QUERY"];for(var s=t&&t.storeObject||e,a=U(U({},t),{typename:o,storeObject:s,readField:t&&t.readField||function(){var d=o0(arguments,s);return n.readField(d,{store:n.cache.data,variables:d.variables})}}),l,f=o&&this.getTypePolicy(o),c=f&&f.keyFn||this.config.dataIdFromObject;c;){var u=c(e,a);if(Ye(u))c=Eb(u);else{l=u;break}}return l=l?String(l):void 0,a.keyObject?[l,a.keyObject]:[l]},r.prototype.addTypePolicies=function(e){var t=this;Object.keys(e).forEach(function(i){var n=e[i],o=n.queryType,s=n.mutationType,a=n.subscriptionType,l=Mn(n,["queryType","mutationType","subscriptionType"]);o&&t.setRootTypename("Query",i),s&&t.setRootTypename("Mutation",i),a&&t.setRootTypename("Subscription",i),Qt.call(t.toBeAdded,i)?t.toBeAdded[i].push(l):t.toBeAdded[i]=[l]})},r.prototype.updateTypePolicy=function(e,t){var i=this,n=this.getTypePolicy(e),o=t.keyFields,s=t.fields;function a(l,f){l.merge=typeof f=="function"?f:f===!0?pk:f===!1?mk:l.merge}a(n,t.merge),n.keyFn=o===!1?sP:Ye(o)?Eb(o):typeof o=="function"?o:n.keyFn,s&&Object.keys(s).forEach(function(l){var f=i.getFieldPolicy(e,l,!0),c=s[l];if(typeof c=="function")f.read=c;else{var u=c.keyArgs,d=c.read,p=c.merge;f.keyFn=u===!1?dk:Ye(u)?kb(u):typeof u=="function"?u:f.keyFn,typeof d=="function"&&(f.read=d),a(f,p)}f.read&&f.merge&&(f.keyFn=f.keyFn||dk)})},r.prototype.setRootTypename=function(e,t){t===void 0&&(t=e);var i="ROOT_"+e.toUpperCase(),n=this.rootTypenamesById[i];t!==n&&(__DEV__?X(!n||n===e,"Cannot change root ".concat(e," __typename more than once")):X(!n||n===e,3),n&&delete this.rootIdsByTypename[n],this.rootIdsByTypename[t]=i,this.rootTypenamesById[i]=t)},r.prototype.addPossibleTypes=function(e){var t=this;this.usingPossibleTypes=!0,Object.keys(e).forEach(function(i){t.getSupertypeSet(i,!0),e[i].forEach(function(n){t.getSupertypeSet(n,!0).add(i);var o=n.match(mb);(!o||o[0]!==n)&&t.fuzzySubtypes.set(n,new RegExp(n))})})},r.prototype.getTypePolicy=function(e){var t=this;if(!Qt.call(this.typePolicies,e)){var i=this.typePolicies[e]=Object.create(null);i.fields=Object.create(null);var n=this.supertypeMap.get(e);n&&n.size&&n.forEach(function(s){var a=t.getTypePolicy(s),l=a.fields,f=Mn(a,["fields"]);Object.assign(i,f),Object.assign(i.fields,l)})}var o=this.toBeAdded[e];return o&&o.length&&o.splice(0).forEach(function(s){t.updateTypePolicy(e,s)}),this.typePolicies[e]},r.prototype.getFieldPolicy=function(e,t,i){if(e){var n=this.getTypePolicy(e).fields;return n[t]||i&&(n[t]=Object.create(null))}},r.prototype.getSupertypeSet=function(e,t){var i=this.supertypeMap.get(e);return!i&&t&&this.supertypeMap.set(e,i=new Set),i},r.prototype.fragmentMatches=function(e,t,i,n){var o=this;if(!e.typeCondition)return!0;if(!t)return!1;var s=e.typeCondition.name.value;if(t===s)return!0;if(this.usingPossibleTypes&&this.supertypeMap.has(s))for(var a=this.getSupertypeSet(t,!0),l=[a],f=function(g){var b=o.getSupertypeSet(g,!1);b&&b.size&&l.indexOf(b)<0&&l.push(b)},c=!!(i&&this.fuzzySubtypes.size),u=!1,d=0;d<l.length;++d){var p=l[d];if(p.has(s))return a.has(s)||(u&&__DEV__&&X.warn("Inferring subtype ".concat(t," of supertype ").concat(s)),a.add(s)),!0;p.forEach(f),c&&d===l.length-1&&$d(e.selectionSet,i,n)&&(c=!1,u=!0,this.fuzzySubtypes.forEach(function(g,b){var k=t.match(g);k&&k[0]===t&&f(b)}))}return!1},r.prototype.hasKeyArgs=function(e,t){var i=this.getFieldPolicy(e,t,!1);return!!(i&&i.keyFn)},r.prototype.getStoreFieldName=function(e){var t=e.typename,i=e.fieldName,n=this.getFieldPolicy(t,i,!1),o,s=n&&n.keyFn;if(s&&t)for(var a={typename:t,fieldName:i,field:e.field||null,variables:e.variables},l=_b(e);s;){var f=s(l,a);if(Ye(f))s=kb(f);else{o=f||i;break}}return o===void 0&&(o=e.field?Dx(e.field,e.variables):kc(i,_b(e))),o===!1?i:i===$i(o)?o:i+":"+o},r.prototype.readField=function(e,t){var i=e.from;if(!!i){var n=e.field||e.fieldName;if(!!n){if(e.typename===void 0){var o=t.store.getFieldValue(i,"__typename");o&&(e.typename=o)}var s=this.getStoreFieldName(e),a=$i(s),l=t.store.getFieldValue(i,s),f=this.getFieldPolicy(e.typename,a,!1),c=f&&f.read;if(c){var u=gk(this,i,e,t,t.store.getStorage(Ne(i)?i.__ref:i,s));return Vl.withValue(this.cache,c,[l,u])}return l}}},r.prototype.getReadFunction=function(e,t){var i=this.getFieldPolicy(e,t,!1);return i&&i.read},r.prototype.getMergeFunction=function(e,t,i){var n=this.getFieldPolicy(e,t,!1),o=n&&n.merge;return!o&&i&&(n=this.getTypePolicy(i),o=n&&n.merge),o},r.prototype.runMergeFunction=function(e,t,i,n,o){var s=i.field,a=i.typename,l=i.merge;return l===pk?bk(n.store)(e,t):l===mk?t:(n.overwrite&&(e=void 0),l(e,t,gk(this,void 0,{typename:a,fieldName:s.name.value,field:s,variables:n.variables},n,o||Object.create(null))))},r}();function gk(r,e,t,i,n){var o=r.getStoreFieldName(t),s=$i(o),a=t.variables||i.variables,l=i.store,f=l.toReference,c=l.canRead;return{args:_b(t),field:t.field||null,fieldName:s,storeFieldName:o,variables:a,isReference:Ne,toReference:f,storage:n,cache:r.cache,canRead:c,readField:function(){return r.readField(o0(arguments,e,a),i)},mergeObjects:bk(i.store)}}function o0(r,e,t){var i=r[0],n=r[1],o=r.length,s;return typeof i=="string"?s={fieldName:i,from:o>1?n:e}:(s=U({},i),Qt.call(s,"from")||(s.from=e)),__DEV__&&s.from===void 0&&__DEV__&&X.warn("Undefined 'from' passed to readField with arguments ".concat(f4(Array.from(r)))),s.variables===void 0&&(s.variables=t),s}function bk(r){return function(t,i){if(Ye(t)||Ye(i))throw __DEV__?new xe("Cannot automatically merge arrays"):new xe(4);if(Le(t)&&Le(i)){var n=r.getFieldValue(t,"__typename"),o=r.getFieldValue(i,"__typename"),s=n&&o&&n!==o;if(s)return i;if(Ne(t)&&Ko(i))return r.merge(t.__ref,i),t;if(Ko(t)&&Ne(i))return r.merge(t,i.__ref),i;if(Ko(t)&&Ko(i))return U(U({},t),i)}return i}}function Cb(r,e,t){var i="".concat(e).concat(t),n=r.flavors.get(i);return n||r.flavors.set(i,n=r.clientOnly===e&&r.deferred===t?r:U(U({},r),{clientOnly:e,deferred:t})),n}var Ak=function(){function r(e,t,i){this.cache=e,this.reader=t,this.fragments=i}return r.prototype.writeToStore=function(e,t){var i=this,n=t.query,o=t.result,s=t.dataId,a=t.variables,l=t.overwrite,f=Nn(n),c=tk();a=U(U({},Js(f)),a);var u=U(U({store:e,written:Object.create(null),merge:function(p,g){return c.merge(p,g)},variables:a,varString:ui(a)},t0(n,this.fragments)),{overwrite:!!l,incomingById:new Map,clientOnly:!1,deferred:!1,flavors:new Map}),d=this.processSelectionSet({result:o||Object.create(null),dataId:s,selectionSet:f.selectionSet,mergeTree:{map:new Map},context:u});if(!Ne(d))throw __DEV__?new xe("Could not identify object ".concat(JSON.stringify(o))):new xe(7);return u.incomingById.forEach(function(p,g){var b=p.storeObject,k=p.mergeTree,_=p.fieldNodeSet,P=On(g);if(k&&k.map.size){var N=i.applyMerges(k,P,b,u);if(Ne(N))return;b=N}if(__DEV__&&!u.overwrite){var I=Object.create(null);_.forEach(function(V){V.selectionSet&&(I[V.name.value]=!0)});var D=function(V){return I[$i(V)]===!0},B=function(V){var W=k&&k.map.get(V);return Boolean(W&&W.info&&W.info.merge)};Object.keys(b).forEach(function(V){D(V)&&!B(V)&&aP(P,b,V,u.store)})}e.merge(g,b)}),e.retain(d.__ref),d},r.prototype.processSelectionSet=function(e){var t=this,i=e.dataId,n=e.result,o=e.selectionSet,s=e.context,a=e.mergeTree,l=this.cache.policies,f=Object.create(null),c=i&&l.rootTypenamesById[i]||Sc(n,o,s.fragmentMap)||i&&s.store.get(i,"__typename");typeof c=="string"&&(f.__typename=c);var u=function(){var N=o0(arguments,f,s.variables);if(Ne(N.from)){var I=s.incomingById.get(N.from.__ref);if(I){var D=l.readField(U(U({},N),{from:I.storeObject}),s);if(D!==void 0)return D}}return l.readField(N,s)},d=new Set;this.flattenFields(o,n,s,c).forEach(function(N,I){var D,B=Ni(I),V=n[B];if(d.add(I),V!==void 0){var W=l.getStoreFieldName({typename:c,fieldName:I.name.value,field:I,variables:N.variables}),Y=yk(a,W),$=t.processFieldValue(V,I,I.selectionSet?Cb(N,!1,!1):N,Y),Z=void 0;I.selectionSet&&(Ne($)||Ko($))&&(Z=u("__typename",$));var ce=l.getMergeFunction(c,I.name.value,Z);ce?Y.info={field:I,typename:c,merge:ce}:vk(a,W),f=N.merge(f,(D={},D[W]=$,D))}else __DEV__&&!N.clientOnly&&!N.deferred&&!Ys.added(I)&&!l.getReadFunction(c,I.name.value)&&__DEV__&&X.error("Missing field '".concat(Ni(I),"' while writing result ").concat(JSON.stringify(n,null,2)).substring(0,1e3))});try{var p=l.identify(n,{typename:c,selectionSet:o,fragmentMap:s.fragmentMap,storeObject:f,readField:u}),g=p[0],b=p[1];i=i||g,b&&(f=s.merge(f,b))}catch(N){if(!i)throw N}if(typeof i=="string"){var k=On(i),_=s.written[i]||(s.written[i]=[]);if(_.indexOf(o)>=0||(_.push(o),this.reader&&this.reader.isFresh(n,k,o,s)))return k;var P=s.incomingById.get(i);return P?(P.storeObject=s.merge(P.storeObject,f),P.mergeTree=Tb(P.mergeTree,a),d.forEach(function(N){return P.fieldNodeSet.add(N)})):s.incomingById.set(i,{storeObject:f,mergeTree:s0(a)?void 0:a,fieldNodeSet:d}),k}return f},r.prototype.processFieldValue=function(e,t,i,n){var o=this;return!t.selectionSet||e===null?__DEV__?Il(e):e:Ye(e)?e.map(function(s,a){var l=o.processFieldValue(s,t,i,yk(n,a));return vk(n,a),l}):this.processSelectionSet({result:e,selectionSet:t.selectionSet,context:i,mergeTree:n})},r.prototype.flattenFields=function(e,t,i,n){n===void 0&&(n=Sc(t,e,i.fragmentMap));var o=new Map,s=this.cache.policies,a=new In(!1);return function l(f,c){var u=a.lookup(f,c.clientOnly,c.deferred);u.visited||(u.visited=!0,f.selections.forEach(function(d){if(!!no(d,i.variables)){var p=c.clientOnly,g=c.deferred;if(!(p&&g)&&Dr(d.directives)&&d.directives.forEach(function(_){var P=_.name.value;if(P==="client"&&(p=!0),P==="defer"){var N=oo(_,i.variables);(!N||N.if!==!1)&&(g=!0)}}),qr(d)){var b=o.get(d);b&&(p=p&&b.clientOnly,g=g&&b.deferred),o.set(d,Cb(i,p,g))}else{var k=Gs(d,i.lookupFragment);if(!k&&d.kind===de.FRAGMENT_SPREAD)throw __DEV__?new xe("No fragment named ".concat(d.name.value)):new xe(8);k&&s.fragmentMatches(k,n,t,i.variables)&&l(k.selectionSet,Cb(i,p,g))}}}))}(e,i),o},r.prototype.applyMerges=function(e,t,i,n,o){var s,a=this;if(e.map.size&&!Ne(i)){var l=!Ye(i)&&(Ne(t)||Ko(t))?t:void 0,f=i;l&&!o&&(o=[Ne(l)?l.__ref:l]);var c,u=function(d,p){return Ye(d)?typeof p=="number"?d[p]:void 0:n.store.getFieldValue(d,String(p))};e.map.forEach(function(d,p){var g=u(l,p),b=u(f,p);if(b!==void 0){o&&o.push(p);var k=a.applyMerges(d,g,b,n,o);k!==b&&(c=c||new Map,c.set(p,k)),o&&X(o.pop()===p)}}),c&&(i=Ye(f)?f.slice(0):U({},f),c.forEach(function(d,p){i[p]=d}))}return e.info?this.cache.policies.runMergeFunction(t,i,e.info,n,o&&(s=n.store).getStorage.apply(s,o)):i},r}();var Ek=[];function yk(r,e){var t=r.map;return t.has(e)||t.set(e,Ek.pop()||{map:new Map}),t.get(e)}function Tb(r,e){if(r===e||!e||s0(e))return r;if(!r||s0(r))return e;var t=r.info&&e.info?U(U({},r.info),e.info):r.info||e.info,i=r.map.size&&e.map.size,n=i?new Map:r.map.size?r.map:e.map,o={info:t,map:n};if(i){var s=new Set(e.map.keys());r.map.forEach(function(a,l){o.map.set(l,Tb(a,e.map.get(l))),s.delete(l)}),s.forEach(function(a){o.map.set(a,Tb(e.map.get(a),r.map.get(a)))})}return o}function s0(r){return!r||!(r.info||r.map.size)}function vk(r,e){var t=r.map,i=t.get(e);i&&s0(i)&&(Ek.push(i),t.delete(e))}var wk=new Set;function aP(r,e,t,i){var n=function(u){var d=i.getFieldValue(u,t);return typeof d=="object"&&d},o=n(r);if(!!o){var s=n(e);if(!!s&&!Ne(o)&&!It(o,s)&&!Object.keys(o).every(function(u){return i.getFieldValue(s,u)!==void 0})){var a=i.getFieldValue(r,"__typename")||i.getFieldValue(e,"__typename"),l=$i(t),f="".concat(a,".").concat(l);if(!wk.has(f)){wk.add(f);var c=[];!Ye(o)&&!Ye(s)&&[o,s].forEach(function(u){var d=i.getFieldValue(u,"__typename");typeof d=="string"&&!c.includes(d)&&c.push(d)}),__DEV__&&X.warn("Cache data may be lost when replacing the ".concat(l," field of a ").concat(a,` object.

To address this problem (which is not a bug in Apollo Client), `).concat(c.length?"either ensure all objects of type "+c.join(" and ")+" have an ID or a custom merge function, or ":"","define a custom merge function for the ").concat(f,` field, so InMemoryCache can safely merge these objects:

  existing: `).concat(JSON.stringify(o).slice(0,1e3),`
  incoming: `).concat(JSON.stringify(s).slice(0,1e3),`

For more information about these options, please refer to the documentation:

  * Ensuring entity objects have IDs: https://go.apollo.dev/c/generating-unique-identifiers
  * Defining custom merge functions: https://go.apollo.dev/c/merging-non-normalized-objects
`))}}}}var a0=function(r){er(e,r);function e(t){t===void 0&&(t={});var i=r.call(this)||this;return i.watches=new Set,i.typenameDocumentCache=new Map,i.makeVar=n0,i.txCount=0,i.config=Z4(t),i.addTypename=!!i.config.addTypename,i.policies=new xk({cache:i,dataIdFromObject:i.config.dataIdFromObject,possibleTypes:i.config.possibleTypes,typePolicies:i.config.typePolicies}),i.init(),i}return e.prototype.init=function(){var t=this.data=new Ul.Root({policies:this.policies,resultCaching:this.config.resultCaching});this.optimisticData=t.stump,this.resetResultCache()},e.prototype.resetResultCache=function(t){var i=this,n=this.storeReader,o=this.config.fragments;this.storeWriter=new Ak(this,this.storeReader=new sk({cache:this,addTypename:this.addTypename,resultCacheMaxSize:this.config.resultCacheMaxSize,canonizeResults:e0(this.config),canon:t?void 0:n&&n.canon,fragments:o}),o),this.maybeBroadcastWatch=$s(function(s,a){return i.broadcastWatch(s,a)},{max:this.config.resultCacheMaxSize,makeCacheKey:function(s){var a=s.optimistic?i.optimisticData:i.data;if(Zs(a)){var l=s.optimistic,f=s.id,c=s.variables;return a.makeCacheKey(s.query,s.callback,ui({optimistic:l,id:f,variables:c}))}}}),new Set([this.data.group,this.optimisticData.group]).forEach(function(s){return s.resetCaching()})},e.prototype.restore=function(t){return this.init(),t&&this.data.replace(t),this},e.prototype.extract=function(t){return t===void 0&&(t=!1),(t?this.optimisticData:this.data).extract()},e.prototype.read=function(t){var i=t.returnPartialData,n=i===void 0?!1:i;try{return this.storeReader.diffQueryAgainstStore(U(U({},t),{store:t.optimistic?this.optimisticData:this.data,config:this.config,returnPartialData:n})).result||null}catch(o){if(o instanceof Fc)return null;throw o}},e.prototype.write=function(t){try{return++this.txCount,this.storeWriter.writeToStore(this.data,t)}finally{!--this.txCount&&t.broadcast!==!1&&this.broadcastWatches()}},e.prototype.modify=function(t){if(Qt.call(t,"id")&&!t.id)return!1;var i=t.optimistic?this.optimisticData:this.data;try{return++this.txCount,i.modify(t.id||"ROOT_QUERY",t.fields)}finally{!--this.txCount&&t.broadcast!==!1&&this.broadcastWatches()}},e.prototype.diff=function(t){return this.storeReader.diffQueryAgainstStore(U(U({},t),{store:t.optimistic?this.optimisticData:this.data,rootId:t.id||"ROOT_QUERY",config:this.config}))},e.prototype.watch=function(t){var i=this;return this.watches.size||lk(this),this.watches.add(t),t.immediate&&this.maybeBroadcastWatch(t),function(){i.watches.delete(t)&&!i.watches.size&&wb(i),i.maybeBroadcastWatch.forget(t)}},e.prototype.gc=function(t){ui.reset();var i=this.optimisticData.gc();return t&&!this.txCount&&(t.resetResultCache?this.resetResultCache(t.resetResultIdentities):t.resetResultIdentities&&this.storeReader.resetCanon()),i},e.prototype.retain=function(t,i){return(i?this.optimisticData:this.data).retain(t)},e.prototype.release=function(t,i){return(i?this.optimisticData:this.data).release(t)},e.prototype.identify=function(t){if(Ne(t))return t.__ref;try{return this.policies.identify(t)[0]}catch(i){__DEV__&&X.warn(i)}},e.prototype.evict=function(t){if(!t.id){if(Qt.call(t,"id"))return!1;t=U(U({},t),{id:"ROOT_QUERY"})}try{return++this.txCount,this.optimisticData.evict(t,this.data)}finally{!--this.txCount&&t.broadcast!==!1&&this.broadcastWatches()}},e.prototype.reset=function(t){var i=this;return this.init(),ui.reset(),t&&t.discardWatches?(this.watches.forEach(function(n){return i.maybeBroadcastWatch.forget(n)}),this.watches.clear(),wb(this)):this.broadcastWatches(),Promise.resolve()},e.prototype.removeOptimistic=function(t){var i=this.optimisticData.removeLayer(t);i!==this.optimisticData&&(this.optimisticData=i,this.broadcastWatches())},e.prototype.batch=function(t){var i=this,n=t.update,o=t.optimistic,s=o===void 0?!0:o,a=t.removeOptimistic,l=t.onWatchUpdated,f,c=function(d){var p=i,g=p.data,b=p.optimisticData;++i.txCount,d&&(i.data=i.optimisticData=d);try{return f=n(i)}finally{--i.txCount,i.data=g,i.optimisticData=b}},u=new Set;return l&&!this.txCount&&this.broadcastWatches(U(U({},t),{onWatchUpdated:function(d){return u.add(d),!1}})),typeof s=="string"?this.optimisticData=this.optimisticData.addLayer(s,c):s===!1?c(this.data):c(),typeof a=="string"&&(this.optimisticData=this.optimisticData.removeLayer(a)),l&&u.size?(this.broadcastWatches(U(U({},t),{onWatchUpdated:function(d,p){var g=l.call(this,d,p);return g!==!1&&u.delete(d),g}})),u.size&&u.forEach(function(d){return i.maybeBroadcastWatch.dirty(d)})):this.broadcastWatches(t),f},e.prototype.performTransaction=function(t,i){return this.batch({update:t,optimistic:i||i!==null})},e.prototype.transformDocument=function(t){if(this.addTypename){var i=this.typenameDocumentCache.get(t);return i||(i=Ys(t),this.typenameDocumentCache.set(t,i),this.typenameDocumentCache.set(i,i)),i}return t},e.prototype.transformForLink=function(t){var i=this.config.fragments;return i?i.transform(t):t},e.prototype.broadcastWatches=function(t){var i=this;this.txCount||this.watches.forEach(function(n){return i.maybeBroadcastWatch(n,t)})},e.prototype.broadcastWatch=function(t,i){var n=t.lastDiff,o=this.diff(t);i&&(t.optimistic&&typeof i.optimistic=="string"&&(o.fromOptimisticTransaction=!0),i.onWatchUpdated&&i.onWatchUpdated.call(this,t,o,n)===!1)||(!n||!It(n.result,o.result))&&t.callback(t.lastDiff=o,n)},e}(pb);function kk(r){return r.hasOwnProperty("graphQLErrors")}var lP=function(r){var e="";if(Dr(r.graphQLErrors)||Dr(r.clientErrors)){var t=(r.graphQLErrors||[]).concat(r.clientErrors||[]);t.forEach(function(i){var n=i?i.message:"Error message not found.";e+="".concat(n,`
`)})}return r.networkError&&(e+="".concat(r.networkError.message,`
`)),e=e.replace(/\n$/,""),e},ea=function(r){er(e,r);function e(t){var i=t.graphQLErrors,n=t.clientErrors,o=t.networkError,s=t.errorMessage,a=t.extraInfo,l=r.call(this,s)||this;return l.graphQLErrors=i||[],l.clientErrors=n||[],l.networkError=o||null,l.message=s||lP(l),l.extraInfo=a,l.__proto__=e.prototype,l}return e}(Error);var Ue;(function(r){r[r.loading=1]="loading",r[r.setVariables=2]="setVariables",r[r.fetchMore=3]="fetchMore",r[r.refetch=4]="refetch",r[r.poll=6]="poll",r[r.ready=7]="ready",r[r.error=8]="error"})(Ue||(Ue={}));function Jo(r){return r?r<7:!1}var fP=Object.assign,cP=Object.hasOwnProperty,l0=function(r){er(e,r);function e(t){var i=t.queryManager,n=t.queryInfo,o=t.options,s=r.call(this,function(k){try{var _=k._subscription._observer;_&&!_.error&&(_.error=uP)}catch{}var P=!s.observers.size;s.observers.add(k);var N=s.last;return N&&N.error?k.error&&k.error(N.error):N&&N.result&&k.next&&k.next(N.result),P&&s.reobserve().catch(function(){}),function(){s.observers.delete(k)&&!s.observers.size&&s.tearDownQuery()}})||this;s.observers=new Set,s.subscriptions=new Set,s.queryInfo=n,s.queryManager=i,s.isTornDown=!1;var a=i.defaultOptions.watchQuery,l=a===void 0?{}:a,f=l.fetchPolicy,c=f===void 0?"cache-first":f,u=o.fetchPolicy,d=u===void 0?c:u,p=o.initialFetchPolicy,g=p===void 0?d==="standby"?c:d:p;s.options=U(U({},o),{initialFetchPolicy:g,fetchPolicy:d}),s.queryId=n.queryId||i.generateQueryId();var b=Nn(s.query);return s.queryName=b&&b.name&&b.name.value,s}return Object.defineProperty(e.prototype,"query",{get:function(){return this.queryManager.transform(this.options.query).document},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"variables",{get:function(){return this.options.variables},enumerable:!1,configurable:!0}),e.prototype.result=function(){var t=this;return new Promise(function(i,n){var o={next:function(a){i(a),t.observers.delete(o),t.observers.size||t.queryManager.removeQuery(t.queryId),setTimeout(function(){s.unsubscribe()},0)},error:n},s=t.subscribe(o)})},e.prototype.getCurrentResult=function(t){t===void 0&&(t=!0);var i=this.getLastResult(!0),n=this.queryInfo.networkStatus||i&&i.networkStatus||Ue.ready,o=U(U({},i),{loading:Jo(n),networkStatus:n}),s=this.options.fetchPolicy,a=s===void 0?"cache-first":s;if(!(a==="network-only"||a==="no-cache"||a==="standby"||this.queryManager.transform(this.options.query).hasForcedResolvers)){var l=this.queryInfo.getDiff();(l.complete||this.options.returnPartialData)&&(o.data=l.result),It(o.data,{})&&(o.data=void 0),l.complete?(delete o.partial,l.complete&&o.networkStatus===Ue.loading&&(a==="cache-first"||a==="cache-only")&&(o.networkStatus=Ue.ready,o.loading=!1)):o.partial=!0,__DEV__&&!l.complete&&!this.options.partialRefetch&&!o.loading&&!o.data&&!o.error&&Ob(l.missing)}return t&&this.updateLastResult(o),o},e.prototype.isDifferentFromLastResult=function(t,i){return!this.last||!It(this.last.result,t)||i&&!It(this.last.variables,i)},e.prototype.getLast=function(t,i){var n=this.last;if(n&&n[t]&&(!i||It(n.variables,this.variables)))return n[t]},e.prototype.getLastResult=function(t){return this.getLast("result",t)},e.prototype.getLastError=function(t){return this.getLast("error",t)},e.prototype.resetLastResults=function(){delete this.last,this.isTornDown=!1},e.prototype.resetQueryStoreErrors=function(){this.queryManager.resetErrors(this.queryId)},e.prototype.refetch=function(t){var i,n={pollInterval:0},o=this.options.fetchPolicy;if(o==="cache-and-network"?n.fetchPolicy=o:o==="no-cache"?n.fetchPolicy="no-cache":n.fetchPolicy="network-only",__DEV__&&t&&cP.call(t,"variables")){var s=Cc(this.query),a=s.variableDefinitions;(!a||!a.some(function(l){return l.variable.name.value==="variables"}))&&__DEV__&&X.warn("Called refetch(".concat(JSON.stringify(t),") for query ").concat(((i=s.name)===null||i===void 0?void 0:i.value)||JSON.stringify(s),`, which does not declare a $variables variable.
Did you mean to call refetch(variables) instead of refetch({ variables })?`))}return t&&!It(this.options.variables,t)&&(n.variables=this.options.variables=U(U({},this.options.variables),t)),this.queryInfo.resetLastWrite(),this.reobserve(n,Ue.refetch)},e.prototype.fetchMore=function(t){var i=this,n=U(U({},t.query?t:U(U(U(U({},this.options),{query:this.query}),t),{variables:U(U({},this.options.variables),t.variables)})),{fetchPolicy:"no-cache"}),o=this.queryManager.generateQueryId(),s=this.queryInfo,a=s.networkStatus;s.networkStatus=Ue.fetchMore,n.notifyOnNetworkStatusChange&&this.observe();var l=new Set;return this.queryManager.fetchQuery(o,n,Ue.fetchMore).then(function(f){return i.queryManager.removeQuery(o),s.networkStatus===Ue.fetchMore&&(s.networkStatus=a),i.queryManager.cache.batch({update:function(c){var u=t.updateQuery;u?c.updateQuery({query:i.query,variables:i.variables,returnPartialData:!0,optimistic:!1},function(d){return u(d,{fetchMoreResult:f.data,variables:n.variables})}):c.writeQuery({query:n.query,variables:n.variables,data:f.data})},onWatchUpdated:function(c){l.add(c.query)}}),f}).finally(function(){l.has(i.query)||Mb(i)})},e.prototype.subscribeToMore=function(t){var i=this,n=this.queryManager.startGraphQLSubscription({query:t.document,variables:t.variables,context:t.context}).subscribe({next:function(o){var s=t.updateQuery;s&&i.updateQuery(function(a,l){var f=l.variables;return s(a,{subscriptionData:o,variables:f})})},error:function(o){if(t.onError){t.onError(o);return}__DEV__&&X.error("Unhandled GraphQL subscription error",o)}});return this.subscriptions.add(n),function(){i.subscriptions.delete(n)&&n.unsubscribe()}},e.prototype.setOptions=function(t){return this.reobserve(t)},e.prototype.setVariables=function(t){return It(this.variables,t)?this.observers.size?this.result():Promise.resolve():(this.options.variables=t,this.observers.size?this.reobserve({fetchPolicy:this.options.initialFetchPolicy,variables:t},Ue.setVariables):Promise.resolve())},e.prototype.updateQuery=function(t){var i=this.queryManager,n=i.cache.diff({query:this.options.query,variables:this.variables,returnPartialData:!0,optimistic:!1}).result,o=t(n,{variables:this.variables});o&&(i.cache.writeQuery({query:this.options.query,data:o,variables:this.variables}),i.broadcastQueries())},e.prototype.startPolling=function(t){this.options.pollInterval=t,this.updatePolling()},e.prototype.stopPolling=function(){this.options.pollInterval=0,this.updatePolling()},e.prototype.applyNextFetchPolicy=function(t,i){if(i.nextFetchPolicy){var n=i.fetchPolicy,o=n===void 0?"cache-first":n,s=i.initialFetchPolicy,a=s===void 0?o:s;o==="standby"||(typeof i.nextFetchPolicy=="function"?i.fetchPolicy=i.nextFetchPolicy(o,{reason:t,options:i,observable:this,initialFetchPolicy:a}):t==="variables-changed"?i.fetchPolicy=a:i.fetchPolicy=i.nextFetchPolicy)}return i.fetchPolicy},e.prototype.fetch=function(t,i){return this.queryManager.setObservableQuery(this),this.queryManager.fetchQueryObservable(this.queryId,t,i)},e.prototype.updatePolling=function(){var t=this;if(!this.queryManager.ssrMode){var i=this,n=i.pollingInfo,o=i.options.pollInterval;if(!o){n&&(clearTimeout(n.timeout),delete this.pollingInfo);return}if(!(n&&n.interval===o)){__DEV__?X(o,"Attempted to start a polling query without a polling interval."):X(o,12);var s=n||(this.pollingInfo={});s.interval=o;var a=function(){t.pollingInfo&&(Jo(t.queryInfo.networkStatus)?l():t.reobserve({fetchPolicy:t.options.initialFetchPolicy==="no-cache"?"no-cache":"network-only"},Ue.poll).then(l,l))},l=function(){var f=t.pollingInfo;f&&(clearTimeout(f.timeout),f.timeout=setTimeout(a,f.interval))};l()}}},e.prototype.updateLastResult=function(t,i){return i===void 0&&(i=this.variables),this.last=U(U({},this.last),{result:this.queryManager.assumeImmutableResults?t:Il(t),variables:i}),Dr(t.errors)||delete this.last.error,this.last},e.prototype.reobserve=function(t,i){var n=this;this.isTornDown=!1;var o=i===Ue.refetch||i===Ue.fetchMore||i===Ue.poll,s=this.options.variables,a=this.options.fetchPolicy,l=Wo(this.options,t||{}),f=o?l:fP(this.options,l);o||(this.updatePolling(),t&&t.variables&&!It(t.variables,s)&&f.fetchPolicy!=="standby"&&f.fetchPolicy===a&&(this.applyNextFetchPolicy("variables-changed",f),i===void 0&&(i=Ue.setVariables)));var c=f.variables&&U({},f.variables),u=this.fetch(f,i),d={next:function(p){n.reportResult(p,c)},error:function(p){n.reportError(p,c)}};return o||(this.concast&&this.observer&&this.concast.removeObserver(this.observer),this.concast=u,this.observer=d),u.addObserver(d),u.promise},e.prototype.observe=function(){this.reportResult(this.getCurrentResult(!1),this.variables)},e.prototype.reportResult=function(t,i){var n=this.getLastError();(n||this.isDifferentFromLastResult(t,i))&&((n||!t.partial||this.options.returnPartialData)&&this.updateLastResult(t,i),Xs(this.observers,"next",t))},e.prototype.reportError=function(t,i){var n=U(U({},this.getLastResult()),{error:t,errors:t.graphQLErrors,networkStatus:Ue.error,loading:!1});this.updateLastResult(n,i),Xs(this.observers,"error",this.last.error=t)},e.prototype.hasObservers=function(){return this.observers.size>0},e.prototype.tearDownQuery=function(){this.isTornDown||(this.concast&&this.observer&&(this.concast.removeObserver(this.observer),delete this.concast,delete this.observer),this.stopPolling(),this.subscriptions.forEach(function(t){return t.unsubscribe()}),this.subscriptions.clear(),this.queryManager.stopQuery(this.queryId),this.observers.clear(),this.isTornDown=!0)},e}(De);Hd(l0);function Mb(r){var e=r.options,t=e.fetchPolicy,i=e.nextFetchPolicy;return t==="cache-and-network"||t==="network-only"?r.reobserve({fetchPolicy:"cache-first",nextFetchPolicy:function(){return this.nextFetchPolicy=i,typeof i=="function"?i.apply(this,arguments):t}}):r.reobserve()}function uP(r){__DEV__&&X.error("Unhandled error",r.message,r.stack)}function Ob(r){__DEV__&&r&&__DEV__&&X.debug("Missing cache result fields: ".concat(JSON.stringify(r)),r)}var f0=function(){function r(e){var t=e.cache,i=e.client,n=e.resolvers,o=e.fragmentMatcher;this.cache=t,i&&(this.client=i),n&&this.addResolvers(n),o&&this.setFragmentMatcher(o)}return r.prototype.addResolvers=function(e){var t=this;this.resolvers=this.resolvers||{},Array.isArray(e)?e.forEach(function(i){t.resolvers=zx(t.resolvers,i)}):this.resolvers=zx(this.resolvers,e)},r.prototype.setResolvers=function(e){this.resolvers={},this.addResolvers(e)},r.prototype.getResolvers=function(){return this.resolvers||{}},r.prototype.runResolvers=function(e){var t=e.document,i=e.remoteResult,n=e.context,o=e.variables,s=e.onlyRunForcedResolvers,a=s===void 0?!1:s;return Ji(this,void 0,void 0,function(){return Yi(this,function(l){return t?[2,this.resolveDocument(t,i.data,n,o,this.fragmentMatcher,a).then(function(f){return U(U({},i),{data:f.result})})]:[2,i]})})},r.prototype.setFragmentMatcher=function(e){this.fragmentMatcher=e},r.prototype.getFragmentMatcher=function(){return this.fragmentMatcher},r.prototype.clientQuery=function(e){return Tl(["client"],e)&&this.resolvers?e:null},r.prototype.serverQuery=function(e){return jx(e)},r.prototype.prepareContext=function(e){var t=this.cache;return U(U({},e),{cache:t,getCacheKey:function(i){return t.identify(i)}})},r.prototype.addExportedVariables=function(e,t,i){return t===void 0&&(t={}),i===void 0&&(i={}),Ji(this,void 0,void 0,function(){return Yi(this,function(n){return e?[2,this.resolveDocument(e,this.buildRootValueFromCache(e,t)||{},this.prepareContext(i),t).then(function(o){return U(U({},t),o.exportedVariables)})]:[2,U({},t)]})})},r.prototype.shouldForceResolvers=function(e){var t=!1;return yr(e,{Directive:{enter:function(i){if(i.name.value==="client"&&i.arguments&&(t=i.arguments.some(function(n){return n.name.value==="always"&&n.value.kind==="BooleanValue"&&n.value.value===!0}),t))return Hs}}}),t},r.prototype.buildRootValueFromCache=function(e,t){return this.cache.diff({query:qx(e),variables:t,returnPartialData:!0,optimistic:!1}).result},r.prototype.resolveDocument=function(e,t,i,n,o,s){return i===void 0&&(i={}),n===void 0&&(n={}),o===void 0&&(o=function(){return!0}),s===void 0&&(s=!1),Ji(this,void 0,void 0,function(){var a,l,f,c,u,d,p,g,b;return Yi(this,function(k){return a=Qs(e),l=Ks(e),f=Ws(l),c=a.operation,u=c?c.charAt(0).toUpperCase()+c.slice(1):"Query",d=this,p=d.cache,g=d.client,b={fragmentMap:f,context:U(U({},i),{cache:p,client:g}),variables:n,fragmentMatcher:o,defaultOperationType:u,exportedVariables:{},onlyRunForcedResolvers:s},[2,this.resolveSelectionSet(a.selectionSet,t,b).then(function(_){return{result:_,exportedVariables:b.exportedVariables}})]})})},r.prototype.resolveSelectionSet=function(e,t,i){return Ji(this,void 0,void 0,function(){var n,o,s,a,l,f=this;return Yi(this,function(c){return n=i.fragmentMap,o=i.context,s=i.variables,a=[t],l=function(u){return Ji(f,void 0,void 0,function(){var d,p;return Yi(this,function(g){return no(u,s)?qr(u)?[2,this.resolveField(u,t,i).then(function(b){var k;typeof b<"u"&&a.push((k={},k[Ni(u)]=b,k))})]:(_c(u)?d=u:(d=n[u.name.value],__DEV__?X(d,"No fragment named ".concat(u.name.value)):X(d,11)),d&&d.typeCondition&&(p=d.typeCondition.name.value,i.fragmentMatcher(t,p,o))?[2,this.resolveSelectionSet(d.selectionSet,t,i).then(function(b){a.push(b)})]:[2]):[2]})})},[2,Promise.all(e.selections.map(l)).then(function(){return Tc(a)})]})})},r.prototype.resolveField=function(e,t,i){return Ji(this,void 0,void 0,function(){var n,o,s,a,l,f,c,u,d,p=this;return Yi(this,function(g){return n=i.variables,o=e.name.value,s=Ni(e),a=o!==s,l=t[s]||t[o],f=Promise.resolve(l),(!i.onlyRunForcedResolvers||this.shouldForceResolvers(e))&&(c=t.__typename||i.defaultOperationType,u=this.resolvers&&this.resolvers[c],u&&(d=u[a?o:s],d&&(f=Promise.resolve(Vl.withValue(this.cache,d,[t,oo(e,n),i.context,{field:e,fragmentMap:i.fragmentMap}]))))),[2,f.then(function(b){if(b===void 0&&(b=l),e.directives&&e.directives.forEach(function(k){k.name.value==="export"&&k.arguments&&k.arguments.forEach(function(_){_.name.value==="as"&&_.value.kind==="StringValue"&&(i.exportedVariables[_.value.value]=b)})}),!e.selectionSet||b==null)return b;if(Array.isArray(b))return p.resolveSubSelectedArray(e,b,i);if(e.selectionSet)return p.resolveSelectionSet(e.selectionSet,b,i)})]})})},r.prototype.resolveSubSelectedArray=function(e,t,i){var n=this;return Promise.all(t.map(function(o){if(o===null)return null;if(Array.isArray(o))return n.resolveSubSelectedArray(e,o,i);if(e.selectionSet)return n.resolveSelectionSet(e.selectionSet,o,i)}))},r}();var jl=new(Ii?WeakMap:Map);function Nb(r,e){var t=r[e];typeof t=="function"&&(r[e]=function(){return jl.set(r,(jl.get(r)+1)%1e15),t.apply(this,arguments)})}function Sk(r){r.notifyTimeout&&(clearTimeout(r.notifyTimeout),r.notifyTimeout=void 0)}var c0=function(){function r(e,t){t===void 0&&(t=e.generateQueryId()),this.queryId=t,this.listeners=new Set,this.document=null,this.lastRequestId=1,this.subscriptions=new Set,this.stopped=!1,this.dirty=!1,this.observableQuery=null;var i=this.cache=e.cache;jl.has(i)||(jl.set(i,0),Nb(i,"evict"),Nb(i,"modify"),Nb(i,"reset"))}return r.prototype.init=function(e){var t=e.networkStatus||Ue.loading;return this.variables&&this.networkStatus!==Ue.loading&&!It(this.variables,e.variables)&&(t=Ue.setVariables),It(e.variables,this.variables)||(this.lastDiff=void 0),Object.assign(this,{document:e.document,variables:e.variables,networkError:null,graphQLErrors:this.graphQLErrors||[],networkStatus:t}),e.observableQuery&&this.setObservableQuery(e.observableQuery),e.lastRequestId&&(this.lastRequestId=e.lastRequestId),this},r.prototype.reset=function(){Sk(this),this.dirty=!1},r.prototype.getDiff=function(e){e===void 0&&(e=this.variables);var t=this.getDiffOptions(e);if(this.lastDiff&&It(t,this.lastDiff.options))return this.lastDiff.diff;this.updateWatch(this.variables=e);var i=this.observableQuery;if(i&&i.options.fetchPolicy==="no-cache")return{complete:!1};var n=this.cache.diff(t);return this.updateLastDiff(n,t),n},r.prototype.updateLastDiff=function(e,t){this.lastDiff=e?{diff:e,options:t||this.getDiffOptions()}:void 0},r.prototype.getDiffOptions=function(e){var t;return e===void 0&&(e=this.variables),{query:this.document,variables:e,returnPartialData:!0,optimistic:!0,canonizeResults:(t=this.observableQuery)===null||t===void 0?void 0:t.options.canonizeResults}},r.prototype.setDiff=function(e){var t=this,i=this.lastDiff&&this.lastDiff.diff;this.updateLastDiff(e),!this.dirty&&!It(i&&i.result,e&&e.result)&&(this.dirty=!0,this.notifyTimeout||(this.notifyTimeout=setTimeout(function(){return t.notify()},0)))},r.prototype.setObservableQuery=function(e){var t=this;e!==this.observableQuery&&(this.oqListener&&this.listeners.delete(this.oqListener),this.observableQuery=e,e?(e.queryInfo=this,this.listeners.add(this.oqListener=function(){var i=t.getDiff();i.fromOptimisticTransaction?e.observe():Mb(e)})):delete this.oqListener)},r.prototype.notify=function(){var e=this;Sk(this),this.shouldNotify()&&this.listeners.forEach(function(t){return t(e)}),this.dirty=!1},r.prototype.shouldNotify=function(){if(!this.dirty||!this.listeners.size)return!1;if(Jo(this.networkStatus)&&this.observableQuery){var e=this.observableQuery.options.fetchPolicy;if(e!=="cache-only"&&e!=="cache-and-network")return!1}return!0},r.prototype.stop=function(){if(!this.stopped){this.stopped=!0,this.reset(),this.cancel(),this.cancel=r.prototype.cancel,this.subscriptions.forEach(function(t){return t.unsubscribe()});var e=this.observableQuery;e&&e.stopPolling()}},r.prototype.cancel=function(){},r.prototype.updateWatch=function(e){var t=this;e===void 0&&(e=this.variables);var i=this.observableQuery;if(!(i&&i.options.fetchPolicy==="no-cache")){var n=U(U({},this.getDiffOptions(e)),{watcher:this,callback:function(o){return t.setDiff(o)}});(!this.lastWatch||!It(n,this.lastWatch))&&(this.cancel(),this.cancel=this.cache.watch(this.lastWatch=n))}},r.prototype.resetLastWrite=function(){this.lastWrite=void 0},r.prototype.shouldWrite=function(e,t){var i=this.lastWrite;return!(i&&i.dmCount===jl.get(this.cache)&&It(t,i.variables)&&It(e.data,i.result.data))},r.prototype.markResult=function(e,t,i,n){var o=this,s=Dr(e.errors)?e.errors.slice(0):[];if(this.reset(),"incremental"in e&&Dr(e.incremental)){var a=this.getDiff().result,l=new Pi;e.incremental.forEach(function(f){for(var c=f.data,u=f.path,d=f.errors,p=u.length-1;p>=0;--p){var g=u[p],b=!isNaN(+g),k=b?[]:{};k[g]=c,c=k}d&&s.push.apply(s,d),a=l.merge(a,c)}),e.data=a}this.graphQLErrors=s,i.fetchPolicy==="no-cache"?this.updateLastDiff({result:e.data,complete:!0},this.getDiffOptions(i.variables)):n!==0&&(u0(e,i.errorPolicy)?this.cache.performTransaction(function(f){if(o.shouldWrite(e,i.variables))f.writeQuery({query:t,data:e.data,variables:i.variables,overwrite:n===1}),o.lastWrite={result:e,variables:i.variables,dmCount:jl.get(o.cache)};else if(o.lastDiff&&o.lastDiff.diff.complete){e.data=o.lastDiff.diff.result;return}var c=o.getDiffOptions(i.variables),u=f.diff(c);o.stopped||o.updateWatch(i.variables),o.updateLastDiff(u,c),u.complete&&(e.data=u.result)}):this.lastWrite=void 0)},r.prototype.markReady=function(){return this.networkError=null,this.networkStatus=Ue.ready},r.prototype.markError=function(e){return this.networkStatus=Ue.error,this.lastWrite=void 0,this.reset(),e.graphQLErrors&&(this.graphQLErrors=e.graphQLErrors),e.networkError&&(this.networkError=e.networkError),e},r}();function u0(r,e){e===void 0&&(e="none");var t=e==="ignore"||e==="all",i=!Dl(r);return!i&&t&&r.data&&(i=!0),i}var hP=Object.prototype.hasOwnProperty,_k=function(){function r(e){var t=e.cache,i=e.link,n=e.defaultOptions,o=e.queryDeduplication,s=o===void 0?!1:o,a=e.onBroadcast,l=e.ssrMode,f=l===void 0?!1:l,c=e.clientAwareness,u=c===void 0?{}:c,d=e.localState,p=e.assumeImmutableResults;this.clientAwareness={},this.queries=new Map,this.fetchCancelFns=new Map,this.transformCache=new(Ii?WeakMap:Map),this.queryIdCounter=1,this.requestIdCounter=1,this.mutationIdCounter=1,this.inFlightLinkObservables=new Map,this.cache=t,this.link=i,this.defaultOptions=n||Object.create(null),this.queryDeduplication=s,this.clientAwareness=u,this.localState=d||new f0({cache:t}),this.ssrMode=f,this.assumeImmutableResults=!!p,(this.onBroadcast=a)&&(this.mutationStore=Object.create(null))}return r.prototype.stop=function(){var e=this;this.queries.forEach(function(t,i){e.stopQueryNoBroadcast(i)}),this.cancelPendingFetches(__DEV__?new xe("QueryManager stopped while query was in flight"):new xe(13))},r.prototype.cancelPendingFetches=function(e){this.fetchCancelFns.forEach(function(t){return t(e)}),this.fetchCancelFns.clear()},r.prototype.mutate=function(e){var t,i,n=e.mutation,o=e.variables,s=e.optimisticResponse,a=e.updateQueries,l=e.refetchQueries,f=l===void 0?[]:l,c=e.awaitRefetchQueries,u=c===void 0?!1:c,d=e.update,p=e.onQueryUpdated,g=e.fetchPolicy,b=g===void 0?((t=this.defaultOptions.mutate)===null||t===void 0?void 0:t.fetchPolicy)||"network-only":g,k=e.errorPolicy,_=k===void 0?((i=this.defaultOptions.mutate)===null||i===void 0?void 0:i.errorPolicy)||"none":k,P=e.keepRootFields,N=e.context;return Ji(this,void 0,void 0,function(){var I,D,B,V,W,Y;return Yi(this,function($){switch($.label){case 0:return __DEV__?X(n,"mutation option is required. You must specify your GraphQL document in the mutation option."):X(n,14),__DEV__?X(b==="network-only"||b==="no-cache","Mutations support only 'network-only' or 'no-cache' fetchPolicy strings. The default `network-only` behavior automatically writes mutation results to the cache. Passing `no-cache` skips the cache write."):X(b==="network-only"||b==="no-cache",15),I=this.generateMutationId(),D=this.transform(n),B=D.document,V=D.hasClientExports,n=this.cache.transformForLink(B),o=this.getVariables(n,o),V?[4,this.localState.addExportedVariables(n,o,N)]:[3,2];case 1:o=$.sent(),$.label=2;case 2:return W=this.mutationStore&&(this.mutationStore[I]={mutation:n,variables:o,loading:!0,error:null}),s&&this.markMutationOptimistic(s,{mutationId:I,document:n,variables:o,fetchPolicy:b,errorPolicy:_,context:N,updateQueries:a,update:d,keepRootFields:P}),this.broadcastQueries(),Y=this,[2,new Promise(function(Z,ce){return zd(Y.getObservableFromLink(n,U(U({},N),{optimisticResponse:s}),o,!1),function(M){if(Dl(M)&&_==="none")throw new ea({graphQLErrors:M.errors});W&&(W.loading=!1,W.error=null);var h=U({},M);return typeof f=="function"&&(f=f(h)),_==="ignore"&&Dl(h)&&delete h.errors,Y.markMutationResult({mutationId:I,result:h,document:n,variables:o,fetchPolicy:b,errorPolicy:_,context:N,update:d,updateQueries:a,awaitRefetchQueries:u,refetchQueries:f,removeOptimistic:s?I:void 0,onQueryUpdated:p,keepRootFields:P})}).subscribe({next:function(M){Y.broadcastQueries(),Z(M)},error:function(M){W&&(W.loading=!1,W.error=M),s&&Y.cache.removeOptimistic(I),Y.broadcastQueries(),ce(M instanceof ea?M:new ea({networkError:M}))}})})]}})})},r.prototype.markMutationResult=function(e,t){var i=this;t===void 0&&(t=this.cache);var n=e.result,o=[],s=e.fetchPolicy==="no-cache";if(!s&&u0(n,e.errorPolicy)){o.push({result:n.data,dataId:"ROOT_MUTATION",query:e.document,variables:e.variables});var a=e.updateQueries;a&&this.queries.forEach(function(f,c){var u=f.observableQuery,d=u&&u.queryName;if(!(!d||!hP.call(a,d))){var p=a[d],g=i.queries.get(c),b=g.document,k=g.variables,_=t.diff({query:b,variables:k,returnPartialData:!0,optimistic:!1}),P=_.result,N=_.complete;if(N&&P){var I=p(P,{mutationResult:n,queryName:b&&Ol(b)||void 0,queryVariables:k});I&&o.push({result:I,dataId:"ROOT_QUERY",query:b,variables:k})}}})}if(o.length>0||e.refetchQueries||e.update||e.onQueryUpdated||e.removeOptimistic){var l=[];if(this.refetchQueries({updateCache:function(f){s||o.forEach(function(d){return f.write(d)});var c=e.update;if(c){if(!s){var u=f.diff({id:"ROOT_MUTATION",query:i.transform(e.document).asQuery,variables:e.variables,optimistic:!1,returnPartialData:!0});u.complete&&!F4(n)&&(n=U(U({},n),{data:u.result}))}c(f,n,{context:e.context,variables:e.variables})}!s&&!e.keepRootFields&&f.modify({id:"ROOT_MUTATION",fields:function(d,p){var g=p.fieldName,b=p.DELETE;return g==="__typename"?d:b}})},include:e.refetchQueries,optimistic:!1,removeOptimistic:e.removeOptimistic,onQueryUpdated:e.onQueryUpdated||null}).forEach(function(f){return l.push(f)}),e.awaitRefetchQueries||e.onQueryUpdated)return Promise.all(l).then(function(){return n})}return Promise.resolve(n)},r.prototype.markMutationOptimistic=function(e,t){var i=this,n=typeof e=="function"?e(t.variables):e;return this.cache.recordOptimisticTransaction(function(o){try{i.markMutationResult(U(U({},t),{result:{data:n}}),o)}catch(s){__DEV__&&X.error(s)}},t.mutationId)},r.prototype.fetchQuery=function(e,t,i){return this.fetchQueryObservable(e,t,i).promise},r.prototype.getQueryStore=function(){var e=Object.create(null);return this.queries.forEach(function(t,i){e[i]={variables:t.variables,networkStatus:t.networkStatus,networkError:t.networkError,graphQLErrors:t.graphQLErrors}}),e},r.prototype.resetErrors=function(e){var t=this.queries.get(e);t&&(t.networkError=void 0,t.graphQLErrors=[])},r.prototype.transform=function(e){var t=this.transformCache;if(!t.has(e)){var i=this.cache.transformDocument(e),n=Vx(i),o=this.localState.clientQuery(i),s=n&&this.localState.serverQuery(n),a={document:i,hasClientExports:Px(i),hasForcedResolvers:this.localState.shouldForceResolvers(i),clientQuery:o,serverQuery:s,defaultVars:Js(Nn(i)),asQuery:U(U({},i),{definitions:i.definitions.map(function(f){return f.kind==="OperationDefinition"&&f.operation!=="query"?U(U({},f),{operation:"query"}):f})})},l=function(f){f&&!t.has(f)&&t.set(f,a)};l(e),l(i),l(o),l(s)}return t.get(e)},r.prototype.getVariables=function(e,t){return U(U({},this.transform(e).defaultVars),t)},r.prototype.watchQuery=function(e){e=U(U({},e),{variables:this.getVariables(e.query,e.variables)}),typeof e.notifyOnNetworkStatusChange>"u"&&(e.notifyOnNetworkStatusChange=!1);var t=new c0(this),i=new l0({queryManager:this,queryInfo:t,options:e});return this.queries.set(i.queryId,t),t.init({document:i.query,observableQuery:i,variables:i.variables}),i},r.prototype.query=function(e,t){var i=this;return t===void 0&&(t=this.generateQueryId()),__DEV__?X(e.query,"query option is required. You must specify your GraphQL document in the query option."):X(e.query,16),__DEV__?X(e.query.kind==="Document",'You must wrap the query string in a "gql" tag.'):X(e.query.kind==="Document",17),__DEV__?X(!e.returnPartialData,"returnPartialData option only supported on watchQuery."):X(!e.returnPartialData,18),__DEV__?X(!e.pollInterval,"pollInterval option only supported on watchQuery."):X(!e.pollInterval,19),this.fetchQuery(t,e).finally(function(){return i.stopQuery(t)})},r.prototype.generateQueryId=function(){return String(this.queryIdCounter++)},r.prototype.generateRequestId=function(){return this.requestIdCounter++},r.prototype.generateMutationId=function(){return String(this.mutationIdCounter++)},r.prototype.stopQueryInStore=function(e){this.stopQueryInStoreNoBroadcast(e),this.broadcastQueries()},r.prototype.stopQueryInStoreNoBroadcast=function(e){var t=this.queries.get(e);t&&t.stop()},r.prototype.clearStore=function(e){return e===void 0&&(e={discardWatches:!0}),this.cancelPendingFetches(__DEV__?new xe("Store reset while query was in flight (not completed in link chain)"):new xe(20)),this.queries.forEach(function(t){t.observableQuery?t.networkStatus=Ue.loading:t.stop()}),this.mutationStore&&(this.mutationStore=Object.create(null)),this.cache.reset(e)},r.prototype.getObservableQueries=function(e){var t=this;e===void 0&&(e="active");var i=new Map,n=new Map,o=new Set;return Array.isArray(e)&&e.forEach(function(s){typeof s=="string"?n.set(s,!1):Rx(s)?n.set(t.transform(s).document,!1):Le(s)&&s.query&&o.add(s)}),this.queries.forEach(function(s,a){var l=s.observableQuery,f=s.document;if(l){if(e==="all"){i.set(a,l);return}var c=l.queryName,u=l.options.fetchPolicy;if(u==="standby"||e==="active"&&!l.hasObservers())return;(e==="active"||c&&n.has(c)||f&&n.has(f))&&(i.set(a,l),c&&n.set(c,!0),f&&n.set(f,!0))}}),o.size&&o.forEach(function(s){var a=Nc("legacyOneTimeQuery"),l=t.getQuery(a).init({document:s.query,variables:s.variables}),f=new l0({queryManager:t,queryInfo:l,options:U(U({},s),{fetchPolicy:"network-only"})});X(f.queryId===a),l.setObservableQuery(f),i.set(a,f)}),__DEV__&&n.size&&n.forEach(function(s,a){s||__DEV__&&X.warn("Unknown query ".concat(typeof a=="string"?"named ":"").concat(JSON.stringify(a,null,2)," requested in refetchQueries options.include array"))}),i},r.prototype.reFetchObservableQueries=function(e){var t=this;e===void 0&&(e=!1);var i=[];return this.getObservableQueries(e?"all":"active").forEach(function(n,o){var s=n.options.fetchPolicy;n.resetLastResults(),(e||s!=="standby"&&s!=="cache-only")&&i.push(n.refetch()),t.getQuery(o).setDiff(null)}),this.broadcastQueries(),Promise.all(i)},r.prototype.setObservableQuery=function(e){this.getQuery(e.queryId).setObservableQuery(e)},r.prototype.startGraphQLSubscription=function(e){var t=this,i=e.query,n=e.fetchPolicy,o=e.errorPolicy,s=e.variables,a=e.context,l=a===void 0?{}:a;i=this.transform(i).document,s=this.getVariables(i,s);var f=function(u){return t.getObservableFromLink(i,l,u).map(function(d){if(n!=="no-cache"&&(u0(d,o)&&t.cache.write({query:i,result:d.data,dataId:"ROOT_SUBSCRIPTION",variables:u}),t.broadcastQueries()),Dl(d))throw new ea({graphQLErrors:d.errors});return d})};if(this.transform(i).hasClientExports){var c=this.localState.addExportedVariables(i,s,l).then(f);return new De(function(u){var d=null;return c.then(function(p){return d=p.subscribe(u)},u.error),function(){return d&&d.unsubscribe()}})}return f(s)},r.prototype.stopQuery=function(e){this.stopQueryNoBroadcast(e),this.broadcastQueries()},r.prototype.stopQueryNoBroadcast=function(e){this.stopQueryInStoreNoBroadcast(e),this.removeQuery(e)},r.prototype.removeQuery=function(e){this.fetchCancelFns.delete(e),this.queries.has(e)&&(this.getQuery(e).stop(),this.queries.delete(e))},r.prototype.broadcastQueries=function(){this.onBroadcast&&this.onBroadcast(),this.queries.forEach(function(e){return e.notify()})},r.prototype.getLocalState=function(){return this.localState},r.prototype.getObservableFromLink=function(e,t,i,n){var o=this,s;n===void 0&&(n=(s=t?.queryDeduplication)!==null&&s!==void 0?s:this.queryDeduplication);var a,l=this.transform(e).serverQuery;if(l){var f=this,c=f.inFlightLinkObservables,u=f.link,d={query:l,variables:i,operationName:Ol(l)||void 0,context:this.prepareContext(U(U({},t),{forceFetch:!n}))};if(t=d.context,n){var p=c.get(l)||new Map;c.set(l,p);var g=ui(i);if(a=p.get(g),!a){var b=new Rl([Bl(u,d)]);p.set(g,a=b),b.beforeNext(function(){p.delete(g)&&p.size<1&&c.delete(l)})}}else a=new Rl([Bl(u,d)])}else a=new Rl([De.of({data:{}})]),t=this.prepareContext(t);var k=this.transform(e).clientQuery;return k&&(a=zd(a,function(_){return o.localState.runResolvers({document:k,remoteResult:_,context:t,variables:i})})),a},r.prototype.getResultsFromLink=function(e,t,i){var n=e.lastRequestId=this.generateRequestId();i=Il(i);var o=this.cache.transformForLink(this.transform(e.document).document);return zd(this.getObservableFromLink(o,i.context,i.variables),function(s){var a=Dr(s.errors)?s.errors.slice(0):[];"incremental"in s&&Dr(s.incremental)&&s.incremental.forEach(function(c){c.errors&&a.push.apply(a,c.errors)});var l=Dr(a);if(n>=e.lastRequestId){if(l&&i.errorPolicy==="none")throw e.markError(new ea({graphQLErrors:a}));e.markResult(s,o,i,t),e.markReady()}var f={data:s.data,loading:!1,networkStatus:Ue.ready};return l&&i.errorPolicy!=="ignore"&&(f.errors=a,f.networkStatus=Ue.error),f},function(s){var a=kk(s)?s:new ea({networkError:s});throw n>=e.lastRequestId&&e.markError(a),a})},r.prototype.fetchQueryObservable=function(e,t,i){var n=this;i===void 0&&(i=Ue.loading);var o=this.transform(t.query).document,s=this.getVariables(o,t.variables),a=this.getQuery(e),l=this.defaultOptions.watchQuery,f=t.fetchPolicy,c=f===void 0?l&&l.fetchPolicy||"cache-first":f,u=t.errorPolicy,d=u===void 0?l&&l.errorPolicy||"none":u,p=t.returnPartialData,g=p===void 0?!1:p,b=t.notifyOnNetworkStatusChange,k=b===void 0?!1:b,_=t.context,P=_===void 0?{}:_,N=Object.assign({},t,{query:o,variables:s,fetchPolicy:c,errorPolicy:d,returnPartialData:g,notifyOnNetworkStatusChange:k,context:P}),I=function(V){N.variables=V;var W=n.fetchQueryByPolicy(a,N,i);return N.fetchPolicy!=="standby"&&W.length>0&&a.observableQuery&&a.observableQuery.applyNextFetchPolicy("after-fetch",t),W},D=function(){return n.fetchCancelFns.delete(e)};this.fetchCancelFns.set(e,function(V){D(),setTimeout(function(){return B.cancel(V)})});var B=new Rl(this.transform(N.query).hasClientExports?this.localState.addExportedVariables(N.query,N.variables,N.context).then(I):I(N.variables));return B.promise.then(D,D),B},r.prototype.refetchQueries=function(e){var t=this,i=e.updateCache,n=e.include,o=e.optimistic,s=o===void 0?!1:o,a=e.removeOptimistic,l=a===void 0?s?Nc("refetchQueries"):void 0:a,f=e.onQueryUpdated,c=new Map;n&&this.getObservableQueries(n).forEach(function(d,p){c.set(p,{oq:d,lastDiff:t.getQuery(p).getDiff()})});var u=new Map;return i&&this.cache.batch({update:i,optimistic:s&&l||!1,removeOptimistic:l,onWatchUpdated:function(d,p,g){var b=d.watcher instanceof c0&&d.watcher.observableQuery;if(b){if(f){c.delete(b.queryId);var k=f(b,p,g);return k===!0&&(k=b.refetch()),k!==!1&&u.set(b,k),k}f!==null&&c.set(b.queryId,{oq:b,lastDiff:g,diff:p})}}}),c.size&&c.forEach(function(d,p){var g=d.oq,b=d.lastDiff,k=d.diff,_;if(f){if(!k){var P=g.queryInfo;P.reset(),k=P.getDiff()}_=f(g,k,b)}(!f||_===!0)&&(_=g.refetch()),_!==!1&&u.set(g,_),p.indexOf("legacyOneTimeQuery")>=0&&t.stopQueryNoBroadcast(p)}),l&&this.cache.removeOptimistic(l),u},r.prototype.fetchQueryByPolicy=function(e,t,i){var n=this,o=t.query,s=t.variables,a=t.fetchPolicy,l=t.refetchWritePolicy,f=t.errorPolicy,c=t.returnPartialData,u=t.context,d=t.notifyOnNetworkStatusChange,p=e.networkStatus;e.init({document:this.transform(o).document,variables:s,networkStatus:i});var g=function(){return e.getDiff(s)},b=function(I,D){D===void 0&&(D=e.networkStatus||Ue.loading);var B=I.result;__DEV__&&!c&&!It(B,{})&&Ob(I.missing);var V=function(W){return De.of(U({data:W,loading:Jo(D),networkStatus:D},I.complete?null:{partial:!0}))};return B&&n.transform(o).hasForcedResolvers?n.localState.runResolvers({document:o,remoteResult:{data:B},context:u,variables:s,onlyRunForcedResolvers:!0}).then(function(W){return V(W.data||void 0)}):V(B)},k=a==="no-cache"?0:i===Ue.refetch&&l!=="merge"?1:2,_=function(){return n.getResultsFromLink(e,k,{variables:s,context:u,fetchPolicy:a,errorPolicy:f})},P=d&&typeof p=="number"&&p!==i&&Jo(i);switch(a){default:case"cache-first":{var N=g();return N.complete?[b(N,e.markReady())]:c||P?[b(N),_()]:[_()]}case"cache-and-network":{var N=g();return N.complete||c||P?[b(N),_()]:[_()]}case"cache-only":return[b(g(),e.markReady())];case"network-only":return P?[b(g()),_()]:[_()];case"no-cache":return P?[b(e.getDiff()),_()]:[_()];case"standby":return[]}},r.prototype.getQuery=function(e){return e&&!this.queries.has(e)&&this.queries.set(e,new c0(this,e)),this.queries.get(e)},r.prototype.prepareContext=function(e){e===void 0&&(e={});var t=this.localState.prepareContext(e);return U(U({},t),{clientAwareness:this.clientAwareness})},r}();var Ck=!1;var Pb=function(){function r(e){var t=this;this.resetStoreCallbacks=[],this.clearStoreCallbacks=[];var i=e.uri,n=e.credentials,o=e.headers,s=e.cache,a=e.ssrMode,l=a===void 0?!1:a,f=e.ssrForceFetchDelay,c=f===void 0?0:f,u=e.connectToDevTools,d=u===void 0?typeof window=="object"&&!window.__APOLLO_CLIENT__&&__DEV__:u,p=e.queryDeduplication,g=p===void 0?!0:p,b=e.defaultOptions,k=e.assumeImmutableResults,_=k===void 0?!1:k,P=e.resolvers,N=e.typeDefs,I=e.fragmentMatcher,D=e.name,B=e.version,V=e.link;if(V||(V=i?new sb({uri:i,credentials:n,headers:o}):Pn.empty()),!s)throw __DEV__?new xe(`To initialize Apollo Client, you must specify a 'cache' property in the options object. 
For more information, please visit: https://go.apollo.dev/c/docs`):new xe(9);if(this.link=V,this.cache=s,this.disableNetworkFetches=l||c>0,this.queryDeduplication=g,this.defaultOptions=b||Object.create(null),this.typeDefs=N,c&&setTimeout(function(){return t.disableNetworkFetches=!1},c),this.watchQuery=this.watchQuery.bind(this),this.query=this.query.bind(this),this.mutate=this.mutate.bind(this),this.resetStore=this.resetStore.bind(this),this.reFetchObservableQueries=this.reFetchObservableQueries.bind(this),d&&typeof window=="object"&&(window.__APOLLO_CLIENT__=this),!Ck&&__DEV__&&(Ck=!0,typeof window<"u"&&window.document&&window.top===window.self&&!window.__APOLLO_DEVTOOLS_GLOBAL_HOOK__)){var W=window.navigator,Y=W&&W.userAgent,$=void 0;typeof Y=="string"&&(Y.indexOf("Chrome/")>-1?$="https://chrome.google.com/webstore/detail/apollo-client-developer-t/jdkknkkbebbapilgoeccciglkfbmbnfm":Y.indexOf("Firefox/")>-1&&($="https://addons.mozilla.org/en-US/firefox/addon/apollo-developer-tools/")),$&&__DEV__&&X.log("Download the Apollo DevTools for a better development experience: "+$)}this.version=u4,this.localState=new f0({cache:s,client:this,resolvers:P,fragmentMatcher:I}),this.queryManager=new _k({cache:this.cache,link:this.link,defaultOptions:this.defaultOptions,queryDeduplication:g,ssrMode:l,clientAwareness:{name:D,version:B},localState:this.localState,assumeImmutableResults:_,onBroadcast:d?function(){t.devToolsHookCb&&t.devToolsHookCb({action:{},state:{queries:t.queryManager.getQueryStore(),mutations:t.queryManager.mutationStore||{}},dataWithOptimisticResults:t.cache.extract(!0)})}:void 0})}return r.prototype.stop=function(){this.queryManager.stop()},r.prototype.watchQuery=function(e){return this.defaultOptions.watchQuery&&(e=Pc(this.defaultOptions.watchQuery,e)),this.disableNetworkFetches&&(e.fetchPolicy==="network-only"||e.fetchPolicy==="cache-and-network")&&(e=U(U({},e),{fetchPolicy:"cache-first"})),this.queryManager.watchQuery(e)},r.prototype.query=function(e){return this.defaultOptions.query&&(e=Pc(this.defaultOptions.query,e)),__DEV__?X(e.fetchPolicy!=="cache-and-network","The cache-and-network fetchPolicy does not work with client.query, because client.query can only return a single result. Please use client.watchQuery to receive multiple results from the cache and the network, or consider using a different fetchPolicy, such as cache-first or network-only."):X(e.fetchPolicy!=="cache-and-network",10),this.disableNetworkFetches&&e.fetchPolicy==="network-only"&&(e=U(U({},e),{fetchPolicy:"cache-first"})),this.queryManager.query(e)},r.prototype.mutate=function(e){return this.defaultOptions.mutate&&(e=Pc(this.defaultOptions.mutate,e)),this.queryManager.mutate(e)},r.prototype.subscribe=function(e){return this.queryManager.startGraphQLSubscription(e)},r.prototype.readQuery=function(e,t){return t===void 0&&(t=!1),this.cache.readQuery(e,t)},r.prototype.readFragment=function(e,t){return t===void 0&&(t=!1),this.cache.readFragment(e,t)},r.prototype.writeQuery=function(e){this.cache.writeQuery(e),this.queryManager.broadcastQueries()},r.prototype.writeFragment=function(e){this.cache.writeFragment(e),this.queryManager.broadcastQueries()},r.prototype.__actionHookForDevTools=function(e){this.devToolsHookCb=e},r.prototype.__requestRaw=function(e){return Bl(this.link,e)},r.prototype.resetStore=function(){var e=this;return Promise.resolve().then(function(){return e.queryManager.clearStore({discardWatches:!1})}).then(function(){return Promise.all(e.resetStoreCallbacks.map(function(t){return t()}))}).then(function(){return e.reFetchObservableQueries()})},r.prototype.clearStore=function(){var e=this;return Promise.resolve().then(function(){return e.queryManager.clearStore({discardWatches:!0})}).then(function(){return Promise.all(e.clearStoreCallbacks.map(function(t){return t()}))})},r.prototype.onResetStore=function(e){var t=this;return this.resetStoreCallbacks.push(e),function(){t.resetStoreCallbacks=t.resetStoreCallbacks.filter(function(i){return i!==e})}},r.prototype.onClearStore=function(e){var t=this;return this.clearStoreCallbacks.push(e),function(){t.clearStoreCallbacks=t.clearStoreCallbacks.filter(function(i){return i!==e})}},r.prototype.reFetchObservableQueries=function(e){return this.queryManager.reFetchObservableQueries(e)},r.prototype.refetchQueries=function(e){var t=this.queryManager.refetchQueries(e),i=[],n=[];t.forEach(function(s,a){i.push(a),n.push(s)});var o=Promise.all(n);return o.queries=i,o.results=n,o.catch(function(s){__DEV__&&X.debug("In client.refetchQueries, Promise.all promise rejected with error ".concat(s))}),o},r.prototype.getObservableQueries=function(e){return e===void 0&&(e="active"),this.queryManager.getObservableQueries(e)},r.prototype.extract=function(e){return this.cache.extract(e)},r.prototype.restore=function(e){return this.cache.restore(e)},r.prototype.addResolvers=function(e){this.localState.addResolvers(e)},r.prototype.setResolvers=function(e){this.localState.setResolvers(e)},r.prototype.getResolvers=function(){return this.localState.getResolvers()},r.prototype.setLocalStateFragmentMatcher=function(e){this.localState.setFragmentMatcher(e)},r.prototype.setLink=function(e){this.link=this.queryManager.link=e},r}();var h0=new Map,Ib=new Map,Tk=!0,d0=!1;function Mk(r){return r.replace(/[\s,]+/g," ").trim()}function dP(r){return Mk(r.source.body.substring(r.start,r.end))}function pP(r){var e=new Set,t=[];return r.definitions.forEach(function(i){if(i.kind==="FragmentDefinition"){var n=i.name.value,o=dP(i.loc),s=Ib.get(n);s&&!s.has(o)?Tk&&console.warn("Warning: fragment with name "+n+` already exists.
graphql-tag enforces all fragment names across your application to be unique; read more about
this in the docs: http://dev.apollodata.com/core/fragments.html#unique-names`):s||Ib.set(n,s=new Set),s.add(o),e.has(o)||(e.add(o),t.push(i))}else t.push(i)}),U(U({},r),{definitions:t})}function mP(r){var e=new Set(r.definitions);e.forEach(function(i){i.loc&&delete i.loc,Object.keys(i).forEach(function(n){var o=i[n];o&&typeof o=="object"&&e.add(o)})});var t=r.loc;return t&&(delete t.startToken,delete t.endToken),r}function gP(r){var e=Mk(r);if(!h0.has(e)){var t=Ld(r,{experimentalFragmentVariables:d0,allowLegacyFragmentVariables:d0});if(!t||t.kind!=="Document")throw new Error("Not a valid GraphQL document.");h0.set(e,mP(pP(t)))}return h0.get(e)}function Yo(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];typeof r=="string"&&(r=[r]);var i=r[0];return e.forEach(function(n,o){n&&n.kind==="Document"?i+=n.loc.source.body:i+=n,i+=r[o+1]}),gP(i)}function Ok(){h0.clear(),Ib.clear()}function Nk(){Tk=!1}function Pk(){d0=!0}function Ik(){d0=!1}var Vc={gql:Yo,resetCaches:Ok,disableFragmentWarnings:Nk,enableExperimentalFragmentVariables:Pk,disableExperimentalFragmentVariables:Ik};(function(r){r.gql=Vc.gql,r.resetCaches=Vc.resetCaches,r.disableFragmentWarnings=Vc.disableFragmentWarnings,r.enableExperimentalFragmentVariables=Vc.enableExperimentalFragmentVariables,r.disableExperimentalFragmentVariables=Vc.disableExperimentalFragmentVariables})(Yo||(Yo={}));Yo.default=Yo;SE(js?"log":"silent");var xP="https://api-mumbai.lens.dev/",Rk=new Pb({uri:xP,cache:new a0}),Dk=Yo`
query Profiles($ownedBy: EthereumAddress!) {
  profiles(request: { ownedBy: [$ownedBy] }) {
    items {
      id
      name
      bio
      attributes {
        displayType
        traitType
        key
        value
      }
      followNftAddress
      metadata
      isDefault
      picture {
        ... on NftImage {
          contractAddress
          tokenId
          uri
          verified
        }
        ... on MediaSet {
          original {
            url
            mimeType
          }
        }
        __typename
      }
      handle
      coverPicture {
        ... on NftImage {
          contractAddress
          tokenId
          uri
          verified
        }
        ... on MediaSet {
          original {
            url
            mimeType
          }
        }
        __typename
      }
      ownedBy
      dispatcher {
        address
        canUseRelay
      }
      stats {
        totalFollowers
        totalFollowing
        totalPosts
        totalComments
        totalMirrors
        totalPublications
        totalCollects
      }
      followModule {
        ... on FeeFollowModuleSettings {
          type
          amount {
            asset {
              symbol
              name
              decimals
              address
            }
            value
          }
          recipient
        }
        ... on ProfileFollowModuleSettings {
         type
        }
        ... on RevertFollowModuleSettings {
         type
        }
      }
    }
    pageInfo {
      prev
      next
      totalCount
    }
  }
}
`;var bP=document.getElementById("deploy"),yP=document.getElementById("errors"),vP=document.getElementById("success"),wP=document.getElementById("name"),AP=new le({doc:["// true is defect","// false is cooperate","function play(","    address opponent,","    bool[] calldata opponent_previous_plays,","    bool[] calldata bot_previous_plays",") external override virtual returns (bool) {","  ","}"].join(`
`),extensions:[i2,c2],parent:document.getElementById("editor")});(async()=>{let r=new qs.providers.Web3Provider(window.ethereum),t=(await r.send("eth_requestAccounts",[]))[0],i=new qs.Contract("0x3F359353554fe20a199BB803F87454075dEc8Cca",Q6,r),n=document.getElementById("challenge"),o=document.getElementById("profile"),s=await i.getChallengesCount(),a=[];for(let f=0;f<s;++f){let c=document.createElement("option");c.value=await i.challenges(f),c.innerText=c.value,n.appendChild(c)}let l=await Rk.query({query:Dk,variables:{ownedBy:t}});for(let f of l.data.profiles.items){let c=document.createElement("option");c.value=f.id,c.innerText=`${c.value} - ${f.name}`,f.isDefault&&c.setAttribute("selected","selected"),o.appendChild(c)}bP.addEventListener("click",async f=>{let c=await(0,Bk.solidityCompiler)({version:"https://binaries.soliditylang.org/bin/soljson-latest.js",contractBody:`// SPDX-License-Identifier: UNLICENSED

            pragma solidity ^0.8.17;

contract LensBot {
    address[] public challenges;

    function register() public {
        challenges.push(msg.sender);
    }

    function getChallengesCount() view public returns (uint256) {
        return challenges.length;
    }
}


abstract contract Challenge {
    uint256 private ownerprofile;
    string private name;

    constructor(address lensbot_addr, uint256 owner_profile, string memory name_local) {
        LensBot(lensbot_addr).register();
        ownerprofile = owner_profile;
        name = name_local;
    }

    function getOwnerprofile() view external returns (uint256) {
        return ownerprofile;
    }

    function getName() view external returns (string memory) {
        return name;
    }

    function getBotCount() view virtual external returns (uint256);
    function getLeaderboardAt(uint256) view virtual external returns (address);
    function getPoints(address) view virtual external returns (int256);
    function register() virtual external;
}

abstract contract Bot {
    uint256 private ownerprofile;
    string private name;

    constructor(uint256 owner_profile, string memory name_local) {
        ownerprofile = owner_profile;
        name = name_local;
    }

    function register_on(address challenge_address) external {
        Challenge c = Challenge(challenge_address);
        c.register();
    }

    // keep casing like that
    function getOwnerprofile() view external returns (uint256) {
        return ownerprofile;
    }

    function getName() view external returns (string memory) {
        return name;
    }

    // true is defect
    // false is cooperate
    function play(
        address opponent,
        bool[] calldata opponent_previous_plays,
        bool[] calldata bot_previous_plays
    ) external virtual returns (bool);
}


contract Toggle is Bot {
    constructor(uint256 owner_profile, string memory name) Bot (owner_profile, name) {}

${AP.state.doc}

}`,options:{optimizer:{enabled:!0,runs:200}}});if(yP.innerText=c.errors?.map(u=>u.formattedMessage).join("")??"",c.contracts){let u=c.contracts.Compiled_Contracts.Toggle,d=u.abi,p=u.evm.bytecode.object,b=await new qs.ContractFactory(d,p,r.getSigner()).deploy(o.value,wP.value);await b.register_on(challenge.value),vP.innerText=`contract address: ${b.address}`}})})();})();
/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.8.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */
